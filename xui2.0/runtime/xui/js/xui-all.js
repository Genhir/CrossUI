/*
* CrossUI(xui) JavaScript Library v2.0
* http://crossui.com
* 
* Copyright ( 2004 ~ present) CrossUI.com
* Released under the MIT license
*
*/
undefined;var xui=function(d,c){return xui.Dom.pack(d,c)},Class=xui.Class=function(I,r,m){var e,D=[],p=Class,l=window,C=p._fun,g=p._reg,h,x,B,o,F,d=p._all,G=function(f){return(f+"").replace(/(\s*\/\*[^*]*\*+([^\/][^*]*\*+)*\/)|(\s*\/\/[^\n]*)|(\)[\s\S]*)/g,function(j){return j.charAt(0)!=")"?"":j})};m=m||{};if(!p._ignoreNSCache&&(o=xui.get(l,I.split(".")))&&typeof(o)=="function"&&o.$xuiclass$){return p._last=o}if(o=xui.get(l,["xui","$cache","SC"])){delete o[I]}r=(!r?[]:typeof r=="string"?[r]:r);for(B=0;o=r[B];B++){if(!(D[B]=(xui.get(l,o.split("."))||(xui&&xui.SC&&xui.SC(o))))){throw"errNoParent--"+o}}if(m.Dependencies){if(typeof m.Dependencies=="string"){m.Dependencies=[m.Dependencies]}for(B=0;o=m.Dependencies[B];B++){if(!(xui.get(l,o.split("."))||(xui&&xui.SC&&xui.SC(o)))){throw"errNoDependency--"+o}}}h=D[0];var c=m.$Start||(h&&h.$Start);xui.tryF(c,[],m);e=m.Static||{};o={};for(B in e){if(g[B]){o[B]=1}}for(B in o){delete e[B]}e.Before=m.Before||(h&&h.Before);e.After=m.After||(h&&h.After);e.$Start=c;e.$End=m.$End||(h&&h.$End);e.__gc=m.__gc||e.__gc||(h&&h.__gc)||function(){Class.__gc(this.$key)};var n=function(){if(typeof this.initialize=="function"){this.initialize()}};if(typeof m.Constructor=="function"){x=C(m.Constructor,"Constructor",I,h||n,"constructor");x.Constructor=G(m.Constructor)}else{if(h){var E=n,q=h.Constructor;if(q){E=new Function(q.slice(q.indexOf("(")+1,q.indexOf(")")).split(","),q.slice(q.indexOf("{")+1,q.lastIndexOf("}")))}x=C(E,"Constructor",I,h.upper,"constructor");x.Constructor=G(q)}else{x=n}}F=xui.fun();for(B=D.length-1;o=D[B--];){xui.merge(F,o);xui.merge(F.prototype,o.prototype)}x.KEY=x.$key=x.prototype.KEY=x.prototype.$key=I;p._wrap(x,e,0,F,"static");if(o=m.Instance){p._wrap(x.prototype,o,1,F.prototype,"instance")}p._inherit(x,F);p._inherit(x.prototype,F.prototype);F=null;if(xui.tryF(x.Before,arguments,x)===false){return false}for(B=0;o=D[B];B++){o=(o.$children||(o.$children=[]));for(var A=0,u=o.length,H;A<u;A++){if(o[u]==I){H=true;break}}if(!H){o[o.length]=I}}x.$xui$=x.$xuiclass$=1;x.$children=[];x.$parent=D;x.prototype.constructor=x;x.prototype.$xui$=1;x[I]=x.prototype[I]=true;F=o=xui.get(l,I.split("."));xui.set(l,I.split("."),x);if(Object.prototype.toString.call(F)=="[object Object]"){for(B in F){x[B]=F[B]}}xui.tryF(x.After,[],x);xui.tryF(m.Initialize,[],x);xui.tryF(x.$End,[],x);xui.breakO([m.Static,m.Instance,m],2);if(!(I in d)){d[I]=d.length;d.push(I)}return p._last=x};xui.Namespace=function(e){var d=e.split("."),c=window;return xui.get(c,d)||xui.set(c,d,{})};xui.merge=function(j,h,d,g){var c,e;if(typeof d=="function"){e=d;d="fun"}switch(d){case"fun":for(c in h){if((g||h.hasOwnProperty(c))&&true===e(h[c],c)){j[c]=h[c]}}break;case"all":for(c in h){if((g||h.hasOwnProperty(c))){j[c]=h[c]}}break;case"with":for(c in h){if((g||h.hasOwnProperty(c))&&j.hasOwnProperty(c)){j[c]=h[c]}}break;default:for(c in h){if((g||h.hasOwnProperty(c))&&!j.hasOwnProperty(c)){j[c]=h[c]}}}return j};new function(){var g=0,h=["ms","moz","webkit","o"],e=window,f=0,d=h.length,c;for(;f<d&&!e.requestAnimationFrame&&(c=h[f++]);){e.requestAnimationFrame=e[c+"RequestAnimationFrame"];e.cancelAnimationFrame=e[c+"CancelAnimationFrame"]||e[c+"CancelRequestAnimationFrame"]}if(!e.requestAnimationFrame){e.requestAnimationFrame=function(o,l){var j=(new Date()).getTime(),m=Math.max(0,1000/60-(j-g)),n=setTimeout(function(){o(j+m)},m);g=j+m;return n}}if(!e.cancelAnimationFrame){e.cancelAnimationFrame=function(j){clearTimeout(j)}}};new function(){var c=Object.prototype.toString;xui.merge(xui,{stamp:function(){return +new Date()},rand:function(){return parseInt(xui.stamp()*Math.random(),10).toString(36)},setTimeout:function(e,d){return(d===false||(d||0)>1000/60)?(setTimeout(e,d||0)*-1):requestAnimationFrame(e)},clearTimeout:function(d){if(d>=0){cancelAnimationFrame(d)}else{clearTimeout(Math.abs(d))}},fun:function(){return function(){}},exec:function(e,o){var j=this,l=document,g=l.getElementsByTagName("head")[0]||l.documentElement,f=l.createElement("script"),m;f.type="text/javascript";if(o){if((m=l.getElementById(o))&&m.parentNode==g){g.removeChild(m)}f.id=o}if(xui.browser.ie){f.text=e}else{f.appendChild(l.createTextNode(e))}g.appendChild(f);f.disalbed=true;f.disabled=false;if(!o){g.removeChild(f)}return f},get:function(h,g){if(!g){return h}if(!xui.isSet(h)){return undefined}else{if(typeof g=="string"){return h[g]}else{for(var f=0,d=g.length,e;f<d;){if(!(e=g[f++]+"")){continue}if(!h||(h=e!=(e=e.replace("()",""))?(typeof(h[e])=="function"&&0!==e.indexOf("set"))?h[e]():undefined:h[e])===undefined){return}}return h}}},set:function(l,j,h){if(!l){return}if(typeof j!="string"){var e,f=0,d,g=j.length-1;for(;f<g;){e=j[f++];if(l[e]&&((d=typeof l[e])=="object"||d=="function")){l=l[e]}else{l=l[e]={}}}j=j[g]}if(j!=(j=(j+"").replace("()",""))){if(typeof(l[j])=="function"){l[j](h);return h}}else{if(h===undefined){if(l.hasOwnProperty&&l.hasOwnProperty(j)){delete l[j]}else{l[j]=undefined}}else{return l[j]=h}}},tryF:function(d,e,f,g){return(d&&typeof d=="function")?d.apply(f||{},e||[]):g},asyRun:function(d,g,e,f){return xui.setTimeout(typeof d=="string"?function(){xui.exec(d)}:function(){d.apply(f,e||[]);d=e=null},g)},asyHTML:function(f,j,g,e){var h=document.createElement("div"),d=document.createDocumentFragment();h.innerHTML=f;(function(){var l=e||10;while(--l&&h.firstChild){d.appendChild(h.firstChild)}if(h.firstChild){xui.setTimeout(arguments.callee,g)}else{j(d)}})()},isEmpty:function(e){if(e==null){return true}if(xui.isNumb(e)){return false}if(xui.isArr(e)||xui.isStr(e)||xui.isArguments(e)){return e.length===0}for(var d in e){if(Object.prototype.hasOwnProperty.call(e,d)){return false}}return true},resetRun:function(h,d,m,g,j){var l=arguments.callee,f=h,e=l.$cache||((l.exists=function(n){return this.$cache[n]})&&(l.$cache={}));if(e[f]){xui.clearTimeout(e[f])}if(typeof d=="function"){e[f]=xui.setTimeout(function(){delete e[f];d.apply(j||null,g||[])},m)}else{delete e[f]}},observableRun:function(g,e,f,d){xui.Thread.observableRun(g,e,f,d)},breakO:function(m,o){var p=o||1,d=1+(arguments[2]||0),f=arguments.callee,h="___gc_",g;if(m&&(typeof m=="object"||typeof m=="function")&&m!==window&&m!==document&&m.nodeType!==1){try{if(m.hasOwnProperty(h)){return}else{m[h]=null}}catch(j){return}try{for(g in m){if(m.hasOwnProperty(g)&&m[g]){if(typeof m[g]=="object"||typeof m[g]=="function"){if(d<p){f(m[g],p,d)}}try{m[g]=null}catch(j){}}}}catch(j){return}if(m.length){m.length=0}delete m[h]}},each:function(g,d,f){f=f||g;for(var e in g){if(false===d.call(f,g[e],e,g)){break}}return g},compareVar:function(d,g,e,f){if(d===g){return true}if(xui.isObj(d)||xui.isObj(g)){if((xui.isDate(d)&&xui.isDate(g))||(xui.isReg(d)&&xui.isReg(g))){return d+""===g+""}else{if((xui.isHash(d)&&xui.isHash(g))||(xui.isArr(d)&&xui.isArr(g))||(xui.isArguments(d)&&xui.isArguments(g))){d=xui.serialize(d,0,0,e||5,f||300);g=xui.serialize(g,0,0,e||5,f||300);return d.indexOf(xui.$_outofmilimted)==-1&&g.indexOf(xui.$_outofmilimted)==-1&&d===g}else{return false}}}},compareNumber:function(e,d,f){return xui.toFixedNumber(e,f)===xui.toFixedNumber(d,f)},toFixedNumber:function(j,l){if(!xui.isSet(l)){l=2}var d=Math.abs(j),h=""+Math.round(d*Math.pow(10,l)),f,g,n,e;if(/\D/.test(h)){f=""+d}else{while(h.length<1+l){h="0"+h}n=h.substring(0,g=(h.length-l));e=h.substring(g);if(e){e="."+e}f=n+e}return parseFloat((j<0?"-":"")+f)},toNumeric:function(g,d,f,e){if(!xui.isNumb(g)){g=parseFloat((g+"").replace(/\s*(e\+|[^0-9])/g,function(j,h,l){return h=="e+"||h=="E+"||(l==0&&h=="-")?h:h==e?".":""}))||0}if(xui.isSet(d)&&d>=0){g=xui.toFixedNumber(g,d)}return g},formatNumeric:function(h,d,g,e,f,j){if(xui.isSet(d)){d=parseInt(d,10)}d=(d||d===0)?d:0;g=xui.isSet(g)?g:",";e=e||".";h=""+parseFloat(h);if(h.indexOf("e")==-1){h=xui.toFixedNumber(h,d)+"";h=h.split(".");if(f!==false){if((h[1]?h[1].length:0)<d){h[1]=(h[1]||"")+xui.str.repeat("0",d-(h[1]?h[1].length:0))}}h[0]=h[0].split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1"+g).split("").reverse().join("");h=h.join(e)}return j&&h.indexOf(e)!=-1?h.replace(new RegExp("["+e+"]?0+$"),""):h},copy:function(e,d){return xui.clone(e,d,1)},clone:function(g,d,q){var n=arguments[3]||0;if(g&&(xui.isHash(g)||xui.isArr(g))){if(xui.isObj(g)){var o=arguments.callee,f=xui.isArr(g),m=f?[]:{},j=0,p,e;if(!q){if(q<=0){return g}else{q=100}}if(f){e=g.length;for(;j<e;j++){if(typeof d=="function"&&false===d.call(g,g[j],j,n+1)){continue}m[m.length]=((p=g[j])&&q&&(xui.isHash(p)||xui.isArr(p)))?o(p,d,q-1,n+1):p}}else{for(j in g){if(d===true?j.charAt(0)=="_":d===false?(j.charAt(0)=="_"||j.charAt(0)=="$"):typeof d=="function"?false===d.call(g,g[j],j,n+1):0){continue}m[j]=((p=g[j])&&q&&(xui.isHash(p)||xui.isArr(p)))?o(p,d,q-1,n+1):p}}return m}else{return g}}else{return g}},filter:function(h,e,d){if(!d&&h&&xui.isArr(h)){var j,g,n,m=[],f;for(j=0,g=h.length;j<g;j++){m[m.length]=h[j]}h.length=0;for(j=0,g=m.length;j<g;j++){if(typeof e=="function"?false!==e.call(m,m[j],j):1){h[h.length]=m[j]}}}else{var j,p={};for(j in h){if(e===true?j.charAt(0)=="_":e===false?(j.charAt(0)=="_"||j.charAt(0)=="$"):typeof e=="function"?false===e.call(h,h[j],j):0){p[j]=1}}for(j in p){delete h[j]}}return h},toArr:function(h,f){if(!h){return[]}var d=[];if(typeof f=="boolean"){for(var g in h){d[d.length]=f?g:h[g]}}else{if(xui.isHash(h)){for(var g in h){d.push({key:g,value:h[g]})}}else{if(typeof h=="string"){d=h.split(f||",")}else{for(var g=0,e=h.length;g<e;++g){d[g]=h[g]}}}}return d},toUTF8:function(d){return d.replace(/[^\x00-\xff]/g,function(f,e){return"\\u"+((e=f.charCodeAt())<16?"000":e<256?"00":e<4096?"0":"")+e.toString(16)})},fromUTF8:function(d){return d.replace(/\\u([0-9a-f]{3})([0-9a-f])/g,function(f,e,g){return String.fromCharCode((parseInt(e,16)*16+parseInt(g,16)))})},urlEncode:function(f){var d=[],e,g;for(e in f){if(xui.isDefined(g=f[e])){d.push(encodeURIComponent(e)+"="+encodeURIComponent(typeof g=="string"?g:xui.serialize(g)))}}return d.join("&")},urlDecode:function(n,q){if(!n){return q?"":{}}var j,g={},p=n.split("&"),d;for(var h=0,f=p.length;h<f;h++){d=p[h];j=d.split("=");try{g[decodeURIComponent(j[0])]=decodeURIComponent(j[1])}catch(m){g[j[0]]=j[1]}}return q?g[q]:g},preLoadImage:function(h,g,j){if(xui.isArr(h)){for(var f=0,d=arr.length;f<d;f++){xui.preLoadImage(h[f],g,j)}return d}var e=document.createElement("img");e.style.cssText="position:absolute;left:-999px;top:-999px";e.width=e.height=2;e.onload=function(){if(typeof g=="function"){g.call(this)}this.onload=this.onerror=null;document.body.removeChild(this)};e.onerror=function(){if(typeof j=="function"){j.call(this)}this.onload=this.onerror=null;document.body.removeChild(this)};document.body.appendChild(e);e.src=h;return 1},isDefined:function(d){return d!==undefined},isNull:function(d){return d===null},isSet:function(d){return d!==undefined&&d!==null&&d!==NaN},isObj:function(d){return !!d&&(typeof d=="object"||typeof d=="function")},isHash:function(d){return !!d&&c.call(d)=="[object Object]"&&d.constructor&&/^\s*function\s+Object\(\s*\)/.test(d.constructor.toString())&&!Object.prototype.hasOwnProperty.call(d,"callee")},isBool:function(d){return typeof d=="boolean"},isNumb:function(d){return typeof d=="number"&&isFinite(d)},isFinite:function(d){return(d||d===0)&&isFinite(d)&&!isNaN(parseFloat(d))},isDate:function(d){return c.call(d)==="[object Date]"&&isFinite(+d)},isFun:function(d){return c.call(d)==="[object Function]"},isArr:function(d){return c.call(d)==="[object Array]"},isReg:function(d){return c.call(d)==="[object RegExp]"},isStr:function(d){return c.call(d)==="[object String]"},isArguments:function(d){return d&&(c.call(d)==="[object Arguments]"||Object.prototype.hasOwnProperty.call(d,"callee"))},isElem:function(d){return !!(d&&d.nodeType===1)},isNaN:function(d){return typeof d=="number"&&d!=+d},str:{startWith:function(e,d){return e.indexOf(d)===0},endWith:function(e,f){var d=e.length-f.length;return d>=0&&e.lastIndexOf(f)===d},repeat:function(e,d){return new Array(d+1).join(e)},initial:function(d){return d.charAt(0).toUpperCase()+d.substring(1)},trim:function(d){return d?d.replace(/^(\s|\uFEFF|\xA0)+|(\s|\uFEFF|\xA0)+$/g,""):d},ltrim:function(d){return d?d.replace(/^(\s|\uFEFF|\xA0)+/,""):d},rtrim:function(d){return d?d.replace(/(\s|\uFEFF|\xA0)+$/,""):d},toDom:function(j){var h=xui.$getGhostDiv(),g=[];h.innerHTML=j;for(var f=0,e=h.childNodes,d=e.length;f<d;f++){g[g.length]=e[f]}h=null;return xui(g)}},arr:{fastSortObject:function(l,h){if(!l||l.length<2){return l}var r=l.length,n=[],m=(r+"").length,d=Object.prototype,e,w,q,u;for(var g=0;g<m;g++){n[g]=new Array(m-g).join("0")}for(var f=0;f<r;f++){w=f+"";q=l[f];if(typeof q=="object"){q._xui_$s$=(xui.isSet(u=h.call(q,f))?u:"")+n[w.length-1]+w}}try{e=d.toString;d.toString=function(){return this.hasOwnProperty("_xui_$s$")?(this._xui_$s$):(e.call(this))};l.sort()}finally{d.toString=e;for(var f=0;f<r;f++){if(typeof l[f]=="object"){delete l[f]._xui_$s$}}}return l},stableSort:function(e,j){if(e&&e.length>1){for(var h=0,g=e.length,f=[],d=[];h<g;h++){d[h]=e[f[h]=h]}if(xui.isFun(j)){f.sort(function(l,m){return j.call(e,e[l],e[m])||(l>m?1:-1)})}else{f.sort(function(l,m){return e[l]>e[m]?1:e[l]<e[m]?-1:l>m?1:-1})}for(h=0;h<g;h++){e[h]=d[f[h]]}f.length=d.length=0}return e},subIndexOf:function(d,g,h){if(h===undefined){return -1}for(var f=0,e=d.length;f<e;f++){if(d[f]&&d[f][g]===h){return f}}return -1},removeFrom:function(d,e,f){d.splice(e,f||1);return d},removeValue:function(d,g){for(var e=d.length,f=e-1;f>=0;f--){if(d[f]===g){d.splice(f,1)}}return d},insertAny:function(d,j,h,g){var f=d.length;g=(!xui.isArr(j))||g;if(h===0){if(g){d.unshift(j)}else{d.unshift.apply(d,j)}}else{var e;if(!h||h<0||h>f){h=f}if(h!=f){e=d.splice(h,f-h)}if(g){d[d.length]=j}else{d.push.apply(d,j)}if(e){d.push.apply(d,e)}}return h},indexOf:function(d,g){for(var f=0,e=d.length;f<e;f++){if(d[f]===g){return f}}return -1},each:function(d,g,j,m){var h,f,e=d;if(!e){return e}if(!xui.isArr(e)){if(!xui.isArr(e._nodes)){return e}e=e._nodes;if(m===undefined){m=1}}f=e.length;j=j||d;if(!m){for(h=0;h<f;h++){if(g.call(j,e[h],h,e)===false){break}}}else{for(h=f-1;h>=0;h--){if(g.call(j,e[h],h,e)===false){break}}}return d},removeDuplicate:function(d,h){var f=d.length,e=d.concat();d.length=0;for(var g=f-1;g>=0;g--){if(h?this.subIndexOf(e,h,e[g][h])===g:this.indexOf(e,e[g])===g){d.push(e[g])}}return d.reverse()}}})};xui.merge(xui.fun,{body:function(c){var d=""+c;d=d.replace(/(\s*\/\*[^*]*\*+([^\/][^*]*\*+)*\/)|(\s*\/\/[^\n]*)|(\)[\s\S]*)/g,function(e){return e.charAt(0)!=")"?"":e});return d.slice(d.indexOf("{")+1,d.lastIndexOf("}"))},args:function(c){var d=""+c;d=d.replace(/(\s*\/\*[^*]*\*+([^\/][^*]*\*+)*\/)|(\s*\/\/[^\n]*)|(\)[\s\S]*)/g,function(e){return e.charAt(0)!=")"?"":e});d=d.slice(d.indexOf("(")+1,d.indexOf(")")).split(/\s*,\s*/);return d[0]&&d},clone:function(c){return new Function(xui.fun.args(c),xui.fun.body(c))}});xui.merge(Class,{_reg:{$key:1,$parent:1,$children:1,KEY:1,Static:1,Instance:1,Constructor:1,Initialize:1},_reg2:{nodeType:1,constructor:1,prototype:1,toString:1,valueOf:1,hasOwnProperty:1,isPrototypeOf:1,propertyIsEnumerable:1,toLocaleString:1},_all:[],_fun:function(c,d,e,g,f){c.$name$=d;c.$original$=e;if(f){c.$type$=f}if(g&&c!==g){c.upper=g}return c},_other:["toString","valueOf"],_o:{},_inherit:function(f,h,c){var d,g,e=this._reg;for(d in h){if(d in f||(!c&&e[d])||d.charAt(0)=="$"){continue}g=h[d];if(g&&g.$xui$){continue}f[d]=g}},_wrap:function(u,d,x,w,h){var A=this,n,m,g,l=u.KEY,c=A._reg,e=A._reg2,q=A._fun,p=A._other;for(n in d){if(e[n]||(!x&&c[n])){continue}g=d[n];u[n]=(typeof g!="function")?g:q(g,n,l,typeof w[n]=="function"&&w[n],h)}for(m=0;n=p[m++];){g=d[n];if(g&&(g==A._o[n])){continue}u[n]=(typeof g!="function")?g:q(g,n,l,typeof w[n]=="function"&&w[n],h)}},__gc:function(g){var c=Class._all;if(!g){for(var f=c.length-1;f>0;f--){Class.__gc(c[f])}return}if(typeof g=="object"){g=g.KEY||""}var e=xui.get(window,g.split(".")),h,f,d;if(e){if(h=xui.get(window,["xui","$cache","SC"])){delete h[g]}if(e.$parent){e.$parent.length=0}if(h=e.$children){for(var f=0,l;l=h[f];f++){if(l=xui.get(window,l.split("."))){l.__gc()}}h.length=0}for(f in e){if(f!="upper"&&typeof e[f]=="function"){for(d in e[f]){if(e[f].hasOwnProperty(d)){delete e[f][d]}}}}xui.breakO(e);e=e.prototype;for(f in e){if(f!="upper"&&typeof e[f]=="function"){for(d in e[f]){if(e[f].hasOwnProperty(d)){delete e[f][d]}}}}xui.breakO(e);xui.set(window,g.split("."))}c.splice(c[g],1);delete c[g]},destroy:function(c){Class.__gc(c)}});xui.merge(xui,{version:2,$DEFAULTHREF:"javascript:;",$IEUNSELECTABLE:function(){return xui.browser.ie?' onselectstart="return false;" ':""},SERIALIZEMAXLAYER:99,SERIALIZEMAXSIZE:9999,$localeKey:"en",$localeDomId:"xlid",$dateFormat:"",$rand:"_r_",SpaceUnit:"em",$us:function(c){return(c=c?c.properties?c.properties.spaceUnit:c.spaceUnit:"")=="em"?2:c=="px"?-2:xui.SpaceUnit=="em"?1:-1},debugMode:true,Locale:{},$cache:{thread:{},SC:{},clsByURI:{},fetching:{},hookKey:{},hookKeyUp:{},snipScript:{},subscribes:{},ghostDiv:[],data:{},callback:{},domPurgeData:{},profileMap:{},reclaimId:{},template:{},UIKeyMapEvents:{},droppable:{},unique:{}},subscribe:function(d,f,h,g){if(d===null||d===undefined||f===null||f===undefined||typeof h!="function"){return}var j=xui.$cache.subscribes,e;j[d]=j[d]||[];e=xui.arr.subIndexOf(j[d],"id",f);if(e!=-1){xui.arr.removeFrom(j[d],e)}return j[d].push({id:f,receiver:h,asy:!!g})},unsubscribe:function(d,f){var g=xui.$cache.subscribes,e;if(!f){if(d===null||d===undefined){g={}}else{delete g[d]}}else{if(g[d]){e=xui.arr.subIndexOf(g[d],"id",f);if(e!=-1){xui.arr.removeFrom(g[d],e)}}}},publish:function(e,d,g,f){var h=xui.$cache.subscribes;if(e===null||e===undefined){for(var e in h){xui.arr.each(h[e],function(c){if(!g||g===c.id||(xui.isArr(g)&&xui.arr.indexOf(g,c.id)!=-1)){if(c.asy){xui.asyRun(c.receiver,0,d,f)}else{return xui.tryF(c.receiver,d,f,true)}}})}}else{if(h[e]){xui.arr.each(h[e],function(c){if(!g||g===c.id||(xui.isArr(g)&&xui.arr.indexOf(g,c.id)!=-1)){if(c.asy){xui.asyRun(c.receiver,0,d,f)}else{return xui.tryF(c.receiver,d,f,true)}}})}}},getSubscribers:function(c){return(c===null||c===undefined)?xui.$cache.subscribes:xui.$cache.subscribes[c]},setDateFormat:function(c){xui.$dateFormat=c},getDateFormat:function(){return xui.$dateFormat},setAppLangKey:function(c){xui.$appLangKey=c},getAppLangKey:function(c){return xui.$appLangKey},getLang:function(){return xui.$localeKey},setLang:function(r,w){var n=xui.getRes,x,u,h,e,o,c,p,q=[],d;xui.$localeKey=r;u=xui.browser.ie?document.all.tags("span"):document.getElementsByTagName("span");for(h=0;x=u[h];h++){if(x.id==xui.$localeDomId){q[q.length]=x}}d=q.length;o=function(){(function(){e=q.splice(0,100);for(h=0;x=e[h];h++){if(x.className&&typeof(u=n(x.className))=="string"){x.innerHTML=u}}if(q.length){xui.setTimeout(arguments.callee,0)}xui.tryF(w,[q.length,d])}())},p="xui.Locale."+r,c=function(){var f=xui.$appLangKey;if(f){xui.include(p+"."+f,xui.getPath("Locale."+r,".js"),o,o)}else{o()}};xui.include(p+".inline.$_$",xui.getPath(p,".js"),c,c)},getTheme:function(c){try{c=xui.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(d){}finally{return c||"default"}},setTheme:function(n,l,d,c,r){n=n||"default";var o=xui.getTheme();if(n!=o){var q=function(u){if(o!="default"){var e;while(e=xui.CSS.$getCSSValue(".setting-uikey","fontFamily",o)){e.disabled=true;e.parentNode.removeChild(e);e=null}}if(l!==false){xui.CSS.adjustFont();if(xui.UI){xui.UI.getAll().reLayout(true)}}xui.tryF(u)};if(n=="default"){q(d)}else{try{var j=xui.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(h){}finally{if(j==n){xui.tryF(d);return}else{var f="theme:"+n,p=xui.getPath("xui.appearance."+n,"");if(r){xui.getFileAsync(p+"theme.css",function(e){e=xui.Coder.replace(e,[[/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)/,"$0"],[/\{[^}]*\}/,"$0"],[/([^\/{},]+)/,function(u){return xui.str.endWith(u[0],".setting-uikey")?u[0]:u[0].replace(/([^\s>]+)/,"$1"+r)}]]);e=e.replace(/url\(([^)]+)\)/g,"url("+p+"$1)");xui.CSS._appendSS(xui("head"),e,f,false)})}else{xui.CSS.includeLink(p+"theme.css",f)}}var g=0,m=function(){if(g++>20){m=g=null;if(false!==xui.tryF(c)){throw"errLoadTheme:"+n}return}try{var w=xui.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(u){}finally{if(w==n){q(d);m=g=null}else{xui.asyRun(m,100*g)}}};m()}}}else{xui.tryF(d)}},reLayout:function(){if(xui.UI){xui.UI.getAll().reLayout(true)}},_langParamReg:/\x24(\d+)/g,_langscMark:/[$@{][\S]+/,_langReg:/((\$)([^\w\(]))|((\$)([\w][\w\.-]*[\w]+))|((\$)\(([\w][\w\.]*[^)\n\r]+))\)|((\$)([^\s]))|((\@)([\w][\w\.]*[\w]+)(\@?))|((\@)([^\s])(\@?))|((\{)([~!@#$%^&*+-\/?.|:][\w\[\]]*|[\w\[\]]+(\(\))?(\.[\w\[\]]+(\(\))?)*)(\}))/g,_escapeMap:{"$":"\x01",".":"\x02","-":"\x03",")":"\x04","@":"\x05"},_unescapeMap:{"\x01":"$","\x02":".","\x03":"-","\x04":")","\x05":"@"},getRes:function(g){var c,d,e,h=arguments,f;if(xui.isStr(g)){g=g.replace(/\$([$.-])/g,function(l,j){return xui._escapeMap[j]||l});if(g.charAt(0)=="$"){g=g.slice(1)}if(g.indexOf("-")!=-1){e=g.split("-");g=e[0];h=e}else{if(xui.isArr(h[1])){h=h[1];h.unshift(g)}}c=g.split(".");c[c.length-1]=c[c.length-1].replace(/([\x01\x02\x03\x04])/g,function(j){return xui._unescapeMap[j]})}else{if(xui.isArr(g)){c=g}else{return g}}d=xui.get(xui.Locale[xui.$localeKey],c);if((e=typeof d)=="function"){return d.apply(null,h)}else{if(e=="object"){return d}else{d=e=="string"?d.replace(/\$([$.-])/g,function(l,j){return xui._escapeMap[j]||l}):c[c.length-1];f=h.length>1?d.replace(xui._langParamReg,function(l,m,j){j=h[1+ +m];return(j===null||j===undefined)?l:j}):d;return f.replace(/([\x01\x02\x03])/g,function(j){return xui._unescapeMap[j]})}}},wrapRes:function(f){if(!xui.isStr(f)){return f}var c=f,d,e;if(c.charAt(0)=="$"){arguments[0]=c.substr(1,c.length-1)}d=f;e=xui.getRes.apply(null,arguments);if(d==e){e=c}return'<span id="'+xui.$localeDomId+'" class="'+d.replace(/([\x01\x02\x03\x04])/g,function(g){return"$"+xui._unescapeMap[g]})+'" '+xui.$IEUNSELECTABLE()+">"+e+"</span>"},adjustRes:function(h,f,d,c,g,e){if(!xui.isStr(h)){return h}f=f?xui.wrapRes:xui.getRes;h=h.replace(/\$([\$\.\-\)])/g,function(l,j){return xui._escapeMap[j]||l});h=xui._langscMark.test(h)?h.replace(xui._langReg,function(Z,Y,X,W,V,U,T,S,R,Q,P,O,N,M,L,K,J,I,H,G,F,E,D,C,B,A){return X=="$"?c?Z:W:U=="$"?c?Z:f(T,g):R=="$"?c?Z:f(Q,g):O=="$"?c?Z:f(N,g):((d?0:(L=="@"||H=="@"))||D=="{")?((A=xui.SC.get(L=="@"?K:H=="@"?G:C,e))||(xui.isSet(A)?A:"")):Z}):h;return h.replace(/([\x01\x02\x03\x04])/g,function(j){return xui._unescapeMap[j]})},adjustVar:function(e,d){var c;return typeof(e)=="string"?e=="{[]}"?[]:e=="{{}}"?{}:e=="{}"?"":e=="{true}"?true:e=="{false}"?false:e=="{NaN}"?NaN:e=="{null}"?null:e=="{undefined}"?undefined:e=="{now}"?new Date():(c=/^\s*\{((-?\d\d*\.\d*)|(-?\d\d*)|(-?\.\d\d*))\}\s*$/.exec(e))?parseFloat(c[1]):(c=/^\s*\{([\S]+)\}\s*$/.exec(e))?xui.SC.get(c[1],d):xui.adjustRes(e,false,true,true,null,d):e},_getrpc:function(e,f,c){var d=(c&&c.proxyType)?c.proxyType.toLowerCase():"";return(d=="sajax"||d=="jsonp")?xui.JSONP:(d=="iajax"||d=="xdmi")?xui.XDMI:(d=="ajax")?xui.Ajax:(typeof f=="object"&&((function(h){if(!xui.isHash(h)){return 0}for(var g in h){if((h[g]&&h[g].nodeType==1&&h[g].nodeName=="INPUT")||(h[g]&&h[g].$xuiFileCtrl)){return 1}}})(f)))?xui.XDMI:(c&&c.method&&c.method.toLowerCase()=="post")?xui.absIO.isCrossDomain(e)?xui.XDMI:xui.Ajax:xui.absIO.isCrossDomain(e)?xui.JSONP:xui.Ajax},request:function(d,e,g,h,f,c){return xui._getrpc(d,e,c).apply(null,arguments).start()},ajax:function(d,e,g,h,f,c){return xui.Ajax.apply(null,arguments).start()},jsonp:function(d,e,g,h,f,c){return xui.JSONP.apply(null,arguments).start()},xdmi:function(d,e,g,h,f,c){return xui.XDMI.apply(null,arguments).start()},restGet:function(d,e,g,h,f,c){if(!c){c={}}c.method="get";return xui.Ajax(d,e,g,h,f,c).start()},restPost:function(d,e,g,h,f,c){if(!c){c={}}c.method="post";return xui.Ajax(d,e,g,h,f,c).start()},restPut:function(d,e,g,h,f,c){if(!c){c={}}c.method="put";return xui.Ajax(d,e,g,h,f,c).start()},restDelete:function(d,e,g,h,f,c){if(!c){c={}}c.method="delete";return xui.Ajax(d,e,g,h,f,c).start()},getFileSync:function(d,e,f,c){return xui.Ajax(d,xui.$rand+"="+xui.rand(),e,f,null,xui.merge({asy:false,rspType:c&&c.rspType||"text"},c,"without")).start()||null},getFileAsync:function(d,f,g,e,c){xui.Ajax(d,xui.$rand+"="+xui.rand(),f,g,e,xui.merge({asy:true,rspType:c&&c.rspType||"text"},c,"without")).start()},include:function(h,e,f,g,d,c){if(h&&xui.SC.get(h)){xui.tryF(f)}else{c=typeof c=="object"?c:{};if(!d){c.rspType="script";c.checkKey=h;xui.JSONP(e,xui.$rand+"="+xui.rand(),f,g,0,c).start()}else{c.asy=!d;xui.Ajax(e,xui.$rand+"="+xui.rand(),function(j){try{xui.exec(j,h)}catch(l){xui.tryF(g,[l.name+": "+l.message])}xui.tryF(f)},g,0,c).start()}}},mailTo:function(f,g,c,h,e){var d="mailto:"+f+"?subject="+encodeURIComponent(xui.adjustRes(g||""))+"&body= "+encodeURIComponent(xui.adjustRes(c||""))+"&cc= "+(h||"")+"&bcc= "+(e||"");xui.XDMI(d).start()},fetchClass:function(g,n,d,j,e,h,r){if(/\//.test(g)&&!/\.js$/i.test(g)){g=g+".js"}r=r||{};var m=/\.js$/i.test(g),o=xui.$cache.clsByURI,l=xui.$cache.fetching,q,p;if(!m){if(!r.hasOwnProperty("appPath")&&window["/"]){r.appPath=window["/"]}q=g;g=xui.getPath(g,".js","js",r)}if(!e&&(m?((p=o[g])&&p.$xui$):(p=xui.SC.get(q)))){xui.tryF(n,[g,q],p)}else{if(!l[g]){l[g]=[n=n?[n]:[],d=d?[d]:[],j=j?[j]:[],[]];if(xui.absIO.isCrossDomain(g)){Class._ignoreNSCache=1;Class._last=null;xui.JSONP(g,xui.$rand+"="+xui.rand(),function(){if(Class._last){p=o[g]=Class._last}Class._ignoreNSCache=Class._last=null;if(p){for(var c in n){xui.tryF(n[c],[g,p.KEY],p)}}else{for(var c in d){xui.tryF(d[c],xui.toArr(arguments))}}var f=xui.getClassName(g);if(p&&p.KEY!=f){var u="The last class name in '"+g+"' should be '"+f+"', but it's '"+p.KEY+"'!";for(var c in j){xui.tryF(j[c],[u,g,f,p.KEY])}xui.asyRun(function(){throw u})}for(var c in l[g][3]){xui.Thread(l[g][3][c]).abort()}if(l[g]){l[g][0].length=0;l[g][1].length=0;l[g][2].length=0;l[g][3].length=0;l[g].length=0;delete l[g]}},function(){Class._ignoreNSCache=1;Class._last=null;for(var c in d){xui.tryF(d[c],xui.toArr(arguments))}for(var c in l[g][3]){xui.Thread(l[g][3][c]).abort()}if(l[g]){l[g][0].length=0;l[g][1].length=0;l[g][2].length=0;l[g][3].length=0;l[g].length=0;delete l[g]}},h,{rspType:"script"}).start()}else{xui.Ajax(g,xui.$rand+"="+xui.rand(),function(c){Class._ignoreNSCache=1;Class._last=null;var f;var w=xui.getClassName(g);try{f=xui.exec(c,w)}catch(x){for(var u in d){xui.tryF(d[u],[x.name+": "+x.message])}Class._last=null}if(Class._last){p=o[g]=Class._last}Class._last=null;if(p){for(var u in n){xui.tryF(n[u],[g,p.KEY],p)}}else{for(var u in d){xui.tryF(d[u],xui.toArr(arguments))}}if(p&&p.KEY!=w){var A="The last class name in '"+g+"' should be '"+w+"', but it's '"+p.KEY+"'!";for(var u in j){xui.tryF(j[u],[A,g,w,p.KEY])}xui.asyRun(function(){throw A})}for(var u in l[g][3]){xui.Thread(l[g][3][u]).abort()}if(l[g]){l[g][0].length=0;l[g][1].length=0;l[g][2].length=0;l[g][3].length=0;l[g].length=0;delete l[g]}},function(){Class._ignoreNSCache=Class._last=null;for(var c in d){xui.tryF(d[c],xui.toArr(arguments))}for(var c in l[g][3]){xui.Thread(l[g][3][c]).abort()}if(l[g]){l[g][0].length=0;l[g][1].length=0;l[g][2].length=0;l[g][3].length=0;l[g].length=0;delete l[g]}},h,{rspType:"text",asy:true}).start()}}else{if(n){l[g][0].push(n)}if(d){l[g][1].push(d)}if(j){l[g][2].push(j)}if(h){l[g][3].push(h);xui.Thread(h).suspend()}}}},fetchClasses:function(q,c,p,d,n,e,h,r){var m={},o=function(l,f,u){u[f]=xui.Thread(null,[function(w){xui.fetchClass(l,p,d,n,e,w,r)}])};for(var j=0,g=q.length;j<g;j++){o(q[j],j,m)}return xui.Thread.group(null,m,null,function(){xui.Thread(h).suspend()},function(){xui.tryF(c,arguments,this);xui.Thread(h).resume()}).start()},require:function(h,c,j,d,g,e,f,m){if(xui.isStr(h)){h=[h]}var l=function(o,n){xui.fetchClasses(o,function(){var u=[],B,C;for(var A=0,w=o.length;A<w;A++){B=xui.SC.get(o[A]);if(B&&(C=B.Required)&&C.length){for(var x=0,q=C.length;x<q;x++){if(!xui.SC.get(C[x])){u.push(C[x])}}}if(B&&B["xui.Module"]&&(B=B.prototype&&B.prototype.iniComponents)){xui.fun.body(B).replace(/\bxui.create\s*\(\s*['"]([\w.]+)['"]\s*[,)]/g,function(D,r){if(!(D=xui.SC.get(r))){u.push(r);D=null}})}}if(u.length){l(u,null)}else{var p=[];for(var A=0,w=h.length;A<w;A++){p.push(xui.SC.get(h[A]))}if(c){c.apply(null,p)}}},j,d,g,e,n,m)};l(h,f)},_m:[],main:function(c){if(xui.arr.indexOf(xui._m,c)==-1){xui._m.push(c)}if(xui.isDomReady){xui._domReadyFuns()}},getPath:function(h,n,c,m){h=h.split(".");if(c){var g=[h[0],c];for(var f=1,e=h.length;f<e;f++){g.push(h[f])}h.length=0;h=g}var d,j=xui.ini;if(h[0]=="xui"){d=(m&&m.xuiPath)||j.path;h.shift();if(h.length==(c?1:0)){h.push("xui")}}else{d=(m&&m.appPath)||j.appPath;if(h.length==((c?1:0)+1)&&n==".js"){h.push("index")}if((m&&m.verPath)||j.verPath){d+=((m&&m.verPath)||j.verPath)+"/"}if(j.ver){d+=j.ver+"/"}}if(d.slice(-1)!="/"){d+="/"}return d+h.join("/")+(n||"/")},getClassName:function(f){if(f&&xui.isStr(f)){var e=f.split(/\/js\//g),d,h,g=e.length;if(g>=2){d=e[g-2].split(/\//g);d=d[d.length-1];e=e[g-1].replace(/\.js$/i,"");return(d+(e?".":"")+e.replace(/\//g,".")).replace(/^([^.]+)\.index$/,"$1")}}},log:xui.fun(),echo:xui.fun(),message:xui.fun(),_pool:[],getObject:function(c){return xui._pool["$"+c]},getObjectByAlias:function(d){var e;for(var c in xui._pool){e=xui._pool[c];if(("alias" in e)&&e.alias===d){return typeof(e.boxing)=="function"?e.boxing():e}}},_ghostDivId:"xui.ghost::",$getGhostDiv:function(){var e=xui.$cache.ghostDiv,d=0,c=e.length,f;do{f=e[d++]}while(d<c&&(f&&f.firstChild));if(!f||f.firstChild){f=document.createElement("div");f.id=xui._ghostDivId;e.push(f)}return f},$xid:0,$registerNode:function(e){var f,d,c=xui.$cache.domPurgeData;if(!(e.$xid&&(d=c[e.$xid])&&d.element==e)){f="!"+xui.$xid++;d=c[f]||(c[f]={});d.element=e;e.$xid=d.$xid=f}e=null;return d},getId:function(c){if(typeof c=="string"){c=document.getElementById(c)}return c?window===c?"!window":document===c?"!document":(c.$xid||""):""},getNode:function(c){return xui.use(c).get(0)},getNodeData:function(c,d){if(!c){return}return xui.get(xui.$cache.domPurgeData[typeof c=="string"?c:xui.getId(c)],d)},setData:function(d,c){return xui.set(xui.$cache.data,d,c)},getData:function(c){return xui.get(xui.$cache.data,c)},setNodeData:function(c,e,d){if(!c){return}return xui.set(xui.$cache.domPurgeData[typeof c=="string"?c:xui.getId(c)],e,d)},$purgeChildren:function(h){var d=xui.$cache,q=d.profileMap,c=d.UIKeyMapEvents,r=d.domPurgeData,C=xui.Event.$eventhandler,g=(xui.browser.ie&&h.all)?h.all:h.getElementsByTagName("*"),m=g.length,A=[],p,n,f,B,x,u,e;for(p=0;p<m;p++){if(!(x=g[p])){continue}if(B=x.$xid){if(f=r[B]){if(u=f.eHandlers){if(xui.browser.isTouch&&u.onxuitouchdown){if(x.removeEventListener){x.removeEventListener("xuitouchdown",C,false)}else{if(x.detachEvent){x.detachEvent("xuitouchdown",C)}}}for(n in u){x[n]=null}}for(n in f){f[n]=null}delete r[B]}if(xui.browser.ie){x.removeAttribute("$xid")}else{delete x.$xid}}if(e=x.id){if(e in q){f=q[e];if(!f){continue}B=f.renderId;if("!window"===B||"!document"===B){continue}f.__gc();A[A.length]=e;if(f.$domId&&f.$domId!=f.domId){A[A.length]=f.$domId}}}}for(p=0;p<A.length;){delete q[A[p++]]}h.innerHTML=""},create:function(n,j){var g,c,m,h=arguments.callee,d=h.r1||(h.r1=/</);if(typeof n=="string"){if(m=xui.absBox.$type[n]){g=[];for(var f=1,e=arguments.length;f<e;f++){g[f-1]=arguments[f]}c=new (xui.SC(m))(false);if(c._ini){c._ini.apply(c,g)}}else{if(((m=xui.SC.get(n))&&m["xui.Module"])||j=="xui.Module"){if(m){c=new m()}else{c=new xui.UI.MoudluePlaceHolder();xui.require(n,function(o){if(o&&o["xui.Module"]){if(c.get(0).renderId){var l=new o();l.create(function(){c.replaceWithModule(l)})}else{c.get(0)._module=new o()}}})}}else{if(d.test(n)){c=xui.str.toDom(n)}else{c=document.createElement(n);c.id=typeof id=="string"?id:xui.id();c=xui(c)}}}}else{if(n["xui.Module"]){if((m=xui.SC.get(n.key))&&m["xui.Module"]){c=new m(n)}else{c=new xui.UI.MoudluePlaceHolder();if(n.host||n.alias){c.setHost(n.host,n.alias)}if(m=n.events){c.setEvents(m)}if(m=n.properties){c.setProperties(m)}if(n.moduleClass&&n.moduleXid){c.get(0).moduleClass=n.moduleClass;c.get(0).moduleXid=n.moduleXid}xui.require(n.key,function(o){if(o&&o["xui.Module"]){var l=new o(n);l.create(function(){c.replaceWithModule(l)})}})}}else{c=new (xui.SC(n.key))(n)}}return c},query:function(){return xui.doc.query.apply(xui.doc,arguments)},querySelector:function(){return xui.doc.querySelector.apply(xui.doc,arguments)},querySelectorAll:function(){return xui.doc.querySelectorAll.apply(xui.doc,arguments)},use:function(d){var f=xui._tempBox||(xui._tempBox=xui()),e=f._nodes;e[0]=d;if(e.length!=1){e.length=1}return f}});new function(){var r=window,A=navigator.userAgent.toLowerCase(),p=document,m=p.documentMode,q=xui.browser={kde:/webkit/.test(A),applewebkit:/applewebkit/.test(A),opr:/opera/.test(A),ie:(/msie/.test(A)&&!/opera/.test(A)),newie:/trident\/.* rv:([0-9]{1,}[.0-9]{0,})/.test(A),gek:/mozilla/.test(A)&&!/(compatible|webkit)/.test(A),isStrict:p.compatMode=="CSS1Compat",isWebKit:/webkit/.test(A),isFF:/firefox/.test(A),isChrome:/chrome/.test(A),isSafari:(!/chrome/.test(A))&&/safari/.test(A),isWin:/(windows|win32)/.test(A),isMac:/(macintosh|mac os x)/.test(A),isAir:/adobeair/.test(A),isLinux:/linux/.test(A),isSecure:location.href.toLowerCase().indexOf("https")==0,isTouch:!!navigator.userAgent.match(/AppleWebkit.*Mobile.*/)||(("ontouchend" in p)&&!(/hp-tablet/).test(A))||(r.DocumentTouch&&p instanceof DocumentTouch)||r.PointerEvent||r.MSPointerEvent,isIOS:/iphone|ipad|ipod/.test(A),isAndroid:/android/.test(A),isBB:/blackberry/.test(A)||/BB[\d]+;.+\sMobile\s/.test(navigator.userAgent)},x=function(d,e){e=A.split(e)[1].split(".");return d+(q.ver=parseFloat((e.length>0&&isFinite(e[1]))?(e[0]+"."+e[1]):e[0]))};if(r.matchMedia&&typeof r.matchMedia=="function"){q.isTouch=r.matchMedia("(any-pointer: coarse)").matches;q.deviceType=q.isTouch?((r.matchMedia("(any-hover: hover)").matches||r.matchMedia("(any-pointer: fine)").matches)?"hybrid":"touchOnly"):"mouseOnly"}else{q.deviceType=q.isTouch?"touchOnly":"mouseOnly"}xui.$secureUrl=q.isSecure&&q.ie?'javascript:""':"about:blank";xui.filter(q,function(d){return !!d});if(q.newie){q["newie"+(q.ver=m)]=true;q.cssTag1="-ms-";q.cssTag2="ms"}else{if(q.ie){if(xui.isNumb(m)){q["ie"+(q.ver=m)]=true}else{q[x("ie","msie ")]=true}if(q.ie6){try{document.execCommand("BackgroundImageCache",false,true)}catch(o){}r.XMLHttpRequest=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}if(q.ie6||q.ie7){q.ie67=1}if(q.ie6||q.ie7||q.ie8){q.ie678=1}q.cssTag1="-ms-";q.cssTag2="ms"}else{if(q.gek){q[x("gek",/.+\//)]=true;q.cssTag1="-moz-";q.cssTag2="Moz"}else{if(q.opr){q[x("opr","opera/")]=true;q.cssTag1="-o-";q.cssTag2="O"}else{if(q.kde){q[x("kde","webkit/")]=true;if(q.isSafari){if(/applewebkit\/4/.test(A)){q["safari"+(q.ver=2)]=true}else{q[x("safari","version/")]=true}}else{if(q.isChrome){q[x("chrome","chrome/")]=true}}if(q.isWebKit){q.cssTag1="-webkit-";q.cssTag2="Webkit"}else{q.cssTag1="-khtml-";q.cssTag2="Khtml"}}}}}}if(q.isBB&&!q.ver){q.ver=parseFloat(ua.split("/")[1].substring(0,3));q["bb"+q.ver]=true}q.contentBox=function(d){return(q.ie||q.opr)?!/BackCompat|QuirksMode/.test(p.compatMode):(d=(d=d||p.documentElement).style["-moz-box-sizing"]||d.style["box-sizing"])?(d=="content-box"):true}();var C=xui.ini={};if(window.xui_ini){xui.merge(C,window.xui_ini)}if(!C.path){var B,j=document.getElementsByTagName("script"),c=/js\/xui(-[\w]+)?\.js$/,g=j.length;while(--g>=0){B=j[g].src;if(B.match(c)){C.path=B.replace(c,"").replace(/\(/g,"%28").replace(/\)/g,"%29");break}}}xui.merge(C,{appPath:location.href.split("?")[0].replace(/[^\\\/]+$/,""),dummy_tag:"$_dummy_$"},"without");if(!C.path){C.path=C.appPath+"/xui/"}if(!C.basePath){C.basePath=C.path.replace(/xui\/$/,"").replace(/runtime\/$/,"")}C.releasePath=C.appPath;if(C.verPath){C.releasePath+=(C.verPath?(C.verPath+"/"):"")+(C.ver?(C.ver+"/"):"")}var h=new Image();h.onload=h.onerror=function(){var d=xui.ini.path+"appearance/_oldbrowser/";if(this.width!=1||this.height!=1){document.documentElement.className+=" xui-nodatauri";xui.merge(xui.ini,{img_dd:d+"ondrag.gif",img_busy:d+"busy.gif",img_pic:d+"picture.png",img_handler:d+"handler.gif",img_bg:d+"bg.gif",img_blank:d+"bg.gif"},"without")}h.onload=h.onerror=null};h.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";xui.merge(xui.ini,{img_dd:"data:image/gif;base64,R0lGODlhEABAAPcAAAAAAAEBAQICAgMDAwUFBAUFBQcHBwgICAkJCQwMDA8PDx4eHiQkJDAwMD8/P0JCQl1dXf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAAQAEAAAAj/AP8JHPigQQMHAxMOTAAAgIABAgAkUPgPQsMABAoQCNAQAISEFw0cMMCxI4CFAAIY+Eey4b+LCgSmXCnzpECVBf49AEBgJEWVBwg8WCCgQMuEQEkuYDBgo8uBIlsyeCCgJMWWAB68fPpP5cCOAhm6TLpV4teQI0tyrTgzrcmPChNoVIuAYsKCB+3qtQsgQt+/fgPb/Ce4MOCvEfb6HbhYb1/Eigc35ptYZmW7kw1rRgy48+S9oEOLHk26tGnRnlMzTl0Yst7Mgyk+tnzWpO3JfSPo3q274eXcfjv21rxbeHDBwE32VphbeHPmvYEvBzmc9+eXxa3Hxm69OHPbtk2zNO68WvNh2q8lb6fuuix434Ola5/Nvbt53tLhH8/unXpw49vlhx90/E2HmH3XyTcgSO91FBAAOw==",img_busy:"data:image/gif;base64,R0lGODlhEAAQAOMAAAQCBHx+fLy+vOTm5ERCRMTGxISGhAQGBISChMTCxOzq7FRSVMzKzP7+/gAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQANACwAAAAAEAAQAAAESrDJSau9OOvNe1VFonCFIBRcIiQJp7BjNySDxRjMNAQBUk+FAwCAaiR6gURhsUgYhgCEZIDgDRYEwqIALTZmNay2UTB4KwKmwBIBACH5BAkJAA8ALAAAAAAQABAAgwQCBHx+fLy+vERCRKSmpOTi5BQWFNTW1KyurIyKjMTCxERGRPTy9BwaHLSytP7+/gRE8MlJq7046827n47RIJwBAEZ5phsikg9TMNZBHBMj7PR0DEDco7ATFA6JhA04IEh0AgUjEQgomcLY7EG1PmzZClJpiQAAIfkECQkADQAsAAAAABAAEAAABEewyUmrtcywWxn4BTcZH4CIUlGGaFMYbOsuSywuBLHIuC4LNEFrkBjIBoEAwmhRFBKKRDKQuBQEgsIAoWRWEoJEleitRKGWCAAh+QQJCQAPACwAAAAAEAAQAIMEAgR8fny8vrxEQkSkpqTk4uQUFhTU1tSsrqyMiozEwsRERkT08vQcGhy0srT+/v4ERfDJ6UxDM2sDgHkHcWgT5x1DOpKIhRDpQJAaqtK1iJNHkqy7RyIQSAQlw+IR5APiGAXGkiGoSoOFqqBwpAoU1yA0vJxEAAAh+QQJCQANACwAAAAAEAAQAAAES7DJWdYqMzdmWFsEsTRDMkwMoFbhMgQBcjaGCiCCJQhwkEgFG2YyQMRmjYJhmCkhNVBFoqCAQgu7nzWTECS0W4k0UQ2bz+i0en2OAAAh+QQJCQAPACwAAAAAEAAQAIMEAgR8fny8vrxEQkSkpqTk4uQUFhTU1tSsrqyMiozEwsRERkT08vQcGhy0srT+/v4ERfDJeVI6M79DcApB8jAFQy3DUIEJI7zmQ6RDZx3FKxTSQWMTl0AR23Q0o5LEYWggkEgDAGCAaqRUawbRfGq/4LB4TC5DIwAh+QQJCQANACwAAAAAEAAQAAAER7DJqUpSM7eRRkuCUGjSgAQIJyQJ+QXwxWLkAKeuxnm5VCyLVk+yIBAWQ6IRmRQABclJwcCIMg4AwGhoyAIQyYJ3O5ySo9EIACH5BAkJAA8ALAAAAAAQABAAgwQCBHx+fLy+vERCRKSmpOTi5BQWFNTW1KyurIyKjMTCxERGRPTy9BwaHLSytP7+/gRG8MlJ62SFWcuE19tUeEIRXp4Cng+2hkeSHKyUBEFSP3e+x7Od5ECg1Q6LwcB4IigHBETD4NgcngcDAGCAFR9a7g5hMCAsEQA7",img_pic:"data:image/png;base64,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",img_handler:"data:image/gif;base64,R0lGODlhBAAEAPcAAAAAAGSMtP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAAEAAQAAAgPAP8JFCDwX4B/BAUe/BcQADs=",img_bg:h.src,img_blank:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="},"without");var n=xui._domReadyFuns=function(){if(!xui.isDomReady){if(p.addEventListener){p.removeEventListener("DOMContentLoaded",n,false);r.removeEventListener("load",n,false)}else{if(p.detachEvent){p.detachEvent("onreadystatechange",n);r.detachEvent("onload",n)}}if(xui.browser.deviceType!="touchOnly"&&!xui.Dom.getScrollBarSize()){xui.browser.deviceType="touchOnly";if(xui.UI){var F=function(e){xui.arr.each(e,function(l){if(l=xui.SC.get(l)){if(l.$DataModel.overflow){l.$DataModel.overflow.ini="auto";l.$DataStruct.overflow="auto"}if(l.$children&&l.$children.length){F(l.$children)}}})};F(xui.UI.$children)}}}try{if(xui.ini.customStyle&&!xui.isEmpty(xui.ini.customStyle)){var f=[],D=xui.ini.customStyle,d;xui.each(D,function(l,e){f.push(e+" : "+l+";")});d=".xui-custom{\r\n"+f.join("\r\n")+"\r\n}";xui.CSS.addStyleSheet(d,"xui:css:custom",1)}for(var w=0,u=xui._m.length;w<u;w++){xui.tryF(xui._m[w])}xui._m.length=0;xui.isDomReady=true}catch(E){xui.asyRun(function(){throw E})}};if(p.addEventListener){p.addEventListener("DOMContentLoaded",n,false);r.addEventListener("load",n,false)}else{p.attachEvent("onreadystatechange",n);r.attachEvent("onload",n);(function(){if(xui.isDomReady){return}try{p.activeElement.id;p.documentElement.doScroll("left");n()}catch(d){xui.setTimeout(arguments.callee,9)}})()}(function(){((!xui.isDomReady)&&((!p.readyState)||/in/.test(p.readyState)))?xui.setTimeout(arguments.callee,9):n()})()};new function(){xui._uriReg=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/;xui._localReg=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/;xui._curHref=(function(c){try{return location.href}catch(d){c=document.createElement("a");c.href="";return c.href}})(),xui._localParts=xui._uriReg.exec(xui._curHref.toLowerCase())||[]};new function(){xui.pseudocode={exec:function(q,e,d,I,f){var r,C,B,x,G,h=q.type||"other",w={temp:I,page:d,args:e,global:xui.$cache.data},u=function(l,n,m){switch(xui.str.trim(m)){case"=":return l===n;case"<>":case"!=":return l!==n;case"empty":return xui.isEmpty(l);case"non-empty":return !xui.isEmpty(l);case">":return parseFloat(l)>parseFloat(n);case"<":return parseFloat(l)<parseFloat(n);case">=":return parseFloat(l)>=parseFloat(n);case"<=":return parseFloat(l)<=parseFloat(n);case"include":return(l+"").indexOf(n+"")!=-1;case"exclude":return(l+"").indexOf(n+"")==-1;case"begin":return(l+"").indexOf(n+"")===0;case"end":return(l+"").indexOf(n+"")===(l+"").length-(n+"").length;case"objhaskey":return typeof(l)=="object"?(n in l):false;case"objnokey":return typeof(l)=="object"?!(n in l):false;case"arrhasvalue":return xui.isArr(l)?xui.arr.indexOf(l,n)!==-1:false;case"arrnovalue":return xui.isArr(l)?xui.arr.indexOf(l,n)==-1:false;case"objarrhaskey":return xui.isArr(l)?xui.arr.subIndexOf(l,"id",n)!==-1:false;case"objarrnokey":return xui.isArr(l)?xui.arr.subIndexOf(l,"id",n)==-1:false;default:return false}},E=function(L){if(typeof(L)=="string"){var p;if(xui.str.startWith(L,"[data]")){L=L.replace("[data]","");p=1}L=xui.adjustVar(L,w);if(p&&typeof(L)=="string"){L=xui.unserialize(xui.getFileSync(L))}}else{if(xui.isHash(L)){for(var n in L){L[n]=E(L[n])}}else{if(xui.isArr(L)){for(var n=0,m=L.length;n<m;n++){L[n]=E(L[n])}}}}return L},K=q.target,g=(q.method+"").split("-")[0],A=xui.clone(q.params)||[],j=q.conditions||[],F=E(q.adjust)||null,c=[],o=xui.isSet(q.timeout)?parseInt(q.timeout,10):null;for(var H=0,D=j.length;H<D;H++){if(!u(xui.adjustVar(j[H].left,w),xui.adjustVar(j[H].right,w),j[H].symbol)){if(typeof f=="function"){f()}return}}if(K&&g&&K!="none"&&g!="none"){for(var H=(h=="other"&&K=="callback")?g=="call"?1:g=="set"?2:0:0,D=A.length;H<D;H++){A[H]=E(A[H])}if(g.indexOf("-")!=-1){r=g.split("-");g=r[0];for(var H=1,D=r.length;H<D;H++){if(r[H]){A[H-1]=r[H]}}}var J=function(){switch(h){case"page":if(g=="switch"){if(!xui.History._excallback){xui.History.setCallback(function(R,Q){if(Q){return}var P=xui.urlDecode(R||"");if(!P.xuicom){P.xuicom="App";P.cache=true}xui("body").children().each(function(S){var T=xui.Module.getFromDom(S);if(T&&T._showed){if(P.cache){T.hide()}else{T.destroy()}}});xui.showModule(P.xuimodule)})}var O="xuimodule="+K;if(A[0]){O+="&cache="+(A[0]?true:false)}xui.History.setFI(O);return}var l=xui.get(window,K.split(".")),L;if(l){for(var M in l._cache){L=l._cache[M];break}}if(g=="show"||g=="pop"){A.unshift(function(Q,P){if(g=="pop"&&!Q){r=P.getUIComponents(true);if((r=r.getRoot())&&(r=r.get(0))){xui(r).pop(A[1]||w.args[0])}}});var n=function(Q,P){if(Q){return}if(xui.isFun(r=P.show)){r.apply(P,A)}};if(!L){xui.getModule(K,n)}else{n(null,L)}}else{if(L&&xui.isFun(r=xui.get(L,[g]))){r.apply(L,A)}return}break;case"control":case"module":if(g=="pop"){r=xui.get(d,[K]);if((r=r.getRoot())&&(r=r.get(0))){xui(r).pop(A[1]||w.args[0])}}else{if(g=="setProperties"){if(C=A[0]){if(C.CA){if(xui.isFun(r=xui.get(d,[K,"setCustomAttr"]))){r.apply(d[K],[C.CA])}delete C.CA}if(C.CC){if(xui.isFun(r=xui.get(d,[K,"setCustomClass"]))){r.apply(d[K],[C.CC])}delete C.CC}if(C.CS){if(xui.isFun(r=xui.get(d,[K,"setCustomStyle"]))){r.apply(d[K],[C.CS])}delete C.CS}}}if(xui.isFun(r=xui.get(d,[K,g]))){r.apply(d[K],A)}}break;case"other":switch(K){case"url":switch(g){case"close":window.close();break;case"open":window.open(A[0],A[1],A[2],A[3]);break;case"mailTo":xui.mailTo.apply(xui,A);break;case"selectFile":xui.Dom.selectFile.apply(xui.Dom,A);break;case"readText":xui.getFileAsync.apply(xui,A);break;case"readJSON":A[4]={rspType:"json"};xui.getFileAsync.apply(xui,A);break}break;case"msg":if(g=="busy"||g=="free"){if(xui.isFun(r=xui.get(xui.Dom,[g]))){r.apply(xui.Dom,A)}}else{if(g=="console"&&xui.isDefined(window.console)&&(typeof console.log=="function")){console.log.apply(console,A)}else{if(xui.isFun(r=xui.get(xui,[g]))){r.apply(xui,A)}}}break;case"var":if(g=="cookie"){xui.$cache.data.Cookies=xui.Cookies.get()}else{if(A[0].length){var m=A[1];if(A[2]){m=xui.get(m,A[2].split(/\s*\.\s*/))}if(F){switch(F){case"serialize":m=xui.serialize(m);break;case"unserialize":m=xui.unserialize(m);break;case"stringify":m=xui.stringify(m);break;default:if(typeof(F=xui.get(F))=="function"){m=F(m)}break}}xui.set(w,(g+"."+xui.str.trim(A[0])).split(/\s*\.\s*/),m)}}break;case"callback":switch(g){case"set":r=A[1];if(xui.isStr(r)&&/[\w\.\s*]+[^\.]\s*(\()?\s*(\))?\s*\}$/.test(r)){r=r.split(/\s*\.\s*/);C=r.pop().replace(/[()}\s]/g,"");r=xui.adjustVar(r.join(".")+"}",w);if(r&&xui.isFun(r[C])){xui.$cache.callback[A[0]]=[r,C]}}break;case"call":var p=A.slice(3),N;r=A[0];if(xui.isStr(r)&&/[\w\.\s*]+[^\.]\s*(\()?\s*(\))?\s*\}$/.test(r)){r=r.split(/\s*\.\s*/);C=r.pop().replace(/[()}\s]/g,"");r=r.join(".")+"}";r=xui.adjustVar(r,w)||xui.adjustVar(r);N=r&&r[C]&&xui.isFun(r[C])}else{if(xui.isStr(r=A[0])&&xui.isFun((B=xui.$cache.callback[r])&&(r=B[0])&&r&&(r[C=B[1]]))){N=1}}if(N){r=r[C].apply(r,p);if(A[1]&&A[2]&&xui.get(w,A[1].split(/\s*\.\s*/))){xui.set(w,(A[1]+"."+A[2]).split(/\s*\.\s*/),r)}}break}break}break}};if(o!==null){xui.asyRun(J,o)}else{J()}}return q["return"]}}};new function(){var M={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","/":"\\/","\x0B":"\\u000b"},H={"@window":"window","@this":"this"},A1=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/:/[\\\"\x00-\x1f\x7f-\xff]/,A2=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,D=/^(-\d+|\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?((?:[+-](\d{2})(\d{2}))|Z)?$/,E=function(t,i,a,v,m,n,p){for(i in t){if((a=typeof(v=t[i]))=="string"&&(v=D.exec(v))){m=v[8]&&v[8].charAt(0);if(m!="Z"){n=(m=="-"?-1:1)*((+v[9]||0)*60)+(+v[10]||0)}else{n=0}m=new Date(+v[1],+v[2]-1,+v[3],+v[4],+v[5],+v[6],+v[7]||0);n+=m.getTimezoneOffset();if(n){m.setTime(m.getTime()+n*60000)}t[i]=m}else{if(a=="object"&&t[i]&&(xui.isObj(t[i])||xui.isArr(t[i]))){E(t[i])}}}return t},F="function",N="number",L="boolean",S="string",O="object",T={},PS=function(v,n){return("000"+(v||0)).slice(-n)},Z=(function(a,b){a=-(new Date).getTimezoneOffset()/60;b=a>0?"+":"-";a=""+Math.abs(a);return b+(a.length==1?"0":"")+a+"00"})();T["undefined"]=function(){return"null"};T[L]=function(x){return String(x)};T[N]=function(x){return((x||x===0)&&isFinite(x))?String(x):"null"};T[S]=function(x){return H[x]||'"'+(A1.test(x)?x.replace(A2,function(a,b){if(b=M[a]){return b}return"\\u"+((b=a.charCodeAt())<16?"000":b<256?"00":b<4096?"0":"")+b.toString(16)}):x)+'"'};T[O]=function(x,filter,dateformat,deep,max,MAXL,MAXS){var me=arguments.callee,map=me.map||(me.map={prototype:1,constructor:1,toString:1,valueOf:1,toLocaleString:1,propertyIsEnumerable:1,isPrototypeOf:1,hasOwnProperty:1});deep=deep||1;max=max||0;MAXL=MAXL||xui.SERIALIZEMAXLAYER;MAXS=MAXS||xui.SERIALIZEMAXSIZE;if(deep>MAXL||max>MAXS){return xui.$_outofmilimted}max++;if(x){var a=[],b=[],f,i,l,v;if(x===window){return"window"}if(x===document){return"document"}if((typeof x==O||typeof x==F)&&!xui.isFun(x.constructor)){return x.nodeType?"document.getElementById('"+x.id+"')":"$alien"}else{if(xui.isArr(x)){a[0]="[";l=x.length;for(i=0;i<l;++i){if(typeof filter=="function"&&false==filter.call(x,x[i],i)){continue}if(xui.isNaN(v=x[i])){b[b.length]="NaN"}else{if(xui.isNull(v)){b[b.length]="null"}else{if(!xui.isDefined(v)){b[b.length]="undefined"}else{if(f=T[typeof v]){if(typeof(v=f(v,filter,dateformat,deep+1,max,MAXL,MAXS))==S){b[b.length]=v}}}}}}a[2]="]"}else{if(xui.isDate(x)){if(dateformat=="utc"){return'"'+PS(x.getUTCFullYear(),4)+"-"+PS(x.getUTCMonth()+1,2)+"-"+PS(x.getUTCDate(),2)+"T"+PS(x.getUTCHours(),2)+":"+PS(x.getUTCMinutes(),2)+":"+PS(x.getUTCSeconds(),2)+"."+PS(x.getUTCMilliseconds(),3)+'Z"'}else{if(dateformat=="gmt"){return'"'+PS(x.getFullYear(),4)+"-"+PS(x.getMonth()+1,2)+"-"+PS(x.getDate(),2)+"T"+PS(x.getHours(),2)+":"+PS(x.getMinutes(),2)+":"+PS(x.getSeconds(),2)+"."+PS(x.getMilliseconds(),3)+Z+'"'}else{return"new Date("+[x.getFullYear(),x.getMonth(),x.getDate(),x.getHours(),x.getMinutes(),x.getSeconds(),x.getMilliseconds()].join(",")+")"}}}else{if(xui.isReg(x)){return String(x)}else{if(typeof x.serialize==F){x=x.serialize()}if(typeof x==O){if(x.nodeType){return"document.getElementById('"+x.id+"')"}else{a[0]="{";for(i in x){if(map[i]||(filter===true?i.charAt(0)=="_":typeof filter=="function"?false===filter.call(x,x[i],i):0)){continue}if(xui.isNaN(v=x[i])){b[b.length]=T.string(i)+":NaN"}else{if(xui.isNull(v)){b[b.length]=T.string(i)+":null"}else{if(!xui.isDefined(v)){b[b.length]=T.string(i)+":undefined"}else{if(f=T[typeof v]){if(typeof(v=f(v,filter,dateformat,deep+1,max,MAXL,MAXS))==S){b[b.length]=T.string(i)+":"+v}}}}}}a[2]="}"}}else{return String(x)}}}}}a[1]=b.join(", ");return a[0]+a[1]+a[2]}return"null"};T[F]=function(x){return x.$path?x.$path:String(x)};xui.$_outofmilimted='"\x01...\x01"';xui.serialize=function(obj,filter,dateformat,MAXL,MAXS){return xui.isNaN(obj)?"NaN":xui.isNull(obj)?"null":!xui.isDefined(obj)?"undefined":T[typeof obj](obj,filter,dateformat||(xui&&xui.$dateFormat),0,0,MAXL,MAXS)||""};xui.stringify=function(obj,filter,dateformat,MAXL,MAXS){return xui.fromUTF8(xui.serialize(obj,filter,dateformat,0,0,MAXL,MAXS))};var safeW;xui.unserialize=function(str,dateformat){if(typeof str!="string"){return str}if(!str){return false}try{if(!safeW){var ifr=document.createElement(xui.browser.ie&&xui.browser.ver<9?"<iframe>":"iframe"),w;document.body.appendChild(ifr);w=frames[frames.length-1].window;safeW={};for(var i in w){safeW[i]=null}document.body.removeChild(ifr)}str="({_:(function(){with(this){return "+str+"}}).call(safeW)})";str=eval(str);if(dateformat||(xui&&xui.$dateFormat)){E(str)}str=str._;return str}catch(e){return false}}};new function(){xui.id=function(){var self=this,me=arguments.callee;if(self.constructor!==me||self.a){return(me._||(me._=new me)).next()}self.a=[-1];self.b=[""];self.value=""};xui.id.prototype={constructor:xui.id,_chars:"abcdefghijklmnopqrstuvwxyz".split(""),next:function(i){with(this){i=(i||i===0)?i:b.length-1;var m,k,l;if((m=a[i])>=25){m=0;if(i===0){a.splice(0,0,1);b.splice(0,0,"a");l=a.length;for(k=1;k<l;++k){a[k]=0;b[k]="0"}++i}else{next(i-1)}}else{++m}a[i]=m;b[i]=_chars[m];return value=b.join("")}}}};Class("xui.Thread",null,{Constructor:function(d,e,g,l,m,c,f){var j=arguments.callee.upper;if(j){j.call(this)}j=null;var o=this,h=arguments.callee,n=xui.$cache.thread;if(o.constructor!==h||!!o.id){return new h(d,e,g,l,m,c,f)}if(typeof d!="string"){d="$"+(o.constructor.$xid++)}o.id=d;o.profile=n[d]||(n[d]={id:d,_start:false,time:0,_left:0,_asy:0.1,index:0,tasks:e||[],delay:g||0,callback:l,onStart:m,onEnd:c,cache:{},status:"ini",cycle:!!f,instance:o})},Instance:{_fun:xui.fun(),__gc:function(){var c=xui.$cache.thread,e=c[this.id];if(e){delete c[this.id];e.tasks.length=0;for(var d in e){e[d]=null}}},_task:function(){var c=this,j=c.profile;if(!j||!j.status||!j.tasks){return}j._asy=0.1;var e={},h=j.tasks[j.index],g,d,f=typeof h;if(f=="function"){e.task=h}else{if(f=="object"){for(d in h){e[d]=h[d]}}}if(typeof e.callback!="function"){e.callback=j.callback}if(typeof e.task=="function"){e.args=e.args||[];e.args.push(j.id)}j.index++;j.time=xui.stamp();if(typeof e.task=="function"){g=xui.tryF(e.task,e.args||[j.id],e.scope||c,null)}if(!j.status){return}if(e.id){j.cache[e.id]=g}if(e.callback&&false===xui.tryF(e.callback,[j.id],c,true)){return c.abort("callback")}if(j.status!=="run"){return}c.start()},start:function(j,c){var e=this,h=e.profile,d,f;if(h.__delaycb){xui.tryF(h.__delaycb,[h.id],e);delete h.__delaycb}if(c){h.__delaycb=c}if(h._start===false){h._start=true;if(h.onStart){var g=xui.tryF(h.onStart,[h.id],e);if(false===g){return e.abort("start")}else{if(true===g){return}else{if(xui.isNumb(g)){e.suspend(g);return}}}}}if(h.status!="run"){h.status="run"}if(!h.tasks.length){return e.abort("empty")}if(h.index>=h.tasks.length){if(h.cycle===true){e.profile.index=0}else{return e.abort("normal")}}d=h.tasks[h.index];f=typeof d=="number"?d:(d&&typeof d.delay=="number")?d.delay:h.delay;h._left=(j||j===0)?j:f;if(h._asy!=0.1){xui.clearTimeout(h._asy)}h._asy=xui.asyRun(e._task,h._left,[],e);h.time=xui.stamp();return e},suspend:function(e,c){var f,d=this.profile;if(d.status=="pause"){return}d.status="pause";if(d._asy!==0.1){xui.clearTimeout(d._asy);if(d.index>0){d.index--}}f=d._left-(xui.stamp()-d.time);d._left=(f>=0?f:0);if((Number(e)||0)){this.resume(e,c)}return this},resume:function(e,c){var d=this;if(d.profile.status=="run"){return}e=e===undefined?d.profile._left:e===true?d.profile.delay:e===false?0:(Number(e)||0);d.profile.status="run";d.start(e,c);return d},abort:function(c){var e=this.profile,d=e.onEnd,f=e.id;e.status="stop";xui.clearTimeout(e._asy);this.__gc();xui.tryF(d,[f,c])},links:function(c){var e=this.profile,d=e.onEnd,f=e.id;e.onEnd=function(h,g){xui.tryF(d,[h,g]);c.start()};return this},insert:function(c,g){var f=this,h=f.profile.tasks,e=h.length,d;if(!xui.isArr(c)){c=[c]}g=g||f.profile.index;if(g<0){g=-1}if(g==-1){Array.prototype.push.apply(h,c)}else{if(g>e){g=e}d=h.splice(g,e-g);h.push.apply(h,c);h.push.apply(h,d)}return f},getCache:function(c){return this.profile.cache[c]},setCache:function(c,d){this.profile.cache[c]=d;return this},isAlive:function(){return !!xui.$cache.thread[this.id]},getStatus:function(){return this.profile.status}},After:function(){var e=this,h=function(f){e[f]=function(l){var j;if(xui.$cache.thread[l]){(j=xui.Thread(l))[f].apply(j,Array.prototype.slice.call(arguments,1))}}},d="start,suspend,resume,abort".split(",");for(var g=0,c=d.length;g<c;g++){h(d[g])}},Static:{$asFunction:1,$xid:1,__gc:function(){xui.$cache.thread={}},get:function(c){c=xui.$cache.thread[c];return c&&c.instance},isAlive:function(c){return !!xui.$cache.thread[c]},observableRun:function(h,e,f,d){var c=xui.Thread,g=xui.Dom;if(!xui.isArr(h)){h=[h]}if(xui.$cache.thread[f]){if(typeof e=="function"){h.push(e)}c(f).insert(h)}else{c(f,h,0,null,function(j){if(g){g.busy(j,d)}},function(j){xui.tryF(e,arguments,this);if(g){g.free(j)}}).start()}},group:function(d,j,l,m,c){var n={},h=xui.Thread,g=function(u,p,r){if(typeof u=="string"){u=h(u)}if(u){var q=function(){var f=arguments.callee;xui.tryF(f.onEnd,arguments,this);f.onEnd=null;delete n[p];xui.tryF(l,[p,r],this);if(xui.isEmpty(n)){h.resume(r)}};q.onEnd=u.profile.onEnd;u.profile.onEnd=q;u.start()}};for(var e in j){n[e]=1}return h(d,[function(o){if(!xui.isEmpty(j)){h.suspend(o);for(var f in j){g(j[f],f,o)}}}],0,null,m,c)},repeat:function(e,d,c,f){return xui.Thread(null,[null],d||0,e,c,f,true).start()}}});Class("xui.absIO",null,{Constructor:function(e,p,n,c,h,w){var r=arguments.callee.upper;if(r){r.call(this)}r=null;if(typeof e=="object"){w=e}else{w=w||{};xui.merge(w,{uri:e,query:p,onSuccess:n,onFail:c,threadid:h})}var u=this,o=arguments.callee,d=u.constructor;if((d!==o)||u.id){return new o(w)}xui.merge(w,{id:w.id||(""+(d._id++)),uid:(""+(d.uid++)),uri:w.uri?xui.adjustRes(w.uri,0,1,1):"",username:w.username||undefined,password:w.password||undefined,query:w.query||"",contentType:w.contentType||"",Accept:w.Accept||"",header:w.header||null,asy:w.asy!==false},"all");var f=(w.method||d.method).toUpperCase();w.method="POST"==f?"POST":"PUT"==f?"PUT":"DELETE"==f?"DELETE":"PATCH"==f?"PATCH":"GET";var q="retry,timeout,reqType,rspType,optimized,customQS".split(",");for(var j=0,g=q.length;j<g;j++){w[q[j]]=(q[j] in w)?w[q[j]]:d[q[j]];if(typeof w[q[j]]=="string"){w[q[j]]=w[q[j]].toLowerCase()}}xui.merge(u,w,"all");if(u.reqType=="xml"){u.method="POST"}if(d.events){xui.merge(u,d.events)}u.query=u.customQS(u.query);if(typeof u.query=="object"&&u.reqType!="xml"){u.query=xui.copy(u.query,function(l){return l!==undefined})}if(!u._useForm&&xui.isHash(u.query)&&u.reqType!="xml"){u.query=d._buildQS(u.query,u.reqType=="json",u.method=="POST")}return u},Instance:{_fun:xui.fun(),_flag:0,_response:false,_txtresponse:"",_retryNo:0,_time:function(){var d=this,e=d.constructor;d._clear();if(d._retryNo<d.retry){d._retryNo++;xui.tryF(d.onRetry,[d._retryNo],d);d.start()}else{if(false!==xui.tryF(d.onTimeout,[],d)){d._onError(new Error("Request timeout"))}}},_onEnd:function(){var c=this;if(!c._end){c._end=true;if(c._flag>0){xui.clearTimeout(c._flag);c._flag=0}xui.Thread.resume(c.threadid);xui.tryF(c.$onEnd,[],c);xui.tryF(c.onEnd,[],c);c._clear()}},_onStart:function(){var c=this;xui.Thread.suspend(c.threadid);xui.tryF(c.$onStart,[],c);xui.tryF(c.onStart,[],c)},_onResponse:function(){var c=this;if(false!==xui.tryF(c.beforeSuccess,[c._response,c.rspType,c.threadid],c)){xui.tryF(c.onSuccess,[c._response,c.rspType,c.threadid],c)}c._onEnd()},_onError:function(d){var c=this;if(false!==xui.tryF(c.beforeFail,[d,c.threadid],c)){xui.tryF(c.onFail,[d.name?(d.name+": "+d.message):d,c.rspType,c.threadid,d],c)}c._onEnd()},isAlive:function(){return !this._end},abort:function(){this._onEnd()}},Static:{$abstract:true,get:function(d,e,g,h,f,c){c=c||{};c.mothod="GET";return this.apply(this,arguments).start()},post:function(d,e,g,h,f,c){c=c||{};c.mothod="POST";return this.apply(this,arguments).start()},_id:1,uid:1,method:"GET",retry:0,timeout:60000,reqType:"form",rspType:"json",optimized:false,callback:"callback",_buildQS:function(e,c,d){e=xui.clone(e,function(g,f){return !(xui.isNaN(g)||!xui.isDefined(g))});return c?((c=xui.serialize(e))&&(d?c:encodeURIComponent(c))):xui.urlEncode(e)},customQS:function(c){return c},_if:function(g,j,e){var c=xui.browser.ie&&xui.browser.ver<9,f=c?("<iframe "+(j?("name='xui_xdmi:"+j+"'"):"")+(e?(" onload='xui.XDMI._o(\""+j+"\")'"):"")+">"):"iframe";var h=g.createElement(f),d;if(j){h.id=h.name="xui_xdmi:"+j}if(!c&&e){h.onload=e}h.style.display="none";g.body.appendChild(h);d=frames[frames.length-1].window;return[h,d,d.document]},isCrossDomain:function(e){var c=xui._localParts;e=e.replace(/#.*$/,"").replace(/^\/\//,c[1]+"//");var d=xui._uriReg.exec((e||"").toLowerCase());return !!(d&&(d[1]!==c[1]||d[2]!==c[2]||(d[3]||(d[1]==="http:"?80:443))!==(c[3]||(c[1]==="http:"?80:443))))},groupCall:function(j,l,c,d,h){var e,g=function(n,f,m){m[f]=xui.Thread(null,[function(o){n.threadid=o;n.start()}])};for(e in j){g(j[e],e,j)}return xui.Thread.group(null,j,l,function(){xui.Thread(h).suspend();xui.tryF(c,arguments,this)},function(){xui.tryF(d,arguments,this);xui.Thread(h).resume()}).start()}}});Class("xui.Ajax","xui.absIO",{Instance:{_XML:null,_unsafeHeader:"Accept-Charset,Accept-Encoding,Access-Control-Request-Headers,Access-Control-Request-Method,Connection,Content-Length,Cookie,Cookie2,Date,DNT,Expect,Host,Keep-Alive,Origin,Referer,TE,Trailer,Transfer-Encoding,Upgrade,User-Agent,Via".toLowerCase().split(","),_isunsafe:function(c){return xui.browser.isWebKit&&(xui.str.startWith("Proxy-",c)||xui.str.startWith("Sec-",c)||xui.arr.indexOf(this._unsafeHeader,c.toLowerCase())!==-1)},_header:function(d,c){if(!this._isunsafe(d)){if(this._XML){this._XML.setRequestHeader(d,c)}}},start:function(){var self=this;if(false===xui.tryF(self.beforeStart,[],self)){self._onEnd();return}if(!self._retryNo){self._onStart()}try{with(self){self._XML=new window.XMLHttpRequest();if(asy){self._XML.onreadystatechange=function(){if(self&&self._XML&&self._XML.readyState==4){self._complete.apply(self);self._clear()}}}if(!_retryNo&&method!="POST"){if(query){uri=uri.split("?")[0]+"?"+query}query=null}if(username&&password){self._XML.open(method,uri,asy,username,password)}else{self._XML.open(method,uri,asy)}self._header("Accept",Accept?Accept:(rspType=="json"?"application/json,text/javascript,*/*;q=0.01":rspType=="xml"?"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8":"*/*"));self._header("Content-type",contentType?contentType:((reqType=="xml"?"text/xml; ":reqType=="json"?"application/json; ":method=="POST"?"application/x-www-form-urlencoded; ":"")+"charset="+(self.charset||"UTF-8")));self._header("X-Requested-With","XMLHttpRequest");if(optimized){try{self._header("User-Agent",null);self._header("Accept-Language",null);self._header("Connection","keep-alive");self._header("Keep-Alive",null);self._header("Cookie",null);self._header("Cookie","")}catch(e){}}try{if(xui.isHash(header)){xui.each(header,function(o,i){self._header(i,o)})}}catch(e){}if(false===xui.tryF(self.beforeSend,[self._XML],self)){self._onEnd();return}try{self._XML.send(query)}catch(e){}if(asy){if(self._XML&&timeout>0){_flag=xui.asyRun(function(){if(self&&!self._end){self._time()}},self.timeout)}}else{return _complete()}}}catch(e){self._onError(e)}return self},abort:function(){var c=this;if(c._XML){c._XML.onreadystatechange=c._fun;c._XML.abort();c._XML=null}arguments.callee.upper.call(c)},_clear:function(){var c=this;if(c._XML){c._XML.onreadystatechange=c._fun;c._XML=null}},_complete:function(){with(this){var ns=this,obj,status=ns._XML.status;_txtresponse=rspType=="xml"?ns._XML.responseXML:ns._XML.responseText;_response=rspType=="json"?((obj=xui.unserialize(_txtresponse))===false?_txtresponse:obj):_txtresponse;if(!status&&xui._localReg.test(xui._localParts[1])){status=ns._XML.responseText?200:404}if(status==1223){status=204}if(status>=200&&status<300||status==304){_onResponse()}else{if(status===undefined||status<10){_onError(new Error("Network problems--"+status))}else{_onError(new Error("XMLHTTP returns--"+status))}}}return this._response}},Static:{$asFunction:1}});Class("xui.JSONP","xui.absIO",{Instance:{start:function(){var o=this,d,g=o.constructor,m,f,h=false;if(false===xui.tryF(o.beforeStart,[],o)){o._onEnd();return}if(!o._retryNo){o._onStart()}if(o.rspType=="script"){o.retry=0}d=o.id;if(g._pool[d]){g._pool[d].push(o)}else{g._pool[d]=[o]}g.No["_"+d]=function(c){g.$response(c,d)};var j=document,l=function(){if(!h){h=true;if(o.rspType=="script"){if(typeof o.checkKey=="string"){xui.setTimeout(function(){xui.exec("!function(t){if(t=xui.get(xui.JSONP,['_pool','"+d+"',0])) {if(xui.SC.get('"+o.checkKey+"'))t._onResponse();else t._loaded();}}()")},false)}else{o._onResponse()}}else{o._loaded()}}};f=o.node=j.createElement("script");var e=o.uri;if(o.query){e=e.split("?")[0]+"?"+o.query}f.src=e;f.type="text/javascript";f.charset=o.charset||"UTF-8";f.onload=f.onreadystatechange=function(){if(h){return}var c=this.readyState;if(!c||c=="loaded"||c=="complete"){l()}if(c=="interactive"&&xui.browser.opr){xui.Thread.repeat(function(){if(h){return false}if(/loaded|complete/.test(document.readyState)){l();return false}},50)}};if("onerror" in f){f.onerror=function(c){o._clear();o._onError(new Error("Not Found - "+e));o=null;return}}(j.body||j.getElementsByTagName("head")[0]).appendChild(f);f=null;if(o.timeout>0){o._flag=xui.asyRun(function(){if(o&&!o._end){o._time()}},o.timeout)}},_clear:function(){var e=this,j=e.node,h=e.constructor,g=e.id,d=h._pool;if(d[g]){d[g].length=0;delete d[g]}delete h.No["_"+g];if(j){e.node=j.onload=j.onreadystatechange=j.onerror=null;var f=document.createElement("div");f.appendChild(j.parentNode&&j.parentNode.removeChild(j)||j);if(xui.browser.ie){xui.asyRun(function(){f.innerHTML=j.outerHTML="";if(xui.isEmpty(d)){h._id=1}d=h=j=f=null})}else{xui.asyRun(function(){f.innerHTML="";j=f=null;if(xui.isEmpty(d)){h._id=1}})}}else{if(xui.isEmpty(d)){h._id=1}}},_loaded:function(){var c=this;xui.asyRun(function(){if(c.id&&c.constructor._pool[c.id]){c._onError(new Error("JSONP return script doesn't match"))}},500)}},Static:{$asFunction:1,_pool:{},No:{},$response:function(f,h){var d=this,g;if(f&&(g=d._pool[h])){for(var e=0,c=g.length;e<c;e++){g[e]._response=f;g[e]._onResponse()}}else{d._onError(new Error("JSONP return value formatting error--"+f))}},customQS:function(f){var g=this.constructor,d=g.callback,e=(this.rspType!="script");if(typeof f=="string"){return(f||"")+(e?("&"+d+"=xui.JSONP.No._"+this.id):"")}else{if(e){f[d]="xui.JSONP.No._"+this.id}return f}}}});Class("xui.XDMI","xui.absIO",{Instance:{_useForm:true,start:function(){var C=this,A=window,r=C.constructor,q,f,B,j,p,g,u,e,m;if(false===xui.tryF(C.beforeStart,[],C)){C._onEnd();return}if(!C._retryNo){C._onStart()}f=C.id;if(r._pool[f]){r._pool[f].push(C)}else{r._pool[f]=[C]}var x=r._if(document,f,m);C.node=x[0];C.frm=x[1];e=C.form=document.createElement("form");e.style.display="none";if(A.postMessage){C._msgcb=function(o){if(!C.node){return}if(o.source!==C.frm){return}o=o.data;if(C.rspType=="json"){o=xui.unserialize(o)||o}if(o&&(B=r._pool[C.id])){for(var n=0,c=B.length;n<c;n++){B[n]._response=o;B[n]._onResponse()}}else{C._clear();C._onError(new Error("XDMI return value formatting error"))}};if(A.addEventListener){A.addEventListener("message",C._msgcb,false)}else{A.attachEvent("onmessage",C._msgcb)}}else{C._onload=m=function(I){if(C.OK){return}if(!C.node){return}var D=C.node.contentWindow,H=xui.XDMI,G,E;if(xui.browser.opr){try{if(D.location=="about:blank"){return}}catch(F){}}C.OK=1;var n=0;try{if(D.name===undefined){n=1}}catch(F){n=1}if(n){D.location.replace(H._getDummy()+"#"+xui.ini.dummy_tag)}(function(){var o=0;try{if(D.name===undefined){o=1}}catch(K){o=1}if(o){return xui.asyRun(arguments.callee)}var J;if(("xui_xdmi:"+C.id)==D.name){C._clear();C._onError(new Error("XDMI no return value"));return}else{J=D.name}if(J&&(G=xui.unserialize(J))&&(E=H._pool[C.id])){for(var w=0,c=E.length;w<c;w++){E[w]._response=G;E[w]._onResponse()}}else{C._clear();C._onError(new Error("XDMI return value formatting error, or no matched 'id'-- "+J))}})()}}var h=C.uri;if(C.method!="POST"){h=h.split("?")[0]}e.action=C.uri;e.method=C.method;e.target="xui_xdmi:"+f;p=C.query||{};var l,d=[];for(q in p){if(p[q]&&p[q]["xui.UIProfile"]&&p[q].$xuiFileCtrl){if(l=p[q].boxing().getUploadObj()){d.push({id:p[q].$xid,file:l});l.id=l.name=q;e.appendChild(l);u=true}}else{if(p[q]&&p[q].nodeType==1){p[q].id=p[q].name=q;e.appendChild(p[q]);u=true}else{if(xui.isDefined(p[q])){B=document.createElement("textarea");B.id=B.name=q;B.value=typeof p[q]=="string"?p[q]:xui.serialize(p[q],function(c){return c!==undefined});e.appendChild(B)}}}}if(C.method=="POST"&&u){e.enctype="multipart/form-data";if(e.encoding){e.encoding=e.enctype}}document.body.appendChild(e);e.submit();if(d.length){xui.arr.each(d,function(n,c){if(c=xui.getObject(n.id)){if(c["xui.UIProfile"]&&c.boxing()&&c.boxing().setUploadObj){c.boxing().setUploadObj(n.file)}}})}B=e=null;if(C.timeout>0){C._flag=xui.asyRun(function(){if(C&&!C._end){C._time()}},C.timeout)}},_clear:function(){var u=this,j=u.node,m=u.form,q=u.constructor,r=window,g=document.createElement("div"),h=u.id,l=q._pool;if(l[h]){l[h].length=0;delete l[h]}if(j&&r.postMessage){if(r.removeEventListener){r.removeEventListener("message",u._msgcb,false)}else{r.detachEvent("onmessage",u._msgcb)}u._msgcb=null}else{if(xui.browser.gek&&j){try{j.onload=null;var p=j.contentWindow.document;p.write(" ");p.close()}catch(o){}}}u.form=u.node=u.frm=null;if(j){g.appendChild(j.parentNode.removeChild(j))}if(m){g.appendChild(m.parentNode.removeChild(m))}g.innerHTML="";if(xui.isEmpty(l)){q._id=1}m=g=null}},Static:{$asFunction:1,method:"POST",_pool:{},_o:function(f){var c=this,d=c._pool[f],e=d[d.length-1];xui.tryF(e._onload)},_getDummy:function(m){m=m||window;var r=this,l,c,q=m.document,w=xui.ini,u=xui.browser,n=r.isCrossDomain;if(r.dummy){return r.dummy}if(w.dummy){return r.dummy=w.dummy}if(!n(w.path)){if(!q.getElementById("xui:img:bg")){c=q.createElement("img");c.id="xui:img:bg";c.src=w.img_bg;c.style.display="none";q.body.appendChild(c);c=null}}if(c=q.getElementById("xui:img:bg")){return r.dummy=c.src.split("#")[0]}else{l=q.getElementsByTagName("img");for(var h=0,g=l.length;h<g;h++){c=l[h];if(c.src&&!n(c.src)){return r.dummy=c.src.split("#")[0]}}if(u.gek){l=q.getElementsByTagName("link");for(var h=0,g=l.length;h<g;h++){c=l[h];if(c.rel=="stylesheet"&&!n(c.href)){return r.dummy=c.href.split("#")[0]}}}}try{if(m!=m.parent){if((m=m.parent)&&!n(""+m.document.location.href)){return r._getDummy(m)}}}catch(p){}return"/favicon.ico"},customQS:function(g){var f=this,h=f.constructor,e=h.callback,d=window;g[e]="window.name";if(window.postMessage){g[e]=g.parentDomain=d.location.origin||(d.location.protocol+"//"+d.location.hostname+(d.location.port?":"+d.location.port:""))}else{g[e]="window.name"}return g}}});new function(){xui.SAjax=xui.JSONP;xui.IAjax=xui.XDMI};Class("xui.SC",null,{Constructor:function(l,j,g,f,m,e){var h=arguments.callee.upper;if(h){h.call(this)}h=null;var d=xui.$cache.SC,c;if(c=d[l]||(d[l]=xui.get(window,l.split(".")))){xui.tryF(j,[l,null,f],c)}else{m=m||{};m.$cb=j;if(g){m.threadid=f}c=d[l]=xui.SC._call(l||"",m,g,e)}return c},Static:{$asFunction:1,__gc:function(c){xui.$cache.SC={}},get:function(d,c){return xui.get(c||window,(d||"").replace(/\]$/g,"").split(/[\[\]\.]+/))},_call:function(w,x,n,e){n=!!n;var h,q,c,g,m=[],u=xui.SC.get,j=xui.$cache.snipScript,l=function(C,D,B){var f=this,o,r=this.uri;if(C){if(!u(w)){if(f.$p){(f.$cache||j)[f.$tag]=C}else{try{xui.exec(C,w)}catch(A){throw A.name+": "+A.message+" "+f.$tag}}}}o=Class._last;Class._ignoreNSCache=Class._last=null;xui.tryF(f.$cb,[f.$tag,C,B],u(w)||o||{});if(!u(w)&&o&&o.KEY!=w){xui.asyRun(function(){throw"'"+w+"' doesn't in '"+r+"'. The last class '"+o.KEY+"' was triggered."})}},d=function(o){var f=this;xui.tryF(f.$cb,[null,null,f.threadid],f)};if(e||!(c=u(w))){if(!e&&(q=j[w])){n=false;l.call({$cb:x.$cb},q);delete j[w]}if(e||!(c=u(w))){x=x||{};g=xui.getPath(w,".js","js",x);x.$tag=w;Class._ignoreNSCache=1;Class._last=null;var p;if(n&&!x.$p){x.rspType="script";p=xui.JSONP}else{x.asy=n;p=xui.Ajax}p(g,xui.$rand+"="+xui.rand(),l,d,null,x).start();if(!n){c=u(w)}}}else{if(x.$cb){l.call(x)}}return c},loadSnips:function(j,d,m,c,f,p,h){if(!j||!j.length){xui.tryF(c,[f]);return}var n={},p=xui.merge(p||{},{$p:1,$cache:d||xui.$cache.snipScript});for(var g=0,e=j.length;g<e;g++){n[j[g]]=1}if(m||c){p.$cb=function(l){if(m){xui.tryF(m,arguments,this)}delete n[l||this.$tag];if(xui.isEmpty(n)){xui.tryF(c,[f]);c=null;xui.Thread.resume(f)}}}xui.Thread.suspend(f);for(var g=0,o;o=j[g++];){this._call(o,xui.merge({$tag:o},p,h),true)}},runInBG:function(g,h,l,c){var e=0,d,m,n=this,f=function(j){while(g.length>e&&(m=n.get(d=g[e++]))){}if(!m){n._call(d,{threadid:j},true)}if(g.length<e){xui.Thread(j).abort()}if(g.length==e){e++}};xui.Thread(null,[f],1000,h,l,c,true).start()},execSnips:function(c){var d,f=c||xui.$cache.snipScript;for(d in f){try{xui.exec(f[d],d)}catch(g){throw g}}f={}},groupCall:function(g,f,j,h,e,c){if(g){var d=this;d.execSnips();xui.Thread.suspend(h);d.loadSnips(g,0,j,function(){d.execSnips();xui.tryF(f,[h]);f=null;xui.Thread.resume(h)},null,e,c)}else{xui.tryF(f,[h])}}}});Class("xui.absBox",null,{Constructor:function(){var c=arguments.callee.upper;if(c){c.call(this)}c=null;this._nodes=[];this.Class=this.constructor},Before:function(d){var c=xui.absBox;if(c){(c=c.$type)[d.replace("xui.","")]=c[d]=d}},Instance:{__gc:function(){this.each(function(c){xui.tryF(c.__gc)});this._nodes=0},_get:function(c){var d=this._nodes;return xui.isNumb(c)?d[c]:d},_empty:function(){this._nodes.length=0;return this},get:function(c){return this._get(c)},size:function(){return this._nodes.length},_each:function(d,h,m){var e=this,f=e._nodes,c=f.length,g,o;if(m){for(g=c;g>=0;g--){if(o=f[g]){if(false===d.call(h||e,o,g)){break}}}}else{for(g=0;g<c;g++){if(o=f[g]){if(false===d.call(h||e,o,g)){break}}}}o=null;return e},each:function(c,d,e){return this._each(c,d,e)},isEmpty:function(){return !this._nodes.length},merge:function(g){if(this==xui.win||this==xui.doc||this==xui("body")){return this}var d=this,j=d.constructor,g=g._nodes,f=0,e,h=d._nodes;if(g.length){for(;e=g[f++];){h[h.length]=e}d._nodes=j._unique(h)}return d},reBoxing:function(f,c){var d=this,e=xui.absBox.$type[f||"Dom"];if(!e){return xui.UI.pack([])}if(e==d.KEY){return d}if(e=xui.SC(e)){return e.pack(d._nodes,c)}}},Static:{$abstract:true,$type:{},pack:function(c,d){var e=new this(false);e._nodes=!c?[]:d===false?xui.isArr(c)?c:[c]:typeof this._ensureValues=="function"?this._ensureValues(c):xui.isArr(c)?c:[c];e.n0=e._nodes[0];return e},_unique:function(c){var m={},e=[],j=0,d=c.length,g,f;for(;j<d;j++){e[j]=c[j]}c.length=0;j=0;for(;g=e[j++];){f=typeof g=="string"?g:g.$xid;if(!m[f]){m[f]=1;c.push(g)}}return c},plugIn:function(d,c){this.prototype[d]=c;return this}}});Class("xui.absProfile",null,{Constructor:function(){var c=arguments.callee.upper;if(c){c.call(this)}c=null;if(!this.$xid){this.$xid=xui.absProfile.$xid.next()}},Instance:{getId:function(){return this.$xid},link:function(e,f,d,c){return xui.absProfile.prototype.$link(this,e,f,d,c)},$link:function(c,g,h,f,d){var e="$"+c.$xid;f=f||c;if(g[e]){c.unLink(h)}g[e]=f;if(xui.isArr(g)){xui.arr.insertAny(g,f,d,true)}c._links[h]=g;return c},unLink:function(c){return xui.absProfile.prototype.$unLink(this,c)},$unLink:function(c,g){var f,d,e="$"+c.$xid;if(!c._links){return}if(!(f=c._links[g])){return}if(xui.isArr(f)){d=xui.arr.indexOf(f,f[e]);if(d!=-1){xui.arr.removeFrom(f,d)}}delete f[e];delete c._links[g];return d},unLinkAll:function(){return xui.absProfile.prototype.$unLinkAll(this)},$unLinkAll:function(d){var g="$"+d.$xid,c=d._links,f,e;for(e in c){f=c[e];if(xui.isArr(f)){xui.arr.removeValue(f,f[g])}delete f[g]}d._links={};return d},getModule:function(e){var d=this,f=function(h){if(h.moduleClass&&h.moduleXid){var g=xui.SC.get(h.moduleClass);if(g&&(g=g.getInstance(h.moduleXid))){return f(g)}}return h},c;if(d.moduleClass&&d.moduleXid){if(c=xui.SC.get(d.moduleClass)){if(c=c.getInstance(d.moduleXid)){return e?f(c):c}}}},getParent:function(){return this.parent&&this.parent.boxing()},getChildrenId:function(){return this.childrenId}},Static:{$xid:new xui.id,$abstract:true}});Class("xui.Profile","xui.absProfile",{Constructor:function(l,h,d,c,f,m,n){var g=arguments.callee.upper,e=xui.toArr(arguments);g.apply(this,e);g=null;var j=this;xui.merge(j,n);j.key=h||j.key||"";j.alias=d||j.alias||"",j.properties=f?xui.copy(f):(j.properties||{});j.events=m?xui.copy(m):(j.events||{});j.host=l||j.host||j;j.Class=j.constructor;j.box=c||j.box;if(j.events){j.setEvents(j.events);delete j.events}j._links={}},Instance:{setEvents:function(d,e){var c=this.box.$EventHandlers;if(xui.isHash(d)){return xui.merge(this,d,"all",function(g,f){return c[f]})}else{if(c[d]){this[d]=e}}},getEvents:function(e){if(e){return this[e]}else{var c=this,d,f={};xui.each(c.box.$EventHandlers,function(h,g){if(c[g]){f[g]=c[g]}});return f}},getProperties:function(c){if(this._getProperties){this.properties=this._getProperties()}var d=this.properties;return c?d[c]:xui.copy(d)},setProperties:function(c,d){if(xui.isHash(c)){xui.merge(c,this.box.$DataStruct,function(f,e){if(!(e in c)){c[e]=xui.isObj(f)?xui.clone(f):f}});this.properties=c}else{this.properties[c]=d}if(this.propSetAction){this.propSetAction(this.properties)}},_applySetAction:function(d,g,h,f,c,e){return d.call(this,g,h,f,c,e)},__gc:function(){var c=this;if(c.$beforeDestroy){xui.each(c.$beforeDestroy,function(e){xui.tryF(e,[],c)});delete c.$beforeDestroy}xui.tryF(c.$ondestory,[],c);if(c.onDestroy){c.boxing().onDestroy()}if(c.destroyTrigger){c.destroyTrigger()}var d;if(c.alias&&c.host&&(d=c.host[c.alias])&&(d=d._nodes)&&(d.length===0||d.length===1&&d[0]==c)){delete c.host[c.alias]}c.unLinkAll();xui.tryF(c.clearCache,[],c);var d=xui.get(c,["box","_namePool"]);if(d){delete d[c.alias]}c.destroyed=true;if(c.$afterDestroy){xui.each(c.$afterDestroy,function(e){xui.tryF(e,[],c)});delete c.$afterDestroy}if(c.afterDestroy){c.boxing().afterDestroy(c)}xui.breakO([c.properties,c.events,c],2);c.destroyed=true},boxing:function(){var c=this,d;if(!c.box){return null}if(!((d=c.Instace)&&d.get(0)==c&&d._nodes.length==1)){d=c.Instace=c.box.pack([c],false)}return d},serialize:function(l,q){var m,n=this,g=(m=n.box._beforeSerialized)?m(n):n,d={alias:g.alias,key:g.key,host:g.host};if(d.host===n){delete d.host}else{if(g.host&&!q){if(l!==false){d.host="@this"}else{delete d.host}}}var j={},f=g.box.$DataStruct,e=xui.absObj.$specialChars;xui.merge(j,g.properties,function(p,c){return(c in f)&&f[c]!==p&&!e[c.charAt(0)]});if(!xui.isEmpty(j)){d.properties=j}if(!xui.isEmpty(m=this.getEvents())){d.events=m}var h=g.box.$EventHandlers;xui.filter(d.events,function(p,c){return p!=h[c]});if(xui.isEmpty(d.events)){delete d.events}return l===false?d:xui.serialize(d)}}});Class("xui.absObj","xui.absBox",{Constructor:function(){var d=arguments.callee.upper,c=xui.toArr(arguments);d.apply(this,c);d=null;if(c[0]!==false&&typeof this._ini=="function"){return this._ini.apply(this,c)}},Before:function(d,c,e){xui.absBox.$type[d]=d;return true},After:function(){var A=this,o=arguments.callee,w,x,f,r,d,h,g,e,q,c,p;A._nameId=0;A._namePool={};A._nameTag=A.$nameTag||(A.KEY.replace(/\./g,"_").toLowerCase());A._cache=[];d=o.a1||(o.a1=xui.toArr("$Keys,$DataStruct,$EventHandlers,$DataModel"));for(g=0;q=d[g++];){f={};if((x=A.$parent)&&(h=x.length)){while(h--){xui.merge(f,x[h][q])}}A[q]=f}A.setDataModel(A.DataModel);delete A.DataModel;A.setEventHandlers(A.EventHandlers);delete A.EventHandlers;d=o.a5||(o.a5=xui.toArr("RenderTrigger,LayoutTrigger"));for(g=0;q=d[g++];){w=[];if((x=A.$parent)&&(e=x.length)){for(h=0;h<e;h++){r=x[h];if(r=r["$"+q]){w.push.apply(w,r)}}}if(A[q]){w.push(A[q])}xui.arr.stableSort(w,function(j,l){j=j.$order||0;l=l.$order||0;return j>l?1:j==l?0:-1});A["$"+q]=w;delete A[q]}},Static:{$abstract:true,$specialChars:{_:1,$:1},DataModel:{name:"",desc:"",tag:"",tagVar:{ini:{}},propBinder:{hidden:1,ini:{}},dataBinder:{ini:"",set:function(d){var c=this,f=c.properties,e=f.dataBinder;if(e){xui.DataBinder._unBind(e,c)}f.dataBinder=d;xui.DataBinder._bind(d,c)}},dataField:{ini:""}},get:function(c){return this.pack([this._cache[c||0]])},getAll:function(){return this.pack(this._cache)},pickAlias:function(){return xui.absObj.$pickAlias(this)},$pickAlias:function(d){var e,f=d._namePool,c=d._nameTag;while(f[e=(c+(++d._nameId))]){}return e},setDataModel:function(p){var A=this,w=xui.absObj.$specialChars,g=A.$DataStruct,u=A.$DataModel,d=A.prototype,q,l,x,e,f,h,c;for(q in p){if(!u[q]){u[q]={}}e=p[q];if(null===e||undefined===e){c=xui.str.initial(q);delete g[q];delete u[q];if(d[l="get"+c]&&d[l].$auto$){delete d[l]}if(d[l="set"+c]&&d[l].$auto$){delete d[l]}}else{x=typeof e;if(x!="object"||e.constructor!=Object){e={ini:e}}g[q]=("ini" in e)?e.ini:(q in g)?g[q]:"";x=u[q];for(l in x){if(!(l in e)){e[l]=x[l]}}u[q]=e}}xui.each(p,function(r,m){if(null===r||undefined===r||w[m.charAt(0)]){return}c=xui.str.initial(m);f="set"+c;if(r.set!==null&&!(r&&(r.readonly||r.inner))){var j=r.set;h=d[f];d[f]=(typeof j!="function"&&typeof h=="function")?h:Class._fun(function(D,C,o,B){return this.each(function(F){if(!F.properties){return}var H,G;if(!C){if(u[m]&&u[m]["$spaceunit"]){if(F.$forceu&&D!="auto"){H=xui.$us(F);D=F.$forceu(D,H==2?"em":H==-2?"px":null)}}}if(F.properties[m]===D&&!C){return}if(F.$beforePropSet&&false===F.$beforePropSet(m,D,C,o,B)){return}else{var I=F.properties[m];if(F.beforePropertyChanged&&false===F.boxing().beforePropertyChanged(F,m,D,I)){return}if(typeof j=="function"){j.call(F,D,C,o,B)}else{var E=xui.get(F.box.$DataModel,[m,"action"]);F.properties[m]=D;if(typeof E=="function"&&F._applySetAction(E,D,I,C,o,B)===false){F.properties[m]=I}}if(F.afterPropertyChanged){F.boxing().afterPropertyChanged(F,m,D,I)}if(F.$afterPropertyChanged){xui.tryF(F.$afterPropertyChanged,[F,m,D,I],F)}}})},f,A.KEY,null,"instance");if(d[f]!==h){d[f].$auto$=1}}else{delete d[f]}f="get"+c;if(!(r&&r.inner)){var n=r.get;h=d[f];d[f]=(typeof n!="function"&&typeof h=="function")?h:Class._fun(function(){if(typeof n=="function"){return n.apply(this.get(0),arguments)}else{return this.get(0).properties[m]}},f,A.KEY,null,"instance");if(d[f]!==h){d[f].$auto$=1}}else{delete d[f]}});return A},setEventHandlers:function(d){var c=this;xui.each(d,function(h,e){if(null===h){delete c.$EventHandlers[e];delete c.prototype[e]}else{c.$EventHandlers[e]=h;var g=function(x){var q=arguments.length;if(q==1&&(typeof x=="function"||typeof x=="string"||xui.isHash(x)||xui.isArr(x))){return this.each(function(j){if(j.renderId){j.clearCache()}if(j.box._addEventHanlder){j.box._addEventHanlder(j,e,x)}j[e]=x})}else{if(q==1&&null===x){return this.each(function(j){j.clearCache();if(j.box._removeEventHanlder){j.box._removeEventHanlder(j,e,j[e])}delete j[e]})}else{var w=[],B=this.get(0);if(B){var E=B[e],D=B.host||B,A=B.$holder,u,m,f;if(E&&(!xui.isArr(E)||E.length)){if(B.$inDesign){return}if(arguments[0]!=B){w[0]=B}for(u=0;u<q;u++){w[w.length]=arguments[u]}B.$lastEvent=e;if(!xui.isArr(E)){E=[E]}q=E.length;if(xui.isNumb(u=E[0].event)){w[u]=xui.Event.getEventPara(w[u])}var C={};var p=0,x=function(l){if(xui.isStr(this)){C[this+""]=l||""}for(u=p;u<q;u++){p=u+1;m=E[u];if(D&&typeof m=="string"){m=D[m]}if(A&&typeof m=="string"){m=A[m]}if(typeof m=="function"){f=xui.tryF(m,w,D)}else{if(xui.isHash(m)){if("onOK" in m||"onKO" in m){var j=function(o,n){if(x){x.apply(o,n)}};if("onOK" in m){onOK=(m.params||(m.params=[]))[parseInt(m.onOK,10)||0]=function(){j("okData",arguments)}}if("onKO" in m){(m.params||(m.params=[]))[parseInt(m.onKO,10)||0]=function(){j("koData",arguments)}}if(false===(f=xui.pseudocode.exec(m,w,D,C,j))){p=C=x=null}break}else{if(false===(f=xui.pseudocode.exec(m,w,D,C))){p=u;break}}}}}if(p==u){p=C=x=null}return f};return x()}}}}};g.$event$=1;g.$original$=h.$original$||c.KEY;g.$name$=e;g.$type$="event";c.plugIn(e,g)}});return c},unserialize:function(e,g){if(typeof e=="string"){e=xui.unserialize(e)}var d=function(f){if(xui.isArr(f)){f=f[0]}delete f.serialId;if(f.children){xui.arr.each(f.children,d)}},c=[];xui.arr.each(e,function(f){if(!g){d(f)}c.push((new (xui.SC(f.key))(f)).get(0))});return this.pack(c,false)}},Instance:{clone:function(){var c=[],e=arguments,d=function(g){delete g.alias;for(var f=0;f<e.length;f++){delete g[e[f]]}if(g.children){for(var f=0,h;h=g.children[f];f++){d(h[0])}}};this.each(function(f){f=f.serialize(false,true);d(f);c.push(f)});return this.constructor.unserialize(c)},serialize:function(d,e){var c=[];this.each(function(f){c[c.length]=f.serialize(false,e)});return d===false?c:c.length==1?" new "+c[0].key+"("+xui.serialize(c[0])+")":"xui.UI.unserialize("+xui.serialize(c)+")"},getProperties:function(d){var e={},f=this.get(0),j=f.properties,g;if(d===true){return xui.copy(j)}else{if(typeof d=="string"){return j[d]}else{for(var c in j){g="get"+xui.str.initial(c);if(typeof this[g]=="function"){e[c]=this[g].call(this)}}return e}}},setProperties:function(c,f,e){if(typeof c=="string"){var d={};d[c]=f;c=d}return this.each(function(g){xui.each(c,function(j,h){var m="set"+xui.str.initial(h),l=g.boxing();if(l&&typeof l[m]=="function"){l[m].call(l,j,!!e)}else{g.properties[h]=j}})})},getEvents:function(c){return this.get(0).getEvents(c)},setEvents:function(c,e){if(typeof c=="string"){var d={};d[c]=e;c=d}return this.each(function(g){var f=g.boxing();xui.each(c,function(j,h){if(typeof f[h]=="function"){f[h].call(f,j)}})})},alias:function(c){return c?this.setAlias(c):this.getAlias()},host:function(d,c){return d?this.setHost(d,c):this.getHost()},setHost:function(d,c){return this._setHostAlias(d,c)},_setHostAlias:function(g,f){var d=this,h=this.get(0),c=h.alias;f=f||h.alias;if(c){if(h.host&&h.host!==h){try{delete h.host[c]}catch(j){h.host[c]=undefined}if(h.host._ctrlpool){delete h.host._ctrlpool[c]}}delete d.constructor._namePool[c]}d.constructor._namePool[h.alias=f]=1;if(h.box&&h.box._syncAlias){h.box._syncAlias(h,c,f)}if(g){h.host=g}if(h.host&&h.host!==h){h.host[f]=d;if(h.host._ctrlpool){h.host._ctrlpool[f]=d.get(0)}}return d},setAlias:function(c){return this._setHostAlias(null,c)},getAlias:function(){return this.get(0).alias},getHost:function(){return this.get(0).host},reBindProp:function(h,o){var l=this,d,f,m,c,j=function(){l.each(function(e){d=e.properties;if(d.propBinder&&!xui.isEmpty(d.propBinder)){f=e.boxing();xui.each(d.propBinder,function(p,q){if(xui.isFun(p)){c=p(e);if(q=="CA"){f.setCustomAttr(c)}else{if(q=="CC"){f.setCustomClass(c)}else{if(q=="CS"){f.setCustomStyle(c)}else{if(xui.isFun(f[m="set"+xui.str.initial(q)])){f[m](c,true)}}}}}})}})};if(!o){var n;if(window.get){n=get}window.get=function(e){return xui.SC.get(e,h)};try{j()}catch(g){}finally{window.get=n}}else{j()}return this}}});Class("xui.Timer","xui.absObj",{Instance:{_ini:function(g,m,l){var n=this,h=n.constructor,d,o,f,j;if(g&&g["xui.Profile"]){d=g;f=d.alias||h.pickAlias()}else{if(g&&g.key&&xui.absBox.$type[g.key]){o=g;g=null;f=o.alias;f=h.pickAlias()}else{f=h.pickAlias()}d=new xui.Profile(l,n.$key,f,h,g,m,o)}d._n=d._n||[];for(var e in (j=h.$DataStruct)){if(!(e in d.properties)){d.properties[e]=typeof j[e]=="object"?xui.copy(j[e]):j[e]}}d.link(h._cache,"self").link(xui._pool,"xui");n._nodes.push(d);d.Instace=n;n.n0=d;xui.asyRun(function(){if(d&&d.box){d.boxing().start()}});return n},destroy:function(){this.each(function(c){if(c._threadid){xui.Thread(c._threadid).abort()}c.__gc()})},start:function(){return this.each(function(d){if(d.$inDesign){return}var f=d.properties,e=d.boxing(),c=xui.Thread.repeat(function(g){if(d.onTime&&false===e.onTime(d,g)){return false}},f.interval,function(g){d.onStart&&e.onStart(d,g)},function(g){d.onEnd&&e.onEnd(d,g)});d._threadid=c.id})},suspend:function(){return this.each(function(c){if(c._threadid){xui.Thread(c._threadid).suspend()}c.onSuspend&&box.onSuspend(c,threadId)})},getParent:function(){return this.parent&&this.parent.boxing()},getChildrenId:function(){return this.childrenId}},Static:{_objectProp:{tagVar:1,propBinder:1},_beforeSerialized:function(d){var f={};xui.merge(f,d,"all");var e=f.properties=xui.clone(d.properties,true);if(d.box._objectProp){for(var c in d.box._objectProp){if((c in e)&&e[c]&&xui.isHash(e[c])&&xui.isEmpty(e[c])){delete e[c]}}}return f},DataModel:{interval:1000},EventHandlers:{onTime:function(c,d){},onStart:function(c,d){},onSuspend:function(c,d){},onEnd:function(c,d){}}}});Class("xui.APICaller","xui.absObj",{Instance:{_ini:function(g,n,m){var o=this,h=o.constructor,d,p,j=h._namePool,f,l;if(g&&g["xui.Profile"]){d=g;f=d.alias||h.pickAlias()}else{if(g&&g.key&&xui.absBox.$type[g.key]){p=g;g=null;f=p.alias;f=(f&&!j[f])?f:h.pickAlias()}else{f=h.pickAlias()}d=new xui.Profile(m,o.$key,f,h,g,n,p)}j[f]=1;d._n=d._n||[];for(var e in (l=h.$DataStruct)){if(!(e in d.properties)){d.properties[e]=typeof l[e]=="object"?xui.copy(l[e]):l[e]}}d.link(h._cache,"self").link(xui._pool,"xui");o._nodes.push(d);d.Instace=o;o.n0=d;if(!d.name){o.setName(f)}return o},destroy:function(){this.each(function(d){var e=d.box,c=d.properties.name;delete e._pool[c];d.__gc()})},setHost:function(e,d){var c=this;if(e&&d){c.setName(d)}return arguments.callee.upper.apply(c,arguments)},invoke:function(D,j,l,N,h,u,w){var P=this,f=P.constructor,G=P.get(0),p=G.properties;var F=p.responseType,L=p.requestType,r=p.requestId,m=p.queryURL,C=p.proxyType.toLowerCase(),B=p.queryUserName,n=p.queryPasswrod,S=xui.copy(p.queryArgs),c=p.oAuth2Token,q=xui.copy(p.queryOptions),A=xui.copy(p.queryHeader),x=p.requestDataSource,R=p.responseDataTarget;m=xui.adjustVar(m);if(C=="sajax"){C="jsonp"}else{if(C=="iajax"){C="xdmi"}}if(L=="FORM"||L=="JSON"){S=typeof S=="string"?xui.unserialize(S):S}if(!S){S={}}if(p.avoidCache){var Q=0,O="_rand_";while(S.hasOwnProperty(O)){O="_rand_"+ ++Q}S[O]=xui.rand()}if(x&&x.length){for(var Q in x){var M=x[Q],K;switch(M.type){case"databinder":if(K=xui.DataBinder.getFromName(M.name)){if(!K.updateDataFromUI()){return}else{if(M.path){xui.set(S,M.path.split("."),K.getData())}else{xui.merge(S,K.getData(),"without")}}}break;case"form":if((K=xui.get(G,["host",M.name]))&&K.Class["xui.absContainer"]&&K.getRootNode()){if(!K.checkValid()||!K.checkRequired()){return}else{if(M.path){xui.set(S,M.path.split("."),K.getFormValues())}else{xui.merge(S,K.getFormValues(),"without")}}}break}}}if(G.beforeInvoke&&false===G.boxing().beforeInvoke(G,r)){return}var e={header:{}};if(!xui.isEmpty(A)){xui.merge(e.header,A)}if(q.header&&!xui.isEmpty(q.header)){xui.merge(e.header,q.header);delete q.header}if(F=="SOAP"||L=="SOAP"){if(!f.WDSLCache){f.WDSLCache={}}if(!f.WDSLCache[m]){var J=xui.SOAP.getWsdl(m,function(o){if(G.afterInvoke){G.boxing().afterInvoke(G,o,r||this.uid)}if(G.onError){G.boxing().onError(G,o)}xui.tryF(j,arguments,this);xui.tryF(N,arguments,this)});if(J){f.WDSLCache[m]=J}else{return}}}switch(F){case"TEXT":e.rspType="text";case"JSON":e.rspType="json";break;case"XML":C="ajax";e.rspType="xml";break;case"SOAP":C="ajax";e.rspType="xml";var H=xui.SOAP.getNameSpace(f.WDSLCache[m]),d=((H.lastIndexOf("/")!=H.length-1)?H+"/":H)+(S.methodName||"");e.header.SOAPAction=d;break}switch(L){case"FORM":S=typeof S=="string"?xui.unserialize(S):S;break;case"JSON":e.reqType="json";if(p.queryMethod=="auto"){e.method="POST"}S=typeof S=="string"?S:xui.serialize(S);break;case"XML":e.reqType="xml";C="ajax";e.method="POST";if(B&&queryPassword){e.username=B;e.password=queryPassword;e.header.Authorization="Basic "+f._toBase64(B+":"+queryPassword)}S=typeof S=="string"?S:xui.XMLRPC.wrapRequest(S);break;case"SOAP":e.reqType="xml";C="ajax";e.method="POST";if(B&&queryPassword){e.username=B;e.password=queryPassword;e.header.Authorization="Basic "+f._toBase64(B+":"+queryPassword)}S=typeof S=="string"?S:xui.SOAP.wrapRequest(S,f.WDSLCache[m]);break}if(c){e.header.Authorization="Bearer "+c}if(C!="ajax"){e.asy=true}if(C=="jsonp"){e.method="GET"}w=w||{};if(!("asy" in w)){w.asy=!!p.queryAsync}if(!("method" in w)&&p.queryMethod!="auto"){w.method=p.queryMethod}if(!("onEnd" in w)){w.onEnd=N}if(!("onStart" in w)){w.onStart=l}xui.merge(w,q);xui.merge(w,e,"all");w.proxyType=C;if(xui.isEmpty(w.header)){delete w.header}var T=xui.APICaller.getMocker();if(T){var g=S.replace(T.remoteSericeURL,"").replace(/^[/]+/,"").replace(/[/]+$/,"");if((T.blacklist&&!T.blacklist[g])||(T.whitelist&&T.whitelist[g])){m=T.mockerURL.replace(/[/]+$/,"")+"/"+g}}var I={},K;if(!xui.isEmpty(p.fakeCookies)){w.$onStart=function(){xui.each(p.fakeCookies,function(U,o){if(xui.isSet(K=xui.Cookies.get(o))){I[o]=K;xui.Cookies.remove(o)}});xui.Cookies.set(p.fakeCookies,1,"/")}}if(!xui.isEmpty(p.fakeCookies)){w.$onEnd=function(){xui.each(p.fakeCookies,function(U,o){xui.Cookies.remove(o)});xui.Cookies.set(I)}}var E=xui._getrpc(m,S,w).apply(null,[m,S,function(U){var o;if(!xui.isHash(U)&&!xui.isStr(U)){if(F=="XML"){U=xui.XMLRPC.parseResponse(U)}else{if(F=="SOAP"){U=xui.SOAP.parseResponse(U,S.methodName,f.WDSLCache[m])}}}if(G.afterInvoke){o=G.boxing().afterInvoke(G,U,r||this.uid);if(xui.isSet(o)){U=o}o=null}if(R&&R.length){xui.arr.each(R,function(X){var W=X.path?xui.get(U,X.path.split(".")):U,V;switch(X.type){case"alert":W=xui.stringify(W);if(xui.Coder){W=xui.Coder.formatText(W)}alert(W);break;case"log":xui.log(W);break;case"databinder":if(V=xui.DataBinder.getFromName(X.name)){V.setData(W);V.updateDataToUI()}break;case"form":if((V=xui.get(G,["host",X.name]))&&V.Class["xui.absContainer"]&&V.getRootNode()){V.setFormValues(W)}break}})}if(G.onData){G.boxing().onData(G,U,r||this.uid)}xui.tryF(D,arguments,this)},function(o){if(G.afterInvoke){G.boxing().afterInvoke(G,o,r||this.uid)}if(R&&R.length){xui.arr.each(R,function(V,U){switch(V.type){case"alert":o=xui.stringify(o);if(xui.Coder){o=xui.Coder.formatText(o)}alert(o);break;case"log":xui.log(o);break}})}if(G.onError){G.boxing().onError(G,o,r||this.uid)}xui.tryF(j,arguments,this)},u,w]);if(h=="quiet"){E.start()}else{if(h=="return"){return E}else{xui.observableRun(function(o){E.threadid=o;E.start()})}}}},Static:{WDSLCache:{},$nameTag:"api_",_pool:{},_objectProp:{tagVar:1,propBinder:1,queryArgs:1,queryHeader:1,queryOptions:1,fakeCookies:1,requestDataSource:1,responseDataTarget:1},destroyAll:function(){this.pack(xui.toArr(this._pool,false),false).destroy();this._pool={}},getFromName:function(c){var d=this._pool[c];return d&&d.boxing()},_toBase64:function(n){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=[],g=0,f,e,d,o,m,l,j;do{f=n.charCodeAt(g++);e=n.charCodeAt(g++);d=n.charCodeAt(g++);o=f>>2;m=((f&3)<<4)|(e>>4);l=((e&15)<<2)|(d>>6);j=d&63;if(isNaN(e)){l=j=64}else{if(isNaN(d)){j=64}}h.push(c.charAt(o)+c.charAt(m)+c.charAt(l)+c.charAt(j))}while(g<n.length);return h.join("")},_beforeSerialized:function(d){var f={};xui.merge(f,d,"all");var e=f.properties=xui.clone(d.properties,true);for(var c in d.box._objectProp){if((c in e)&&e[c]&&(xui.isHash(e[c])||xui.isArr(e[c]))&&xui.isEmpty(e[c])){delete e[c]}}return f},DataModel:{dataBinder:null,dataField:null,requestId:"",queryAsync:true,queryURL:"",avoidCache:true,oAuth2Token:"",queryUserName:"",queryPassword:"",queryMethod:{ini:"auto",listbox:["auto","GET","POST","PUT","DELETE"]},requestType:{ini:"FORM",listbox:["FORM","JSON","XML","SOAP"]},responseType:{ini:"JSON",listbox:["JSON","TEXT","XML","SOAP"]},requestDataSource:{ini:[]},responseDataTarget:{ini:[]},queryArgs:{ini:{}},queryHeader:{ini:{}},queryOptions:{ini:{}},fakeCookies:{ini:{}},proxyType:{ini:"auto",listbox:["auto","AJAX","JSONP","XDMI"]},name:{set:function(h){var l=this,j=l.properties.name,m=l.box,d=m._pool,e=d[j],f=d[h],g;d[l.properties.name=h]=l;if(f&&!e){l._n=f._n}if(e){delete d[j]}}},proxyInvoker:{inner:true,trigger:function(){var d=this.get(0),c=d.properties.responseDataTarget;d.properties.responseDataTarget=[];this.invoke(function(e){d.properties.responseDataTarget=c;e=xui.stringify(e);if(xui.Coder){e=xui.Coder.formatText(e)}alert(e)},function(e){d.properties.responseDataTarget=c;e=xui.stringify(e);if(xui.Coder){e=xui.Coder.formatText(e)}alert(e)})}}},EventHandlers:{beforeInvoke:function(c,d){},afterInvoke:function(d,c,e){},onData:function(d,c,e){},onError:function(d,c,e){}},getMocker:function(){return this._Mocker},setMocker:function(c){this._Mocker=c}}});Class("xui.DataBinder","xui.absObj",{Instance:{_ini:function(g,n,m){var o=this,h=o.constructor,d,p,j=h._namePool,f,l;if(g&&g["xui.Profile"]){d=g;f=d.alias||h.pickAlias()}else{if(g&&g.key&&xui.absBox.$type[g.key]){p=g;g=null;f=p.alias;f=(f&&!j[f])?f:h.pickAlias()}else{f=h.pickAlias()}d=new xui.Profile(m,o.$key,f,h,g,n,p)}j[f]=1;d._n=d._n||[];for(var e in (l=h.$DataStruct)){if(!(e in d.properties)){d.properties[e]=typeof l[e]=="object"?xui.copy(l[e]):l[e]}}d.link(h._cache,"self").link(xui._pool,"xui");o._nodes.push(d);d.Instace=o;o.n0=d;if(!d.name){o.setName(f)}return o},destroy:function(){this.each(function(d){var e=d.box,c=d.properties.name;xui.arr.each(d._n,function(f){if(f){e._unBind(c,f)}});delete e._pool[c];d.__gc()})},setHost:function(e,d){var c=this;if(e&&d){c.setName(d)}return arguments.callee.upper.apply(c,arguments)},isDirtied:function(){var d=this.constructor._getBoundElems(this.get(0));for(var f=0,c=d.length;f<c;f++){var g=d[f],e;if(g.box["xui.absValue"]){e=g.boxing();if((e.getUIValue()+" ")!==(e.getValue()+" ")){return true}}}return false},checkValid:function(d){var c=true;xui.absValue.pack(this.constructor._getBoundElems(this.get(0)),false).each(function(e){if(!e.boxing().checkValid()){if(!d){if(!e.beforeInputAlert||false!==e.boxing().prf.beforeInputAlert(profile,e,"invalid")){xui.alert("$inline.invalid",xui.getRes("$inline.invalid")+(e.properties.labelCaption?(" : "+e.properties.labelCaption):""),function(){if(e&&e.renderId){e.boxing().activate()}})}return c=false}c=false}});return c},checkRequired:function(d){var c=true;xui.absValue.pack(this.constructor._getBoundElems(this.get(0)),false).each(function(e){if(e.properties.required&&(!(i=e.boxing().getUIValue()))&&i!==0){if(!d){if(!e.beforeInputAlert||false!==e.boxing().prf.beforeInputAlert(profile,e,"required")){xui.alert("$inline.required",xui.getRes("$inline.required")+(e.properties.labelCaption?(" : "+e.properties.labelCaption):""),function(){if(e&&e.renderId){e.boxing().activate()}})}return c=false}c=false}});return c},getUI:function(c){var d;if(!c){d=xui.UI.pack(this.constructor._getBoundElems(this.get(0)),false)}else{xui.arr.each(this.constructor._getBoundElems(this.get(0)),function(e){var f=e.properties;if((f.dataField||f.name||e.alias)==c){d=e.boxing();return false}})}return d},getUIValue:function(g,f){var c=this,d=c.get(0),e={};xui.arr.each(this.constructor._getBoundElems(d),function(l){if(!l.box["xui.absValue"]){return}var m=l.properties,h=l.boxing(),j=h.getUIValue();if(!f||(j+" ")!==(h.getValue()+" ")){if(g&&h.getCaption){e[m.dataField||m.name||l.alias]={value:j,caption:h.getCaption()}}else{e[m.dataField||m.name||l.alias]=j}}});return e},getDirtied:function(c){return this.getUIValue(c,true)},getData:function(d,g,c){var f=this.get(0);if(f.$inDesign||g){f.properties.data={};this.updateDataFromUI(false,false,false,null,null,c,false)}var e=f.properties.data;return xui.isSet(d)?e[d]:e},setData:function(c,f,e){var d=this.get(0),g=d.properties;if(c===false){xui.each(g.data,function(j,h){g.data[h]=null})}else{if(!xui.isSet(c)){g.data={}}else{if(xui.isHash(c)){g.data=c}else{g.data[c]=f}}}if(d.$inDesign||e){this.updateDataToUI()}return this},updateValue:function(){xui.absValue.pack(this.constructor._getBoundElems(this.get(0)),false).updateValue();return this},updateDataFromUI:function(l,p,o,j,c,m,f){var n=this,g=n.get(0),e=g.properties,d={},h;if(!m){if(!n.checkValid()){return}if(!n.checkRequired()){return}}xui.merge(d,e.data,function(q,r){return !c||c===r||(xui.isArr(c)?xui.arr.indexOf(c,r)!=-1:false)});xui.arr.each(n.constructor._getBoundElems(g),function(x){var q=x.properties,B=x.box.$EventHandlers,G=q.dataField||q.name||x.alias;if(!c||c===G||(xui.isArr(c)?xui.arr.indexOf(c,G)!=-1:false)){var E=x.boxing(),F,r=x.box["xui.absValue"]?E.getUIValue(xui.isBool(o)?o:x.__returnArray):null;if(xui.isHash(d[G])){var u=d[G].properties,C=d[G].theme,w=d[G].CC,A=d[G].CA,D=d[G].CS;if(u){delete d[G].properties}if(C){delete d[G].theme}if(A){delete d[G].CA}if(w){delete d[G].CC}if(D){delete d[G].CS}xui.filter(d[G],function(I,H){return !!(H in q)});if(!xui.isEmpty(d[G])){xui.each(d[G],function(I,H){if(H in q){d[G][H]=q[H]}})}if(xui.isHash(u)){xui.filter(u,function(I,H){return H in q&&!(H in d[G])});if(!xui.isEmpty(u)){xui.each(u,function(I,H){if(H in q){u[H]=q[H]}});d[G].properties=u}}if(C){d[G].theme=x.theme}if(A){d[G].CA=xui.clone(x.CA,true)}if(w){d[G].CC=xui.clone(x.CC,true)}if(D){d[G].CS=xui.clone(x.CS,true)}if("caption" in q&&("caption" in d[G]||p)&&E.getCaption){if(u&&"caption" in u){u.caption=E.getCaption()}else{d[G].caption=E.getCaption()}}if(xui.isDefined(r)&&"value" in q){if(u&&"value" in u){u.value=r}else{d[G].value=r}}}else{if(x.box["xui.UI.ComboInput"]&&(q.type=="file")){d[G]=x}else{if(p&&"caption" in q){F=typeof(E.getCaption)=="function"?E.getCaption():q.caption;if((!F&&!r)||F==r){d[G]=r}else{d[G]={value:r,caption:F}}}else{d[G]=r}}}if(l!==false&&x.renderId&&x.box["xui.absValue"]){E.updateValue()}}});if(j){d=xui.tryF(j,[d,g],this)}if(!f&&g.afterUpdateDataFromUI){h=this.afterUpdateDataFromUI(g,d);if(xui.isHash(h)){d=h}h=null}xui.merge(g.properties.data,d,"all");return true},updateDataToUI:function(q,d,h){var A,g,x,r,w,l,j,n,u=this,m=u.get(0),f=m.properties,e={},o;xui.merge(e,f.data,function(c,p){return !d||d===p||(xui.isArr(d)?xui.arr.indexOf(d,p)!=-1:false)});if(q){e=xui.tryF(q,[e,m],u)}if(!h&&m.beforeUpdateDataToUI){o=u.beforeUpdateDataToUI(m,e);if(xui.isHash(o)){e=o}o=null}xui.arr.each(u.constructor._getBoundElems(m),function(c){g=c.properties;n=c.box.$EventHandlers;A=g.dataField||g.name||c.alias;if(!d||d===A||(xui.isArr(d)?xui.arr.indexOf(d,A)!=-1:false)){if(e&&A in e){x=xui.clone(e[A],null,2);j=r=null;w=c.boxing();if(xui.isHash(x)){if(l=x.properties){xui.filter(l,function(B,p){return p in g});r=xui.isSet(l.caption)?l.caption:null;j=xui.isSet(l.value)?l.value:null;delete l.caption;delete l.value;if(!xui.isEmpty(l)){w.setProperties(l)}delete x.properties}if(l=x.theme){if(typeof(w.setTheme)=="function"){w.setTheme(l)}delete x.theme}if(l=x.CS){if(!xui.isEmpty(l)){w.setCustomStyle(l)}delete x.CS}if(l=x.CC){if(!xui.isEmpty(l)){w.setCustomClass(l)}delete x.CC}if(l=x.CA){if(!xui.isEmpty(l)){w.setCustomAttr(l)}delete x.CA}if(!xui.isEmpty(x)){xui.filter(x,function(B,p){return(p in g)||(p in x)});if(!xui.isEmpty(x)){r=xui.isSet(r)?r:xui.isSet(x.caption)?x.caption:null;j=xui.isSet(j)?j:xui.isSet(x.value)?x.value:null;delete x.caption;delete x.value;if(!xui.isEmpty(x)){w.setProperties(x)}}}}else{j=x}if(xui.isDefined(j)&&xui.isFun(w.resetValue)){w.resetValue(j);c.__returnArray=xui.isArr(j)}if(xui.isDefined(r)&&xui.isFun(w.setCaption)){xui.tryF(w.setCaption,[r,true],w)}}}});return u}},Static:{$nameTag:"databinder_",_pool:{},_objectProp:{tagVar:1,propBinder:1,data:1},destroyAll:function(){this.pack(xui.toArr(this._pool,false),false).destroy();this._pool={}},getFromName:function(c){var d=this._pool[c];return d&&d.boxing()},_beforeSerialized:function(d){var f={};xui.merge(f,d,"all");var e=f.properties=xui.clone(d.properties,true);for(var c in d.box._objectProp){if((c in e)&&e[c]&&(xui.isHash(e[c])||xui.isArr(e[c]))&&xui.isEmpty(e[c])){delete e[c]}}return f},_getBoundElems:function(d){var c=[];xui.arr.each(d._n,function(e){if(e.behavior.PanelKeys){xui.absValue.pack(e.boxing().getChildren(null,true)).each(function(f){c.push(f)})}else{if(e.box["xui.absValue"]){c.push(e)}}});return xui.arr.removeDuplicate(c)},_bind:function(c,d){if(!c){return}var e=this._pool[c];if(!e){b=new xui.DataBinder();b.setName(c);e=b.get(0)}if(d){if(xui.arr.indexOf(e._n,d)==-1){d.link(e._n,"databinder."+c)}}},_unBind:function(c,d){if(d&&d.box&&this._pool[c]){d.unLink("databinder."+c)}},DataModel:{dataBinder:null,dataField:null,name:{set:function(n){var e=this,q=e.properties.name,j=e.box,d=j._pool,h=d[q],p=d[n],m;d[e.properties.name=n]=e;if(h&&!p&&e._n.length){for(var g=0,f=e._n.length;g<f;g++){xui.set(e._n[g],["properties","dataBinder"],n)}}if(p&&!h){e._n=p._n}if(h){delete d[q]}}},data:{ini:{}}},EventHandlers:{beforeInputAlert:function(e,c,d){},beforeUpdateDataToUI:function(d,c){},afterUpdateDataFromUI:function(d,c){}}}});(xui.Locale.en||(xui.Locale.en={})).inline={$_$:1,ok:"O K",cancel:"Cancel",set:"SET",today:"Today",now:"Now",yes:"Yes",no:"No",noFlash:"No Flash PlugIn!",transparent:"transparent",required:"There is required field need to be filled out",invalid:"There is invalid field"};xui.Locale.en.date={WEEKS:{"0":"Su","1":"Mo","2":"Tu","3":"We","4":"Th","5":"Fr","6":"Sa","7":"WK"},VIEWS:{"10 ms":"10 millisecond","100 ms":"100 milliseconds","1 s":"1 second","10 s":"10 seconds","1 n":"1 minute","5 n":"5 minutes","10 n":"10 minutes","30 n":"30 minutes","1 h":"1 hour","2 h":"2 hours","6 h":"6 hours","1 d":"1 day","1 w":"1 week","15 d":"15 days","1 m":"1 month","1 q":"1 quarter","1 y":"1 year","1 de":"10 years","1 c":"1 century"},MONTHS:{"1":"Jan.","2":"Feb.","3":"Mar.","4":"Apr.","5":"May.","6":"Jun.","7":"Jul.","8":"Aug.","9":"Sep.","10":"Oct.","11":"Nov.","12":"Dec."},MS:"ms",S:"s",N:"n",H:"h",D:"d",W:"w",M:"m",Q:"q",Y:"y",DE:"de",C:"c",HN:function(e,d,c){return(d.length==1?"0":"")+d+":"+(c.length==1?"0":"")+c},DHN:function(g,e,d,f){return e+"th "+(d.length==1?"0":"")+d+":"+(f.length==1?"0":"")+f},MDHN:function(j,f,e,h,g){return e+"th "+xui.getRes("date.MONTHS."+f)+" "+(h.length==1?"0":"")+h+":"+(g.length==1?"0":"")+g},HNS:function(g,e,d,f){return(e.length==1?"0":"")+e+":"+(d.length==1?"0":"")+d+":"+(f.length==1?"0":"")+f},HNSMS:function(j,f,e,h,g){return(f.length==1?"0":"")+f+":"+(e.length==1?"0":"")+e+":"+(h.length==1?"0":"")+h+" "+(g.length==1?"00":g.length==2?"0":"")+g},YM:function(e,d,c){return xui.getRes("date.MONTHS."+c)+" "+d},YQ:function(e,d,c){return c+"Q "+d},YMD:function(g,e,d,f){return e+"-"+(d.length==1?"0":"")+d+"-"+(f.length==1?"0":"")+f},YMD2:function(g,e,d,f){return xui.getRes("date.MONTHS."+d)+" "+f+", "+e},MD:function(e,d,c){return xui.getRes("date.MONTHS."+d)+" "+c},YMDH:function(j,f,e,h,g){return f+"-"+(e.length==1?"0":"")+e+"-"+(h.length==1?"0":"")+h+" "+(g.length==1?"0":"")+g+":00"},YMDHN:function(m,g,f,l,j,h){return g+"-"+(f.length==1?"0":"")+f+"-"+(l.length==1?"0":"")+l+" "+(j.length==1?"0":"")+j+":"+(h.length==1?"0":"")+h},YMDHNS:function(p,h,g,o,m,l,j){return h+"-"+(g.length==1?"0":"")+g+"-"+(o.length==1?"0":"")+o+" "+(m.length==1?"0":"")+m+":"+(l.length==1?"0":"")+l+":"+(j.length==1?"0":"")+j},ALL:function(r,j,h,q,p,o,m,l){return j+"-"+(h.length==1?"0":"")+h+"-"+(q.length==1?"0":"")+q+" "+(p.length==1?"0":"")+p+":"+(o.length==1?"0":"")+o+":"+(m.length==1?"0":"")+m+" "+(l.length==1?"00":l.length==2?"0":"")+l}};xui.Locale.en.color={LIST:{FFFFFF:"White",FFFFF0:"Ivory",FFFFE0:"Light Yellow",FFFF00:"Yellow",FFFAFA:"Snow",FFFAF0:"Floral White",FFFACD:"Lemon Chiffon",FFF8DC:"Cornislk",FFF5EE:"Sea Shell",FFF0F5:"Lavender Blush",FFEFD5:"Papaya Whip",FFEBCD:"Blanched Almond",FFE4E1:"Misty Rose",FFE4C4:"Bisque",FFE4B5:"Moccasin",FFDEAD:"Navajo White",FFDAB9:"Peach Puff",FFD700:"Gold",FFC0CB:"Pink","FFB6C1 ":"Light Pink",FFA500:"Orange",FFA07A:"Light Salmon",FF8C00:"Dark Orange",FF7F50:"Coral",FF69B4:"Hot Pink",FF6347:"Tomato",FF4500:"Orange Red",FF1493:"Deep Pink",FF00FF:"Magenta",FF00FF:"Fuchsia",FF0000:"Red",FDF5E6:"Old Lace",FAFAD2:"Light Goldenrod Yellow",FAF0E6:"Linen",FAEBD7:"Antique White",FA8072:"Salmon",F8F8FF:"Ghost White",F5FFFA:"Medium Spring Green",F5F5F5:"White Smoke",F5DEB3:"Wheat",F4A460:"Sandy Brown",F0FFFF:"Azure",F0FFF0:"Honeydew",F0F8FF:"Alice Blue",F0E68C:"Khaki",F08080:"Light Coral",EEE8AA:"Pale Godenrod",EE82EE:"Violet",E9967A:"Dark Salmon",E6E6FA:"Lavender",E1FFFF:"Light Cyan",DEB887:"Bruly Wood",DDA0DD:"plum",DCDCDC:"Gainsboro",DC143C:"Crimson",DB7093:"Pale Violet Red",DAA520:"Gold Enrod",DA70D6:"Orchid",D8BFD8:"Thistle",D3D3D3:"Light Grey",D2B48C:"Tan",D2691E:"Chocolate",CD853F:"Peru",CD5C5C:"Indian Red",C71585:"Medium Violet Red",C0C0C0:"Silver",BDB76B:"Dark Khaki",BC8F8F:"Rosy Brown",BA55D3:"Medium Orchid",B22222:"Fire Brick",B0E0E6:"Pow Der Blue",B0C4DE:"Light Steel Blue",AFEEEE:"Pale Turquoise",ADFF2F:"Green Yellow",ADD8E6:"Light BLue",A9A9A9:"Dark Gray",A52A2A:"Brown",A0522D:"Sienna","9932CC":"Dark Orchid","98FB98":"Pale Green","9400D3":"Dark Voilet","9370DB":"Medium Purple","90EE90":"Light Green","8FBC8F":"Dark Sea Green","8B4513":"Saddle Brown","8B008B":"Dark Magenta","8B0000":"Dark Red","8A2BE2":"Blue Violet","87CEFA":"Light Sky Blue","87CEEB":"Sky Blue","808080":"Gray","808000":"Olive","800080":"Purple","800000":"Maroon","7FFFAA":"Auqamarin","7FFF00":"Chartreuse","7CFC00":"Lawn Green","7B68EE":"Medium Slate Blue","778899":"Light Slate Gray","708090":"Slate Gray","6B8E23":"Beige","6A5ACD":"Slate Blue","696969":"Dim Gray","6495ED":"Cornflower Blue","5F9EA0":"Cadet Blue","556B2F":"Olive Drab","4B0082":"Indigo","48D1CC":"Medium Turquoise","483D8B":"Dark Slate Blue","4682B4":"Steel Blue","4169E1":"Royal Blue","40E0D0":"Turquoise","3CB371":"Spring Green","32CD32":"Lime Green","2F4F4F":"Dark Slate Gray","2E8B57":"Sea Green","228B22":"Forest Green","20B2AA":"Light Sea Green","1E90FF":"Doder Blue","191970":"Midnight Blue","00FFFF":"Cyan","00FFFF":"Aqua","00FF7F":"Mint Cream","00FF00":"Lime","00FA9A":"Medium Aquamarine","00CED1":"Dark Turquoise","00BFFF":"Deep Sky Blue","008B8B":"Dark Cyan","008080":"Teal","008000":"Green","006400":"Dark Green","0000FF":"Blue","0000CD":"Medium Blue","00008B":"Dark Blue","000080":"Navy","000000":"Black"}};xui.Locale.en.editor={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",forecolor:"Font Color",bgcolor:"Background Color",left:"Align Left",center:"Align Center",right:"Align Right",justify:"Justify",indent:"Indent",outdent:"Outdent",ol:"Ordered List",ul:"Unordered List",hr:"Insert Horizontal Rule",unlink:"Remove Link",removeformat:"Remove Formatting",html:"HTML Editor",insertimage:"Insert Image",insertimage2:"Image URL:",createlink:"Insert Link",createlink2:"Link URL:",fontsize:"Font Size",fontname:"Font Family",formatblock:"Font Block",fontsizeList:"1,1(8pt);2,2(10pt);3,3(12pt);4,4(14pt);5,5(18pt);6,6(24pt);...,...",fontnameList:"Arial;Arial Black;Comic Sans MS;Courier New;Impact;Tahoma;Times New Roman;Trebuchet MS;Verdana;...",formatblockList:"p,Normal;h1,Heading1;h2,Heading2;h3,Heading3;h4,Heading4;h5,Heading5;h6,Heading6;...,..."};Class("xui.Event",null,{Constructor:function(E,B,c,G){var q=xui.Event,m=window,I=document,K=0,A,o,l=xui.DragDrop,g,x,n;if(!(E=E||m.event)||!(g=B)){g=B=null;return false}B=null;var e=E.type,L=E.$xuievent,u=E.$xuitype,C=E.$xuiall;if(e=="xuitouchdown"){e="mousedown";L=1;C=0;u="beforeMousedown"}if("mouseover"==e||"mouseout"==e){K=(l&&l._profile.isWorking)?1:2;if(K!=1&&c){g=null;return q.$FALSE}if(!q._handleMouseHover(E,g,K==1)){g=null;return q.$FALSE}if(K==1){x=l&&l._dropElement}}else{if((n=q._tabHookStack).length&&q._kb[e]&&(E.$key||E.keyCode||E.charCode)==9&&false===q._handleTabHook(q.getSrc(E),n=n[n.length-1])){g=null;return}}A=G||q.getId(g);if(n=q._getProfile(A)){if(e=="DOMMouseScroll"){e="mousewheel"}if(e=="mousedown"||e=="mousewheel"){xui.tryF(xui.Dom._blurTrigger,[n,E])}else{if(e=="resize"){e="size";if(xui.browser.ie&&m===g){var m=xui.browser.contentBox&&I.documentElement.clientWidth||I.body.clientWidth,F=xui.browser.contentBox&&I.documentElement.clientHeight||I.body.clientHeight;if(n._w==m&&n._h==F){g=null;return}else{n._w=m;n._h=F}}}}var D,H,M,p=true,J=[];for(D=0;D<=2;++D){if(K==1&&D!==0&&!E.$force){break}if(K==2&&D===0){continue}M=q._type[e+D]||(q._type[e+D]=q._getEventName(e,D));if(!L||C||(M===u)){n._getEV(J,A,M,g.$xid)}}H=function(f,d){for(var j=0,h;h=arguments.callee.tasks[j++];){if(false===h(n,f,d)){return false}}return true};H.tasks=J;p=H(E,g.$xid);if(m===g&&e=="size"){xui.asyRun(function(){H(E,g.$xid);H.tasks.length=0;delete H.tasks;H=g=null},150)}if(l){if(e=="drag"){l._onDrag=H}else{if(e=="dragover"){l._onDragover=H}}}else{if(e!=="size"){H.tasks.length=0;delete H.tasks;H=null}}if(K==1){if("mouseover"==e&&l._dropElement==g.$xid&&x&&x!=g.$xid){o=xui.use(x).get(0);q({type:"mouseout",target:o,$xui:true,$xuitype:"beforeMouseout",preventDefault:function(d){xui.Event.stopDefault(d)},stopPropagation:function(d){xui.Event.stopBubble(d)}},o);l.setDropElement(g.$xid)}if("mouseout"==e&&!l._dropElement&&x&&x==g.$xid){q._preDroppable=A;xui.asyRun(function(){delete xui.Event._preDroppable})}if(g.$xid==l._dropElement){p=false}}if(p===false){q.stopBubble(E)}return p}},Static:{$FALSE:xui.browser.opr?undefined:false,_type:{},_kb:{keydown:1,keypress:1,keyup:1},_reg:/(-[\w]+)|([\w]+$)/g,$eventhandler:function(){return xui.Event(arguments[0],this)},$eventhandler2:function(){return xui.Event(arguments[0],this,1)},$eventhandler3:function(){return xui.Event(arguments[0],xui.Event.getSrc(arguments[0]||window.event))},$lastMouseupTime:0,$dblcInterval:500,$lastClickFunMark:0,_events:("mouseover,mouseout,mousedown,mouseup,mousemove,mousewheel,click,dblclick,contextmenu,keydown,keypress,keyup,scroll,blur,focus,load,unload,beforeunload,abort,change,select,submit,reset,error,move,size,dragbegin,drag,dragstop,dragleave,dragenter,dragover,drop,touchstart,touchmove,touchend,touchcancel,mspointerdown,mspointermove,mspointerup,mspointercancel,pointerdown,pointermove,pointerup,pointercancel").split(","),simulateEvent:function(e,d,c,f){c=c||{};if(e[0]){e=e[0]}xui.tryF(xui.Event.$eventsforSimulation[f||d],[e,d,c])},_getEventName:function(c,d){return(c=this._map1[c])&&((d===0||d==1||d==2)?c[d]:c)},_getProfile:function(e,d,c){return e&&(typeof e=="string")&&((d=(c=xui.$cache.profileMap)[e])?d["xui.UIProfile"]?d:(c=c[e.replace(this._reg,"")])?c:d:c[e.replace(this._reg,"")])},_handleTabHook:function(g,f){if(g===document){return true}var e=g,d,c=e.tabIndex;do{if(xui.getId(e)==f[0]){e=g=null;return true}}while(e&&(e=e.parentNode)&&e!==document&&e!==window);d=xui.tryF(f[1],[f[0],c],g);e=g=null;return false},_handleMouseHover:function(c,g,l){if(g==document){g=null;return true}var e=(c.type=="mouseover"?c.fromElement:c.toElement)||c.relatedTarget;if(l&&c.type=="mouseover"&&this._preDroppable){try{do{if(e&&e.id&&e.id==this._preDroppable){g=e=null;return true}}while(e&&(e=e.parentNode)&&e!==document&&e!==window)}catch(j){}}if(xui.browser.gek){try{do{if(e==g){g=e=null;return false}}while(e&&(e=e.parentNode))}catch(j){var h=this.getPos(c),e=xui([g]),d=e.offset(),m=e.cssSize(),f=(h.left<d.left||h.left>d.left+m.width||h.top<d.top||h.top>d.top+m.height);g=e=null;return c.type=="mouseover"?!f:f}}else{do{if(e==g){g=e=null;return false}}while(e&&(e=e.parentNode))}g=e=null;return true},_tabHookStack:[],pushTabOutTrigger:function(d,c){this._tabHookStack.push([xui(d)._nodes[0],c]);return this},popTabOutTrigger:function(c){if(c){this._tabHookStack=[]}else{this._tabHookStack.pop()}return this},getSrc:function(d){var c;return((c=d.target||d.srcElement||null)&&xui.browser.kde&&c.nodeType==3)?c.parentNode:c},getId:function(c){return window===c?"!window":document===c?"!document":c.id},getBtn:function(c){return xui.browser.ie?c.button==4?"middle":c.button==2?"right":"left":c.which==2?"middle":c.which==3?"right":"left"},getPos:function(h){h=h||window.event;if(xui.browser.isTouch&&h.changedTouches&&h.changedTouches[0]){h=h.changedTouches[0]}if("pageX" in h){return{left:h.pageX,top:h.pageY}}else{var l=document,j=l.documentElement,c=l.body,f,e=(xui.isSet(f=j&&j.scrollLeft)?f:xui.isSet(f=c&&c.scrollLeft)?f:0)-(xui.isSet(f=j.clientLeft)?f:0),g=(xui.isSet(f=j&&j.scrollTop)?f:xui.isSet(f=c&&c.scrollTop)?f:0)-(xui.isSet(f=j.clientTop)?f:0);return{left:h.clientX+e,top:h.clientY+g}}},getKey:function(c){c=c||window.event;var h=[],n,e=c.$key||c.keyCode||c.charCode||0;if(typeof e=="string"){h[0]=e}else{var m=String.fromCharCode(e),j=c.type;if((j=="keypress"&&e>=33&&e<=128)||((e>=48&&e<=57)||(e>=65&&e<=90))){h[0]=m}else{if(!(n=arguments.callee.map)){n=arguments.callee.map={};var e,g=("3,enter,8,backspace,9,tab,12,numlock,13,enter,19,pause,20,capslock,27,esc,32, ,33,pageup,34,pagedown,35,end,36,home,37,left,38,up,39,right,40,down,44,printscreen,45,insert,46,delete,50,down,52,left,54,right,56,up,91,win,92,win,93,apps,96,0,97,1,98,2,99,3,100,4,101,5,102,6,103,7,104,8,105,9,106,*,107,+,109,-,110,.,111,/,112,f1,113,f2,114,f3,115,f4,116,f5,117,f6,118,f7,119,f8,120,f9,121,f10,122,f11,123,f12,144,numlock,145,scroll,186,;,187,=,189,-,190,.,191,/,192,`,219,[,220,\\,221,],222,',224,meta,63289,numlock,63276,pageup,63277,pagedown,63275,end,63273,home,63234,left,63232,up,63235,right,63233,down,63272,delete,63302,insert,63236,f1,63237,f2,63238,f3,63239,f4,63240,f5,63241,f6,63242,f7,63243,f8,63244,f9,63245,f10,63246,f11,63247,f12,63248,print").split(",");for(var f=1,d=g.length;f<d;f=f+2){n[g[f-1]]=g[f]}g.length=0;n[188]=","}h[0]=n[e]||m}}if((c.modifiers)?(c.modifiers&Event.CONTROL_MASK):(c.ctrlKey||c.ctrlLeft||e==17||e==57391)){if(e==17||e==57391){h[0]=""}h.push("1")}else{h.push("")}if((c.modifiers)?(c.modifiers&Event.SHIFT_MASK):(c.shiftKey||c.shiftLeft||e==16||e==57390)){if(e==16||e==57390){h[0]=""}h.push("1")}else{h.push("")}if((c.modifiers)?false:(c.altKey||c.altLeft||e==18||e==57388)){if(e==18||e==57388){h[0]=""}h.push("1")}else{h.push("")}h[0]=h[0];h.key=h[0];h.keyCode=e;h.type=j;h.ctrlKey=!!h[1];h.shiftKey=!!h[2];h.altKey=!!h[3];if(j=="keypress"){if(this.$keydownchar&&this.$keydownchar.length>1){h.key=this.$keydownchar}}else{if(j=="keydown"){if(h[0].length>1){this.$keydownchar=h[0]}else{if(this.$keydownchar){this.$keydownchar=null}}}else{if(j=="keyup"){if(this.$keydownchar){this.$keydownchar=null}}}}return h},getEventPara:function(j,c){if(!c){c=xui.Event.getPos(j)}var g=this.getKey(j),e=this.getBtn(j),f={button:e,pageX:c&&c.left,pageY:c&&c.top,key:g.key,keyCode:g.keyCode,ctrlKey:g.ctrlKey,shiftKey:g.shiftKey,altKey:g.altKey};for(var d in j){if(d.charAt(0)=="$"){f[d]=j[d]}}return f},stopBubble:function(c){c=c||window.event;if(c.stopPropagation){c.stopPropagation()}if("cancelBubble" in c){c.cancelBubble=true}this.stopDefault(c)},stopDefault:function(c){c=c||window.event;if(c.preventDefault){c.preventDefault()}else{if("returnValue" in c){c.returnValue=false}}},_kbh:function(d,o,c,g,j,n,m,p,f){if(o){var e,l,h=(o||"").toLowerCase()+":"+(c?"1":"")+":"+(g?"1":"")+":"+(j?"1":"");d[h]=d[h]||[];if(typeof n=="function"){e=xui.rand();d[h][e]=[n,m,p,f];d[h].push(e);return e}else{if(typeof n=="string"){l=xui.arr.indexOf(d[h],d[h][n]);if(l!=-1){xui.arr.removeFrom(d[h],l)}delete d[h][n]}else{delete d[h]}}}return this},keyboardHook:function(f,j,d,l,c,e,g,h){return this._kbh(xui.$cache.hookKey,f,j,d,l,c,e,g,h)},keyboardHookUp:function(f,j,d,l,c,e,g,h){return this._kbh(xui.$cache.hookKeyUp,f,j,d,l,c,e,g,h)},getWheelDelta:function(c){return c.wheelDelta?c.wheelDelta/120:-c.detail/3},$TAGNAMES:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},_supportCache:{},isSupported:function(d,g){var f=this,j=f._supportCache,h=(g?g.tagName.toLowerCase():"div")+":"+d;if(h in j){return j[h]}g=g||document.createElement(f.$TAGNAMES[d]||"div");d="on"+d;var e=(d in g);if(!e){if(!g.setAttribute){g=document.createElement("div")}if(g.setAttribute){g.setAttribute(d,"");e=typeof g[d]=="function";if(typeof g[d]!="undefined"){g[d]=undefined}g.removeAttribute(d)}}g=null;return j[h]=e},_simulateMousedown:function(c){if(!c.touches){return true}var d=xui.Event,e=c.changedTouches,f=e[0];if(c.touches.length>1){return true}d.__simulatedMousedownNode=f.target;if(!d.isSupported("mousedown")){d.simulateEvent(f.target,"mousedown",{screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY})}else{d._xuitouchdowntime=xui.setTimeout(function(){d._xuitouchdowntime=0;d.simulateEvent(f.target,"xuitouchdown",{screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY},"mousedown")},100)}return true},_simulateMouseup:function(e){if(!e.touches){return true}var f=xui.Event,d=(new Date).getTime(),c=d-f.$lastMouseupTime,g=e.changedTouches,h=g[0];if(f._xuitouchdowntime){xui.clearTimeout(f._xuitouchdowntime)}f.__simulatedMouseupNode=h.target;if(!f.isSupported("mouseup")){f.simulateEvent(h.target,"mouseup",{screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY})}if(f.__simulatedMouseupNode===f.__simulatedMousedownNode){if(!f.isSupported("click")){f.simulateEvent(h.target,"click",{screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY})}if(c<=f.$dblcInterval){xui.asyRun(function(){f.$lastMouseupTime=0;f.simulateEvent(h.target,"dblclick",{screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY})})}}f.__simulatedMouseupNode=f.__simulatedMousedownNode=null;f.$lastMouseupTime=d;return true},stopPageTouchmove:function(){document.addEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointermove":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerMove":"touchmove",function(c){c.preventDefault()})}},Initialize:function(){var o=this,p=window,m=document,q={move:null,size:null,drag:null,dragstop:null,dragover:null,mousewheel:null,dragbegin:"onmousedown",dragenter:"onmouseover",dragleave:"onmouseout",drop:"onmouseup"},e=["before","on","after"],j,h,r;j=o._map1={};xui.arr.each(o._events,function(d){r=xui.str.initial(d);j[d]=[e[0]+r,e[1]+r,e[2]+r]});j=o._eventMap={};h=o._eventHandler={};xui.arr.each(o._events,function(d){r=xui.str.initial(d);j[d]=j[e[1]+d]=j[e[0]+r]=j[e[1]+r]=j[e[2]+r]=d;h[d]=h[e[1]+d]=h[e[0]+r]=h[e[1]+r]=h[e[2]+r]=(d in q)?q[d]:("on"+d)});p.onresize=o.$eventhandler;if(p.addEventListener){p.addEventListener("DOMMouseScroll",o.$eventhandler3,false)}if(xui.browser.isTouch){if(m.addEventListener){m.addEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointerdown":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerDown":"touchstart",o._simulateMousedown,false);m.addEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",o._simulateMouseup,false);m.addEventListener("xuitouchdown",o.$eventhandler,false)}else{if(m.attachEvent){m.attachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerdown":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerDown":"touchstart",o._simulateMousedown);m.attachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",o._simulateMouseup);m.attachEvent("xuitouchdown",o.$eventhandler)}}}m.onmousewheel=p.onmousewheel=o.$eventhandler3;var l=function(B,G,K){switch(G){case"textevent":G="keypress";break;case"keyup":case"keydown":case"keypress":break}xui.merge(K,{bubbles:true,cancelable:true,view:p,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:0,charCode:0},"without");var A=K.bubbles,w=K.cancelable,H=K.view,u=K.ctrlKey,d=K.altKey,F=K.shiftKey,D=K.metaKey,J=K.keyCode,I=K.charCode;var E=null;if(m.createEvent){try{E=m.createEvent("KeyEvents");E.initKeyEvent(G,A,w,H,u,d,F,D,J,I)}catch(C){try{E=m.createEvent("Events")}catch(x){E=m.createEvent("UIEvents")}finally{E.initEvent(G,A,w);E.view=H;E.altKey=d;E.ctrlKey=u;E.shiftKey=F;E.metaKey=D;E.keyCode=J;E.charCode=I}}B.dispatchEvent(E)}else{if(m.createEventObject){E=m.createEventObject();E.bubbles=A;E.cancelable=w;E.view=H;E.ctrlKey=u;E.altKey=d;E.shiftKey=F;E.metaKey=D;E.keyCode=(I>0)?I:J;B.fireEvent("on"+G,E)}else{throw G+" cant be simulated in "+navigator.userAgent}}},c=function(L,C,B){B=B||{};xui.merge(B,{bubbles:true,cancelable:true,view:p,detail:1,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,screenX:0,screenY:0,clientX:0,clientY:0,button:0,relatedTarget:null},"without");var E=B.bubbles,M=B.cancelable,G=B.view,K=B.detail,x=B.ctrlKey,w=B.altKey,H=B.shiftKey,A=B.metaKey,d=B.screenX,N=B.screenY,J=B.clientX,I=B.clientY,u=B.button,D=B.relatedTarget;var F=null;if(m.createEvent){F=m.createEvent("MouseEvents");if(F.initMouseEvent){F.initMouseEvent(C,E,M,G,K,d,N,J,I,x,w,H,A,u,D)}else{F=m.createEvent("UIEvents");F.initEvent(C,E,M);F.view=G;F.detail=K;F.screenX=d;F.screenY=N;F.clientX=J;F.clientY=I;F.ctrlKey=x;F.altKey=w;F.metaKey=A;F.shiftKey=H;F.button=u;F.relatedTarget=D}if(D&&!F.relatedTarget){if(C==="mouseout"){F.toElement=D}else{if(C==="mouseover"){F.fromElement=D}}}L.dispatchEvent(F)}else{if(m.createEventObject){F=m.createEventObject();F.bubbles=E;F.cancelable=M;F.view=G;F.detail=K;F.screenX=d;F.screenY=N;F.clientX=J;F.clientY=I;F.ctrlKey=x;F.altKey=w;F.metaKey=A;F.shiftKey=H;switch(u){case 0:F.button=1;break;case 1:F.button=4;break;case 2:break;default:F.button=0}F.relatedTarget=D;L.fireEvent("on"+C,F)}else{throw C+" cant be simulated in "+navigator.userAgent}}},g=function(D,C,x){xui.merge(x,{bubbles:true,cancelable:(C==="submit"),view:p,detail:1},"without");var w=x.bubbles,u=x.cancelable,d=x.view,B=x.detail;var A=null;if(m.createEvent){A=m.createEvent("UIEvents");A.initUIEvent(C,w,u,d,B);D.dispatchEvent(A)}else{if(m.createEventObject){A=m.createEventObject();A.bubbles=w;A.cancelable=u;A.view=d;A.detail=B;D.fireEvent("on"+C,A)}else{throw C+" cant be simulated in "+navigator.userAgent}}},n=function(C,G,J){xui.merge(J,{bubbles:true,cancelable:true,detail:2,view:p,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,scale:1,rotation:0},"without");var A=J.bubbles,w=J.cancelable,B=J.detail,H=J.view,u=J.ctrlKey,d=J.altKey,F=J.shiftKey,D=J.metaKey,x=J.scale,I=J.rotation;var E;E=m.createEvent("GestureEvent");E.initGestureEvent(G,A,w,H,B,screenX,screenY,clientX,clientY,u,d,F,D,C,x,I);C.dispatchEvent(E)},f=function(N,C,A){if(C==="touchstart"||C==="touchmove"){if(!A.touches||!A.touches.length){throw"No touch object in touches."}}else{if(C==="touchend"){if(!A.changedTouches||!A.changedTouches.length){throw"No touch object in changedTouches."}}}xui.merge(A,{bubbles:true,cancelable:(C!=="touchcancel"),detail:1,view:p,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,screenX:0,screenY:0,clientX:0,clientY:0,scale:1,rotation:0},"without");var D=A.bubbles,P=A.cancelable,M=A.detail,F=A.view,O=A.scale,K=A.rotation,G=A.touches,L=A.targetTouches,B=A.changedTouches,w=A.ctrlKey,u=A.altKey,H=A.shiftKey,x=A.metaKey,d=A.screenX,Q=A.screenY,J=A.clientX,I=A.clientY,P=C=="touchcancel"?false:A.cancelable;var E;if(m.createEvent){if(xui.browser.isAndroid){if(xui.browser.ver<4){E=m.createEvent("MouseEvents");E.initMouseEvent(C,D,P,F,M,d,Q,J,I,w,u,H,x,0,N);E.touches=G;E.targetTouches=L;E.changedTouches=B}else{E=m.createEvent("TouchEvent");E.initTouchEvent(G,L,B,C,F,d,Q,J,I,w,u,H,x)}}else{if(xui.browser.isIOS){if(xui.browser.ver>=2){E=m.createEvent("TouchEvent");E.initTouchEvent(C,D,P,F,M,d,Q,J,I,w,u,H,x,G,L,B,O,K)}else{throw C+" cant be simulated in "+navigator.userAgent}}else{throw C+" cant be simulated in "+navigator.userAgent}}N.dispatchEvent(E)}else{throw C+" cant be simulated in "+navigator.userAgent}};o.$eventsforSimulation={click:c,dblclick:c,mouseover:c,mouseout:c,mouseenter:c,mouseleave:c,mousedown:c,mouseup:c,mousemove:c,pointerover:c,pointerout:c,pointerdown:c,pointerup:c,pointermove:c,MSPointerOver:c,MSPointerOut:c,MSPointerDown:c,MSPointerUp:c,MSPointerMove:c,keydown:l,keyup:l,keypress:l,submit:g,blur:g,change:g,focus:g,resize:g,scroll:g,select:g,touchstart:f,touchmove:f,touchend:f,touchcancel:f,gesturestart:n,gesturechange:n,gestureend:n}}});Class("xui.Date",null,{Initialize:function(){var f=this;f._mapKeys(f.$TIMEUNIT);var e=f._key1,c=f._key2,g=f.$UNIT={};for(var h=0,d=e.length;h<d;h++){g[e[h]]=1}for(var h=0,d=c.length;h<d;h++){g[c[h]]=1}g.w=1},Static:{_key1:"MILLISECOND,SECOND,MINUTE,HOUR,DAY,WEEK,MONTH,QUARTER,YEAR,DECADE,CENTURY".split(","),_key2:"ms,s,n,h,d,ww,m,q,y,de,c".split(","),$TIMEUNIT:{MILLISECOND:1,SECOND:1000,MINUTE:60000,HOUR:3600000,DAY:86400000,WEEK:604800000,MONTH:2592000000,QUARTER:7776000000,YEAR:31557600000,DECADE:315576000000,CENTURY:3155760000000},$TEXTFORMAT:{utciso:function(g,c,e){e=xui.Date._fix;return g.getUTCFullYear()+"-"+e(g.getUTCMonth()+1)+"-"+e(g.getUTCDate())+"T"+e(g.getUTCHours())+":"+e(g.getUTCMinutes())+":"+e(g.getUTCSeconds())+"Z"},iso:function(g,c,e){e=xui.Date._fix;return g.getFullYear()+"-"+e(g.getMonth()+1)+"-"+e(g.getDate())+"T"+e(g.getHours())+":"+e(g.getMinutes())+":"+e(g.getSeconds())},ms:function(e,c){return xui.Date._fix(e.getMilliseconds(),3)+(c?"":xui.wrapRes("date.MS"))},s:function(e,c){return e.getSeconds()+(c?"":xui.wrapRes("date.S"))},ss:function(e,c){return xui.Date._fix(e.getSeconds())+(c?"":xui.wrapRes("date.S"))},n:function(e,c){return e.getMinutes()+(c?"":xui.wrapRes("date.N"))},nn:function(e,c){return xui.Date._fix(e.getMinutes())+(c?"":xui.wrapRes("date.N"))},h:function(e,c){return e.getHours()+(c?"":xui.wrapRes("date.H"))},hh:function(e,c){return xui.Date._fix(e.getHours())+(c?"":xui.wrapRes("date.H"))},d:function(e,c){return e.getDate()+(c?"":xui.wrapRes("date.D"))},dd:function(e,c){return xui.Date._fix(e.getDate())+(c?"":xui.wrapRes("date.D"))},w:function(g,e,f){var c=(g.getDay()-f+7)%7;return e?c:xui.wrapRes("date.WEEKS."+c)},ww:function(f,c,e){return xui.Date.getWeek(f,e)+(c?"":xui.wrapRes("date.W"))},m:function(e,c){return(e.getMonth()+1)+(c?"":xui.wrapRes("date.M"))},mm:function(e,c){return xui.Date._fix(e.getMonth()+1)+(c?"":xui.wrapRes("date.M"))},q:function(e,c){return(parseInt((e.getMonth()+3)/3-1,10)+1)+(c?"":xui.wrapRes("date.Q"))},y:function(e,c){return e.getYear()+(c?"":xui.wrapRes("date.Y"))},yyyy:function(e,c){return e.getFullYear()+(c?"":xui.wrapRes("date.Y"))},de:function(e,c){return parseInt(e.getFullYear()/10,10)+(c?"":xui.wrapRes("date.DE"))},c:function(e,c){return parseInt(e.getFullYear()/100,10)+(c?"":xui.wrapRes("date.C"))},hn:function(e,c){return xui.wrapRes("date.HN-"+e.getHours()+"-"+e.getMinutes())},dhn:function(e,c){return xui.wrapRes("date.DHN-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes())},mdhn:function(e,c){return xui.wrapRes("date.MDHN-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes())},hns:function(e,c){return xui.wrapRes("date.HNS-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds())},hnsms:function(e,c){return xui.wrapRes("date.HNSMS-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds()+"-"+e.getMilliseconds())},yq:function(e,c){return xui.wrapRes("date.YQ-"+e.getFullYear()+"-"+(parseInt((e.getMonth()+3)/3-1,10)+1))},ym:function(e,c){return xui.wrapRes("date.YM-"+e.getFullYear()+"-"+(e.getMonth()+1))},md:function(e,c){return xui.wrapRes("date.MD-"+(e.getMonth()+1)+"-"+e.getDate())},ymd:function(e,c){return xui.wrapRes("date.YMD-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate())},ymd2:function(e,c){return xui.wrapRes("date.YMD2-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate())},ymdh:function(e,c){return xui.wrapRes("date.YMDH-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours())},ymdhn:function(e,c){return xui.wrapRes("date.YMDHN-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes())},ymdhns:function(e,c){return xui.wrapRes("date.YMDHNS-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds())},all:function(e,c){return xui.wrapRes("date.ALL-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds()+"-"+e.getMilliseconds())}},$TIMEZONE:[{id:"Asia(East,North)",sub:[{id:"Brunei",v:"+0800"},{id:"Burma",v:"+0630"},{id:"Cambodia",v:"+0700"},{id:"China",v:"+0800"},{id:"China(HK,Macau)",v:"+0800"},{id:"China(TaiWan)",v:"+0800"},{id:"China(Urumchi)",v:"+0700"},{id:"East Timor",v:"+0800"},{id:"Indonesia",v:"+0700"},{id:"Japan",v:"+0900"},{id:"Kazakhstan(Aqtau)",v:"+0400"},{id:"Kazakhstan(Aqtobe)",v:"+0500"},{id:"Kazakhstan(Astana)",v:"+0600"},{id:"Kirghizia",v:"+0500"},{id:"Korea",v:"+0900"},{id:"Laos",v:"+0700"},{id:"Malaysia",v:"+0800"},{id:"Mongolia",v:"+0800",tag:"03L03|09L03"},{id:"Philippines",v:"+0800"},{id:"Russia(Anadyr)",v:"+1300",tag:"03L03|10L03"},{id:"Russia(Kamchatka)",v:"+1200",tag:"03L03|10L03"},{id:"Russia(Magadan)",v:"+1100",tag:"03L03|10L03"},{id:"Russia(Vladivostok)",v:"+1000",tag:"03L03|10L03"},{id:"Russia(Yakutsk)",v:"+0900",tag:"03L03|10L03"},{id:"Singapore",v:"+0800"},{id:"Thailand",v:"+0700"},{id:"Vietnam",v:"+0700"}]},{id:"Asia(South,West)",sub:[{id:"Afghanistan",v:"+0430"},{id:"Arab Emirates",v:"+0400"},{id:"Bahrain",v:"+0300"},{id:"Bangladesh",v:"+0600"},{id:"Bhutan",v:"+0600"},{id:"Cyprus",v:"+0200"},{id:"Georgia",v:"+0500"},{id:"India",v:"+0530"},{id:"Iran",v:"+0330",tag:"04 13|10 13"},{id:"Iraq",v:"+0300",tag:"04 13|10 13"},{id:"Israel",v:"+0200",tag:"04F53|09F53"},{id:"Jordan",v:"+0200"},{id:"Kuwait",v:"+0300"},{id:"Lebanon",v:"+0200",tag:"03L03|10L03"},{id:"Maldives",v:"+0500"},{id:"Nepal",v:"+0545"},{id:"Oman",v:"+0400"},{id:"Pakistan",v:"+0500"},{id:"Palestine",v:"+0200"},{id:"Qatar",v:"+0300"},{id:"Saudi Arabia",v:"+0300"},{id:"Sri Lanka",v:"+0600"},{id:"Syria",v:"+0200",tag:"04 13|10 13"},{id:"Tajikistan",v:"+0500"},{id:"Turkey",v:"+0200"},{id:"Turkmenistan",v:"+0500"},{id:"Uzbekistan",v:"+0500"},{id:"Yemen",v:"+0300"}]},{id:"North Europe",sub:[{id:"Denmark",v:"+0100",tag:"04F03|10L03"},{id:"Faroe Is.(DK)",v:"+0100"},{id:"Finland",v:"+0200",tag:"03L01|10L01"},{id:"Iceland",v:"+0000"},{id:"Jan Mayen(Norway)",v:"-0100"},{id:"Norwegian",v:"+0100"},{id:"Svalbard(NORWAY)",v:"+0100"},{id:"Sweden",v:"+0100",tag:"03L01|10L01"}]},{id:"Eastern Europe",sub:[{id:"Armenia",v:"+0400"},{id:"Austria",v:"+0100",tag:"03L01|10L01"},{id:"Azerbaijan",v:"+0400"},{id:"Belarus",v:"+0200",tag:"03L03|10L03"},{id:"Czech",v:"+0100"},{id:"Estonia",v:"+0200"},{id:"Georgia",v:"+0500"},{id:"Germany",v:"+0100",tag:"03L01|10L01"},{id:"Hungarian",v:"+0100"},{id:"Latvia",v:"+0200"},{id:"Liechtenstein",v:"+0100"},{id:"Lithuania",v:"+0200"},{id:"Moldova",v:"+0200"},{id:"Poland",v:"+0100"},{id:"Rumania",v:"+0200"},{id:"Russia(Moscow)",v:"+0300",tag:"03L03|10L03"},{id:"Slovakia",v:"+0100"},{id:"Switzerland",v:"+0100",tag:"03L01|10L01"},{id:"Ukraine",v:"+0200"},{id:"Ukraine(Simferopol)",v:"+0300"}]},{id:"Western Europe",sub:[{id:"Andorra",v:"+0100",tag:"03L01|10L01"},{id:"Belgium",v:"+0100",tag:"03L01|10L01"},{id:"Channel Is.(UK)",v:"+0000",tag:"03L01|10L01"},{id:"France",v:"+0100",tag:"03L01|10L01"},{id:"Gibraltar(UK)",v:"+0100",tag:"03L01|10L01"},{id:"Ireland",v:"+0000",tag:"03L01|10L01"},{id:"Isle of Man(UK)",v:"+0000",tag:"03L01|10L01"},{id:"Luxembourg",v:"+0100",tag:"03L01|10L01"},{id:"Monaco",v:"+0100"},{id:"Netherlands",v:"+0100",tag:"03L01|10L01"},{id:"United Kingdom",v:"+0000",tag:"03L01|10L01"}]},{id:"South Europe",sub:[{id:"Albania",v:"+0100"},{id:"Bosnia",v:"+0100"},{id:"Bulgaria",v:"+0200"},{id:"Croatia",v:"+0100"},{id:"Greece",v:"+0200",tag:"03L01|10L01"},{id:"Holy See",v:"+0100"},{id:"Italy",v:"+0100",tag:"03L01|10L01"},{id:"Macedonia",v:"+0100"},{id:"Malta",v:"+0100"},{id:"Montenegro",v:"+0100"},{id:"Portugal",v:"+0000",tag:"03L01|10L01"},{id:"San Marino",v:"+0100"},{id:"Serbia",v:"+0100"},{id:"Slovenia",v:"+0100"},{id:"Span",v:"+0100",tag:"03L01|10L01"}]},{id:"North America",sub:[{id:"Canada(AST)",v:"-0400",tag:"04F02|10L02"},{id:"Canada(CST)",v:"-0600",tag:"04F02|10L02"},{id:"Canada(EST)",v:"-0500",tag:"04F02|10L02"},{id:"Canada(MST)",v:"-0700",tag:"04F02|10L02"},{id:"Canada(NST)",v:"-0330",tag:"04F02|10L02"},{id:"Canada(PST)",v:"-0800",tag:"04F02|10L02"},{id:"Greenland(DK)",v:"-0300"},{id:"US(Central)",v:"-0600",tag:"03S02|11F02"},{id:"US(Eastern)",v:"-0500",tag:"03S02|11F02"},{id:"US(Mountain)",v:"-0700",tag:"03S02|11F02"},{id:"US(Pacific)",v:"-0800",tag:"03S02|11F02"},{id:"US(Alaska)",v:"-0900"},{id:"US(Arizona)",v:"-0700"}]},{id:"South America",sub:[{id:"Anguilla(UK)",v:"-0400"},{id:"Antigua&amp;Barbuda",v:"-0400"},{id:"Antilles(NL)",v:"-0400"},{id:"Argentina",v:"-0300"},{id:"Aruba(NL)",v:"-0400"},{id:"Bahamas",v:"-0500"},{id:"Barbados",v:"-0400"},{id:"Belize",v:"-0600"},{id:"Bolivia",v:"-0400"},{id:"Brazil(AST)",v:"-0500",tag:"10F03|02L03"},{id:"Brazil(EST)",v:"-0300",tag:"10F03|02L03"},{id:"Brazil(FST)",v:"-0200",tag:"10F03|02L03"},{id:"Brazil(WST)",v:"-0400",tag:"10F03|02L03"},{id:"British Virgin Is.(UK)",v:"-0400"},{id:"Cayman Is.(UK)",v:"-0500"},{id:"Chilean",v:"-0300",tag:"10F03|03F03"},{id:"Chilean(Hanga Roa)",v:"-0500",tag:"10F03|03F03"},{id:"Colombia",v:"-0500"},{id:"Costa Rica",v:"-0600"},{id:"Cuba",v:"-0500",tag:"04 13|10L03"},{id:"Dominican",v:"-0400"},{id:"Ecuador",v:"-0500"},{id:"El Salvador",v:"-0600"},{id:"Falklands",v:"-0300",tag:"09F03|04F03"},{id:"Grenada",v:"-0400"},{id:"Guadeloupe(FR)",v:"-0400"},{id:"Guatemala",v:"-0600"},{id:"Guiana(FR)",v:"-0300"},{id:"Guyana",v:"-0400"},{id:"Haiti",v:"-0500"},{id:"Honduras",v:"-0600"},{id:"Jamaica",v:"-0500"},{id:"Martinique(FR)",v:"-0400"},{id:"Mexico(Mazatlan)",v:"-0700"},{id:"Mexico(Tijuana)",v:"-0800"},{id:"Mexico(Mexico)",v:"-0600"},{id:"Montserrat(UK)",v:"-0400"},{id:"Nicaragua",v:"-0500"},{id:"Panama",v:"-0500"},{id:"Paraguay",v:"-0400",tag:"10F03|02L03"},{id:"Peru",v:"-0500"},{id:"Puerto Rico(US)",v:"-0400"},{id:"So. Georgia&amp;So. Sandwich Is.(UK)",v:"-0200"},{id:"St. Kitts&amp;Nevis",v:"-0400"},{id:"St. Lucia",v:"-0400"},{id:"St. Vincent&amp;Grenadines",v:"-0400"},{id:"Suriname",v:"-0300"},{id:"Trinidad&amp;Tobago",v:"-0400"},{id:"Turks&amp;Caicos Is.(UK)",v:"-0500"},{id:"Uruguay",v:"-0300"},{id:"Venezuela",v:"-0400"},{id:"Virgin Is.(US)",v:"-0400"}]},{id:"Africa(North)",sub:[{id:"Algeria",v:"+0100"},{id:"Egypt",v:"+0200",tag:"04L53|09L43"},{id:"Libyan",v:"+0200"},{id:"Morocco",v:"+0000"},{id:"Sudan",v:"+0200"},{id:"Tunisia",v:"+0100"}]},{id:"Africa(Western)",sub:[{id:"Benin",v:"+0100"},{id:"Burkina Faso",v:"+0000"},{id:"Canary Is.(SP)",v:"-0100"},{id:"Cape Verde",v:"-0100"},{id:"Chad",v:"+0100"},{id:"Gambia",v:"+0000"},{id:"Ghana",v:"+0000"},{id:"Guinea",v:"+0000"},{id:"Guinea-Bissau",v:"+0000"},{id:"Ivory Coast",v:"+0000"},{id:"Liberia",v:"+0000"},{id:"Mali",v:"+0000"},{id:"Mauritania",v:"+0000"},{id:"Niger",v:"+0100"},{id:"Nigeria",v:"+0100"},{id:"Senegal",v:"+0000"},{id:"Sierra Leone",v:"+0000"},{id:"Togo",v:"+0000"},{id:"Western Sahara",v:"+0000"}]},{id:"Africa(Central)",sub:[{id:"Cameroon",v:"+0100"},{id:"Cen.African Rep.",v:"+0100"},{id:"Congo,Democratic",v:"+0100"},{id:"Congo,Republic",v:"+0100"},{id:"Equatorial Guinea",v:"+0100"},{id:"Gabon",v:"+0100"},{id:"Sao Tome&amp;Principe",v:"+0000"}]},{id:"Africa(East)",sub:[{id:"Burundi",v:"+0200"},{id:"Comoros",v:"+0300"},{id:"Djibouti",v:"+0300"},{id:"Eritrea",v:"+0300"},{id:"Ethiopia",v:"+0300"},{id:"Kenya",v:"+0300"},{id:"Madagascar",v:"+0300"},{id:"Malawi",v:"+0200"},{id:"Mauritius",v:"+0400"},{id:"Mayotte(FR)",v:"+0300"},{id:"Mozambique",v:"+0200"},{id:"Reunion(FR)",v:"+0400"},{id:"Rwanda",v:"+0200"},{id:"Seychelles",v:"+0300"},{id:"Somalia",v:"+0300"},{id:"Tanzania",v:"+0300"},{id:"Uganda",v:"+0300"}]},{id:"Africa(South)",sub:[{id:"Angola",v:"+0100"},{id:"Botswana",v:"+0200"},{id:"Lesotho",v:"+0200"},{id:"Namibia",v:"+0200",tag:"09F03|04F03"},{id:"Saint Helena(UK)",v:"-0100"},{id:"South Africa",v:"+0200"},{id:"Swaziland",v:"+0200"},{id:"Zambia",v:"+0200"},{id:"Zimbabwe",v:"+0200"}]},{id:"Oceania",sub:[{id:"American Samoa(US)",v:"-1100"},{id:"Australia(Adelaide)",v:"+0930",sub:"10L03|03L03"},{id:"Australia(Brisbane)",v:"+1000"},{id:"Australia(Darwin)",v:"+0930"},{id:"Australia(Hobart)",v:"+1000",sub:"10L03|03L03"},{id:"Australia(Perth)",v:"+0800"},{id:"Australia(Sydney)",v:"+1000",sub:"10L03|03L03"},{id:"Cook Islands(NZ)",v:"-1000"},{id:"Eniwetok",v:"-1200"},{id:"Fiji",v:"+1200",sub:"11F03|02L03"},{id:"Guam",v:"+1000"},{id:"Hawaii(US)",v:"-1000"},{id:"Kiribati",v:"+1100"},{id:"Marshall Is.",v:"+1200"},{id:"Micronesia",v:"+1000"},{id:"Midway Is.(US)",v:"-1100"},{id:"Nauru Rep.",v:"+1200"},{id:"New Calednia(FR)",v:"+1100"},{id:"New Zealand",v:"+1200",sub:"10F03|04F63"},{id:"New Zealand(CHADT)",v:"+1245",sub:"10F03|04F63"},{id:"Niue(NZ)",v:"-1100"},{id:"Nor. Mariana Is.",v:"+1000"},{id:"Palau",v:"+0900"},{id:"Papua New Guinea",v:"+1000"},{id:"Pitcairn Is.(UK)",v:"-0830"},{id:"Polynesia(FR)",v:"-1000"},{id:"Solomon Is.",v:"+1100"},{id:"Tahiti",v:"-1000"},{id:"Tokelau(NZ)",v:"-1100"},{id:"Tonga",v:"+1300",tag:"10F63|04F63"},{id:"Tuvalu",v:"+1200"},{id:"Vanuatu",v:"+1100"},{id:"Western Samoa",v:"-1100"},{id:"Data Line",v:"-1200"}]}],_mapKeys:function(h){var e=this,g=e._key2,c=e._key1;for(var f=0,d=c.length;f<d;f++){h[g[f]]=h[c[f]]}},_validUnit:function(c){return this.$UNIT[c]?c:"d"},_date:function(c,d){return xui.isDate(c)?c:((c||c===0)&&isFinite(c))?new Date(parseInt(c,10)):xui.isDate(d)?d:new Date},_isNumb:function(c){return typeof c=="number"&&isFinite(c)},_numb:function(c,d){return this._isNumb(c)?c:this._isNumb(d)?d:0},_timeZone:-((new Date).getTimezoneOffset()/60),get:function(e,f,d){var c=this;e=c._date(e);f=c._validUnit(f);d=c._numb(d);var g=arguments.callee.map||(arguments.callee.map={ms:function(h){return h.getMilliseconds()},s:function(h){return h.getSeconds()},n:function(h){return h.getMinutes()},h:function(h){return h.getHours()},d:function(h){return h.getDate()},ww:function(j,h){return xui.Date.getWeek(j,h)},w:function(j,h){return(7+j.getDay()-h)%7},m:function(h){return h.getMonth()},q:function(h){return parseInt((h.getMonth()+3)/3-1,10)},y:function(h){return h.getFullYear()},de:function(h){return parseInt(h.getFullYear()/10,10)},c:function(h){return parseInt(h.getFullYear()/100,10)}});return g[f](e,d)},_fix:function(f,c,e){c=c||2;e=e||"0";f+="";if(f.length<c){for(var d=f.length;d<c;d++){f=e+f}}return f},add:function(d,f,g){var c=this,e=c.$TIMEUNIT,j,h;d=c._date(d);f=c._validUnit(f);if(!(j=arguments.callee.map)){j=arguments.callee.map={MILLISECOND:function(l,m){l.setTime(l.getTime()+m*e.ms)},SECOND:function(l,m){l.setTime(l.getTime()+m*e.s)},MINUTE:function(l,m){l.setTime(l.getTime()+m*e.n)},HOUR:function(l,m){l.setTime(l.getTime()+m*e.h)},DAY:function(l,m){l.setTime(l.getTime()+m*e.d)},WEEK:function(l,m){l.setTime(l.getTime()+m*e.ww)},MONTH:function(n,o){var m=n.getDate(),l;o=n.getMonth()+o;this.YEAR(n,Math.floor(o/12));n.setMonth((o%12+12)%12);if((l=n.getDate())!=m){this.DAY(n,-l)}},QUARTER:function(l,m){this.MONTH(l,m*3)},YEAR:function(n,o){var m=n.getDate(),l;n.setFullYear(n.getFullYear()+o);if((l=n.getDate())!=m){this.DAY(n,-l)}},DECADE:function(l,m){this.YEAR(l,10*m)},CENTURY:function(l,m){this.YEAR(l,100*m)}};c._mapKeys(j)}j[f](h=new Date(d),g);return h},diff:function(f,c,h,e){var d=this;f=d._date(f);c=d._date(c);h=d._validUnit(h);e=d._numb(e);var g=d.$TIMEUNIT,j;if(!(j=arguments.callee.map)){j=arguments.callee.map={MILLISECOND:function(m,l){return l.getTime()-m.getTime()},SECOND:function(m,l){var m=d.getTimSpanStart(m,"s"),l=d.getTimSpanStart(l,"s"),n=l.getTime()-m.getTime();return n/g.s},MINUTE:function(m,l){var m=d.getTimSpanStart(m,"n"),l=d.getTimSpanStart(l,"n"),n=l.getTime()-m.getTime();return n/g.n},HOUR:function(m,l){var m=d.getTimSpanStart(m,"h"),l=d.getTimSpanStart(l,"h"),n=l.getTime()-m.getTime();return n/g.h},DAY:function(m,l){var m=d.getTimSpanStart(m,"d",1),l=d.getTimSpanStart(l,"d",1),n=l.getTime()-m.getTime();return n/g.d},WEEK:function(n,l,m){var n=d.getTimSpanStart(n,"ww",1,m),l=d.getTimSpanStart(l,"ww",1,m),o=l.getTime()-n.getTime();return o/g.ww},MONTH:function(m,l){return(l.getFullYear()-m.getFullYear())*12+(l.getMonth()-m.getMonth())},QUARTER:function(m,l){return(l.getFullYear()-m.getFullYear())*4+parseInt((l.getMonth()-m.getMonth())/3,10)},YEAR:function(m,l){return parseInt((l.getFullYear()-m.getFullYear()),10)},DECADE:function(m,l){return parseInt((l.getFullYear()-m.getFullYear())/10,10)},CENTURY:function(m,l){return parseInt((l.getFullYear()-m.getFullYear())/100,10)}};d._mapKeys(j)}return j[h](new Date(f),new Date(c),e)},getTimSpanStart:function(e,j,h,c){var n=this,l=n.$TIMEUNIT,d,m;e=n._date(e);j=n._validUnit(j);c=n._numb(c);h=n._numb(h,1);if(!(d=arguments.callee.map)){var g=function(o){o.setMilliseconds(0);o.setSeconds(0);o.setMinutes(0);o.setHours(0)},f=function(o){g(o);o.setDate(1);o.setMonth(0)};d=arguments.callee.map={MILLISECOND:function(p,q){var o=p.getMilliseconds();p.setMilliseconds(o-(o%q))},SECOND:function(p,q){p.setMilliseconds(0);var o=p.getSeconds();p.setSeconds(o-(o%q))},MINUTE:function(p,q){p.setMilliseconds(0);p.setSeconds(0);var o=p.getMinutes();p.setTime(p.getTime()-(o%q)*l.n)},HOUR:function(p,q){p.setMilliseconds(0);p.setSeconds(0);p.setMinutes(0);var o=p.getHours();p.setHours(o-(o%q))},DAY:function(p,q){g(p);var o=p.getDate();p.setDate(o-(o%q))},WEEK:function(r,u,q){g(r);var A=(r.getDay()+7-q)%7,w,o,p=new Date();r.setTime(r.getTime()-A*l.d);f(p);p.setFullYear(r.getFullYear());w=(p.getDay()+7-q)%7;p.setTime(p.getTime()-w*l.d);o=(r.getTime()-p.getTime())/l.d/7;r.setTime(r.getTime()-(o%u)*l.ww)},MONTH:function(p,q){g(p);p.setDate(1);var o=p.getMonth();p.setMonth(o-(o%q))},QUARTER:function(o,p){p=n._numb(p,1);return this.MONTH(o,p*3)},YEAR:function(p,q){f(p);var o=p.getFullYear();p.setFullYear(o-(o%q))},DECADE:function(o,p){f(o);o.setFullYear(Math.floor(o.getFullYear()/10)*10)},CENTURY:function(o,p){f(o);o.setFullYear(Math.floor(o.getFullYear()/100)*100)}};n._mapKeys(d)}d[j](m=new Date(e),h,c);return m},getTimSpanEnd:function(e,f,g,d){var c=this;e=c._date(e);f=c._validUnit(f);d=c._numb(d);g=c._numb(g,1);var j=e.getTime(),h=c.getTimSpanStart(e,f,g,d);if(h.getTime()<j){h=c.add(h,f,g)}return h},offsetTimeZone:function(e,f,d){var c=this;e=c._date(e);return new Date(e.getTime()+(d?-1:1)*(f-c._timeZone)*c.$TIMEUNIT.h)},getWeek:function(e,d){var c=this,f,g;e=c._date(e);d=c._numb(d),g=e.getFullYear();e=c.add(c.getTimSpanStart(e,"ww",1,d),"d",6);if(e.getFullYear()!=g){return 1}f=c.getTimSpanStart(e,"y",1);f=c.add(c.getTimSpanStart(f,"ww",1,d),"d",6);return c.diff(f,e,"ww")+1},parse:function(u,B){var p;if(xui.isDate(u)){p=u}else{u+="";if(isFinite(u)){p=new Date(parseInt(u,10))}else{if(typeof B=="string"){var A=B.split(/[^ymdhns]+/),w=u.split(/[^0-9]+/),d={y:0,m:0,d:0,h:0,n:0,s:0,ms:0};if(A.length&&A.length===w.length){for(var j=0;j<A.length;j++){if(A[j].length){d[A[j]=="ms"?"ms":A[j].charAt(0)]=parseInt(w[j].replace(/^0*/,""),10)}}p=new Date(d.y,d.m-1,d.d,d.h,d.n,d.s,d.ms)}else{p=null}}else{var D=this,x,q=arguments.callee,g=q.dp||(q.dp={FullYear:2,Month:4,Date:6,Hours:8,Minutes:10,Seconds:12,Milliseconds:14}),o=u.match(q.iso||(q.iso=/^((-\d+|\d{4,})(-(\d{2})(-(\d{2}))?)?)?T((\d{2})(:(\d{2})(:(\d{2})(\.(\d{1,3})(\d)?\d*)?)?)?)?(([+-])(\d{2})((\d{2}))?|Z)?$/)),f=new Date(0);if(o){if(o[4]){o[4]--}if(o[15]>=5){o[14]++}x=o[16]||o[18]?"UTC":"";for(var j in g){var C=o[g[j]];if(!C){continue}f["set"+x+j](C);if(f["get"+x+j]()!=o[g[j]]){p=null}}if(o[18]){var l=Number(o[17]+o[18]),e=Number(o[17]+(o[20]||0));f.setUTCMinutes(f.getUTCMinutes()+(l*60)+e)}p=f}else{if(/^((-\d+|\d{4,})(-(\d{1,2})(-(\d{1,2}))))/.test(u)){u=u.replace(/-/g,"/")}var c=Date.parse(u);p=c?f.setTime(c)&&f:null}}}}return p===null?null:isFinite(+p)?p:null},getText:function(e,f,d){var c=this,g=c.$TEXTFORMAT;e=c._date(e);d=c._numb(d);return g[f]?g[f](e,false,d):f},format:function(e,g,d){var c=this,f=c.$TEXTFORMAT;e=c._date(e);d=c._numb(d);return g.replace(/(utciso|iso|yyyy|mm|ww|dd|hh|nn|ss|ms|de|c|y|q|m|w|d|h|n|s)/g,function(j,h){return f[h]?f[h](e,true,d):h})}}});Class("xui.CSS",null,{Static:{_r:xui.browser.ie?"rules":"cssRules",_baseid:"xui:css:base",_firstid:"xui:css:first",_lastid:"xui:css:last",_reg1:/\.(\w+)\[CLASS~="\1"\]/g,_reg2:/\[ID"([^"]+)"\]/g,_reg3:/\*([.#])/g,_reg4:/\s+/g,_reg5:/\*\|/g,_reg6:/(\s*,\s*)/g,_rep:function(d){var c=this;return d.replace(c._reg1,".$1").replace(c._reg2,"#$1").replace(c._reg3,"$1").replace(c._reg4," ").replace(c._reg5,"").replace(c._reg6,",").toLowerCase()},_appendSS:function(e,d,j,g,c){var f=document.createElement("style");f.type="text/css";if(j){f.id=j}if(xui.browser.ie&&f.styleSheet&&"cssText" in f.styleSheet){f.styleSheet.cssText=d||""}else{try{f.appendChild(document.createTextNode(d||""))}catch(h){f.styleSheet.cssText=d||""}}if(c){xui(f).attr(c)}if(g){xui(e).prepend(f)}else{xui(e).append(f)}return f},_createCss:function(e,h,o){var m=this,n=this._getHead(),g=m._firstid,j=m._lastid,f,l;f=document.createElement("style");f.type="text/css";f.id=e;if(h){if(xui.browser.ie&&f.styleSheet&&"cssText" in f.styleSheet){f.styleSheet.cssText=h||""}else{try{f.appendChild(document.createTextNode(h||""))}catch(d){f.styleSheet.cssText=h||""}}}if(!o){l=document.getElementById(g)||n.firstChild;while((l=l.nextSibling)&&!/^(script|link|style)$/i.test(""+l.tagName)){}if(l){n.insertBefore(f,l)}else{if(l=document.getElementById(j)){n.insertBefore(f,l)}else{n.appendChild(f)}}}else{n.appendChild(f)}return f},_getCss:function(e,c,d){return document.getElementById(e)||this._createCss(e,c,d)},_getBase:function(){return this._getCss(this._baseid)},_getFirst:function(){return this._getCss(this._firstid)},_getLast:function(){return this._getCss(this._lastid,null,true)},_getHead:function(){return this._head||(this._head=document.getElementsByTagName("head")[0]||document.documentElement)},_check:function(){if(!xui.browser.ie){return}var g=0;for(var f=this._getHead(),e=0,d=f.childNodes,c;c=d[e++];){if(c.type=="text/css"){g++}}return g>20},get:function(h,g){for(var f=this._getHead(),e=0,d=f.childNodes,c;c=d[e++];){if(c.type=="text/css"&&h in c&&c[h]==g){return c}}},addStyleSheet:function(g,c,f,d){var h,l=this,m=l._getHead(),n=function(o,w,q){var u=document.createElement("style");u.type="text/css";if(w){u.id=w}if(xui.browser.ie&&u.styleSheet&&"cssText" in u.styleSheet){u.styleSheet.cssText=o||""}else{try{u.appendChild(document.createTextNode(o||""))}catch(r){u.styleSheet.cssText=o||""}}if(q===-1){if(m.firstChild){m.insertBefore(u,m.firstChild)}else{m.appendChild(u)}}else{if(q===1){m.appendChild(u)}else{m.insertBefore(u,q?l._getLast():l._getBase())}}u.disabled=true;u.disabled=false;return u},j=function(o,p){var q=p?l._getLast():l._getBase();q.styleSheet.cssText+=o;return q};if(c&&(c=c.replace(/[^\w\-\_\.\:]/g,"_"))&&(h=l.get("id",c))){if(d){h.disabled=true;m.removeChild(h)}else{return h}}if(l._check()){return j(g,f)}else{return n(g,c,f)}},includeLink:function(d,l,h,c){var j,g=this,f=g._getHead();if(d&&(j=g.get("href",d))){}else{j=document.createElement("link");j.type="text/css";j.rel="stylesheet";j.href=d;if(l){j.id=l}j.media="all";xui.each(c,function(m,e){j.setAttribute(e,m)})}f.insertBefore(j,h?g._getBase():g._getLast());j.disabled=true;j.disabled=false;return j},remove:function(e,d){var c=this._getHead();if(d=this.get(e,d)){d.disabled=true;c.removeChild(d)}},replaceLink:function(c,n,h,d){var j=this,l=j._getHead(),g={},f,m;g[n]=d;f=j.includeLink(c,null,false,g);if(m=j.get(n,h)){l.replaceChild(f,m)}f.disabled=true;f.disabled=false},_build:function(c,f,d){var e="";xui.each(f,function(h,g){e+=g.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+h+";"});return d?e:c+"{"+e+"}"},setStyleRules:function(g,p,d){var o=this,w=true,f=document.styleSheets,n,j,c,r,l,m,u,q;g=xui.str.trim(g.replace(/\s+/g," "));if(!(p&&d)){r=g.toLowerCase();xui.arr.each(xui.toArr(f),function(x){try{x[o._r]}catch(h){return}xui.arr.each(xui.toArr(x[o._r]),function(e,A){if(!e.selectorText){return}if(e.disabled){return}c=o._rep(e.selectorText);q=c.split(",");if(!p){w=false;if(xui.arr.indexOf(q,r)!=-1&&q.length>1){q=xui.arr.removeFrom(q,xui.arr.indexOf(q,r)).join(",");u=e.cssText.slice(e.cssText.indexOf("{")+1,e.cssText.lastIndexOf("}"));if(x.insertRule){x.insertRule(q+"{"+u+"}",x[o._r].length)}else{if(x.addRule){x.addRule(q,u||"{}")}}if(x.deleteRule){x.deleteRule(A)}else{x.removeRule(A)}x.disabled=true;x.disabled=false}else{if(c==r){if(x.deleteRule){x.deleteRule(A)}else{x.removeRule(A)}x.disabled=true;x.disabled=false}}}else{if(c==r){n=e;return false}if(xui.arr.indexOf(q,r)!=-1){j=e;return false}}},null,true);if(n){w=false;try{xui.each(p,function(A,e){e=e.replace(/(-[a-z])/gi,function(B,C){return C.charAt(1).toUpperCase()});n.style[e]=typeof A=="function"?A(n.style[e]):A})}catch(h){}x.disabled=true;x.disabled=false;return false}else{if(j){w=false;x.insertRule(o._build(g,p),x[o._r].length);x.disabled=true;x.disabled=false;return false}}},null,true)}if(d||w){o._addRules(g,p)}return o},$getCSSValue:function(q,p,A,d){var C=this,r=C._r,x,g=document.styleSheets,n=g.length,h,f,D,w,u,c;q=xui.str.trim(q.replace(/\s+/g," ").toLowerCase());for(w=n-1;w>=0;w--){try{f=g[w][r]}catch(B){continue}if(!g[w].disabled){f=g[w][r];if(f){h=f.length;for(u=h-1;u>=0;u--){if((D=f[u]).selectorText&&!D.disabled){c=C._rep(D.selectorText);if(xui.arr.indexOf(c.split(/\s*,\s*/g),q)!=-1){if(!p){(x=x||[]).push(D)}else{if(!A){if(!d||(d==g[w].ownerNode||g[w].owningElement)){if(D.style[p]!==""){return(D.style[p]||"").replace(/^\"|\"$/g,"")}}}else{if(A===D.style[p]){return g[w].ownerNode||g[w].owningElement}}}}}}}}}return x},_addRules:function(c,e){var d=this,f=d._getLast(),g=f.sheet||f.styleSheet;if(g.insertRule){g.insertRule(d._build(c,e),g[d._r].length)}else{if(g.addRule){g.addRule(c,d._build(c,e,true)||"{}")}}f.disabled=true;f.disabled=false;return d},resetCSS:function(){var c=xui.browser,e=(c.gek?c.ver<3?((c.ver<3?"-moz-outline-offset:-1px !important;":"")+"display:-moz-inline-block;display:-moz-inline-box;display:inline-block;"):"display:inline-block;":c.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(c.ie?"zoom:1;":""),d="html{color:#444;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,ar{font-style:normal;font-weight:normal;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym{border:0;font-variant:normal;}sup{vertical-align:text-top;}sub{vertical-align:text-bottom;}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit;}input,textarea,select{*font-size:100%;}::-ms-clear,::-ms-reveal{display: none;width:0;height:0;}button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0;}"+(c.isWebKit?"input,textarea,select{-webkit-user-select: auto;}":"")+"legend{color:#000;}span{outline-offset:-1px;"+e+"}";this.addStyleSheet(d,"xui.CSSreset")},adjustFont:function(){this._dftEmStr="";this._getDftEmSize(true);this._dftRemStr="";this._getDftRemSize(true);if(xui.UI){xui.UI.getAll().reLayout(true)}},_dftEmStr:"",_dftEm:0,_getDftEmSize:function(e){var d=this;if(e||!d._dftEm){var c=d.$getCSSValue(".xui-ui-ctrl","font-size");if(!d._dftEmStr||d._dftEmStr!=c){d._dftEmStr=c;if(d.$isPx(c)){d._dftEm=parseFloat(c)}else{if(d.$isRem(c)){d._dftEm=parseFloat(c)*d._getDftRemSize()}else{var f;xui("body").append(f=xui.create('<div class="xui-ui-ctrl" style="height:1em;visibility:hidden;position:absolute;border:0;margin:0;padding:0;left:-10000px;"></div>'));d._dftEm=f.get(0).offsetHeight;f.remove()}}}}return d._dftEm},$resetEm:function(){delete xui.CSS._dftEm},_dftRemStr:"",_dftRem:0,_getDftRemSize:function(d){var c=this;if(d||!c._dftRem){c._dftRem=parseFloat(xui("html").css("font-size"))||16}return c._dftRem},$resetRem:function(){delete xui.CSS._dftRem},$isEm:function(c){return(!c||c=="auto")?xui.SpaceUnit=="em":/^-?((\d\d*\.\d*)|(^\d\d*)|(^\.\d\d*))em$/i.test(xui.str.trim(c+""))},$isRem:function(c){return(!c||c=="auto")?xui.SpaceUnit=="rem":/^-?((\d\d*\.\d*)|(^\d\d*)|(^\.\d\d*))rem$/i.test(xui.str.trim(c+""))},$isPx:function(c){return(!c||c=="auto")?xui.SpaceUnit!="em":/^-?((\d\d*\.\d*)|(^\d\d*)|(^\.\d\d*))px$/i.test(xui.str.trim(c+""))},$em2px:function(e,d,c){e=(!e||e=="auto")?e:(xui.isFinite(e)||this.$isEm(e))?(parseFloat(e)||0)*(d?xui.isFun(d)?d():xui.isFinite(d)?d:xui(d)._getEmSize():this._getDftEmSize()||this._getDftEmSize()):e;return c?Math.round(parseFloat(e)||0):e},$px2em:function(e,d,c){return(!e||e=="auto")?e:(xui.isFinite(e)||this.$isPx(e))?(c?Math.round(parseFloat(e)||0):(parseFloat(e)||0))/(d?xui.isFun(d)?d():xui.isFinite(d)?d:xui(d)._getEmSize():this._getDftEmSize()||this._getDftEmSize()):e},$rem2px:function(d,c){d=(!d||d=="auto")?d:(xui.isFinite(d)||this.$isRem(d))?(parseFloat(d)||0)*this._getDftRemSize():d;return c?Math.round(parseFloat(d)||0):d},$px2rem:function(d,c){return(!d||d=="auto")?d:(xui.isFinite(d)||this.$isPx(d))?(c?Math.round(parseFloat(d)||0):(parseFloat(d)||0))/this._getDftRemSize():d},$em2rem:function(d,c){return(!d||d=="auto")?d:(xui.isFinite(d)||this.$isEm(d))?(parseFloat(d)||0)*(c?xui.isFinite(c)?c:xui(c)._getEmSize():this._getDftEmSize()||this._getDftEmSize())/this._getDftRemSize():d},$rem2em:function(d,c){return(!d||d=="auto")?d:(xui.isFinite(d)||this.$isRem(d))?(parseFloat(d)||0)*this._getDftRemSize()/(c?xui.isFinite(c)?c:xui(c)._getEmSize():this._getDftEmSize()||this._getDftEmSize()):d},$px:function(e,d,c){e=((!xui.isFinite(e)&&this.$isRem(e))?this.$rem2px(e,c):this.$isEm(e)?this.$em2px(e,d,c):(!e||e=="auto")?e:(parseFloat(e)||0));return c?Math.round(parseFloat(e)||0):e},$em:function(e,d,c){return((xui.isFinite(e)||this.$isPx(e))?this.$px2em(e,d,c):this.$isRem(e)?this.$rem2em(e,d):(!e||e=="auto")?e:(parseFloat(e)||0))},$rem:function(e,d,c){return((xui.isFinite(e)||this.$isPx(e))?this.$px2rem(e,c):this.$isEm(e)?this.$em2rem(e,d):(!e||e=="auto")?e:(parseFloat(e)||0))},$addpx:function(d,c,e){if(d=="auto"){return d}if(this.$isRem(d)){return this.$px2rem(Math.round(this.$rem2px(d)+parseFloat(c)))+"rem"}else{if(this.$isEm(d)){return this.$px2em(Math.round(this.$em2px(d,false,e)+parseFloat(c)))+"em"}else{return Math.round(parseFloat(d)+parseFloat(c))+"px"}}},$forceu:function(c,d,f,e){return(c===""||c=="auto")?c:(d?d=="rem":xui.SpaceUnit=="rem")?this.$rem(c,f,e!==false)+"rem":(d?d=="em":xui.SpaceUnit=="em")?this.$em(c,f,e!==false)+"em":Math.round(this.$px(c,f,e!==false))+"px"},$picku:function(c){return c&&c!="auto"&&(c+"").replace(/[-\d\s.]*/g,"")||(xui.SpaceUnit=="em"?"em":"px")},$addu:function(c){return c=="auto"?c:(xui.isFinite(c)||this.$isPx(c))?Math.round(parseFloat(c))+"px":c+""}},Initialize:function(){var c=xui.browser,e=(c.gek?c.ver<3?((c.ver<3?"-moz-outline-offset:-1px !important;":"")+"display:-moz-inline-block;display:-moz-inline-box;display:inline-block;"):"display:inline-block;":c.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(c.ie?"zoom:1;":""),d=".xui-node{margin:0;padding:0;line-height:1.22;-webkit-text-size-adjust:none;}.xui-node-highlight{color:#000;}.xui-title-node{}.xuifont-hover, .xuicon-hover{ color: #686868; }.xuifont-active, .xuicon-active{ color: #3393D2; }.xuifont-checked, .xuicon-checked{ color: #3393D2; }.xui-wrapper{color:#000;font-family:arial,helvetica,clean,sans-serif;font-style:normal;font-weight:normal;vertical-align:middle;}.xui-cover{cursor:wait;background:url("+xui.ini.img_bg+") transparent repeat;opacity:1;}.xui-node-table{border-collapse:collapse;border-spacing:0;empty-cells:show;font-size:inherit;"+(c.ie?"font:100%;":"")+"}.xui-node-fieldset,.xui-node-img{border:0;}.xui-node-ol,.xui-node-ul,.xui-node-li{list-style:none;}.xui-node-caption,.xui-node-th{text-align:left;}.xui-node-th{font-weight:normal;}.xui-node-q:before,.xui-node-q:after{content:'';}.xui-node-abbr,.xui-node-acronym{border:0;font-variant:normal;}.xui-node-sup{vertical-align:text-top;}.xui-node-sub{vertical-align:text-bottom;}.xui-node-input,.xui-node-textarea,.xui-node-select{cursor:text;font-family:inherit;font-size:inherit;font-weight:inherit;"+(c.ie?"font-size:100%;":"")+"}.xui-node-del,.xui-node-ins{text-decoration:none;}.xui-node-pre,.xui-node-code,.xui-node-kbd,.xui-node-samp,.xui-node-tt{font-family:monospace;"+(c.ie?"font-size:108%;":"")+"line-height:100%;}.xui-node-select,.xui-node-input,.xui-node-textarea{font-family:arial,helvetica,clean,sans-serif;border-width:1px;}"+((c.ie&&c.ver<=8)?".xui-node-input{overflow:hidden;}":"")+".xui-node-a, .xui-node-a .xui-node{cursor:pointer;color:#0000ee;text-decoration:none;}.xui-node-a:hover, .xui-node-a:hover .xui-node{color:red}"+(c.gek?(".xui-node-a:focus{outline-offset:-1px;"+(c.ver<3?"-moz-outline-offset:-1px !important":"")+"}"):"")+".xui-node-span, .xui-node-div{border:0;}"+((c.ie&&c.ver<=8)?"":".xui-node-span:not(.xui-showfocus):focus, .xui-node-div:not(.xui-showfocus):focus{outline:0;}.xui-showfocus:focus{outline-width: 1px;outline-style: dashed;}")+".xui-node-span, .xui-wrapper span"+((c.ie&&c.ver<=7)?"":", .xui-v-wrapper:before, .xui-v-wrapper > .xui-v-node")+"{outline-offset:-1px;"+e+"}.xui-node-h1,.xui-node-h2,.xui-node-h3,.xui-node-h4,.xui-node-h5,.xui-node-h6{font-size:100%;font-weight:normal;}.xui-node-h1{font-size:138.5%;}.xui-node-h2{font-size:123.1%;}.xui-node-h3{font-size:108%;}.xui-node-h1,.xui-node-h2,.xui-node-h3{margin:1em 0;}.xui-node-h1,.xui-node-h2,.xui-node-h3,.xui-node-h4,.xui-node-h5,.xui-node-h6,.xui-node-strong{font-weight:bold;}.xui-node-em{font-style:italic;}.xui-node-legend{color:#000;}"+(c.ie6?("#"+xui.$localeDomId+"{vertical-align:baseline;}"):"")+".xui-nofocus:focus{outline:0;}.xui-cls-wordwrap{white-space: pre-wrap;word-break: break-all;"+(c.gek?"white-space: -moz-pre-wrap;":"")+(c.opr?"white-space: -pre-wrap;":"")+(c.opr?"white-space: -o-pre-wrap;":"")+(c.ie?"word-wrap: break-word;":"")+"}"+((c.ie&&c.ver<=8)?"":(".xui-v-wrapper:before{content:'';height:100%;font-size:0;vertical-align:middle;}.xui-v-wrapper > .xui-v-node{vertical-align:middle;}.xui-v-top > .xui-v-wrapper:before{vertical-align:top;}.xui-v-top > .xui-v-wrapper > .xui-v-node{vertical-align:top;}.xui-v-bottom > .xui-v-wrapper:before{vertical-align:bottom;}.xui-v-bottom > .xui-v-wrapper > .xui-v-node{vertical-align:bottom;}"))+".xui-node-tips{background-color:#FDF8D2;}.xuifont, .xuicon{font-size:1.3333333333333333em;line-height:1em;}.xuicon{margin: 0 .25em;"+e+"}.xuicon:before{height:1em;width:1em;}.xui-ui-ctrl, .xui-ui-reset{font-family:arial,helvetica,clean,sans-serif; font-style:normal; font-weight:normal; vertical-align:middle; color:#000; }.xui-ui-reset{font-size: inherit;}.xui-ui-ctrl{cursor:default;font-size:12px; font-size:0.75rem;}.xui-title-node{font-size:1.1667em  !important;}";this.addStyleSheet(d,"xui.CSS")}});Class("xui.DomProfile","xui.absProfile",{Constructor:function(d){var c=arguments.callee.upper;if(c){c.call(this)}c=null;xui.$cache.profileMap[this.domId=d]=this},Instance:{__gc:function(){delete xui.$cache.profileMap[this.domId]},_getEV:function(d,h,e){var g=xui.$cache.profileMap[h];if(g&&(g=g.events)&&(g=g[e])){for(var f=0,c=g.length;f<c;f++){if(typeof g[g[f]]=="function"){d[d.length]=g[g[f]]}}}}},Static:{get:function(c){return xui.$cache.profileMap[c]},$abstract:true}});Class("xui.Dom","xui.absBox",{Instance:{get:function(f){var e=xui.$cache.domPurgeData,h=this._nodes,j;if(xui.isNumb(f)){return(j=h[f])&&(j=e[j])&&j.element}else{var d=[],c=h.length;for(var g=0;g<c;g++){d[d.length]=(j=e[h[g]])&&j.element}return d}},each:function(d,m){var h=this,e=xui.$cache.domPurgeData,o,g,f=h._nodes,c=f.length;if(m){for(g=c;g>=0;g--){if((o=e[f[g]])&&(o=o.element)){if(false===d.call(h,o,g)){break}}}}else{for(g=0;g<c;g++){if((o=e[f[g]])&&(o=o.element)){if(false===d.call(h,o,g)){break}}}}o=null;return h},serialize:function(){var c=[];this.each(function(d){c[c.length]=d.id});return"xui(['"+c.join("','")+"'])"},xid:function(){return xui.getId(this.get(0))},id:function(f,g){var e,d,c=xui.$cache.profileMap;if(typeof f=="string"){return this.each(function(h){if((d=h.id)!==f){if(!g&&(e=c[d])){c[f]=e;delete c[d]}h.id=f}})}else{return this.get(0)&&this.get(0).id}},$sum:function(d,e){var c=[],g,f;this.each(function(h){g=d.apply(h,e||[]);if(g){if(xui.isArr(g)){for(f=0;h=g[f];f++){c[c.length]=h}}else{c[c.length]=g}}});return xui(c)},children:function(){return this.$sum(function(){return xui.toArr(this.childNodes)})},clone:function(c){return this.$sum(function(){var h=this.cloneNode(c?true:false),e=h.getElementsByTagName("*"),g=xui.browser.ie&&xui.browser.ver<9,d=0,f;if(g){h.removeAttribute("$xid")}else{delete h.$xid}for(;f=e[d];d++){if(g){f.removeAttribute("$xid")}else{delete f.$xid}}return h},arguments)},$iterator:function(e,d,g,c,f){return this.$sum(function(r,l,x,u,w){var B=arguments.callee;if(typeof u!="function"){var o=u||0;u=function(C,m){return m==o}}var p=0,j,h=this,q=0,A;while(h){if(h.nodeType==1){if(u(h,p++)===true){break}}if(r=="x"){h=l?h.nextSibling:h.previousSibling}else{if(r=="y"){h=l?B.call(l===1?h.lastChild:h.firstChild,"x",(l!==1),true,0,w):h.parentNode}else{x=xui.isBool(x)?x:true;j=null;h=l?(A=x&&h.firstChild)?A:(A=h.nextSibling)?A:(j=h.parentNode):(A=x&&h.lastChild)?A:(A=h.previousSibling)?A:(j=h.parentNode);if(j){while(!(j=l?h.nextSibling:h.previousSibling)){h=h.parentNode;if(!h){if(q){return null}else{q=true;j=l?document.body.firstChild:document.body.lastChild;break}}}h=j}x=true}}}return h},arguments)},query:function(d,o,n){d=d||"*";var l="getElementsByTagName",m=arguments.callee,j=m.f1||(m.f1=function(q,p,w){var u=this[l](q),f=[];if(w.test(this[p])){f[f.length]=this}for(var x,r=0;x=u[r];r++){if(w.test(x[p])){f[f.length]=x}}return f}),h=m.f2||(m.f2=function(q,p,w){var u=this[l](q),f=[];if(this[p]==w){f[f.length]=this}for(var x,r=0;x=u[r];r++){if(x[p]==w){f[f.length]=x}}return f}),g=m.f3||(m.f3=function(q,p,w){var u=this[l](q),f=[];if(this[p]){f[f.length]=this}for(var x,r=0;x=u[r];r++){if(x[p]){f[f.length]=x}}return f}),e=m.f4||(m.f4=function(f){return xui.toArr(this[l](f))}),c=m.f5||(m.f5=function(q,p){var u=this[l](q),f=[];if(p(this)){f[f.length]=this}for(var w,r=0;w=u[r];r++){if(p(w)){f[f.length]=w}}return f});return this.$sum(o?typeof o=="function"?c:n?xui.isReg(n)?j:h:g:e,[d,o,n])},querySelector:function(c){return this.$sum(function(){return this.querySelector(c)})},querySelectorAll:function(c){return this.$sum(function(){return xui.toArr(this.querySelectorAll(c))})},$add:function(u,q,l){if(xui.isHash(q)||xui.isStr(q)){q=xui.create(q)}if(l){l=xui(q);q=this}else{q=xui(q);l=this}if(q._nodes.length){var n=l.get(0),w=q.get(),g=xui.Dom,c=xui.$cache.profileMap,r,A,d,h,e,f,x,A,m=[];q.each(function(j){A=(d=j.id)&&(d=c[d])&&d.LayoutTrigger&&(n===xui("body").get(0)||g.getStyle(n,"display")!="none")&&d.LayoutTrigger;if(A){m.push([A,d])}});if(w.length==1){r=w[0]}else{r=document.createDocumentFragment();for(h=0;e=w[h];h++){r.appendChild(e)}}u.call(n,r);for(h=0;e=m[h];h++){for(f=0;x=e[0][f];f++){x.call(e[1])}if(e[1].onLayout){e[1].boxing().onLayout(e[1])}}m.length=0;n=e=r=null}return this},prepend:function(c,d){return this.$add(function(e){if(this.previousSibling!=e){if(this.firstChild){this.insertBefore(e,this.firstChild)}else{this.appendChild(e)}}},c,d)},append:function(d,e,c){return this.$add(function(f){if(c||this!=f.parentNode){this.appendChild(f)}},d,e)},addPrev:function(c,d){return this.$add(function(e){if(this.firstChild!=e){this.parentNode.insertBefore(e,this)}},c,d)},addNext:function(c,d){return this.$add(function(e){if(this.nextSibling!=e){if(this.nextSibling){this.parentNode.insertBefore(e,this.nextSibling)}else{this.parentNode.appendChild(e)}}},c,d)},replace:function(j,h){if(xui.isHash(j)||xui.isStr(j)){j=xui.create(j)}j=xui(j);var e,f,m=this.get(0),g=j.get(),d=g.length;if(d>0&&(e=g[d-1])){m.parentNode.replaceChild(e,m);for(f=0;f<d-1;f++){e.parentNode.insertBefore(g[f],e)}if(h){this.remove()}}m=e=null;return j},swap:function(e){var c=this,d=xui.Dom.getEmptyDiv().html("*",false);if(xui.isHash(e)||xui.isStr(e)){e=xui.create(e)}e=xui(e);c.replace(d,false);e.replace(c,false);d.replace(e,false);d.get(0).innerHTML="";document.body.insertBefore(d.get(0),document.body.firstChild);return c},remove:function(e,d,j){if(e===false){this.each(function(f,c){if(f.raphael&&f.remove){f.remove()}else{if(f.parentNode){f.parentNode.removeChild(f)}}})}else{var h=xui.$getGhostDiv();this.each(function(c){h.appendChild(c)});var g=function(){xui.$purgeChildren(h);h.innerHTML="";if(j){xui.tryF(j);j=null}h=null};if(d){g()}else{xui.asyRun(g)}}return this},empty:function(c){return this.each(function(d){xui([d]).html("",c)})},html:function(w,e,q,h,A){var C="",B,l=this.get(0);e=e!==false;if(w!==undefined){if(l){if(l.nodeType==3){l.nodeValue=w}else{if(!l.firstChild&&w===""){return this}if(e){var x=xui.$getGhostDiv();xui(l).children().each(function(c){x.appendChild(c)});var r=function(){xui.$purgeChildren(x);x.innerHTML="";if(A){xui.tryF(A);A=null}x=null};if(h){r()}else{xui.asyRun(r)}}var p;if(q){var n=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,m=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,j=/\ssrc=([\'\"])(.*?)\1/i,g,u,d;p=[];while((g=n.exec(w))){u=g[1];d=u?u.match(j):false;if(d&&d[2]){p.push([1,d[2]])}else{if(g[2]&&g[2].length>0){p.push([2,g[2]])}}}w=w.replace(m,"")}l.innerHTML=w;if(p&&p.length>0){xui.arr.each(p,function(c){if(c[0]==1){xui.include(null,c[1])}else{xui.exec(c[1])}})}}l=null}return this}else{if(l){C=(l.nodeType==3)?l.nodeValue:l.innerHTML;l=null}return C}},loadHtml:function(e,c,d){var f=this;if(typeof e=="string"){e={url:e}}xui.tryF(c);xui.Ajax(e.url,e.query,function(g){var h=xui.create("div");h.html(g,false,true);f.append(h.children());xui.tryF(d)},function(g){f.append("<div>"+g+"</div>");xui.tryF(d)},null,e.options).start()},loadIframe:function(c,g){if(typeof c=="string"){c={url:c}}var j=g||("aiframe_"+xui.stamp()),d;if(d=xui.Dom.byId(g)){xui(d).remove()}var f=xui.browser.ie&&xui.browser.ver<9,h=document.createElement(f?"<iframe name='"+j+"'>":"iframe");h.id=h.name=j;h.src=c.url;h.frameBorder="0";h.marginWidth="0";h.marginHeight="0";h.vspace="0";h.hspace="0";h.allowTransparency="true";h.width="100%";h.height="100%";this.append(h);xui.Dom.submit(c.url,c.query,c.method,h.name,c.enctype)},outerHTML:function(h,c){var l=this,j,p="",e=l.get(0),d=e.id;if(h!==undefined){var f=l.replace(xui.str.toDom(h),false);l._nodes[0]=f._nodes[0];xui([e]).remove(c);return l}else{if(xui.browser.gek){var g=xui.$getGhostDiv();g.appendChild(l.get(0).cloneNode(true));p=g.innerHTML;g.innerHTML="";g=null}else{p=e.outerHTML}e=null;return p}},text:function(e){if(e!==undefined){var d=this,c=[];d.each(function(g){var f=g.firstChild;if(f&&f.nodeType!=1){f.nodeValue=e}else{c[c.length]=g}});if(c.length){xui(c).empty().each(function(f){f.appendChild(document.createTextNode(e))})}return d}else{return(function(f){if(!f){return""}return f.textContent||f.innerText})(this.get(0))}},attr:function(d,m){var p=this,l=arguments.callee,h=l.map1||(l.map1={"class":"className",readonly:"readOnly",tabindex:"tabIndex","for":"htmlFor",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",value:"value"}),g=l.map2||(l.map2={href:1,src:1,style:1});if(typeof d=="object"){for(var f in d){l.call(p,f,d[f])}return p}var n=xui.browser.ie&&d=="style",j=!g[d=h[d]||d];if(m!==undefined){return p.each(function(r){if(m===null){if(n){r.style.cssText=""}else{if(j){try{r[d]=null;if(r.nodeType==1){r.removeAttribute(d)}}catch(q){}}}}else{m=d=="style"?(m+"").replace(/[;]+/g,";").replace(/^;/,""):m;if(n){r.style.cssText=""+m}else{if(j){r[d]=m;if(r.nodeType==1&&d!="value"&&typeof m=="string"){r.setAttribute(d,m)}}else{r.setAttribute(d,m)}}}})}else{var c,e=p.get(0);if(n){return e.style.cssText}if(d=="selected"&&xui.browser.kde){return e.parentNode.selectedIndex}c=((d in e)&&j)?e[d]:e.getAttribute(d,xui.browser.ie&&!j?2:undefined);e=null;return d=="style"?c.replace(/[;]+/g,";").replace(/^;/,""):c}},$touchscroll:function(g){if(xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){var h={x:1,y:1,xy:1},c=0,j=0,f=null,d=null,e=this._nodes;if(!h[g]){g=null}xui(e).onTouchstart(h[g]?function(o,n,q){if(xui.DragDrop._profile.isWorking){return true}if(n.touches.length>1){return true}var m=n.touches[0],l=xui(q).get(0);if(l){if(g=="xy"||g=="x"){c=m.pageX}if(g=="xy"||g=="y"){j=m.pageY}}return true}:null);xui(e).onTouchmove(h[g]?function(r,q,w){if(xui.DragDrop._profile.isWorking){return true}if(q.touches.length>1){return true}var o=q.touches[0],m=xui(w).get(0),l,n,u;if(m){l=m.scrollLeft;n=m.scrollTop;if(g=="xy"||g=="x"){if(f===null){u=1;f=m.scrollLeft+o.pageX+(c==o.pageX?0:c>o.pageX?1:-1)*10}m.scrollLeft=f-o.pageX}if(g=="xy"||g=="y"){if(d===null){u=1;d=m.scrollTop+o.pageY+(j==o.pageY?0:j>o.pageY?1:-1)*10}m.scrollTop=d-o.pageY}return(!u)&&l==m.scrollLeft&&n==m.scrollTop}}:null);xui(e).onTouchend(h[g]?function(m,l,n){if(xui.DragDrop._profile.isWorking){return true}if(l.touches.length>1){return true}f=d=null}:null)}return this},isScrollBarShowed:function(c){c=c=="x"?"scrollLeft":"scrollTop";if(this[c]()!==0){return true}this[c](1);if(this[c]()===0){return false}this[c](0);return true},scrollIntoView:function(){if(this.get(0)){this.get(0).scrollIntoView()}return this},css:function(c,e,d){if(typeof c=="object"||e!==undefined){this.each(function(f){xui.Dom.setStyle(f,c,e)});if(xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){if(c=="overflow"||c=="overflow-x"||c=="overflow-y"){if(e=="auto"||e=="scroll"){this.$touchscroll(c=="overflow"?"xy":c=="overflow-x"?"x":"y")}else{this.$touchscroll(null)}}}return this}else{return xui.Dom.getStyle(this.get(0),c,d)}},_getEmSize:function(c){return this.get(0)?parseFloat(xui.Dom.getStyle(this.get(0),"fontSize",true))*(c||1):null},rotate:function(d){if(xui.isSet(d)){d=parseFloat(d)||0;d=d%360;if(d<0){d=d+360}return this.each(function(j){if(j.raphael&&j.id){var h=xui.Event._getProfile(j.id);if((h=h&&h.parent&&h.parent._paper)&&(j=h.getById(j.raphaelid))){j.transform("r"+d)}}else{d+="deg";var g=j.style.transform||"";if(/rotate\([^)]*\)/i.test(g)){g=g.replace(/(rotate\()([^)]+)/i,"$1"+d)}else{g+=" rotate("+d+")"}xui.Dom.setStyle(j,"transform",g)}})}else{var f=this.get(0);if(f.raphael&&f.id){var e=xui.Event._getProfile(f.id);if((e=e&&e.parent&&e.parent._paper)&&(f=e.getById(f.raphaelid))){f=f.transform();if(xui.isArr(f)){if(!f.length){f=""}else{f=f.join()}}else{if(!f){f=""}else{f=Raphael.parseTransformString(f).join()}}var c=/r,([-\d.]+)/i.exec(f);d=c?parseFloat(c[1]||0):0;d=d%360;if(d<0){d=d+360}return d}return 0}else{var c=/rotate\(([-\d.]+)/i.exec(f.style.transform);return c?parseFloat(c[1]||0):0}}},scaleX:function(d){if(xui.isSet(d)){return this.each(function(l){if(l.raphael&&l.id){d=parseFloat(d);var j=xui.Event._getProfile(l.id),h;if((j=j&&j.parent&&j.parent._paper)&&(l=j.getById(l.raphaelid))){h=xui.clone(Raphael.parseTransformString(l.transform()),true);if(h&&h[0]&&h[0][0]=="s"){h[0][1]=d}else{h=h||[];h.unshift(["s",d,1])}l.transform(h)}}else{var g=l.style.transform||"";if(/(scale\()([^,]+),([^)]+)/i.test(g)){g=g.replace(/(scale\()([^,]+),([^)]+)/i,"$1"+d+",$3")}else{if(/scale\([-\d.]*\)/i.test(g)){g=g.replace(/scale\([-\d.]*\)/i,"scale("+d+",1)")}else{g+=" scale("+d+",1)"}}xui.Dom.setStyle(l,"transform",g)}})}else{var f=this.get(0);if(f.raphael&&f.id){d=1;var e=xui.Event._getProfile(f.id);if((e=e&&e.parent&&e.parent._paper)&&(f=e.getById(f.raphaelid))){xui.arr.each(Raphael.parseTransformString(f.transform()),function(g){if(g[0]=="s"){d*=g[1]}})}return d}else{var c=/(scale\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);if(c){return parseFloat(c[2]||1)}else{c=/scale\(([-\d.]*)\)/i.exec(this.get(0).style.transform);return c?c[1]:1}}}},scaleY:function(d){if(xui.isSet(d)){return this.each(function(l){if(l.raphael&&l.id){d=parseFloat(d);var j=xui.Event._getProfile(l.id),h;if((j=j&&j.parent&&j.parent._paper)&&(l=j.getById(l.raphaelid))){h=xui.clone(Raphael.parseTransformString(l.transform()),true);if(h&&h[0]&&h[0][0]=="s"){h[0][2]=d}else{h=h||[];h.unshift(["s",1,d])}l.transform(h)}}else{var g=l.style.transform||"";if(/(scale\()([^,]+),([^)]+)/i.test(g)){g=g.replace(/(scale\()([^,]+),([^)]+)/i,"$1$2,"+d)}else{if(/scale\([-\d.]*\)/i.test(g)){g=g.replace(/scale\([-\d.]*\)/i,"scale(1,"+d+")")}else{g+=" scale(1,"+d+")"}}xui.Dom.setStyle(l,"transform",g)}})}else{var f=this.get(0);if(f.raphael&&f.id){d=1;var e=xui.Event._getProfile(f.id);if((e=e&&e.parent&&e.parent._paper)&&(f=e.getById(f.raphaelid))){xui.arr.each(Raphael.parseTransformString(f.transform()),function(g){if(g[0]=="s"){d*=g[2]}})}return d}else{var c=/(scale\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);if(c){return parseFloat(c[3]||1)}else{c=/scale\(([-\d.]*)\)/i.exec(this.get(0).style.transform);return c?c[1]:1}}}},translateX:function(d){if(xui.isSet(d)){return this.each(function(l){if(l.raphael&&l.id){d=parseFloat(d);var j=xui.Event._getProfile(l.id),h;if((j=j&&j.parent&&j.parent._paper)&&(l=j.getById(l.raphaelid))){h=xui.clone(Raphael.parseTransformString(l.transform()),true);if(h&&h.length&&h[h.length-1]&&(h[h.length-1][0]=="t")){h[h.length-1][1]=d}else{h=h||[];h.push(["t",d,0])}l.transform(h)}}else{d=xui.CSS.$addu(d);var g=l.style.transform||"";if(/translate\([^)]*\)/i.test(g)){g=g.replace(/(translate\()([^,]+),([^)]+)/i,"$1"+d+",$3")}else{g+=" translate("+d+",0)"}xui.Dom.setStyle(l,"transform",g)}})}else{var f=this.get(0);if(f.raphael&&f.id){d=0;var e=xui.Event._getProfile(f.id);if((e=e&&e.parent&&e.parent._paper)&&(f=e.getById(f.raphaelid))){xui.arr.each(Raphael.parseTransformString(f.transform()),function(g){if(g[0]=="t"){d+=g[1]}})}return d}else{var c=/(translate\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return c?(c[2]||"").replace(/\s/g,""):""}}},translateY:function(d){if(xui.isSet(d)){return this.each(function(j){if(j.raphael&&j.id){d=parseFloat(d);var h=xui.Event._getProfile(j.id);if((h=h&&h.parent&&h.parent._paper)&&(j=h.getById(j.raphaelid))){t=xui.clone(Raphael.parseTransformString(j.transform()),true);if(t&&t.length&&t[t.length-1]&&(t[t.length-1][0]=="t")){t[t.length-1][2]=d}else{t=t||[];t.push(["t",0,d])}j.transform(t)}}else{d=xui.CSS.$addu(d);var g=j.style.transform||"";if(/translate\([^)]*\)/i.test(g)){g=g.replace(/(translate\()([^,]+),([^)]+)/i,"$1$2,"+d)}else{g+=" translate(0,"+d+")"}xui.Dom.setStyle(j,"transform",g)}})}else{var f=this.get(0);if(f.raphael&&f.id){d=0;var e=xui.Event._getProfile(f.id);if((e=e&&e.parent&&e.parent._paper)&&(f=e.getById(f.raphaelid))){xui.arr.each(Raphael.parseTransformString(f.transform()),function(g){if(g[0]=="t"){d+=g[2]}})}return d}else{var c=/(translate\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return c?(c[3]||"").replace(/\s/g,""):""}}},skewX:function(d){if(xui.isSet(d)){if(xui.isFinite(d)){d+="deg"}return this.each(function(f){var e=f.style.transform||"";if(/skew\([^)]*\)/i.test(e)){e=e.replace(/(skew\()([^,]+),([^)]+)/i,"$1"+d+",$3")}else{e+=" skew("+d+",0deg)"}xui.Dom.setStyle(f,"transform",e)})}else{var c=/(skew\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return c?parseFloat(c[2]||0):0}},skewY:function(d){if(xui.isSet(d)){if(xui.isFinite(d)){d+="deg"}return this.each(function(f){var e=f.style.transform||"";if(/skew\([^)]*\)/i.test(e)){e=e.replace(/(skew\()([^,]+),([^)]+)/i,"$1$2,"+d)}else{e+=" skew(0deg,"+d+")"}xui.Dom.setStyle(f,"transform",e)})}else{var c=/(skew\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return c?parseFloat(c[3]||0):0}},caret:function(g,o){var A=this.get(0),C=A.nodeName.toLowerCase(),w=typeof g,f=xui.browser.ie,x;if(!/^(input|textarea)$/i.test(C)){return}if(C=="input"&&A.type.toLowerCase()!="text"&&A.type.toLowerCase()!="password"){return}A.focus();if(w=="number"){if(f){var c=A.createTextRange();c.collapse(true);c.moveEnd("character",o);c.moveStart("character",g);c.select()}else{A.focus();A.setSelectionRange(g,o)}return this}else{if(w=="string"){var c=this.caret(),n=0,j=0,u,B=A.value,h=/\r/g;if(f){n=B.substr(0,c[0]).match(h);n=(n&&n.length)||0;j=g.match(h);j=(j&&j.length)||0}if(xui.browser.opr){n=g.match(/\n/g);n=(n&&n.length)||0;j=g.match(/\r\n/g);j=(j&&j.length)||0;j=n-j;n=0}A.value=B.substr(0,c[0])+g+B.substr(c[1],B.length);u=c[0]-n+j+g.length;this.caret(u,u);return u}else{if(f&&document.selection){var c=document.selection.createRange(),p=c.text,n=p.length,q,j;if(C.toLowerCase()=="input"){c.moveStart("character",-A.value.length);q=c.text.length;return[q-n,q]}else{var d=c.duplicate();d.moveToElementText(A);d.setEndPoint("EndToEnd",c);q=d.text.length;return[q-n,q]}}else{return[A.selectionStart,A.selectionEnd]}}}},show:function(d,f,j,m,e){var c,l,h=xui.Dom.HIDE_VALUE,g;return this.each(function(p){if(p.nodeType!=1){return}var n=xui.getNodeData(p,"_inthread");if(n){xui.Thread(n).abort();xui.setNodeData(p,"_inthread")}c=p.style;g=xui.getNodeData(p);if(g._xuihide){if("_left" in g){if(c.left!=(l=g._left)){c.left=l}}if("_top" in g){if(c.top!=(l=g._top)){c.top=l}}if("_position" in g){if(c.position!=(l=g._position)){c.position=l}}if(c.visibility!="visible"){c.visibility="visible"}g._xuihide=0}if(xui.isSet(d)){c.left=d}if(xui.isSet(f)){c.top=f}m=e?null:m?m:xui.get(xui.UIProfile.getFromDom(p),["properties","showEffects"]);if(m){m=xui.Dom._getEffects(m,1)}if(m){xui.Dom._vAnimate(p,m,j)}else{if(j){j()}}})},hide:function(g,f,c){var d,e;return this.each(function(l){if(l.nodeType!=1){return}var j=xui.getNodeData(l,"_inthread");if(j){xui.Thread(j).abort();xui.setNodeData(l,"_inthread")}d=l.style;e=xui.getNodeData(l);var h=function(){if(e._xuihide!==1){e._position=d.position;e._visibility=d.visibility;e._top=d.top;e._left=d.left;e._xuihide=1}if(d.position!="absolute"){d.position="absolute"}d.visibility="hidden";d.top=d.left=xui.Dom.HIDE_VALUE;if(g){g()}};f=c?null:f?f:xui.get(xui.UIProfile.getFromDom(l),["properties","hideEffects"]);if(f){f=xui.Dom._getEffects(f,0)}if(f){xui.Dom._vAnimate(l,f,h)}else{h()}})},cssRegion:function(r,u){var A=this;if(typeof r=="object"){var n,x,e,d=A.get(0),l=xui.Dom,o=l._setUnitStyle,e={};for(var h=0,p=l._boxArr;n=p[h++];){e[n]=((n in r)&&r[n]!==null)?o(d,n,r[n]):false}if(u){var o=l.$hasEventHandler;if(o(d,"onsize")&&(e.width||e.height)){A.onSize(true,{width:e.width,height:e.height})}if(o(d,"onmove")&&(e.left||e.top)){A.onMove(true,{left:e.left,top:e.top})}}return A}else{var g=r,w=u,q=g?A.offset(null,w):A.cssPos(),B=A.cssSize();return{left:q.left,top:q.top,width:B.width,height:B.height}}},cssSize:function(o,j){var n=this,d=n.get(0),c,e=xui.Dom,g=e._setUnitStyle,l,h;if(o){var m;l=o.width!==null?g(d,"width",o.width):false;h=o.height!==null?g(d,"height",o.height):false;if(j&&(l||h)&&e.$hasEventHandler(d,"onsize")){n.onSize(true,{width:l,height:h})}c=n}else{c={width:n._W(d,1)||0,height:n._H(d,1)}}return c},cssPos:function(j,m){var d=this.get(0),e=xui.Dom,g=xui.CSS,h=e._setUnitStyle,n,l,c;if(j){var o;n=j.left!=null?h(d,"left",j.left):false;l=j.top!==null?h(d,"top",j.top):false;if(m&&(n||l)&&e.$hasEventHandler(d,"onmove")){this.onMove(true,{left:n,top:l})}c=this}else{h=e.getStyle;c={left:g.$px(h(d,"left"),d),top:g.$px(h(d,"top"),d)}}d=null;return c},offset:function(h,w){var o,m,D=xui.browser,H=this,q=H.get(0),A=q,l=q.parentNode,j=q.offsetParent,G=q.ownerDocument,C=G.documentElement,E=G.body,e=/^inline|table.*$/i,g=xui.Dom.getStyle,f=g(q,"position")=="fixed",F=arguments.callee,n=F.add||(F.add=function(I,d,r){I.left+=parseFloat(d)||0;I.top+=parseFloat(r)||0}),u=F.border||(F.border=function(d,r){n(r,g(d,"borderLeftWidth"),g(d,"borderTopWidth"))}),p=F.TTAG||(F.TTAG={TABLE:1,TD:1,TH:1}),x=F.HTAG||(F.HTAG={BODY:1,HTML:1}),c=F.posDiff||(F.posDiff=function(J,I){var r=J.cssPos(),d=J.offset(null,I);return{left:d.left-r.left,top:d.top-r.top}});w=w?xui(w).get(0):G;if(h){if(h.left===null&&h.top===null){return H}var B=c(H,w);H.cssPos({left:h.left===null?null:(h.left-B.left),top:h.top===null?null:(h.top-B.top)});o=H}else{if(!(xui.browser.gek&&q===document.body)&&q.getBoundingClientRect){m=q.getBoundingClientRect();h={left:m.left,top:m.top};if(w.nodeType==1&&w!==document.body){n(h,-(m=w.getBoundingClientRect()).left+w.scrollLeft,-m.top+w.scrollTop)}else{n(h,(C.scrollLeft||E.scrollLeft||0)-C.clientLeft,(C.scrollTop||E.scrollTop||0)-C.clientTop)}}else{h={left:0,top:0};n(h,q.offsetLeft,q.offsetTop);while(j&&j!=w&&j!=w.offsetParent){n(h,j.offsetLeft,j.offsetTop);if(D.kde||(D.gek&&!p[j.nodeName])){u(j,h)}if(!f&&g(j,"position")=="fixed"){f=true}if(j.nodeName!="BODY"){A=j.nodeName=="BODY"?A:j}j=j.offsetParent}while(l&&l.nodeName&&l!=w&&!x[l.nodeName]){if(!e.test(g(l,"display"))){n(h,-l.scrollLeft,-l.scrollTop)}if(D.gek&&g(l,"overflow")!="visible"){u(l,h)}l=l.parentNode}if((D.gek&&g(A,"position")!="absolute")){n(h,-E.offsetLeft,-E.offsetTop)}if(f){n(h,C.scrollLeft||E.scrollLeft||0,C.scrollTop||E.scrollTop||0)}}o=h}return o},hasClass:function(f){var g,e,d=xui.isReg(f),c=xui.Dom._getClass(this.get(0)).split(/\s+/);if(d){for(g=0,e=c.length;g<e;g++){if(f.test(c[g])){return true}}}else{return xui.arr.indexOf(c,f+"")!=-1}return false},addClass:function(c){var g,f,e,j=arguments.callee,d=(j.reg||(j.reg=/\s+/)),n,m,h=(c+"").split(d);if(!h.length){return this}return this.each(function(l){m=0;g=xui.Dom._getClass(l).split(d);n=[];for(f=0,e=g.length;f<e;f++){if(g[f]){n.push(g[f])}}for(f=0,e=h.length;f<e;f++){if(h[f]&&xui.arr.indexOf(g,h[f])==-1){m=1;n.push(h[f])}}if(m){xui.Dom._setClass(l,n.join(" "))}})},removeClass:function(c){var h,g,f,d=xui.isReg(c),m=arguments.callee,e=(m.reg||(m.reg=/\s+/)),n,j;if(!d){j=(c+"").split(e);if(!j.length){return this}}return this.each(function(l){n=0;h=xui.Dom._getClass(l).split(e);if(!d){for(g=0,f=j.length;g<f;g++){if(xui.arr.indexOf(h,j[g])!=-1){n=1;xui.arr.removeValue(h,j[g])}}}else{xui.filter(h,function(q,p){if(c.test(q)){n=1;return false}})}if(n){xui.Dom._setClass(l,h.join(" "))}})},replaceClass:function(e,c){var f,d;return this.each(function(g){d=(f=xui.Dom._getClass(g)).replace(e,c);if(f!=d){xui.Dom._setClass(g,d)}})},tagClass:function(c,g){var f=this,j=arguments.callee,e=j["_r1_"+c]||(j["_r1_"+c]=new RegExp("([-\\w]+"+c+"[-\\w]*)")),d=j._r2||(j._r2=/([-\w]+)/g);f.removeClass(e);g=false!==g;var h=g?f.replaceClass(d,"$1 $1"+c):f;if(xui.__iefix2&&(c=="-checked"||c=="-fold"||c=="-expand")){this.each(function(m){var l=xui.Dom._getClass(m).split(/\s+/);if(xui.arr.indexOf(l,"xuifont")!=-1||xui.arr.indexOf(l,"xuicon")!=-1){xui.arr.each(l,function(n){if(xui.__iefix2[n+(g?"":c)]&&xui.__iefix2[g?n.replace(new RegExp(c+"$"),""):n]){xui(m).html(xui.__iefix2[n.replace(new RegExp(c+"$"),"")+(g?c:"")]);return false}})}})}return h},$addEventHandler:function(c){var f=xui.Event,e,d=f.$eventhandler;return this.each(function(g){if(g.nodeType==3){return}xui.setNodeData(g,["eHandlers","on"+f._eventMap[c]],d);if(e=f._eventHandler[c]){g[e]=d;xui.setNodeData(g,["eHandlers",e],d);if(xui.browser.isTouch&&e=="onmousedown"){xui.setNodeData(g,["eHandlers","onxuitouchdown"],d);if(g.addEventListener){g.addEventListener("xuitouchdown",d,false)}else{if(g.attachEvent){g.attachEvent("xuitouchdown",d)}}}}})},$removeEventHandler:function(c){var f=xui.Event,e=f.$eventhandler,d;return this.each(function(g){if(d=f._eventHandler[c]){g[d]=null;if(xui.browser.isTouch&&d=="onmousedown"){if(g.removeEventListener){g.removeEventListener("xuitouchdown",e,false)}else{if(g.detachEvent){g.detachEvent("xuitouchdown",e)}}}}if(g=xui.getNodeData(g,"eHandlers")){d="on"+f._eventMap[c];delete g[d];if(xui.browser.isTouch&&d=="onmousedown"){delete g.onxuitouchdown}}})},$addEvent:function(e,n,o,j){var r=this,d=xui.Event,h=xui.arr.removeValue,p=xui.arr.insertAny,f,l,q,g;if(!j&&j!==0){j=-1}if(typeof o=="string"){o="$"+o}else{o=undefined}r.$addEventHandler(e).each(function(c){if(c.nodeType==3){return}if(!(f=d.getId(c))&&c!==window&&c!==document){f=c.id=xui.Dom._pickDomId()}if(!(l=xui.$cache.profileMap[f])){l=new xui.DomProfile(f)}q=l.events||(l.events={});g=q[e]||(q[e]=[]);if(o===undefined){g.length=0;g=q[e]=[];j=-1;o="_"}g[o]=n;h(g,o);if(j==-1){g[g.length]=o}else{p(g,o,j)}if(xui.Event&&(l=xui.Event._getProfile(f))&&l.clearCache){l.clearCache()}});return r},$removeEvent:function(e,o,g){var q=this,n,p,h,f,l,m,d=xui.Event,j=xui.$cache.profileMap,m=d._eventMap[e];q.each(function(c){if(!(f=d.getId(c))){return}if(!(n=j[f])){return}if(!(p=n.events)){return}if(g){xui.arr.each(d._getEventName(m),function(r){delete p[r]})}else{if(typeof o=="string"){o="$"+o;if(h=p[e]){if(xui.arr.indexOf(h,o)!=-1){xui.arr.removeValue(h,o)}delete h[o]}}else{delete p[e]}}if(xui.Event&&(n=xui.Event._getProfile(f))&&n.clearCache){n.clearCache()}});return q},$getEvent:function(e,d){var g;if(!(g=xui.Event.getId(this.get(0)))){return}if(d){return xui.get(xui.$cache.profileMap,[g,"events",e,"$"+d])}else{var f=[],c=xui.get(xui.$cache.profileMap,[g,"events",e]);xui.arr.each(c,function(j,h){f[f.length]={o:c[j]}});return f}},$clearEvent:function(){return this.each(function(d,c){if(!(c=xui.Event.getId(d))){return}if(!(c=xui.$cache.profileMap[c])){return}xui.breakO(c.events,2);delete c.events;xui.arr.each(xui.Event._events,function(e){if(d["on"+e]){d["on"+e]=null}})})},$fireEvent:function(c,j){var m=xui.Event._eventMap[c],o,p="on"+m,n,g,l=arguments.callee,h=xui.Event.$eventhandler,e=l.f1||(l.f1=function(){this.returnValue=false}),d=l.f2||(l.f2=function(){this.cancelBubble=true});return this.each(function(q){if(!(n=xui.getNodeData(q,["eHandlers",p]))){return}if("blur"==m||"focus"==m){try{q[m]()}catch(f){}}else{g=xui.copy(j);xui.merge(g,{type:m,target:q,button:1,$xuievent:true,$xuitype:c,preventDefault:e,stopPropagation:d},"all");n.call(q,g)}})},nativeEvent:function(c){return this.each(function(f){if(f.nodeType===3||f.nodeType===8){return}try{f[c]()}catch(d){}})},$canFocus:function(){var f=arguments.callee,c=xui.Dom.getStyle,g=f.map||(f.map={a:1,input:1,select:1,textarea:1,button:1,object:1}),d,e;return !!((e=this.get(0))&&e.focus&&(((d=g[e.nodeName.toLowerCase()])&&!(parseInt(e.tabIndex,10)<=-1))||(!d&&parseInt(e.tabIndex,10)>=(xui.browser.ie?1:0)))&&c(e,"display")!="none"&&c(e,"visibility")!="hidden"&&e.offsetWidth>0&&e.offsetHeight>0)},focus:function(d){var c=this;if(d||c.$canFocus()){try{c.get(0).focus()}catch(f){}}return c},setSelectable:function(e){var d=arguments.callee,c;this.removeClass("xui-ui-selectable").removeClass("xui-ui-unselectable");this.addClass(e?"xui-ui-selectable":"xui-ui-unselectable");return this.each(function(f){if(xui.browser.ie&&xui.browser.ver<10){xui.setNodeData(f,"_onxuisel",e?"true":"false")}})},setInlineBlock:function(){var c=this;if(xui.browser.gek){if(xui.browser.ver<3){c.css("display","-moz-inline-block").css("display","-moz-inline-box").css("display","inline-block")}else{c.css("display","inline-block")}}else{if(xui.browser.ie&&xui.browser.ver<=6){c.css("display","inline-block").css({display:"inline",zoom:"1"})}else{c.css("display","inline-block")}}return c},topZindex:function(c){var g=1000,e=0,d,h=this.get(0),l=h.offsetParent,f,m;if(xui.browser.ie&&(!l||(l.nodeName+"").toUpperCase()=="HTML")){l=xui("body").get(0)}if(h.nodeType!=1||!l){return 1}f=l.childNodes;for(d=0;m=f[d];d++){if(m==h||m.nodeType!=1||!m.$xid||m.style.display=="none"||m.style.visibility=="hidden"||m.zIndexIgnore||xui.getNodeData(m,"zIndexIgnore")){continue}e=parseInt(m.style&&m.style.zIndex,10)||0;g=g>e?g:e}g++;if(g>=xui.Dom.TOP_ZINDEX){xui.Dom.TOP_ZINDEX=g+1}if(c){h.style.zIndex=g}else{e=parseInt(h.style.zIndex,10)||0;return g>e?g:e}return this},nextFocus:function(f,e,d,h){f=xui.isBool(f)?f:true;var c=this.get(0),g=this.$iterator("",f,e,function(j){return j!==c&&(!h||(j.id&&h.test(j.id)))&&xui([j]).$canFocus()});if(!g.isEmpty()&&d!==false){g.focus()}c=null;return g},animate:function(A,x,j,c,g,e,l,o,F,m,d){var E=arguments.callee,n=xui.CSS,f=xui.Dom.$AnimateEffects||(xui.Dom.$AnimateEffects={linear:function(G,H){return(1/G)*H},sineIn:function(G,H){return -1*Math.cos(H/G*(Math.PI/2))+1},sineOut:function(G,H){return Math.sin(H/G*(Math.PI/2))},sineInOut:function(G,H){return -1/2*(Math.cos(Math.PI*H/G)-1)},quadIn:function(G,H){return(H/=G)*H},quadOut:function(G,H){return -1*(H/=G)*(H-2)},quadInOut:function(G,H){if((H/=G/2)<1){return 1/2*H*H}return -1/2*((--H)*(H-2)-1)},cubicIn:function(G,H){return(H/=G)*H*H},cubicOut:function(G,H){return((H=H/G-1)*H*H+1)},cubicInOut:function(G,H){if((H/=G/2)<1){return 1/2*H*H*H}return 1/2*((H-=2)*H*H+2)},quartIn:function(G,H){return(H/=G)*H*H*H},quartOut:function(G,H){return -1*((H=H/G-1)*H*H*H-1)},quartInOut:function(G,H){if((H/=G/2)<1){return 1/2*H*H*H*H}return -1/2*((H-=2)*H*H*H-2)},quintIn:function(G,H){return(H/=G)*H*H*H*H},quintOut:function(G,H){return((H=H/G-1)*H*H*H*H+1)},quintInOut:function(G,H){if((H/=G/2)<1){return 1/2*H*H*H*H*H}return 1/2*((H-=2)*H*H*H*H+2)},expoIn:function(G,H){return(H==0)?0:Math.pow(2,10*(H/G-1))},expoOut:function(G,H){return(H==G)?1:(-Math.pow(2,-10*H/G)+1)},expoInOut:function(G,H){if(H==0){return 0}if(H==G){return 1}if((H/=G/2)<1){return 1/2*Math.pow(2,10*(H-1))}return 1/2*(-Math.pow(2,-10*--H)+2)},circIn:function(G,H){return -1*(Math.sqrt(1-(H/=G)*H)-1)},circOut:function(G,H){return Math.sqrt(1-(H=H/G-1)*H)},circInOut:function(G,H){if((H/=G/2)<1){return -1/2*(Math.sqrt(1-H*H)-1)}return 1/2*(Math.sqrt(1-(H-=2)*H)+1)},bounceIn:function(G,H){return 1-f.bounceOut(G,G-H)},bounceOut:function(H,I){var G=7.5625;if((I/=H)<(1/2.75)){return(G*I*I)}else{if(I<(2/2.75)){return(G*(I-=(1.5/2.75))*I+0.75)}else{if(I<(2.5/2.75)){return(G*(I-=(2.25/2.75))*I+0.9375)}else{return(G*(I-=(2.625/2.75))*I+0.984375)}}}},bounceInOut:function(G,H){if(H<G/2){return f.bounceIn(G,H*2)*0.5}else{return f.bounceOut(G,H*2-G)*0.5+1*0.5}},backIn:function(H,I){var G=1.70158;return(I/=H)*I*((G+1)*I-G)},backOut:function(H,I){var G=1.70158;return((I=I/H-1)*I*((G+1)*I+G)+1)},backInOut:function(H,I){var G=1.70158;if((I/=H/2)<1){return 1/2*(I*I*(((G*=(1.525))+1)*I-G))}return 1/2*((I-=2)*I*(((G*=(1.525))+1)*I+G)+2)},elasticIn:function(I,L,J,G,K){if(L==0){return 0}if((L/=I)==1){return 1}if(!K){K=I*0.3}if(!G||G<1){G=1;var H=K/4}else{var H=K/(2*Math.PI)*Math.asin(1/G)}return -(G*Math.pow(2,10*(L-=1))*Math.sin((L*I-H)*(2*Math.PI)/K))},elasticOut:function(I,L,J,G,K){if(L==0){return 0}if((L/=I)==1){return 1}if(!K){K=I*0.3}if(!G||G<1){G=1;var H=K/4}else{var H=K/(2*Math.PI)*Math.asin(1/G)}return(G*Math.pow(2,-10*L)*Math.sin((L*I-H)*(2*Math.PI)/K)+1)},elasticInOut:function(I,L,J,G,K){if(L==0){return 0}if((L/=I/2)==2){return 1}if(!K){K=I*(0.3*1.5)}if(!G||G<1){G=1;var H=K/4}else{var H=K/(2*Math.PI)*Math.asin(1/G)}if(L<1){return -0.5*(G*Math.pow(2,10*(L-=1))*Math.sin((L*I-H)*(2*Math.PI)/K))}return G*Math.pow(2,-10*(L-=1))*Math.sin((L*I-H)*(2*Math.PI)/K)*0.5+1}}),r=E.color||(E.color=function(M,L,H){if(typeof M!="string"||typeof L!="string"){return"#fff"}if(H<0){return M}if(H>1){return L}var I,G,K,J;I=function(N){return(N.charAt(0)!="#")?("#"+N):N};M=I(M);L=I(L);G=function(P,O,N){return parseInt(P.slice(O,N),16)||0};K=function(N){return{red:G(N,1,3),green:G(N,3,5),blue:G(N,5,7)}};M=K(M);L=K(L);J=function(R,Q,O,P){var N=R[P]+Math.round(parseFloat(O*(Q[P]-R[P])));return(N<16?"0":"")+N.toString(16)};return"#"+J(M,L,H,"red")+J(M,L,H,"green")+J(M,L,H,"blue")});if(!A){if(j){xui.tryF(j)}return}var w=A;A=xui.clone(A);if((g||0)>0){c=g*16}else{c=c||200}m=m||1;e=(e in f)?e:"circIn";var h,q=this.get(0),p=this,D=function(M){var N=xui.stamp()-h,H,I,K,G,J,L;if(N>=c){N=c}xui.each(A,function(P,O){J=P[0];L=P[1];I=P[2];H=f[e](c,N);if(typeof P=="function"){P.call(p,H)}else{if(xui.str.endWith(O.toLowerCase(),"color")){H=r(J,L,H)}else{if(!xui.isFinite(L)){I=L.replace(/[-\d.]*/,"");K=I||"px";if(!xui.isFinite(J)){G=J.replace(/[-\d.]*/,"")||"px";if(G!=K){if(G=="em"&&K=="px"){J=n.$em2px(J,q)}else{if(G=="px"&&K=="em"){J=n.$px2em(J,q)}}}}}J=parseFloat(J);L=parseFloat(L);H=xui.toFixedNumber(J+(L-J)*H,6)}H+=I||o||"";(p[O])?(p[O](H)):(p.css(O,H))}});if(N==c){if(F&&!d){h=xui.stamp();d=1;xui.each(A,function(P,O){O=P[0];P[0]=P[1];P[1]=O})}else{if(m==-1||m>0){h=xui.stamp();if(m>0){m-=1}if(d){d=0;xui.each(A,function(P,O){O=P[0];P[0]=P[1];P[1]=O})}}}if(!m){xui.Thread(M).abort("normal")}return false}},C=[D];var u=xui.getNodeData(q,"_inthread");if(u&&xui.Thread.isAlive(u)){xui.Thread(u).abort("force");xui.setNodeData(q,"_inthread",null)}var B=xui.getNodeData(q,"_animationreset");if(typeof B=="function"){B();xui.setNodeData(q,"_animationreset",null)}return xui.Thread(l||xui.id(),C,0,null,function(G){xui.setNodeData(q,"_inthread",G);h=xui.stamp();xui.setNodeData(q,"_animationreset",function(){xui.merge(A,w,"all");h=xui.stamp();D()});return xui.tryF(x,arguments,this)},function(H,G){if("force"!=G){xui.tryF(j,arguments,this)}if(q&&q.$xid){xui.setNodeData(q,"_inthread",null);xui.setNodeData(q,"_animationreset",null)}},true)},pop:function(j,f,e,c,g){var d=this,h=xui.stamp()+":"+d.xid();d.popToTop(j,f||"outer",e).setBlurTrigger(h,function(){if(typeof(c)=="function"){xui.tryF(c)}else{d.hide()}});return h},popToTop:function(j,f,l,g,p,B){var e,C=this,o;l=xui(l);if(l.isEmpty()){l=xui("body")}C.css({position:"absolute",left:xui.Dom.HIDE_VALUE,top:xui.Dom.HIDE_VALUE,display:"block",zIndex:xui.Dom.TOP_ZINDEX++});if(j["xui.UI"]||j["xui.UIProfile"]||j["xui.Dom"]||j.nodeType==1||typeof j=="string"){if(typeof(f)!="function"){f=(f||12)+""}var q=xui(j),u=q.offset(null,l);e={left:u.left,top:u.top,width:q.offsetWidth(),height:q.offsetHeight()}}else{if(typeof(f)!="function"){f=f?"3":"0"}o=f=="0"?0:8;e=j.region||{left:j.left-o,top:j.top-o,width:o*2,height:o*2}}j={left:0,top:0};var o=(l.get(0)===document.body||l.get(0)===document||l.get(0)===window)?xui.win:l,m={};C.cssPos(j).css({visibility:"hidden",display:"block"});l.append(C);m.left=o.scrollLeft();m.top=o.scrollTop();m.width=o.width()+m.left;m.height=o.height()+m.top;if(typeof(f)=="function"){j=f(e,m,C,o)}else{var n=C.offsetWidth(),x=C.offsetHeight(),d=f.split(/-/g);if(d.length==2){var c=d[0],A=d[1];switch(A){case"outertop":j.top=e.top-x;break;case"top":j.top=e.top;break;case"middle":j.top=e.top+e.height/2-x/2;break;case"bottom":j.top=e.top+e.height-x;break;default:j.top=e.top+e.height}switch(c){case"outerleft":j.left=e.left-n;break;case"left":j.left=e.left;break;case"center":j.left=e.left+e.width/2-n/2;break;case"right":j.left=e.left+e.width-n;break;default:j.left=e.left+e.width}}else{if(f=="outer"){f="12"}else{if(f=="inner"){f="4"}}var r=function(D){var w,h;switch(D){case"2":w=true;h=false;break;case"3":w=h=false;break;case"4":w=h=true;break;default:w=false;h=true}if(w){if(e.top+x<m.height){j.top=e.top}else{j.top=e.top+e.height-x}}else{if(e.top+e.height+x<m.height){j.top=e.top+e.height}else{j.top=e.top-x}}if(h){if(e.left+n<m.width){j.left=e.left}else{j.left=e.left+e.width-n}}else{if(e.left+e.width+n<m.width){j.left=e.left+e.width}else{j.left=e.left-n}}if(j.left+n>m.width){j.left=m.width-n}if(j.left<m.left){j.left=m.left}if(j.top+x>m.height){j.top=m.height-x}if(j.top<m.top){j.top=m.top}};if(f=="12"){r("1");if(j.top<e.top+e.height&&j.top+x>e.top){r("2")}}else{if(f=="21"){r("2");if(j.left<e.left+e.width&&j.left+n>e.left){r("1")}}else{r(f)}}}}C.cssPos(j).css({visibility:"visible"});p=B?null:p?p:xui.get(xui.UIProfile.getFromDom(C),["properties","showEffects"]);if(p){p=xui.Dom._getEffects(p,1)}if(p){xui.Dom._vAnimate(C,p,g)}else{if(g){g()}}return this},hoverPop:function(d,g,f,n,j,e,m,h){d=xui(d);if(m){m=xui.Dom._getEffects(m,1)}if(h){h=xui.Dom._getEffects(h,0)}if(!xui.isDefined(g)){g="outer"}var c=e||(this.xid()+":"+d.xid()),l=this;this.onMouseover(g===null?null:function(o,p,q){if(p.$force){return}xui.resetRun(c,null);var r=xui.getData([c,"$ui.hover.pop"])&&xui.getNodeData(d.get(0)||"empty","$ui.hover.parent")==q;if(!r){xui.setData([c,"$ui.hover.pop"],1);xui.setNodeData(d.get(0)||"empty","$ui.hover.parent",q);if(!f||false!==f(o,d,p,q)){d.popToTop(q,g,j,m);d.onMouseover(function(){l.onMouseover(true)},"hoverPop").onMouseout(function(){l.onMouseout(true)},"hoverPop")}}},c).onMouseout(g===null?null:function(o,p,q){if(p.$force){return}xui.resetRun(c,function(){xui.setData([c,"$ui.hover.pop"]);xui.setNodeData(d.get(0)||"empty","$ui.hover.parent",0);if(!n||false!==n(o,d,p,q,"host")){d.hide(null,h);d.onMouseover(null,"hoverPop").onMouseout(null,"hoverPop")}})},c);if(d){d.onMouseover(g===null?null:function(o){if(o.$force){return}xui.resetRun(c,null)},c).onMouseout(g===null?null:function(o,p,q){if(p.$force){return}xui.resetRun(c,function(){xui.setData([c,"$ui.hover.pop"]);xui.setNodeData(d.get(0)||"empty","$ui.hover.parent",0);if(!n||false!==n(o,d,p,q,"pop")){d.hide(null,h);d.onMouseover(null,"hoverPop").onMouseout(null,"hoverPop")}})},c)}d.css("display","none");return this},setBlurTrigger:function(c,f,n,o,d){var l=this,m=document,e="$blur_triggers$",j=xui.Dom._blurTrigger||(xui.Dom._blurTrigger=function(q,x){var q=xui.Event.getPos(x),u=arguments.callee.arr,F=xui.Event.getSrc(x),C=xui.copy(u),B,A,D,r,E;xui.arr.each(C,function(p){B=true;if(!(E=u[p].target)){B=false}else{E.each(function(w){if(w!==window&&w!==document&&!xui.Dom.byId(w.id)){return B=false}})}if(!B){xui.arr.removeValue(u,p);delete u[p]}});C=xui.copy(u);xui.arr.each(C,function(w){E=u[w];if(!E){return}B=true;var p=function(){var G=E.target.get();while(F&&F.nodeName&&F.nodeName!="BODY"&&F.nodeName!="HTML"){if(xui.arr.indexOf(G,F)!=-1){return true}F=F.parentNode}};if(!E.checkChild||p()){E.target.each(function(G){if(G.parentNode&&(D=G.offsetWidth)&&(r=G.offsetHeight)){A=xui([G]).offset();if(q.left>=A.left&&q.top>=A.top&&q.left<=(A.left+D)&&q.top<=(A.top+r)){return B=false}}})}p=null;if(!B&&!xui.isFun(E.trigger)){return false}if(B){xui.arr.removeValue(u,w);delete u[w];xui.tryF(E.trigger,[q,x],E.target);E=null}else{if(E.stopNext){return false}}},null,true);F=null;C.length=0}),g=j.arr||(j.arr=[]),h;if(g[c]){if(f===true){xui.tryF(g[c].trigger);f=false}xui.arr.removeValue(g,c);delete g[c]}if(f){if(n){if(n["xui.Dom"]){h=n}else{if(xui.isArr(n)){h=xui();h._nodes=n}}h.merge(l)}else{h=l}h.each(function(p){if(!p.id&&p!==window&&p!==document){p.id=xui.Dom._pickDomId()}});g[c]={trigger:f,target:h,checkChild:!!o,stopNext:!d};g.push(c);if(!m.onmousedown){m.onmousedown=xui.Event.$eventhandler}m=j=null}return this},$firfox2:function(){if(!xui.browser.gek2){return this}var c=this;c.css("overflow","hidden");xui.asyRun(function(){c.css("overflow","auto")});return c},ieRemedy:function(){if(xui.browser.ie&&xui.browser.ver<=6){var e=this.get(),c=[],g=[],d=e.length;for(var f=0;f<d;f++){if(!xui.isSet(e[f].$ieRemedy)){if(xui.isSet(e[f].style.width)){e[f].$ieRemedy=e[f].style.width;e[f].style.width=((xui.CSS.$px(e[f].$ieRemedy,e[f])||0)+1)+"px"}}}xui.asyRun(function(){for(var h=0;h<d;h++){if(xui.isSet(e[h].$ieRemedy)){e[h].style.width=e[h].$ieRemedy;e[h].removeAttribute("$ieRemedy")}}e.length=c.length=g.length=0})}return this}},Static:{HIDE_VALUE:"-10000px",TOP_ZINDEX:10000,_boxArr:xui.toArr("width,height,left,top,right,bottom"),_cursor:{},_pickDomId:function(){var c;do{c="xui_"+xui.id()}while(document.getElementById(c));return c},_map:{html:1,head:1,body:1},fixPng:function(f){if(xui.browser.ie&&xui.browser.ver<=6){if(f.nodeName=="IMG"&&f.src.toLowerCase().search(/\.png$/)!=-1){f.style.height=f.height;f.style.width=f.width;f.style.backgroundImage="none";var d=((f.style.filter?(f.style.filter+","):"")+"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+f.src+"', sizingMethod='image')").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,", ");if(xui.browser.ie8){f.style.msfilter=d}f.style.filter=d;f.src=xui.ini.img_bg}var e=f.currentStyle.backgroundImage||f.style.backgroundImage,c=(e||"").toLowerCase().match(/^url[("']+(.*\.png[^\)"']*)[\)"']+[^\)]*$/i);if(c){f.style.backgroundImage="none";var d=((f.style.filter?(f.style.filter+","):"")+"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+c[1]+"', sizingMethod='crop')").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,", ");if(xui.browser.ie8){f.style.msfilter=d}f.style.filter=d}}},_getTag:function(c){return c?c.$xid?c.$xid:c.nodeType==1?xui.$registerNode(c).$xid:0:0},_ensureValues:function(h){var f,e,g=this._map,d=[],c=h===window?["!window"]:h===document?["!document"]:xui.isArr(h)?h:(h=="[object NodeList]"||h=="[object HTMLCollection]")?xui.toArr(h):h["xui.Dom"]?h._nodes:h._toDomElems?h._toDomElems():typeof h=="function"?h():[h];for(e=0;e<c.length;e++){if(f=!(f=c[e])?0:f===window?"!window":f===document?"!document":(typeof f=="string"||(f["xui.DomProfile"]&&(f=f.domId)))?f.charAt(0)=="!"?f:this._getTag(g[f]?document.getElementsByTagName(f)[0]:document.getElementById(f)):((f=c[e])["xui.UIProfile"]||f["xui.Template"])?f.renderId?f.renderId:(f.boxing().render()&&f.renderId):this._getTag(f)){d[d.length]=f}}return d.length<=1?d:this._unique(d)},_getClass:function(c){return(typeof c.className=="string"&&c.className)||(typeof c.className.baseVal=="string"&&c.className.baseVal)||(typeof c.getAttribute!=="undefined"&&c.getAttribute("class"))||""},_setClass:function(d,c){if(typeof d.className=="string"){d.className=c}else{if(typeof d.className.baseVal=="string"){d.className.baseVal=c}else{if(typeof d.getAttribute!="undefined"){d.setAttribute(c)}}}},_scrollBarSize:0,getScrollBarSize:function(d){var c=this;if(d||!c._scrollBarSize){var e;xui("body").append(e=xui.create('<div style="width:50px;height:50px;visibility:hidden;position:absolute;margin:0;padding:0;left:-10000px;overflow:scroll;"></div>'));c._scrollBarSize=e.get(0).offsetWidth-e.get(0).clientWidth;e.remove()}return c._scrollBarSize},getStyle:function(n,A,c){if(!n||n.nodeType!=1){return""}if(A=="rotate"){return xui(n).rotate()}var x=xui.Dom,d=xui.Dom._css3prop;var m,p;if(A=="opacity"&&(!x.css3Support("opacity"))&&xui.browser.ie){p=A="filter"}m=n.style[A];if(c||!m||m==="initial"){var w=arguments.callee,f,g=xui.browser,u=w.map||(w.map={"float":1,cssFloat:1,styleFloat:1}),l=w._c1||(w._c1={}),j=w._c2||(w._c2={}),h=w._c3||(w._c3={}),A=l[A]||(l[A]=A.replace(/\-(\w)/g,function(C,B){return B.toUpperCase()})),r=j[A]||(j[A]=A.replace(/([A-Z])/g,"-$1").toLowerCase()),q,o;var e=A;if(e.indexOf("border")===0){e=e.replace(/[-]?(left|top|right|bottom)/ig,"")}if(xui.arr.indexOf(d,e)!=-1){if(!x.css3Support(A)){return""}else{if(A!="textShadow"){q=g.cssTag2+r.charAt(0).toUpperCase()+r.substr(1);o=g.cssTag1+r}}}if(u[A]){A=xui.browser.ie?"styleFloat":"cssFloat"}m=((f=document.defaultView)&&f.getComputedStyle)?(f=f.getComputedStyle(n,null))?(f.getPropertyValue(r)||(o&&f.getPropertyValue(o))):"":n.currentStyle?(n.currentStyle[A]||n.currentStyle[r]||(q&&(n.currentStyle[q]||n.currentStyle[o]))):((n.style&&(n.style[A]||(q&&n.style[q])))||"")}if(!p&&xui.browser.ie678){if((A=="fontSize"||r=="font-size")&&/%/.test(m)&&n.parentNode){m=(n.parentNode.currentStyle[A]||n.parentNode.currentStyle[r])*parseFloat(m)}else{if(xui.CSS.$isEm(m)){m=xui.CSS.$px(m,n)}}}return p?m?(parseFloat(m.match(/alpha\(opacity=(.*)\)/)[1])||0)/100:1:(m||"")},$transformIE:function(f,q){var u=(f.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Matrix\([^)]+\)/ig,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){f.style.msfilter=u}f.style.filter=u;f.style.marginTop=f.style.marginLeft="";if(q){var n=function(){var C,A=Math.PI/180,x=function(H,G,J,I,F,E){var D={};D.m11=xui.isSet(H)?parseFloat(H):1;D.m12=xui.isSet(G)?parseFloat(G):0;D.m21=xui.isSet(J)?parseFloat(J):0;D.m22=xui.isSet(I)?parseFloat(I):1;D.dx=xui.isSet(F)?parseFloat(F):0;D.dy=xui.isSet(E)?parseFloat(E):0;return D},w=function(F,E){var D={};D.m11=B(F.m11*E.m11+F.m21*E.m12,10);D.m12=B(F.m12*E.m11+F.m22*E.m12,10);D.m21=B(F.m11*E.m21+F.m21*E.m22,10);D.m22=B(F.m12*E.m21+F.m22*E.m22,10);D.dx=B(E.dx+F.dx,10);D.dy=B(E.dy+F.dy,10);return D},h=function(D){return A*D},B=function(E,F){var D=Math.round(E*Math.pow(10,F))/Math.pow(10,F);return D};this.rotate=function(F){var E=xui.isSet(F)?parseFloat(h(parseFloat(F))):0;var D=x(Math.cos(E),-Math.sin(E),Math.sin(E),Math.cos(E),0,0);C=w(D,C)};this.translate=function(E,F){var D=x(1,0,0,1,parseFloat(E),parseFloat(F));C=w(D,C)};this.translateX=function(D){this.translate(D,0)};this.translateY=function(D){this.translate(0,D)};this.scale=function(E,F){var D=x(xui.isSet(E)?parseFloat(E):1,0,0,xui.isSet(F)?parseFloat(F):1,0,0);C=w(D,C)};this.scaleX=function(D){this.scale(D,1)};this.scaleY=function(D){this.scale(1,D)};this.skew=function(E,F){E=xui.isSet(E)?parseFloat(h(parseFloat(E))):0;F=xui.isSet(F)?parseFloat(h(parseFloat(F))):0;var D=x(1,Math.tan(E),Math.tan(F),1,0,0);C=w(D,C)};this.skewX=function(D){this.skew(D,0)};this.skewY=function(D){this.skew(0,D)};this.matrix=function(G,F,I,H,E,D){C=w(x(G,F,I,H,E,D),C)};this.getMatrix=function(){return C};this.getFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+C.m11+", M12="+C.m12+", M21="+C.m21+", M22="+C.m22+", Dx="+C.dx+", Dy="+C.dy+", SizingMethod='auto expand')"};this.getX=function(){return C.dx};this.getY=function(){return C.dy};this.reset=function(){C=x(1,0,0,1,0,0)};this.reset()};var d=function(B){var w=new n();var E=B.match(/[A-z]+\([^\)]+/g)||[];for(var A=0;A<E.length;A++){var h=E[A].split("("),C=h[0],D=h[1],x;switch(C){case"rotate":w.rotate(D);break;case"scale":x=D.split(",");w.scale(x[0],x[1]);break;case"scaleX":w.scaleX(D);break;case"scaleY":w.scaleY(D);break;case"skew":x=D.split(",");w.skew(x[0],x[1]);break;case"skewX":w.skewX(D);break;case"skewY":w.skewY(D);break;case"translate":x=D.split(",");w.translate(x[0],x[1]);break;case"translateX":w.translateX(D);break;case"translateY":w.translateY(D);break}}return w};var o=d(q);var e=f.offsetWidth,r=f.offsetHeight;var c=o.getFilter();var u=((f.style.filter?(f.style.filter+","):"")+c).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){f.style.msfilter=u}f.style.filter=u;if(f.getBoundingClientRect){var j=o.getX(),g=o.getY(),m=f.getBoundingClientRect(),p=m.right-m.left,l=m.bottom-m.top;f.style.marginLeft=Math.round(parseFloat((e-p)/2+10+j))+"px";f.style.marginTop=Math.round(parseFloat((r-l)/2+10+g))+"px"}f.style.transform=q}},$textShadowIE:function(h,l,g){if(!l){var j=function(f){return(f||"").replace(/progid\:DXImageTransform\.Microsoft\.(Chroma|DropShadow|Glow)\([^)]+\)/ig,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "))},d=h.style.filter;if(d){if(xui.browser.ie8){h.style.msfilter=j(d)}h.style.filter=j(d)}if(!g){h.style.backgroundColor=""}}else{var j=function(f,o,m,n){return(g?"":"progid:DXImageTransform.Microsoft.Chroma(Color=#cccccc) ")+"progid:DXImageTransform.Microsoft.DropShadow(Color="+n+", OffX="+f+", OffY="+o+") "+(parseFloat(m)>0?"progid:DXImageTransform.Microsoft.Glow(Strength="+m+", Color="+n+")":"")},e=l.match(/([\d\.-]+)px\s+([\d\.-]+)px(\s+([\d\.-]+)px)?(\s+([#\w]+))?/);if(e){var c=((h.style.filter?(h.style.filter+","):"")+j(e[1],e[2],e[4],e[6]||"#000000")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){h.style.msfilter=c}h.style.filter=c;if(!g){h.style.backgroundColor="#C5C5C5"}}}},$setGradients:function(u,r,w){w=w||xui.browser;var D=this,e=w.ver,g="0123456789ABCDEF",q=function(F,E){F=parseInt(F*E,10)||0;F=(F>255||F<0)?0:F;return g.charAt((F-F%16)/16)+g.charAt(F%16)},f=function(E){E=E.split("");return g.indexOf(E[0].toUpperCase())*16+g.indexOf(E[1].toUpperCase())};window.btoa=window.btoa||function(K){if(/([^\u0000-\u00ff])/.test(K)){return}var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=0,J,H,F,E=[];while(G<K.length){J=K.charCodeAt(G);F=(G+1)%3;switch(F){case 1:E.push(I.charAt(J>>2));break;case 2:E.push(I.charAt((H&3)<<4|(J>>4)));break;case 0:E.push(I.charAt((H&15)<<2|(J>>6)));E.push(I.charAt(J&63));break}H=J;G++}if(F==1){E.push(I.charAt((H&3)<<4));E.push("==")}else{if(F==2){E.push(I.charAt((H&15)<<2));E.push("=")}}return E.join("")};var p=function(T,J,H,E,P,ab){var Q="xui.s-ie8gdfix";if(!T||T.nodeType!=1||!T.style){return}var S=D.getStyle(T,"overflow"),R=D.getStyle(T,"display");if(S!="hidden"||(R!="block"&&R!="relative")){return}if(!J){var W,aa=T.childNodes,U=aa.length;for(W=0;W<U;W++){if(aa[W].nodeType==1&&aa[W].id==Q){T.removeChild(aa[W]);break}}T.style.backgroundColor="";var M=((T.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/ig,"")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){T.style.msfilter=M}T.style.filter=M}else{ab=ab||1;var V=H[0].clr,F=H[H.length-1].clr;var Z=T.offsetWidth||0,G=T.offsetHeight||0,L=Z*ab*2,Y=G*ab*2;if(E=="circle"){L=Y=Math.min(L,Y)}var U=-L/2,M=-Y/2,K=L,X=Y;if(xui.isObj(J)){U=J.left||(Math.round(parseFloat(U))+"px");M=J.top||(Math.round(parseFloat(M))+"px")}else{switch(J){case"LT":U=-L/2;M=-Y/2;break;case"T":U=(Z-L)/2;M=-Y/2;break;case"RT":U=Z-L/2;M=-Y/2;break;case"L":U=-L/2;M=(G-Y)/2;break;case"C":U=(Z-L)/2;M=(G-Y)/2;break;case"R":U=Z-L/2;M=(G-Y)/2;break;case"LB":U=-L/2;M=G-Y/2;break;case"B":U=(Z-L)/2;M=G-Y/2;break;case"RB":U=Z-L/2;M=G-Y/2;break}U+="px";M+="px"}var O=document.createElement("div"),N=O.style;O.id=Q;N.position="absolute";N.zIndex="0";N.top=M;N.left=U;N.width=Math.round(parseFloat(K))+"px";N.height=Math.round(parseFloat(X))+"px";N.backgroundColor=V;var I=H[0].opacity?parseFloat(H[0].opacity)*100:100;var M=((N.filter?(N.filter+","):"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+I+", finishopacity=0, style=2)").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){N.msfilter=M}N.filter=M;if(T.firstChild){T.insertBefore(O,T.firstChild)}else{T.appendChild(O)}T.style.backgroundColor=F;if(H[H.length-1].opacity){var M=((T.style.filter?(T.style.filter+","):"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+(parseFloat(H[H.length-1].opacity)*100)+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){T.style.msfilter=M}T.style.filter=M}}},C=function(S,K,H){var P="xui.s-ie8gdfix";if(!S||S.nodeType!=1||!S.style){return}var R=D.getStyle(S,"overflow"),Q=D.getStyle(S,"display");if(R!="hidden"){D.setStyle(S,"overflow","hidden")}if(Q!="block"&&Q!="relative"){D.setStyle(S,"display","relative")}if(!K){var X,Z=S.childNodes,U=Z.length;for(X=0;X<U;X++){if(Z[X].nodeType==1&&Z[X].id==P){S.removeChild(Z[X]);break}}S.style.backgroundColor="";var L=(S.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/ig,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){S.style.msfilter=L}S.style.filter=L}else{var W=H[0].clr,F=H[H.length-1].clr;var Y=S.offsetWidth||0,G=S.offsetHeight||0,O=Math.min(Y,G),J=0,T=O,V=0,E=O;switch(K){case"LT":J=0;V=0;T=O;E=O;break;case"RT":J=O;V=0;T=0;E=O;break;case"LB":J=0;V=O;T=O;E=0;break;case"RB":J=O;V=O;T=0;E=0;break}var N=document.createElement("div"),M=N.style;N.id=P;M.position="absolute";M.zIndex="0";M.top=0;M.left=0;M.width=Y;M.height=G;M.backgroundColor=W;var I=H[0].opacity?parseFloat(H[0].opacity)*100:100;var L=((M.filter?(M.filter+","):"")+"progid:DXImageTransform.Microsoft.Alpha(style=1, opacity="+I+", finishopacity=0, startX="+J+",finishX="+T+",startY="+V+",finishY="+E+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){M.msfilter=L}M.filter=L;if(S.firstChild){S.insertBefore(N,S.firstChild)}else{S.appendChild(N)}S.style.backgroundColor=F;if(H[H.length-1].opacity){var L=((S.style.filter?(S.style.filter+","):"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+(parseFloat(H[H.length-1].opacity)*100)+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){S.style.msfilter=L}S.style.filter=L}}},n=function(G,I,N){var E="xui.s-ie8gdfix";if(!G||G.nodeType!=1||!G.style){return}if(!I){var O=((G.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Gradient\([^)]+\)/ig,"")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){G.style.msfilter=O}G.style.filter=O;var J,K=G.childNodes,H=K.length;for(J=0;J<H;J++){if(K[J].nodeType==1&&K[J].id==E){G.removeChild(K[J]);break}}G.style.backgroundColor="";var O=((G.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/ig,"")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){G.style.msfilter=O}G.style.filter=O}else{var M=N[0].clr,F=N[N.length-1].clr,L=1,O;if(N[0].opacity){M=M.replace("#","#"+q(N[0].opacity,255))}if(N[N.length-1].opacity){F=F.replace("#","#"+q(N[N.length-1].opacity,255))}switch(I){case"LT":case"RT":case"LB":case"RB":C(G,I,N);return;case"L":L=1;break;case"R":L=1;O=M;M=F;F=O;break;case"T":L=0;break;case"B":L=0;O=M;M=F;F=O;break}var O=((G.style.filter?(G.style.filter+","):"")+"progid:DXImageTransform.Microsoft.Gradient(StartColorstr='"+M+"',EndColorstr='"+F+"',GradientType="+L+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){G.style.msfilter=O}G.style.filter=O}},A=function(G,K,P,O,Q,N){if(!K){G.style.backgroundImage=""}else{N=N||1;var F="svg:"+xui.id(),J="0%",I="0%",E=N*100+"%";if(xui.isObj(K)){J=K.left||J;I=K.left||I}else{switch(K){case"T":J="50%";I="0%";break;case"B":J="50%";I="100%";break;case"L":J="0%";I="50%";break;case"R":J="100%";I="50%";break;case"LT":J="0%";I="0%";break;case"RT":J="100%";I="0%";break;case"RB":J="100%";I="100%";break;case"LB":J="0%";I="100%";break;case"C":J="50%";I="50%";break}}var M='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><radialGradient id="'+F+'" gradientUnits="userSpaceOnUse" cx="'+J+'" cy="'+I+'" r="'+E+'">';for(var L=0,H=P.length;L<H;L++){M+='<stop stop-color="'+P[L].clr+'" offset="'+P[L].pos+'" '+(xui.isSet(P[L].opacity)?(' stop-opacity="'+P[L].opacity+'"'):"")+" />"}M+='</radialGradient><rect x="-50" y="-50" width="101" height="101" fill="url(#'+F+')" /></svg>';G.style.backgroundImage='url("data:image/svg+xml;base64,'+window.btoa(M)+'")'}},x=function(H,J,O){if(!J){H.style.backgroundImage=""}else{var F="svg"+xui.id(),G="0%",N="0%",E="0%",M="100%";switch(J){case"T":G="50%";N="0%";E="50%";M="100%";break;case"B":G="50%";N="100%";E="50%";M="0%";break;case"L":G="0%";N="50%";E="100%";M="50%";break;case"R":G="100%";N="50%";E="0%";M="50%";break;case"LT":G="0%";N="0%";E="100%";M="100%";break;case"RT":G="100%";N="0%";E="0%";M="100%";break;case"RB":E="0%";M="0%";G="100%";N="100%";break;case"LB":G="0%";N="100%";E="100%";M="0%";break;default:}var L='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><linearGradient id="'+F+'" gradientUnits="userSpaceOnUse" x1="'+G+'" y1="'+N+'" x2="'+E+'" y2="'+M+'">';for(var K=0,I=O.length;K<I;K++){L+='<stop stop-color="'+O[K].clr+'" offset="'+O[K].pos+'" '+(xui.isSet(O[K].opacity)?(' stop-opacity="'+O[K].opacity+'"'):"")+"/>"}L+='</linearGradient><rect x="0" y="0" width="1" height="1" fill="url(#'+F+')" /></svg>';H.style.backgroundImage='url("data:image/svg+xml;base64,'+window.btoa(L)+'")'}},m=function(F,G,N,J,O,I){var L=[],K=[],E=F.style;xui.arr.each(N,function(Q){var P=Q.clr;if(xui.isSet(Q.opacity)&&P.charAt(0)=="#"){P=P.slice(1);P="rgba("+f(P.substr(0,2))+","+f(P.substr(2,2))+","+f(P.substr(4,2))+","+parseFloat(Q.opacity)+")"}L.push(P+" "+Q.pos);if(w.isWebKit){K.push("color-stop("+Q.pos+","+P+")")}});if(!G){E.backgroundImage=""}else{var H;if(xui.isObj(G)){H=G.left+" "+G.top}else{switch(G){case"LT":H="left top";break;case"T":H="center top";break;case"RT":H="right top";break;case"L":H="left center";break;case"C":H="center center";break;case"R":H="right center";break;case"LB":H="left bottom";break;case"B":H="center bottom";break;case"RB":H="right bottom";break;default:H="left top"}}if(w.isWebKit){E.backgroundImage="-webkit-gradient(radial,"+H+", 0px, "+H+", 100%,"+K.join(",")+")"}var M="radial-gradient("+H+","+J+" "+O+","+L.join(",")+")";if(w.cssTag1){E.backgroundImage=w.cssTag1+M}E.backgroundImage="radial-gradient("+O+" "+J+" at "+H+","+L.join(",")+")"}},l=function(G,I,N){var K=[],J=[],E=G.style;xui.arr.each(N,function(P){var O=P.clr;if(xui.isSet(P.opacity)&&O.charAt(0)=="#"){O=O.slice(1);O="rgba("+f(O.substr(0,2))+","+f(O.substr(2,2))+","+f(O.substr(4,2))+","+parseFloat(P.opacity)+")"}K.push(O+" "+P.pos);if(w.isWebKit){J.push("color-stop("+P.pos+","+O+")")}});if(!I){E.backgroundImage=""}else{var L="to bottom";var H="top";var F="left top, left bottom";switch(I){case"LT":L="135deg";H="-45deg";F="left top, right bottom";break;case"T":L="to bottom";H="top";F="left top, left bottom";break;case"RT":L=H="-135deg";F="right top, left bottom";break;case"L":L="to right";H="left";F="left top, right top";break;case"R":L="to left";H="right";F="right top, left top";break;case"LB":L=H="45deg";F="left bottom, right top";break;case"B":L="to top";H="bottom";F="left bottom, left top";break;case"RB":L="-45deg";H="135deg";F="right bottom, left top";break;default:L=I;H=I;F="left top, right bottom"}if(w.isWebKit){E.backgroundImage="-webkit-gradient(linear,"+F+", "+J.join(",")+")"}var M="linear-gradient({#},"+K.join(",")+")";if(w.cssTag1){E.backgroundImage=w.cssTag1+M.replace("{#}",H)}E.backgroundImage=M.replace("{#}",L)}};var d=r?(r.type||r||"linear").toLowerCase():null,B=r?(r.rate||1):null,c=r?(r.shape||"circle").toLowerCase():null,o=r?(r.size||"farthest-corner").toLowerCase():null,j=r?r.orient:null,h=r?r.stops:null;if(d!="linear"){d="radial"}if(h){if(h.length>1){xui.arr.stableSort(h,function(E,F){E=parseFloat(E.pos);F=parseFloat(F.pos);return E>F?1:E==F?0:-1})}else{return}}if(w.ie678){if(d=="linear"){n(u,j,h)}else{p(u,j,h,c,o,B)}}if(w.ie9||(w.opr&&e<11.1)){if(d=="linear"){x(u,j,h)}else{A(u,j,h,c,o,B)}}if(((w.gek&&e>=3.6)||(w.isChrome&&e>=10)||(w.isSafari&&e>=5.1)||(w.ie&&e>=10)||(w.opr&&e>=11.1))){if(d=="linear"){l(u,j,h)}else{if(w.opr&&e<12){A(u,j,h,c,o,B)}else{m(u,j,h,c,o,B)}}}},_vAnimate:function(f,e,h){if(!e||!e.params||xui.isEmpty(e.params)){if(h){xui.tryF(h)}return}var g=e.params,d={},c={};f=xui(f);xui.each(g,function(l,j){d[j]=l[0];c[j]=l[1]});return f.animate(g,function(j){f.css(d)},function(j){f.css(c);if(h){xui.tryF(h)}},e.duration,0,e.type).start()},$adjustCss:function(f,e){var d={nodeType:1,style:{}};xui.Dom.setStyle(d,f);if(e){var c=[];if(xui.browser.ie&&xui.browser.ver==8){if(d.style.filter){d.style["-ms-filter"]=d.style.filter}if(d.style["background-image"]=="none"){d.style["background-image"]="url(about:blank)"}}xui.each(d.style,function(h,g){c.push(g.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+h)});return c.join(";").replace(/[;]+/g,";")}else{return d.style}},_cssfake:{rotate:1,scaleX:1,scaleY:1,translateX:1,translateY:1,skewX:1,skewY:1},setStyle:function(g,d,u){if(d=="rotate"){xui(g).rotate(u);return this}var r=xui.Dom,o=xui.Dom._css3prop,x=xui.browser,w=r._cssfake;if(g.nodeType!=1){return}if(typeof d=="string"){if(w[d]){xui(g)[d](u)}else{var q=this.getStyle,l=q._c1||(q._c1={}),e=q._r1||(q._r1=/alpha\([^\)]*\)/ig),c=q.map||(q.map={"float":1,cssFloat:1,styleFloat:1});var n,m,j;d=l[d]||(l[d]=d.replace(/\-(\w)/g,function(B,A){return A.toUpperCase()}));var p=d;if(p.indexOf("border")===0){p=p.replace(/[-]?(left|top|right|bottom)/ig,"")}if(d=="$gradient"){return r.$setGradients(g,u)}else{if(d=="opacity"){u=xui.isFinite(u)?parseFloat(u)>1?1:parseFloat(u)<=0?0:parseFloat(u):1;u=u>0.9999?"":u;if((!r.css3Support("opacity"))&&x.ie){if(u===""){u=1}g.style.opacity=u;g.style.zoom=1;u="alpha(opacity="+100*u+")";var f=(g.style.filter||"").replace(e,"");u=(f?(f+","):"")+u;d="filter";if(x.ver==8){n="msfilter"}}}else{if(xui.arr.indexOf(o,p)!=-1){if(!r.css3Support(d)){if(x.ie&&x.ver<9){switch(d){case"transform":xui.Dom.$transformIE(g,u);break;case"boxShadow":xui.Dom.$textShadowIE(g,u,true);break}}if(d=="textShadow"&&x.ie&&x.ver<10){xui.Dom.$textShadowIE(g,u)}return this}else{if(x.cssTag2){if(d!="textShadow"){n=x.cssTag2+d.charAt(0).toUpperCase()+d.substr(1)}}}}else{if(c[d]){d=x.ie?"styleFloat":"cssFloat"}}}}if(d=="filter"){u=u.replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "))}g.style[d]=u;if(n){g.style[n]=u}if(m){g.style[m]=u}if(j){g.style[j]=u}}}else{for(var h in d){arguments.callee.call(this,g,h,d[h])}}},_css3prop:"opacity,textShadow,animationName,columnCount,flexWrap,boxDirection,backgroundSize,perspective,boxShadow,borderImage,borderRadius,boxReflect,transform,transition".split(","),css3Support:function(D){var q=arguments.callee,g=q._c||(q._c={});D=D.replace("$","").replace(/\-(\w)/g,function(n,f){return f.toUpperCase()});if(D in g){return g[D]}var w=document.createElement("div"),o=w.style,j=false,A=xui.browser,B=function(f){f=f.replace(/\-(\w)/g,function(r,n){return n.toUpperCase()});if(o[f]!==undefined){return true}if(xui.browser.cssTag2){f=xui.browser.cssTag2+f.charAt(0).toUpperCase()+f.substr(1);if(o[f]!==undefined){return true}}return false};w.id="xui_css3_"+xui.stamp();if(D.indexOf("border")===0){D=D.replace(/[-]?(left|top|right|bottom)/ig,"")}switch(D){case"opacity":case"textShadow":j=o[D]==="";break;case"generatedContent":var u="tmp_css3_test"+xui.id(),l="#"+w.id+"{line-height:auto;margin:0;padding:0;border:0;font:0/0 a}#"+w.id+":after{content:'a';visibility:hidden;line-height:auto;margin:0;padding:0;border:0;font:3px/1 a}";xui.CSS.addStyleSheet(l,u);xui("body").append(w);var m=w.offsetHeight;xui.CSS.remove("id",u);xui(w.id).remove(w);j=m>=3;break;case"fontFace":if(A.ie&&A.ver>=6){j=true}else{var u="tmp_css3_test"+xui.id(),l='@font-face{font-family:"font";src:url("https://")}',o=xui.CSS.addStyleSheet(l,u),C=o.sheet||o.styleSheet,h=C?((C.cssRules&&C.cssRules[0])?C.cssRules[0].cssText:C.cssText||""):"";j=/src/i.test(h)&&h.indexOf("@font-face")===0;xui.CSS.remove("id",u)}break;case"rgba":o.cssText="background-color:rgba(0,0,0,0.1)";j=o.backgroundColor.indexOf("rgba")!=-1;break;case"hsla":o.cssText="background-color:hsla(120,40%,100%,.5)";j=o.backgroundColor.indexOf("hsla")!=-1||o.backgroundColor.indexOf("rgba")!=-1;break;case"multiplebgs":o.cssText="background:url(//:),url(//:),red url(//:)";j=/(url\s*\(.*?){3}/.test(o.background);break;case"gradient":var x="background-image:",e="-webkit-gradient(linear,left top,right bottom,from(#000),to(#fff));",d="linear-gradient(left top,#000,#fff);",c=[x,d];if(xui.browser.cssTag1){c.push(x);c.push(xui.browser.cssTag1+d)}if(xui.browser.isWebKit){c.push(x);c.push(e)}o.cssText=c.join("");j=!!o.backgroundImage;break;case"transform3d":var p=B("perspective");if(p&&"webkitPerspective" in document.documentElement.style){var u="tmp_css3_test"+xui.id(),l="@media (transform-3d),(-webkit-transform-3d){#"+w.id+"{font:0/0;line-height:0;margin:0;padding:0;border:0;left:9px;position:absolute;height:3px;}}";xui.CSS.addStyleSheet(l,u);xui("body").append(w);var e=w.offsetLeft,d=w.offsetHeight;xui.CSS.remove("id",u);xui(w.id).remove(w);j=e===9&&d===3}j=p;break;default:j=B(D)}return g[D]=j},$preDefinedAnims:{blinkAlert:{params:{opacity:[1,0]},duration:200,returned:true,times:3},zoomAlert:{params:{scaleX:[1,1.1],scaleY:[1,1.1]},duration:100,returned:true,times:3},translateXAlert:{params:{translateX:[0,5]},duration:100,returned:true,times:3},translateYAlert:{params:{translateY:[0,5]},duration:100,returned:true,times:3},rotateAlert:{params:{rotate:[0,360]},duration:400,returned:false}},$preDefinedEffects:{Classic:[{type:"circOut",duration:200,params:{opacity:[0,1],scaleX:[0.75,1],scaleY:[0.75,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],scaleX:[1,0.75],scaleY:[1,0.75]}}],Blur:[{type:"circOut",duration:200,params:{opacity:[0,1]}},{type:"circIn",duration:200,params:{opacity:[1,0]}}],Drop:[{type:"circOut",duration:200,params:{opacity:[0,1],translateY:["-25%","0%"],scaleY:[0.5,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],translateY:["0%","-25%"],scaleY:[1,0.5]}}],"From Below":[{type:"circOut",duration:200,params:{opacity:[0,1],scaleX:[0,1],scaleY:[0,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],scaleX:[1,0],scaleY:[1,0]}}],"From Above":[{type:"circOut",duration:200,params:{opacity:[0,1],scaleX:[2,1],scaleY:[2,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],scaleX:[1,2],scaleY:[1,2]}}],"Slide In LR":[{type:"circOut",duration:200,params:{opacity:[0,1],translateX:["-150%","0%"],scaleX:[0.2,1],scaleY:[0.2,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],translateX:["0%","150%"],scaleX:[1,0.2],scaleY:[1,0.2]}}],"Slide In TB":[{type:"circOut",duration:200,params:{opacity:[0,1],translateY:["-150%","0%"],scaleX:[0.2,1],scaleY:[0.2,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],translateY:["0%","150%"],scaleX:[1,0.2],scaleY:[1,0.2]}}],"Flip V":[{type:"circOut",duration:200,params:{opacity:[0,1],scaleY:[0,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],scaleY:[1,0]}}],"Flip H":[{type:"circOut",duration:200,params:{opacity:[0,1],scaleX:[0,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],scaleX:[1,0]}}]},_getEffects:function(c,d){if(c&&typeof(c)=="string"){c=this.$preDefinedEffects[c];c=c?d?c[0]:c[1]:null}if(c&&xui.browser.ie&&xui.browser.ver<=8){xui.filter(c,function(f,e){return !!xui.Dom._cssfake[e]})}return c},_setUnitStyle:function(e,c,f){if(e.nodeType!=1){return false}var d=e.style;if(f||f===0){f=xui.CSS.$addu(f);if(f&&(c=="width"||c=="height")&&f.charAt(0)=="-"){f="0"}if(d[c]!=f){d[c]=f;return true}}return false},_emptyDivId:"xui.empty:",getEmptyDiv:function(j,g){var h=1,d,f,c,e,p,m=0,n=document,l=j&&(j=xui(j)).get(0)||n.body,q=function(r){r.id=d;xui([r]).attr("style","position:absolute;visibility:hidden;overflow:visible;left:"+xui.Dom.HIDE_VALUE+";top:"+xui.Dom.HIDE_VALUE+";")};g=g||1;j=l==n.body?"":j.n0.replace("!","");while(1){d=this._emptyDivId+j+":"+h;if(e=xui.Dom.byId(d)){if((!e.firstChild||(e.firstChild.nodeType==3&&!e.firstChild.nodeValue))&&++m==g){return xui([e])}}else{e=n.createElement("div");q(e,d);if(l.firstChild){l.insertBefore(e,l.firstChild)}else{l.appendChild(e)}f=xui([e]);l=e=null;return f}h++}l=e=null},setCover:function(f,l,j,n){var h=arguments.callee,c="xui.temp:cover:",m="xui.temp:message:",g=(typeof(f)=="string"||typeof(f)=="function")?f:"",e,d;if((e=xui(c)).isEmpty()){xui("body").prepend(e=xui.create('<button id="'+c+'" class="xui-node xui-node-div xui-cover xui-custom" style="position:absolute;display:none;text-align:center;left:0;top:0;border:0;padding:0;margin:0;padding-top:2em;"><div id="'+m+'" class="xui-node xui-node-div xui-coverlabel xui-custom"></div></button>'));e.setSelectable(false);xui.setNodeData(e.get(0),"zIndexIgnore",1)}if(xui.Dom.byId(m)){d=xui(m)}if(!f){if(typeof h._label=="string"&&h._label!==l){return}if(h._showed){if(d){d.empty(false)}e.css({zIndex:0,cursor:"",display:"none",cursor:""});h._showed=false}delete h._label}else{if(typeof l=="string"){h._label=l}var o=xui.win;if(!h._showed){e.css({zIndex:xui.Dom.TOP_ZINDEX*10,display:"",width:o.scrollWidth()+"px",height:o.scrollHeight()+"px",cursor:n||"progress"});if(j){e.addClass("xuicon xui-icon-loading")}else{e.removeClass("xuicon xui-icon-loading")}h._showed=true}if(g){if(typeof(g)=="function"){g(e,d)}else{if(d){d.html(g+"",false)}}}}},byId:function(c){return document.getElementById(c||"")},$hasEventHandler:function(d,c){return xui.getNodeData(d,["eHandlers",c])},submit:function(h,g,l,j,f){g=xui.isHash(g)?g:{};g=xui.clone(g,function(m){return m!==undefined});h=h||"";j=j||(h.substring(0,6).toLowerCase()=="mailto"?"_self":"_blank");var e=[];if(!xui.isEmpty(g)){var c,d=[];xui.each(g,function(n,m){if(n&&n["xui.UIProfile"]&&n.$xuiFileCtrl){if(c=n.boxing().getUploadObj()){d.push({id:n.$xid,file:c});c.id=c.name=m;g[m]=c}}});l=l||(c?"post":"get");if(l.toLowerCase()=="get"){window.open(h+"?"+xui.urlEncode(g),j)}else{xui.each(g,function(n,m){if(xui.isDefined(n)&&!xui.isElem(n)){e.push('<textarea name="'+m+'">'+(typeof n=="object"?xui.serialize(n):n)+"</textarea>")}});e.push('<input type="hidden" name="rnd" value="'+xui.rand()+'">');e=xui.str.toDom('<form target="'+j+'" action="'+h+'" method="'+l+(f?'" enctype="'+f:"")+'">'+e.join("")+"</form>");xui.Dom.getEmptyDiv().append(e);if(d.length){xui.arr.each(d,function(n,m){e.append(n.file)})}e.get(0).submit();e.remove();e=null}if(d.length){xui.arr.each(d,function(n,m){if(m=xui.getObject(n.id)){if(m["xui.UIProfile"]&&m.boxing()&&m.boxing().setUploadObj){m.boxing().setUploadObj(n.file)}}})}}else{window.open(h,j)}},selectFile:function(f,d){var e=document.createElement("input");e.type="file";if(d){e.accept=d}e.onchange=function(){xui.tryF(f,[this,this.files[0]],this)};if(!!window.ActiveXObject||"ActiveXObject" in window){var c=document.createElement("div");e.appendChild(c);c.click();e.removeChild(c)}else{e.click()}e=null},busy:function(f,c,d,e){xui.Dom.setCover(c||true,f,d,e)},free:function(c){xui.Dom.setCover(false,c)},animate:function(m,j,p,c,l,e,n,g,o,h,d){var f=document.createElement("div");xui.merge(m,{position:"absolute",left:this.HIDE_VALUE,zIndex:this.TOP_ZINDEX++});xui.Dom.setStyle(f,m);document.body.appendChild(f);return xui([f]).animate(j,p,function(){xui.tryF(c);if(f.parentNode){f.parentNode.removeChild(f)}f=null},l,e,n,g,o,h,d)},$enableEvents:function(d){if(!xui.isArr(d)){d=[d]}var c=this,e;xui.arr.each(d,function(f){e=function(h,l,g){if(typeof h=="function"){return this.$addEvent(f,h,l,g)}else{if(h===null){return this.$removeEvent(f,l,g)}}var j=arguments[1]||{};j.$xuiall=(arguments[0]===true);return this.$fireEvent(f,j)};e.$event$=1;c.plugIn(f,e)})}},After:function(J){var C=this;xui.each({parent:["y",false],prev:["x",false],next:["x",true],first:["y",true],last:["y",1]},function(d,c){C.plugIn(c,function(h){return this.$iterator(d[0],d[1],true,h||1)})});xui.arr.each(xui.toArr("offsetLeft,offsetTop,scrollWidth,scrollHeight"),function(c){C.plugIn(c,function(){var o=this.get(0),m=window,p=document;if(o==m||o==p){if("scrollWidth"==c||"scrollHeight"==c){var l=p.documentElement,h=p.body;return Math.max(l[c],h[c])}else{o=xui.browser.contentBox?p.documentElement:p.body}}return o[c]})});var D="padding",F="margin",M="border",K="inner",E="offset",x="outer",q="width",I="height",e="Width",n="Height",f="Top",j="Left",u="top",G="left",g="Right",A="Bottom";xui.arr.each([["_"+D+"H",D+f,D+A],["_"+D+"W",D+j,D+g],["_"+M+"H",M+f+e,M+A+e],["_"+M+"W",M+j+e,M+g+e],["_"+F+"W",F+j,F+g],["_"+F+"H",F+f,F+A]],function(h){var d,c=xui.Dom.getStyle;C.plugIn(h[0],function(l){l=l||"both";d=this.get(0);return((l=="both"||l=="left"||l=="top")?xui.CSS.$px(c(d,h[1]),d):0)+((l=="both"||l=="right"||l=="bottom")?xui.CSS.$px(c(d,h[2]),d):0)||0})});xui.arr.each([["_W",q,"_"+D+"W","_"+M+"W","_"+F+"W",K+e,E+e],["_H",I,"_"+D+"H","_"+M+"H","_"+F+"H",K+n,E+n]],function(c){C.plugIn(c[0],function(Q,o,P,Y){var O,L,B,S=Q.style,X=arguments.callee,H=xui.browser.contentBox,R=X.r1||(X.r1=/%$/),m=xui.Dom.getStyle,T=xui.Dom._setUnitStyle,l=typeof P,w;if(l=="undefined"||l=="boolean"){if(P===true){O=(m(Q,"display")=="none")||Q.offsetHeight===0;if(O){var V=xui.Dom.getEmptyDiv().html("*",false);xui([Q]).swap(V);var W,N,U;W=S.visibility,N=S.position,U=S.display;N=N||"";W=W||"";U=U||"";S.visibility="hidden";S.position="absolute";S.display="block"}}B=xui([Q]);switch(o){case 1:L=m(Q,c[1]);if((isNaN(parseFloat(L))||R.test(L))&&!Y){L=X(Q,2,undefined,true)-(H?B[c[2]]():0)}L=xui.CSS.$px(L,Q)||0;break;case 2:L=Q[c[6]];if(!L){if(!Y){L=X(Q,1,undefined,true)+(H?B[c[2]]():0)}}else{L-=B[c[3]]()}break;case 3:L=Q[c[6]];if(!L){L=X(Q,1,P)+(H?B[c[2]]():0)+B[c[3]]()}break;case 4:L=X(Q,3,P);L+=B[c[4]]();break}if(O){S.display=U;S.position=N;S.visibility=W;B.swap(V);V.empty(false)}return parseFloat(L)||0}else{switch(o){case 1:if(T(Q,c[1],P)){if(xui.Dom.$hasEventHandler(Q,"onsize")){var h={};h[c[1]]=1;xui([Q]).onSize(true,h)}}break;case 2:X(Q,1,P-(H?xui([Q])[c[2]]():0));break;case 3:X(Q,1,P-(B=xui([Q]))[c[3]]()-(H?B[c[2]]():0));break;case 4:X(Q,1,P-(B=xui([Q]))[c[4]]()-B[c[3]]()-(H?B[c[2]]():0));break}}})});xui.arr.each([[K+e,"_W",2],[E+e,"_W",3],[x+e,"_W",4],[K+n,"_H",2],[E+n,"_H",3],[x+n,"_H",4]],function(c){C.plugIn(c[0],function(h){var d=typeof h;if(d=="undefined"||d=="boolean"){return this[c[1]](this.get(0),c[2],h)}else{return this.each(function(l){this[c[1]](l,c[2],h)})}})});xui.arr.each([[G+"By",G],[u+"By",u],[q+"By",q],[I+"By",I]],function(c){C.plugIn(c[0],function(p,o){if(p===0){return this}var d,l,h=c[1];return this.each(function(m){d=xui.use(m.$xid)[h]();d=(parseFloat(d)||0)+p;if(h=="width"||h=="height"){d=d>0?d:0}m.style[h]=xui.CSS.$forceu(d,null,m);if(o){l={};l[h]=1;var r=xui.Dom.$hasEventHandler;if((h=="left"||h=="top")&&r(m,"onmove")){xui([m]).onMove(true,l)}if((h=="width"||h=="height")&&r(m,"onsize")){xui([m]).onSize(true,l)}}},this)})});xui.arr.each(["scrollLeft","scrollTop"],function(c){C.plugIn(c,function(m){var h=document.documentElement,d=document.body;if(m!==undefined){return this.each(function(o){if(o===window||o===document){h[c]=d[c]=m}else{o[c]=m}})}else{var l=this.get(0);if(l===window||l===document){if("scrollTop"==c){return window.pageYOffset||(h[c]||d[c]||0)}if("scrollLeft"==c){return window.pageXOffset||(h[c]||d[c]||0)}}return l[c]}})});xui.arr.each("width,height,left,top".split(","),function(c){C.plugIn(c,function(w){var H=this,h=H.get(0),o=xui.browser,m=typeof w,r=document,B;if(!h||h.nodeType==3){return}if(m=="undefined"||m=="boolean"){if((c=="width"&&(B="Width"))||(c=="height"&&(B="Height"))){if(r===h){return Math.max(r.body["scroll"+B],r.body["offset"+B],r.documentElement["scroll"+B],r.documentElement["offset"+B])}if(window===h){return o.opr?Math.max(r.body["client"+B],window["inner"+B]):o.kde?window["inner"+B]:(xui.browser.contentBox&&r.documentElement["client"+B])||r.body["client"+B]}}if(c=="width"){w=(xui.CSS.$isPx(h.style.width)&&parseFloat(h.style.width))||H._W(h,1,w)}else{if(c=="height"){w=(xui.CSS.$isPx(h.style.height)&&parseFloat(h.style.height))||H._H(h,1,w)}else{w=xui.Dom.getStyle(h,c,true)}}return(w=="auto"||w==="")?w:(w||0)}else{var l=xui.Dom._setUnitStyle,B,p,d=xui.CSS.$addu(w);return H.each(function(L){if(L.nodeType!=1){return}if(L.style[c]!==d){if(c=="width"){H._W(L,1,w)}else{if(c=="height"){H._H(L,1,w)}else{if(l(L,c,w)){if((c=="top"||c=="left")&&xui.Dom.$hasEventHandler(h,"onmove")){p={};p[c]=1;xui([L]).onMove(true,p)}}}}}})}})});xui.arr.each(xui.Event._events,function(c){xui.arr.each(xui.Event._getEventName(c),function(d){C.$enableEvents(d)})})},Initialize:function(){var e=window,f=document;xui.set(xui.$cache.domPurgeData,"!window",{$xid:"!window",element:e});xui.set(xui.$cache.domPurgeData,"!document",{$xid:"!document",element:f});xui.win=xui(["!window"],false);xui.doc=xui(["!document"],false);xui.busy=xui.Dom.busy;xui.free=xui.Dom.free;xui.$inlineBlock=xui.browser.gek?xui.browser.ver<3?["-moz-inline-block","-moz-inline-box","inline-block"]:["inline-block"]:(xui.browser.ie&&xui.browser.ver<=6)?["inline-block","inline"]:["inline-block"];var c=function(h,l,d){var g=xui.Event,q,j,o,m,n=g.getKey(l);if(n){if(n[0].length==1){n[0]=n[0].toLowerCase()}if(arr=d[n.join(":")]){xui.arr.each(arr,function(r,p){q=arr[r];if(q){if(q[3]&&(typeof q[3]=="function"?false===(q[3])():(!xui(q[3]).size()))){delete arr[r];arr.pop()}m=xui.tryF(q[0],q[1],q[2]);if(m===false){o=1;return false}else{if(m===true){delete arr[r];arr.pop()}}}},null,true);if(o){g.stopBubble(l);return false}}}return true};xui.doc.onKeydown(function(g,d){xui.Event.$keyboard=xui.Event.getKey(d);c(g,d,xui.$cache.hookKey)},"document").onKeyup(function(g,d){delete xui.Event.$keyboard;c(g,d,xui.$cache.hookKeyUp)},"document");xui.doc.onClick(function(m,l,q){var n=xui.Event.getSrc(l),h=0,d,g;do{if(n.nodeName=="A"){d=true;break}if(++h>8){break}}while(n=n.parentNode);if(d){g=xui.str.trim(n.href||"").toLowerCase();if(xui.History){var j=location.href.split("#")[0];if(!xui.Event.getKey(l).shiftKey&&xui.Event.getBtn(l)=="left"&&(g.indexOf(j+"#")==0||g.indexOf("#")==0)){xui.History.setFI(n.href.replace(j,""))}}if(xui.browser.ie&&(g.indexOf("javascript:")==0||g.indexOf("#")!==-1)){return false}}},"hookA",0);if(xui.browser.ie&&xui.browser.ver<10&&f.body){f.body.onselectstart=function(g,d){g=event.srcElement;while(g&&g.nodeName&&g.nodeName!="BODY"&&g.nodeName!="HTML"){if(d=xui.getNodeData(g,"_onxuisel")){return d!="false"}if(g.nodeName=="INPUT"||g.nodeName=="TEXTAREA"){break}g=g.parentNode}return true}}xui.win.afterUnload(function(){e.onresize=null;if(e.removeEventListener){e.removeEventListener("DOMMouseScroll",xui.Event.$eventhandler3,false)}f.onmousewheel=e.onmousewheel=null;if(xui.browser.isTouch){if(f.removeEventListener){f.removeEventListener((xui.browser.ie&&e.PointerEvent)?"pointerdown":(xui.browser.ie&&e.MSPointerEvent)?"MSPointerDown":"touchstart",xui.Event._simulateMousedown,false);f.removeEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",xui.Event._simulateMouseup,false)}else{if(f.detachEvent){f.detachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerdown":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerDown":"touchstart",xui.Event._simulateMousedown);f.detachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",xui.Event._simulateMouseup)}}}if(xui.browser.ie&&f.body){f.body.onselectstart=null}if("onhashchange" in e){e.onhashchange=null}xui("body").empty();xui([e,f]).$clearEvent();xui.SC.__gc();xui.Thread.__gc();Class.__gc();xui.breakO(xui.$cache,2);xui.breakO([xui,Class],3);e.Class=e.xui=e.xui_ini=e._=undefined},"window",-1)}});Class("xui.Template","xui.absProfile",{Constructor:function(h,f,e,j){var g=arguments.callee.upper,d=xui.toArr(arguments);g.apply(this,d);g=null;var c=this;c.$domId=c.KEY+":"+(c.serialId=c._pickSerialId())+":";c.domId=typeof j=="string"?j:c.$domId;c._links={};c.template={root:[["<div></div>"],[]]};c.properties={};c.events={};c.$template={};c.link(c.constructor._cache,"self").link(xui._pool,"xui");c.Class=c.constructor;c.box=c.constructor;c.boxing=function(){return this};if(h){c.setTemplate(typeof h=="string"?{root:h}:h)}if(e){c.setEvents(e)}if(f){c.setProperties(f)}return c},Instance:{renderId:null,__gc:function(){var c=this,d=xui.$cache.reclaimId;if(!c.$noReclaim){(d[c.KEY]||(d[c.KEY]=[])).push(c.serialId)}else{delete c.$noReclaim}delete xui.$cache.profileMap[c.domId];delete xui.$cache.profileMap[c.$domId];c.unLinkAll();xui.breakO([c.properties,c.event,c],2)},_reg0:/^\w[\w_-]*$/,show:function(c){if(!c){c=xui("body")}c=xui(c);c.append(this);return this},getRootNode:function(){return xui.getNodeData(this.renderId,"element")},getRoot:function(){return xui([this.renderId],false)},setDomId:function(g){var d=this,f=xui.$cache.profileMap,e=d._reg0;if(typeof g=="string"&&e.test(g)&&!document.getElementById(g)){if(d.domId!=d.$domId){delete f[d.domId]}d.domId=g;if(d.renderId){d.getRootNode().id=g}if(f[d.$domId]){f[g]=d}}return d},destroy:function(){if(this.renderId){var c=this.getRootNode();xui.$purgeChildren(c);if(c.parentNode){c.parentNode.removeChild(c)}c=null}else{this.__gc()}},setEvents:function(d,e){var c=this;if(typeof d=="object"){c.events=d}else{c.events[d]=e}return c},setTemplate:function(f,j){var c=this,e=c.template,l=c.$template,g;if(typeof f=="object"){c.template=f;g={};for(var d in f){g[d||"root"]=c._buildTemplate(f[d])}c.$template=g}else{if(typeof j=="string"){l[f]=c._buildTemplate(e[f]=j)}else{l.root=c._buildTemplate(e.root=f)}}return c},setProperties:function(d,e){var c=this;if(typeof d=="object"){c.properties=d}else{c.properties[d]=e}return c},getItem:function(h){var g=xui.getNodeData(h);if(!g){return}var j=g.tpl_evid,d=g.tpl_evkey;if(!j||!d){return}var c=arguments.callee,e=c.f||(c.f=function(p,n,r){var m,q,l,f;for(l in p){q=p[l];if(xui.isArr(q)&&(n==l||n.indexOf((p.tpl_evkey||l)+".")===0)){for(m=0;f=q[m];m++){if(f.tpl_evkey==n&&f.id==r){return f}else{if(f=e(f,n,r)){return f}}}}}});return e(this.properties,d,j)},_pickSerialId:function(){var c=xui.$cache.reclaimId[this.KEY];if(c&&c[0]){return c.shift()}return this.constructor._ctrlId.next()},render:function(){var C=this;if(!C.renderId){var d=xui.$getGhostDiv();xui.$cache.profileMap[C.domId]=xui.$cache.profileMap[C.$domId]=this;d.innerHTML=C.toHtml();var c=C.events,q=xui.Event._eventHandler,h=d.getElementsByTagName("*"),n=C.$domId,w=function(){return xui.Event(arguments[0],this,0,n)},u,m,r,p,g,A,e,B,x;if(m=h.length){for(u=0;u<m;u++){if((g=h[u]).nodeType!=1){continue}A=g.getAttribute("tpl_evkey");e=g.getAttribute("tpl_evid");if(A!==null&&e!==null){x=xui.$registerNode(g);x.tpl_evkey=A;x.tpl_evid=e;if(B=c[A]){x=x.eHandlers||(x.eHandlers={});for(r in B){x[r]=w;if(p=q[r]){x[p]=g[p]=w}}}g.removeAttribute("tpl_evkey");g.removeAttribute("tpl_evid")}}if(!d.firstChild.$xid){xui.$registerNode(d.firstChild)}C.renderId=d.firstChild.$xid}g=d=null}return C},refresh:function(){var e=this;if(e.renderId){var d=document.createElement("span"),f=e.getRootNode(),c=xui.$cache.profileMap;delete c[e.domId];delete c[e.$domId];if(f.parentNode){f.parentNode.replaceChild(d,f)}e.destroy();delete e.renderId;e.render();if(d.parentNode){d.parentNode.replaceChild(e.getRootNode(),d)}d=f=null}return e},renderOnto:function(g){var c=this,h,f,e="style",d;if(typeof g=="string"){g=document.getElementById(g)}h=g.id||c.domId;if(!c.renderId){c.render()}f=c.getRootNode();g.parentNode.replaceChild(f,g);if(f.tabIndex!=g.tabIndex){f.tabIndex!=g.tabIndex}if(g.className){f.className+=g.className}if(xui.browser.ie&&(d=g.style.cssText)){f.style.cssText+=d+""}else{if(d=g.getAttribute(e)){f.setAttribute(e,(f.getAttribute(e)||"")+d)}}this.setDomId(h)},toHtml:function(c){var d=xui.copy(c||this.properties||{});d.tpl_evkey="root";return this._doTemplate(d)},_reg1:/([^{}]*)\{([\w]+)\}([^{}]*)/g,_reg2:/\[event\]/g,_buildTemplate:function(f){if(typeof f=="string"){var e=[[],[]],d=e[0],c=e[1];f=f.replace(this._reg2,' tpl_evid="{id}" tpl_evkey="{tpl_evkey}" ');f.replace(this._reg1,function(h,g,l,j){if(g){d[d.length]=g}c[d.length]=d[d.length]=l;if(j){d[d.length]=j}return""});return e}else{return f}},_getEV:function(j,d,c,f){var g=xui.getNodeData(f);if(!g){return}var m=this.events,e=g.tpl_evkey,h=(e&&m&&m[e])||m,l=h&&h[c];if(l){j.push(l)}},_reg3:/(^\s*<\w+)(\s|>)(.*)/,_doTemplate:function(j,A,B){if(!j){return""}var u=this,m=arguments.callee,x,q,f,w=xui.isArr(j),o=u.$template,p=o[A||"root"],c=!B;B=B||[];if(w){if(typeof p!="function"){p=m}for(var h=0;q=j[h++];){q.tpl_evkey=A;p.call(u,q,A,B)}}else{if(typeof p=="function"){p.call(u,j,A,B)}else{A=A?A+".":"";var e=p[0],d=p[1];for(var h=0,g=e.length;h<g;h++){if(f=d[h]){if(f in j){q=typeof j[f]=="function"?j[f].call(u,f,j):j[f];if(o[x=A+f]){m.call(u,q,x,B)}else{B[B.length]=q}}}else{B[B.length]=e[h]}}}}if(c){return B.join("").replace(u._reg3,'$1 id="'+u.$domId+'" $2$3')}},serialize:function(){var c=this,f=xui.serialize,e=xui.absObj.$specialChars,d=xui.isEmpty(c.properties)?null:xui.clone(c.properties,function(h,g){return !e[(g+"").charAt(0)]});return"new xui.Template("+f(c.template||null)+","+f(d)+","+f(xui.isEmpty(c.events)?null:c.events)+","+f(c.$domId!=c.domId?c.domId:null)+")"}},Static:{getFromDom:function(c){if((c=typeof c=="string"?c:(c&&c.id))&&(c=xui.$cache.profileMap[c])&&c["xui.Template"]){return c.boxing()}},_cache:[],_ctrlId:new xui.id()}});Class("xui.Module","xui.absProfile",{Initialize:function(){var c=this;xui.launch=function(d,e,h,g,f){c.load.apply(c,arguments)};c["xui.Com"]=c.prototype["xui.Com"]=1;xui.Com=c;c.$activeClass$="xui.Module"},After:function(){var f=this,d,j,h,c,g;xui.arr.each(["$DataModel","$EventHandlers"],function(e){d=f[e]||{};if((h=f.$parent)&&(j=h.length)){while(j--){c=h[j][e];for(g in c){if(!(g in d)){d[g]=c[g]}}}}f[e]=d});j=f.prototype;if("_evsClsBuildIn" in j){c=j._evsClsBuildIn;h=j._evsPClsBuildIn||(j._evsPClsBuildIn={});for(g in c){if(h[g]){if(!xui.isArr(h[g])){h[g]=[h[g]]}xui.arr.insertAny(h[g],c[g])}else{h[g]=xui.clone(c[g])}}j._evsClsBuildIn=null}if("events" in j){j._evsClsBuildIn=j.events;j.events={}}f._nameId=0;f._namePool={};f._nameTag=f.$nameTag||(f.KEY.replace(/\./g,"_").toLowerCase());f._cache=[]},Constructor:function(g,f,j){var c=this,e,d;if(g&&g.constructor==c.constructor){if(g.$xid){c.$xid=g.$xid}}var h=arguments.callee.upper;if(h){h.call(c)}h=null;if(g&&g.constructor==c.constructor){var l=g;f=l.events||{};d=l.alias;j=l.host;g=l.properties||{};c=l}else{if(g&&g.key&&g["xui.Module"]){var e=g;g=(e&&e.properties)||{};f=(e&&e.events)||{};d=e.alias;j=e.host}else{g=g||(c.properties?xui.clone(c.properties):{});f=f||(c.events?xui.clone(c.events):{})}}c.Class=c.constructor;c.box=c.constructor;c.key=c.KEY;if(!d){d=c.constructor.pickAlias()}if(!xui.isEmpty(c.constructor.$DataModel)){xui.merge(g,xui.clone(c.constructor.$DataModel),"without")}c._links={};c.link(c.constructor._cache,"self");c.link(xui.Module._cache,"xui.module");c.link(xui._pool,"xui");c.host=j||c;c.alias=d;c.$UIvalue="";c._nodes=[];c._ctrlpool={};c.events=f;c.properties={};if(c._evsClsBuildIn){c._evsClsBuildIn=xui.clone(c._evsClsBuildIn)}if(c._evsPClsBuildIn){c._evsPClsBuildIn=xui.clone(c._evsPClsBuildIn)}c.setProperties(g);c._innerCall("initialize");return c},Instance:{autoDestroy:true,background:"",get:function(c){return xui.isNumb(c)?this:[this]},size:function(){return 1},boxing:function(){return this},each:function(c,d){c.call(d,this);return this},getRoot:function(d){if(!this._innerModulesCreated){this._createInnerModules()}var c=function(e){if(e["xui.Module"]){for(var g=0,f=e._nodes,h;g<f,h=e._nodes[g];g++){if(h["xui.Module"]){return c(h)}if(h["xui.UIProfile"]&&!h.box.$initRootHidden){return d?h:h.getRoot()}}}};return c(this)},getRootNode:function(){var c=this.getRoot();if(!c.isEmpty()){return c.get(0)}},getModule:function(c){var d=function(f){if(f.moduleClass&&f.moduleXid){var e=xui.SC.get(f.moduleClass);if(e&&(e=e.getInstance(f.moduleXid))){return d(e)}}return f};return c?d(this):this},_toDomElems:function(){var c=this,d=c.getUIComponents();if(!c.created){c.create(null,false)}c.render();d.each(function(f,e){if((f=f.getModule())&&f!=c){f._toDomElems()}});return d._toDomElems()},setAlias:function(c){return xui.absObj.prototype._setHostAlias.call(this,null,c)},getAlias:function(){return this.alias},setHost:function(d,c){return xui.absObj.prototype._setHostAlias.call(this,d,c)},getName:function(){return this.properties.name||this.alias},setName:function(c){this.properties.name=c},getDesc:function(){return this.properties.desc},setDesc:function(c){this.properties.desc=c},getTabindex:function(){return this.properties.tabindex},setTabindex:function(c){this.properties.tabindex=c},getHost:function(){return this.host},setProperties:function(d,f){var c=this,e;if("dataBinder" in c.properties){e=c.properties.dataBinder}if(!d){c.properties={}}else{if(typeof d=="string"){c.properties[d]=f}else{if(xui.isHash(d)){if(f){c.properties=xui.clone(d)}else{xui.merge(c.properties,d,"all")}}}}if(c.propSetAction){c.propSetAction(c.properties)}if("dataBinder" in c.properties){if(e!==c.properties.dataBinder){if(e){xui.DataBinder._unBind(e,c)}if(c.properties.dataBinder){xui.DataBinder._bind(c.properties.dataBinder,c)}}}return c},getProperties:function(d){var c=this;if(c._getProperties){c.properties=c._getProperties()}return d?c.properties[d]:c.properties},setEvents:function(d,e){var c=this;if(!d){c.events={}}else{if(typeof d=="string"){c.events[d]=e}else{if(xui.isHash(d)){if(e){c.events=xui.clone(d)}else{xui.merge(c.events,d,"all")}}}}return c},getEvents:function(c){return c?this.events[c]:this.events},serialize:function(n,w,g){var q,h,u=this,f=(q=u.constructor._beforeSerialized)?q(u):u,d={"xui.Module":true,alias:f.alias,key:f.KEY,host:f.host};if(d.host===u){delete d.host}else{if(f.host&&!w){if(n!==false){d.host="@this"}else{delete d.host}}}var l={},e=f.box.$DataModel;xui.merge(l,f.properties,function(m,c){return e[c]!==m});if(!xui.isEmpty(l)){d.properties=l}if(!xui.isEmpty(q=this.getEvents())){d.events=q}var j=f.box.$EventHandlers;xui.filter(d.events,function(m,c){return m!==j[c]});if(xui.isEmpty(d.properties)){delete d.properties}if(!xui.isEmpty(q=this.getEvents())){d.events=q}if(xui.isEmpty(d.events)){delete d.events}return n===false?d:xui.serialize(d)},clone:function(){var c=this.serialize(false,true);delete c.alias;return this.constructor.unserialize(c)},fireEvent:function(e,n,u){var f,c,h,m,w=this,p=w._evsPClsBuildIn&&w._evsPClsBuildIn[e],d=w._evsClsBuildIn&&w._evsClsBuildIn[e],q=w.events&&w.events[e],g=function(o,x,A,r){r=r||[];if(!xui.isArr(x)){x=[x]}h=x.length;if(xui.isNumb(m=x[0].event)){r[m]=xui.Event.getEventPara(r[m])}var l={};var B=0,j=function(C){if(xui.isStr(this)){l[this+""]=C||""}for(m=B;m<h;m++){B=m+1;f=x[m];if(typeof f=="string"){f=A[f]}if(typeof f=="function"){c=xui.tryF(f,r,A)}else{if(xui.isHash(f)){if("onOK" in f||"onKO" in f){if("onOK" in f){(f.params||(f.params=[]))[parseInt(f.onOK,10)||0]=function(){if(j){j.apply("okData",arguments)}}}if("onKO" in f){(f.params||(f.params=[]))[parseInt(f.onKO,10)||0]=function(){if(j){j.apply("koData",arguments)}}}if(false===(c=xui.pseudocode.exec(f,r,A,l))){B=l=j=null}break}else{if(false===(c=xui.pseudocode.exec(f,r,A,l))){B=m;break}}}}}if(B==m){B=l=j=null}return c};return j()};if(p&&(!xui.isArr(p)||p.length)){c=g(w,p,w,n)}if(d&&(!xui.isArr(d)||d.length)){c=g(w,d,w,n)}if(q&&(!xui.isArr(q)||q.length)){c=g(w,q,u||w.host||w,n)}return c},_fireEvent:function(e,j){var f,c,h,p=this,m=p._evsPClsBuildIn&&p._evsPClsBuildIn[e],d=p._evsClsBuildIn&&p._evsClsBuildIn[e],n=p.events&&p.events[e],g=function(l,r,u,o){l.$lastEvent=e;o=o||[];o.splice(0,0,l,l.threadid);if(!xui.isArr(r)){r=[r]}h=r.length;for(var q=0;q<h;q++){f=r[q];if(typeof f=="string"){f=u[f]}if(typeof f=="function"){c=f.apply(u,o)}else{if(xui.isHash(f)){c=xui.pseudocode.exec(f,o,u)}}}};if(m&&(!xui.isArr(m)||m.length)){c=g(p,m,p,j)}if(d&&(!xui.isArr(d)||d.length)){c=g(p,d,p,j)}if(n&&(!xui.isArr(n)||n.length)){c=g(p,n,p.host||p,j)}return c},_innerCall:function(d){var c=this;return xui.tryF(c[d],[c,c.threadid],c)},customAppend:function(d,c,g,f,e){return false},show:function(e,g,d,m,l,j){if(false===this._fireEvent("beforeShow")){return false}g=g||xui("body");if(g["xui.UIProfile"]){g=g.boxing()}var c=this,h=function(){var o=c.customStyle;if(o&&!xui.isEmpty(o)){var n=[];xui.each(o,function(q,p){n.push(p+" : "+q+";")});var f=".xui-module-"+c.$xid+"{\r\n"+n.join("\r\n")+"\r\n}";xui.CSS.addStyleSheet(f,"xui:css:module-"+c.$xid,1)}if(c.getUIComponents().isEmpty()){xui.tryF(c.customAppend,[g,d,l,j,m],c);xui.tryF(e,[null,c,m],c.host)}else{if(!(g&&g["xui.UI"]&&!g.get(0).renderId)){c.render()}if(false===xui.tryF(c.customAppend,[g,d,l,j,m],c)){g.append(c.getUIComponents(false),d);c.getUIComponents(true).each(function(q){q.boxing().show(g,d);if(q.KEY=="xui.UIProfile"&&xui.get(q,["properties","defaultFocus"])){try{xui.asyRun(function(){q.boxing().activate()})}catch(p){}}})}c.renderId="ok";xui.tryF(e,[null,c,m],c.host)}c._showed=1;c._fireEvent("afterShow")};c.threadid=m;if(c.created){h()}else{c.create(h,m)}return c},hide:function(){this.getUIComponents(true).hide();this._showed=0},render:function(d){var c=this;if(c.renderId!="ok"){c.renderId="ok";c.getUIComponents().render(d);c._fireEvent("onRender")}return c},refresh:function(f,C,x){var c,A,u,n,B,w=this,d,g,m=w.box,q=w.host,r=w.alias,l=w.$xid,j=w.$refreshTrigger,h=w.moduleClass,e=w.moduleXid;if(!w.renderId){return}if((d=w.getUIComponents()).isEmpty()){return}g=d.get(0);if(q&&q["xui.Module"]){q.$ignoreAutoDestroy=true}if(A=!!g.parent){u=g.parent.boxing();childId=g.childrenId}else{u=g.parent()}n=w.serialize(false,true);w.destroy(true,true,true);xui.merge(w,n,"all");delete w.destroyed;w.$xid=l;new m(w);if(q){w.setHost(q,r)}w.moduleClass=h;w.moduleXid=e;w.create(function(){var o=function(D,p){if(j){j.call(j.target,w)}if(f){xui.tryF(f)}};if(A){w.show(o,u,childId)}else{if(!u.isEmpty()){w.show(o,u)}}});if(w.host&&w.host["xui.Module"]){delete w.host.$ignoreAutoDestroy}return this},getParent:function(){var c=this.getUIComponents().get(0);if(c){return c.parent&&c.parent.boxing()}},getChildrenId:function(){var c=this.getUIComponents().get(0);if(c){return c.childrenId}},create:function(g,l){var f=this;if(f.created){xui.tryF(g,[null,f,l],f.host);return}var h,d=[];f.threadid=l;if(false===f._fireEvent("beforeCreated")){return}d.push(function(e){if(e){f.threadid=e}f._fireEvent("onCreated")});if((h=f.Dependencies)&&h.length){d.push(function(e){xui.require(f.Dependencies,null,function(n,m){f._fireEvent("onLoadBaseClass",[n,m])},function(){f._fireEvent("onLoadBaseClassErr",xui.toArr(arguments))},function(){f._fireEvent("onLoadBaseClassErr",xui.toArr(arguments))},false,e)})}if(f.iniComponents){var c=[];try{(f.iniComponents+"").replace(/append\s*\(\s*xui.create\(['"]([\w.]+)['"]\)/g,function(m,e){if(!xui.SC.get(e)){c.push(e)}})}catch(j){}if(c.length){if(f.Required&&xui.isArr(f.Required)){f.Required.concat(c)}else{f.Required=c}}}if((h=f.Required)&&h.length){d.push(function(e){xui.require(f.Required,null,function(n,m){f._fireEvent("onLoadRequiredClass",[n,m])},function(){f._fireEvent("onLoadRequiredClassErr",xui.toArr(arguments))},function(m){f._fireEvent("onLoadRequiredClassErr",xui.toArr(arguments))},false,e)})}if(f.iniComponents){d.push(function(){f._createInnerModules()})}if(f.iniResource){d.push(function(){f._fireEvent("onIniResource");f._innerCall("iniResource")})}if(f.iniExComs){f.iniExModules=f.iniExComs;delete f.iniExComs}if(f.iniExModules){d.push(function(){f._innerCall("iniExModules")})}d.push(function(e){if(f.background){xui.SC.runInBG(f.background)}f._fireEvent("onReady")});d.push(function(e){f.created=true;xui.tryF(g,[null,f,e],f.host)});if(l===false){xui.arr.each(d,function(e){e.call()})}else{xui.Thread.observableRun(d,null,l)}return f},_createInnerModules:function(){var d=this;if(d._recursived||d._innerModulesCreated){return}var f,c=function(g){if(g&&g["xui.Module"]&&g.moduleClass&&g.moduleXid){if(d.KEY==g.moduleClass){if(d.$xid!=g.moduleXid){d._recursived=g._recursived=true;g.destroy();d.destroy();f=1}else{return}}else{c(g.host)}}};c(d.host);if(f){alert("There's a ["+d.KEY+"] in another ["+d.KEY+"], check this recursive call please!");return}if(false===d._fireEvent("beforeIniComponents")){return}Array.prototype.push.apply(d._nodes,d._innerCall("iniComponents")||[]);xui.arr.each(d._nodes,function(g){xui.Module.$attachModuleInfo(d,g);if(g["xui.Module"]){g._createInnerModules()}});var e=d.autoDestroy||d.properties.autoDestroy;if(e){xui.arr.each(d._nodes,function(g){if(g.box&&g.box["xui.UI"]&&!g.box["xui.UI.MoudluePlaceHolder"]&&!g.box.$initRootHidden){(g.$afterDestroy=(g.$afterDestroy||{}))["moduleDestroyTrigger"]=function(){if(e&&!d.destroyed&&!d.$ignoreAutoDestroy){d.destroy()}d=null};return false}})}d._fireEvent("afterIniComponents");d._innerModulesCreated=true},iniComponents:function(){},getProfile:function(){if(!this._innerModulesCreated){this._createInnerModules()}var c={};xui.each(this._ctrlpool,function(d){c[d.alias]=d.serialize(false,false,false);delete c[d.alias].key;delete c[d.alias].alias;delete c[d.alias].events;delete c[d.alias]["xui.Module"]});return c},setProfile:function(c){if(!this._innerModulesCreated){this._createInnerModules()}xui.each(this._ctrlpool,function(f,e){if(f.alias in c){e=c[f.alias];var d=f.boxing();if(e&&xui.isHash(e)&&!xui.isEmpty(e)){if(e.theme&&typeof(d.setTheme)=="function"){d.setTheme(e.theme)}if(e.properties&&!xui.isEmpty(e.properties)){d.setProperties(e.properties)}if(e.CA&&!xui.isEmpty(e.CA)){d.setCustomAttr(e.CA)}if(e.CC&&!xui.isEmpty(e.CC)){d.setCustomClass(e.CC)}if(e.CS&&!xui.isEmpty(e.CS)){d.setCustomStyle(e.CS)}}else{d.setValue(e)}}});return this},_getPropBinderKeys:function(){if(!this._innerModulesCreated){this._createInnerModules()}var c;if(window.get){c=get}var f={};window.get=function(g){if(g){var e=g.split(".");if(e.length){f[e.shift()]=1}}};try{xui.each(this._ctrlpool,function(e){var g=e.properties;if(g.propBinder){xui.each(g.propBinder,function(h,j){if((j in g)&&xui.isFun(h)){h()}})}})}catch(d){}finally{window.get=c}return xui.toArr(f,true)},reBindProp:function(d){if(!this._innerModulesCreated){this._createInnerModules()}var c;if(window.get){c=get}window.get=function(e){return xui.SC.get(e,d)};try{xui.each(this._ctrlpool,function(e){e.boxing().reBindProp(d,true)})}catch(f){window.get=c}},getData:function(d){if(!this._innerModulesCreated){this._createInnerModules()}var c={};xui.each(this._ctrlpool,function(g){var h=g.properties,e=g.boxing(),f=c[g.alias]={};xui.arr.each(["src","html","items","lsitKey","header","rows","target","toggle","attr","JSONData","XMLData","JSONUrl","XMLUrl","dateStart","name","labelCaption"],function(j){if(j in h){f[j]=h[j]}});if(d){if("value" in h){f.value=h.value}}if("caption" in h&&xui.isSet(h.caption)){f.caption=typeof(e.getCaption)=="function"?e.getCaption():h.caption}});return c},setData:function(c){if(!this._innerModulesCreated){this._createInnerModules()}xui.each(this._ctrlpool,function(f){var g=f.properties,d=f.boxing(),e;if(f.alias in c){e=c[f.alias];if(e&&xui.isHash(e)&&!xui.isEmpty(e)){xui.arr.each(["src","html","items","lsitKey","header","rows","target","toggle","attr","JSONData","XMLData","JSONUrl","XMLUrl","dateStart","name","value","labelCaption","caption"],function(h){if(h in g&&h in e){d["set"+xui.str.initial(h)](e[h])}})}else{d.setValue(e)}}});return this},getValue:function(f){if(f){if(!this._innerModulesCreated){this._createInnerModules()}var e={},c,d;xui.each(this._ctrlpool,function(g){if("value" in g.properties){if(xui.isSet(g.properties.caption)){c=g.properties.caption;d=g.properties.value;if((!c&&!d)||c==d){e[g.alias]=d}else{e[g.alias]={value:d,caption:c}}}else{e[g.alias]=g.properties.value}}});return e}else{return this.properties.value}},setValue:function(c,d){if(d){if(!this._innerModulesCreated){this._createInnerModules()}if(!xui.isEmpty(c)){xui.each(this._ctrlpool,function(g){if("value" in g.properties&&g.alias in c){var f=c[g.alias],e=xui.isHash(f);g.boxing().setValue((e&&("value" in f))?f.value:f,true,"module");if(typeof(g.boxing().setCaption)=="function"&&e&&"caption" in f){g.boxing().setCaption(f.caption,null,true,"module")}}})}}else{this.properties.value=c}return this},getUIValue:function(d){if(d){if(!this._innerModulesCreated){this._createInnerModules()}var c={};xui.each(this._ctrlpool,function(e){if("$UIvalue" in e.properties){c[e.alias]=e.properties.$UIvalue}});return c}else{return this.$UIvalue}},setUIValue:function(c,d){if(d){if(!this._innerModulesCreated){this._createInnerModules()}if(!xui.isEmpty(c)){xui.each(this._ctrlpool,function(g){if("value" in g.properties&&g.alias in c){var f=c[g.alias],e=xui.isHash(f);g.boxing().setUIValue((e&&("value" in f))?f.value:f,true,false,"module");if(typeof(g.boxing().setCaption)=="function"&&e&&"caption" in f){g.boxing().setCaption(f.caption,null,true,"module")}}})}}else{this.$UIvalue=c}return this},resetValue:function(c){if(c){if(!this._innerModulesCreated){this._createInnerModules()}xui.each(this._ctrlpool,function(d){if(d.boxing().resetValue){d.boxing().resetValue()}})}else{this.$UIvalue=this.properties.value}return this},updateValue:function(c){if(c){if(!this._innerModulesCreated){this._createInnerModules()}xui.each(this._ctrlpool,function(d){if(d.boxing().updateValue){d.boxing().updateValue()}})}else{this.properties.value=this.$UIvalue;return this}return this},isDirtied:function(d){if(d){if(!this._innerModulesCreated){this._createInnerModules()}var c=false;xui.each(this._ctrlpool,function(e){if(e.boxing().isDirtied){if(e.boxing().isDirtied()){return false}}});return c}else{return this.properties.value===this.$UIvalue}},checkValid:function(c){if(c){if(!this._innerModulesCreated){this._createInnerModules()}xui.each(this._ctrlpool,function(d){if(d.boxing().checkValid){if(!d.boxing().checkValid()){return false}}})}else{return true}},getDataBinders:function(){if(!this._innerModulesCreated){this._createInnerModules()}var d=xui.copy(this._nodes),e,c="xui.DataBinder";xui.filter(d,function(f){return !!(f.box[c])});return d},getForms:function(){if(!this._innerModulesCreated){this._createInnerModules()}var d=xui.copy(this._ctrlpool),e,c="xui.absContainer";xui.filter(d,function(f){return !!(f.box[c])});return d},getAllComponents:function(){if(!this._innerModulesCreated){this._createInnerModules()}var d=[];var c=function(e){if(e["xui.Module"]){xui.each(e._ctrlpool,function(f){if(f["xui.Module"]){c(f)}else{d.push(f)}})}};c(this);return xui.absObj.pack(d,false)},getComponents:function(){if(!this._innerModulesCreated){this._createInnerModules()}var d=[];var c=function(e){if(e["xui.Module"]){xui.arr.each(e._nodes,function(f){if(f["xui.Module"]){c(f)}else{d.push(f)}})}};c(this);return xui.absObj.pack(d,false)},getUIComponents:function(c){var e=this.getComponents().get(),d="xui.UI",f="$initRootHidden";xui.filter(e,function(g){return !!(g&&g.box&&g.box[d])&&(c===true?!g.box[f]:c===false?g.box[f]:true)});return xui.UI.pack(e,false)},setComponents:function(e){var c=this,d;xui.arr.each(c._nodes,function(f){if((d=c[f.alias])&&d.get(0)==f){delete c[f.alias]}});xui.arr.each(c._nodes=e.get(),function(f){f.boxing().setHost(c,f.alias)});xui.arr.each(c._nodes,function(f){xui.Module.$attachModuleInfo(c,f)});return c},AddComponents:function(d){var c=this;xui.arr.each(d.get(),function(e){e.boxing().setHost(c,e.alias);c._nodes.push(e);xui.Module.$attachModuleInfo(c,e)});return c},isDestroyed:function(){return !!this.destroyed},destroy:function(c,h,e){var f=this,d=f.constructor,g=f._nodes;if(f.destroyed){return}f._fireEvent("onDestroy");if(f.alias&&f.host&&f.host[f.alias]){delete f.host[f.alias]}f.destroyed=true;if(g&&g.length){xui.arr.each(g,function(j){if(j&&j.box){j.boxing().destroy(c,h)}},null,true)}if(g&&g.length){f._nodes.length=0}f._ctrlpool=null;delete d._namePool[f.alias];f.unLinkAll();if(!e){xui.breakO(f)}else{delete f.renderId;delete f.created;delete f._innerModulesCreated}if(f.$afterDestroy){xui.each(f.$afterDestroy,function(j){xui.tryF(j,[],f)});xui.breakO(f.$afterDestroy,2)}f.destroyed=true}},Static:{"xui.absValue":true,refresh:function(f){var c=this,d={"$children":c.$children,_cache:c._cache,_nameId:c._nameId,_namePool:c._namePool},e=c.KEY,g=e.split("."),h;if(s=xui.get(window,["xui","$cache","SC"])){delete s[e]}xui.set(window,g);xui.exec(f);h=xui.get(window,g);xui.merge(c,h,function(l,j){return h.hasOwnProperty(j)});xui.merge(c.prototype,h.prototype,function(l,j){return h.prototype.hasOwnProperty(j)});xui.merge(c,d,"all");xui.breakO(h.prototype,1);xui.breakO(h,1);xui.set(window,g,c);return c},pickAlias:function(){return xui.absObj.$pickAlias(this)},getFromDom:function(d){var c=xui.UIProfile.getFromDom(d);if(c&&(c=c.host)){return(!c.destroyed)&&c}},getClsFromDom:function(c){return xui.get(this.getFromDom(c),["KEY"])},getAllInstance:function(){var c={};xui.arr.each(this._cache,function(d){c[d.$xid]=d});return c},getInstance:function(g,e){var d=this;if(!e){if(g["xui.Profile"]&&g.moduleClass&&g.moduleXid){e=g.moduleXid;g=g.moduleClass}else{e=g;g=null}}if(g){d=xui.SC.get(g);if(!d||!d["xui.Module"]){return}}var h=d._cache;for(var f in h){if(xui.isFinite(f)?(e+"")==f:("$"+e)==f){return h[f]}}},destroyAll:function(c,d){xui.arr.each(this._cache,function(e){if(!e.destroyed){e.destroy(c,d)}})},load:function(d,f,m,l,h){if(!d){var j=new Error("No cls");xui.tryF(f,[j,null]);throw j}if(typeof l=="function"){thowUI=l}var g=function(x){var n=this,q,p,u=function(){if(p&&xui.isHash(p)){xui.each(p,function(C,e){xui("html").css(e,xui.adjustRes(C))})}if(!xui.isFun(n)){var A=new Error("'"+d+"' is not a constructor");xui.tryF(f,[A,null]);throw A}else{var B=new n();n._callfrom=d;xui.set(xui.ModuleFactory,["_cache",d],B);if(h!==false){B.show(f)}else{xui.tryF(f,[null,B],B)}}};if(x){try{if((q=xui.ini.$FontIconsCDN)&&xui.isHash(q)){xui.each(q,function(B,A){if(B.href){var e={crossorigin:"anonymous"};xui.merge(e,B,function(C,D){return D!=="href"});xui.CSS.includeLink(xui.adjustRes(B.href),"xui_app_fscdn-"+A,false,e)}})}if((q=xui.ini.$PageAppearance)&&xui.isHash(q)){if(q.theme){l=q.theme}if(q.lang){m=q.lang}p=q.background}if((q=xui.ini.$ElementStyle)&&xui.isHash(q)){xui.CSS.setStyleRules(".xui-custom",q,true)}if((q=xui.ini.$DefaultProp)&&xui.isHash(q)){var r={},o;xui.each(q,function(A,e){if(/^xui\.UI\./.test(e)&&xui.isHash(A)&&(o=xui.get(window,e.split(".")))){o.setDftProp(A)}else{r[e]=A}});if(!xui.isEmpty(r)){xui.UI.setDftProp(r)}}if((q=xui.ini.$WebAPIMocker)&&xui.isHash(q)){xui.APICaller.setMocker(q)}}catch(w){}if(l&&l!="default"){xui.setTheme(l,true,function(){if(m){xui.setLang(m,u)}else{u()}})}else{if(m){xui.setLang(m,u)}else{u()}}}else{var w=new Error("No class name");xui.tryF(f,[w,null]);throw w}},c=function(){if(typeof(d)=="function"&&d.$xui$){g(ok)}else{d=d+""}if(/\//.test(d)&&!/\.js$/i.test(d)){d=d+".js"}if(/\.js$/i.test(d)){xui.fetchClass(d,g,function(n){xui.tryF(f,[n,null])})}else{xui.SC(d,g,true,null,{retry:0,onFail:function(n){xui.tryF(f,[n,null])}})}};if(xui.isDomReady){c()}else{xui.main(c)}},unserialize:function(c){return new this(c)},$attachModuleInfo:function(d,e){if(e.moduleClass&&e.moduleXid){var c=xui.SC.get(e.moduleClass);c=c.getInstance(e.moduleXid);if(c!==d){c.moduleClass=d.KEY;c.moduleXid=d.$xid;return}}e.moduleClass=d.KEY;e.moduleXid=d.$xid;xui.arr.each(e.children,function(f){xui.Module.$attachModuleInfo(d,f[0])})},$DataModel:{autoDestroy:true,dataBinder:"",value:""},$EventHandlers:{onFragmentChanged:function(d,e,c){},beforeCreated:function(c,d){},onLoadBaseClass:function(d,f,e,c){},onLoadBaseClassErr:function(d,e,c){},onLoadRequiredClass:function(d,f,e,c){},onLoadRequiredClassErr:function(c,e,d){},onIniResource:function(c,d){},beforeIniComponents:function(c,d){},afterIniComponents:function(c,d){},onReady:function(c,d){},onRender:function(c,d){},onDestroy:function(c){}}}});Class("xui.Cookies",null,{Static:{set:function(c,g,j,h,f,e){if(xui.isHash(c)){for(var d in c){this.set(d,c[d],j,h,f,e)}}else{if(typeof g!="string"){g=xui.serialize(g)}document.cookie=escape(c+"")+"="+escape(g)+(j?"; expires="+(new Date((new Date()).getTime()+(24*60*60*1000*j))).toGMTString():"")+(h?"; path="+h:"")+(f?"; domain="+f:"")+(e?"; secure":"")}return this},get:function(f){var g,e,h,d=document.cookie.split("; "),j={},c=function(l){return/^\s*\{[\s\S]*\}$/.test(l)?xui.unserialize(l):/^\s*\[[\s\S]*\]$/.test(l)?xui.unserialize(l):l};for(g=0;g<d.length;g++){e=d[g].split("=");h=e[1]?unescape(e[1]):"";j[e[0]]=c(h)||h;if(f&&e[0]==escape(f)){return j[e[0]]}}return f?null:j},remove:function(c){return this.set(c,"",-1).set(c,"/",-1)},clear:function(){xui.arr.each(document.cookie.split(";"),function(c){xui.Cookies.remove(xui.str.trim(c.split("=")[0]))})}}});Class("xui.MessageService",null,{Instance:{initialize:function(){this.$subscribers={}},subscribe:function(d,f,h,g){if(d===null||d===undefined||f===null||f===undefined||typeof h!="function"){return}var j=this.$subscribers,e;j[d]=j[d]||[];e=xui.arr.subIndexOf(j[d],"id",f);if(e!=-1){xui.arr.removeFrom(j[d],e)}return j[d].push({id:f,receiver:h,asy:!!g})},unsubscribe:function(d,f){var g=this.$subscribers,e;if(!f){if(d===null||d===undefined){g={}}else{delete g[d]}}else{if(g[d]){e=xui.arr.subIndexOf(g[d],"id",f);if(e!=-1){xui.arr.removeFrom(g[d],e)}}}},publish:function(e,d,f){var g=this.$subscribers;if(e===null||e===undefined){for(var e in g){xui.arr.each(g[e],function(c){if(c.asy){xui.asyRun(c.receiver,0,d,f)}else{return xui.tryF(c.receiver,d,f,true)}})}}else{if(g[e]){xui.arr.each(g[e],function(c){if(c.asy){xui.asyRun(c.receiver,0,d,f)}else{return xui.tryF(c.receiver,d,f,true)}})}}},getSubscribers:function(c){return(c===null||c===undefined)?this.$subscribers:this.$subscribers[c]}}});Class("xui.XML",null,{Static:{json2xml:function(h,e,d){var c=[],g=function(p,q,m){if(typeof q=="object"){if(xui.isArr(q)){if(q.length){for(var o=0,n=q.length;o<n;o++){m.push(g(p,q[o],m))}}else{m.push("<"+(e?e(p):p)+">__[]__</"+(e?e(p):p)+">")}}else{var j;m.push("<"+(e?e(p):p));for(var o in q){if(o.charAt(0)=="@"){m.push(" "+o.substr(1)+'="'+(d?d(q[o]):q[o])+'"')}else{j=1}}m.push(j?">":"/>");if(j){for(var o in q){if(o=="#text"){m.push((d?d(q[o]):q[o]))}else{if(o=="#cdata"){m.push("<![CDATA["+(d?d(q[o]):q[o])+"]]>")}else{if(o.charAt(0)!="@"){m.push(g(o,q[o],m))}}}}m.push("</"+(e?e(p):p)+">")}}}else{m.push("<"+(e?e(p):p)+">"+(d?d(q):q)+"</"+(e?e(p):p)+">")}};for(var f in h){g(f,h[f],c)}return'<?xml version="1.0" encoding="UTF-8" ?>'+c.join("")},xml2json:function(h){if(h.nodeType==9){h=h.documentElement}var c={},j={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e=/^-?(\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/,d={"__[]__":[],"null":null,"false":false,"true":true},g=function(n){return n.replace(/[\s\S]/g,function(p,o){return(o=j[p])?o:p})},l=function(p){var q,o;p.normalize();for(q=p.firstChild;q;){o=q;if(q.nodeType==1){l(q)}q=q.nextSibling;if(o.nodeType==3&&!o.nodeValue.match(/\S/)){p.removeChild(o)}}return p},m=function(u){if("innerHTML" in u){u=u.innerHTML;u=u in d?d[u]:e.test(u)?parseFloat(u):u}else{var p=[],q,r=function(B){if(B.nodeType==1){p.push("<"+B.nodeName);var w=B.attributes;for(var A=0,x=w.length;A<x;A++){p.push(" "+w[A].nodeName+'="'+(w[A].nodeValue||"")+'"')}if(B.firstChild){p.push(">");for(w=B.firstChild;w;w=w.nextSibling){p.push(r(w))}p.push("</"+B.nodeName+">")}else{p.push("/>")}}else{if(B.nodeType==3){B=B.nodeValue;p.push(B in d?d[B]:e.test(B)?parseFloat(B):B)}else{if(B.nodeType==4){p.push("<![CDATA["+B.nodeValue+"]]>")}}}};for(var o=u.firstChild;o;o=o.nextSibling){r(o)}u=(p.length==1?p[0]:p.join(""))}return typeof u=="string"?g(u):u},f=function(x){var q=null,D,A;if(x.nodeType==1&&((D=x.attributes).length||x.firstChild)){q={};if(D.length){for(var w=0,u=D.length;w<u;w++){q["@"+D[w].nodeName]=(D[w].nodeValue||"")+""}}if(x.firstChild){var C=0,B=0,p=0,r;for(r=x.firstChild;r;r=r.nextSibling){A=r.nodeType;if(A==1){p++}else{if(A==3){C++}else{if(A==4){B++}}}}if(p){if(C<2&&B<2){for(r=x.firstChild;r;r=r.nextSibling){if(r.nodeType==3){q["#text"]=g(r.nodeValue)}else{if(r.nodeType==4){q["#cdata"]=g(r.nodeValue)}else{if(q[A=r.nodeName]){if(q[A] instanceof Array){q[A][q[A].length]=f(r)}else{q[A]=[q[A],f(r)]}}else{q[A]=f(r)}}}}}else{if(!D.length){q=m(x)}else{q["#text"]=m(x)}}}else{if(C){if(!D.length){q=m(x)}else{q["#text"]=m(x)}}else{if(B){if(B>1){q=m(x)}else{for(r=x.firstChild;r;r=r.nextSibling){q["#cdata"]=g(r.nodeValue)}}}}}}}return q};c[h.nodeName]=f(l(h));return c},parseXML:function(c){var g=null;if(typeof DOMParser=="undefined"){try{g=new ActiveXObject("Microsoft.XMLDOM");g.async=false;g.loadXML(c||"")}catch(f){g=null}}else{try{var d=new DOMParser();g=d.parseFromString(c||"","text/xml")}catch(f){g=null}finally{d=null}}return g}}});Class("xui.XMLRPC",null,{Static:{wrapRequest:function(c,h){if(typeof c=="object"){h=c.params;c=c.methodName}if(!c){return null}if(h&&!h instanceof Array){return null}var g=this,e=['<?xml version="1.0"?><methodCall><methodName>'+c+"</methodName>"];if(h){e.push("<params>");for(var f=0,d=h.length;f<d;f++){e.push("<param>"+g._wrapParam(h[f])+"</param>")}e.push("</params>")}e.push("</methodCall>");return e.join("")},parseResponse:function(g){if(!g||!g.documentElement){return null}var h=g.documentElement;if(h.nodeName!="methodResponse"){return null}var d=this,c={},f,e;e=h.getElementsByTagName("value")[0];if(e.parentNode.nodeName=="param"&&e.parentNode.parentNode.nodeName=="params"){c.result=d._parseElem(e)}else{if(e.parentNode.nodeName=="fault"){f=d._parseElem(e);c.error={code:f.faultCode,message:f.faultString}}else{return null}}if(!c.result&&!c.error){return null}return c},_dateMatcher:/^(?:(\d\d\d\d)-(\d\d)(?:-(\d\d)(?:T(\d\d)(?::(\d\d)(?::(\d\d)(?:\.(\d+))?)?)?)?)?)$/,_parseElem:function(g){var q=this,d=g.childNodes,u,w,c,r,p;if(d.length==1&&d.item(0).nodeType==3){return d.item(0).nodeValue}for(var o=0,h=d.length;o<h;o++){if(d.item(o).nodeType==1){u=d.item(o);switch(u.nodeName.toLowerCase()){case"i4":case"int":r=parseInt(u.firstChild.nodeValue,10);return isNaN(r)?null:r;case"double":r=parseFloat(u.firstChild.nodeValue);return isNaN(r)?null:r;case"boolean":return Boolean(parseInt(u.firstChild.nodeValue,10)!==0);case"string":return u.firstChild?u.firstChild.nodeValue:"";case"datetime.iso8601":if(p=u.firstChild.nodeValue.match(q._dateMatcher)){r=new Date;if(p[1]){r.setUTCFullYear(parseInt(p[1],10))}if(p[2]){r.setUTCMonth(parseInt(p[2]-1,10))}if(p[3]){r.setUTCDate(parseInt(p[3],10))}if(p[4]){r.setUTCHours(parseInt(p[4],10))}if(p[5]){r.setUTCMinutes(parseInt(p[5],10))}if(p[6]){r.setUTCSeconds(parseInt(p[6],10))}if(p[7]){r.setUTCMilliseconds(parseInt(p[7],10))}return r}return null;case"base64":return null;case"nil":return null;case"struct":r={};for(var e,n=0;e=u.childNodes.item(n);n++){if(e.nodeType==1&&e.nodeName=="member"){c="";g=null;for(var f,m=0;f=e.childNodes.item(m);m++){if(f.nodeType==1){if(f.nodeName=="name"){c=f.firstChild.nodeValue}else{if(f.nodeName=="value"){g=f}}}}if(c&&g){r[c]=q._parseElem(g)}}}return r;case"array":r=[];w=u.firstChild;while(w&&(w.nodeType!=1||w.nodeName!="data")){w=w.nextSibling}if(!w){return null}g=w.firstChild;while(g){if(g.nodeType==1){r.push(g.nodeName=="value"?q._parseElem(g):null)}g=g.nextSibling}return r;default:return null}}}return null},_map:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},_date2utc:function(f){var c=this,e=this._zeroPad;return f.getUTCFullYear()+"-"+e(f.getUTCMonth()+1)+"-"+e(f.getUTCDate())+"T"+e(f.getUTCHours())+":"+e(f.getUTCMinutes())+":"+e(f.getUTCSeconds())+"."+e(f.getUTCMilliseconds(),3)},_zeroPad:function(d,c){if(!c){c=2}d=((!d&&d!==0)?"":(""+d));while(d.length<c){d="0"+d}return d},_wrapParam:function(l){var h=this,m=h._map,e=["<value>"],c;switch(typeof l){case"number":e.push(!isFinite(l)?"<nil/>":parseInt(l,10)===Math.ceil(l)?("<int>"+l+"</int>"):("<double>"+l+"</double>"));break;case"boolean":e.push("<boolean>"+(l?"1":"0")+"</boolean>");break;case"string":e.push("<string>"+l.replace(/[<>&"']/g,function(j){return m[j]})+"</string>");break;case"undefined":e.push("<nil/>");case"function":e.push("<string>"+(""+l).replace(/[<>&"']/g,function(j){return m[j]})+"</string>");case"object":c=Object.prototype.toString.call(l);if(l===null){e.push("<nil/>")}else{if(c==="[object Array]"){e.push("<array><data>");for(var g=0,d=l.length;g<d;g++){e.push(h._wrapParam(l[g]))}e.push("</data></array>")}else{if(c==="[object Date]"&&isFinite(+l)){e.push("<dateTime.iso8601>"+h._date2utc(l)+"</dateTime.iso8601>")}else{e.push("<struct>");for(var f in l){if(l.hasOwnProperty(f)){e.push("<member><name>"+f+"</name>"+h._wrapParam(l[f])+"</member>")}}e.push("</struct>")}}}break}e.push("</value>");return e.join("")}}});Class("xui.SOAP",null,{Static:{RESULT_NODE_NAME:"return",getNameSpace:function(c){var d=c.documentElement.attributes.targetNamespace;return d===undefined?c.documentElement.attributes.getNamedItem("targetNamespace").nodeValue:d.value},getWsdl:function(c,e){var d=false;xui.Ajax(c+"?wsdl",null,function(f){d=f},function(){xui.tryF(e,arguments,this)},null,{method:"GET",rspType:"xml",asy:false}).start();return d},wrapRequest:function(d,g,c){if(typeof d=="object"){c=g;g=d.params;d=d.methodName}var f=this,e=f.getNameSpace(c);return'<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><'+d+' xmlns="'+e+'">'+f._wrapParams(g)+"</"+d+"></soap:Body></soap:Envelope>"},parseResponse:function(f,d,c){if(typeof d=="object"){d=d.methodName}var e=this,g={},h=f.getElementsByTagName(d+"Result");if(!h.length){h=f.getElementsByTagName(e.RESULT_NODE_NAME)}if(!h.length){g.fault={faultcode:f.getElementsByTagName("faultcode")[0].childNodes[0].nodeValue,faultstring:f.getElementsByTagName("faultstring")[0].childNodes[0].nodeValue}}else{g.result=e._rsp2Obj(h[0],c)}return g},_rsp2Obj:function(e,c){var f=this,d=f._getTypesFromWsdl(c);return f._node2obj(e,d)},_getTypesFromWsdl:function(d){var g=[],c,h;c=d.getElementsByTagName("s:element");if(c.length){h=true}else{c=d.getElementsByTagName("element");h=false}for(var f=0,e=c.length;f<e;f++){if(h){if(c[f].attributes.getNamedItem("name")!=null&&c[f].attributes.getNamedItem("type")!=null){g[c[f].attributes.getNamedItem("name").nodeValue]=c[f].attributes.getNamedItem("type").nodeValue}}else{if(c[f].attributes.name!=null&&c[f].attributes.type!=null){g[c[f].attributes.name.value]=c[f].attributes.type.value}}}return g},_getTypeFromWsdl:function(c,d){return d[c]==undefined?"":d[c]},_node2obj:function(p,j){if(p==null){return null}var n=this,o,f;if(p.nodeType==3||p.nodeType==4){o=p.nodeValue;switch(n._getTypeFromWsdl(p.parentNode.nodeName,j).toLowerCase()){case"s:boolean":return o+""=="true";case"s:int":case"s:long":return o===null?0:parseInt(o+"",10);case"s:double":return o===null?0:parseFloat(o+"");case"s:datetime":if(o==null){return null}else{if(f=o.match(n._dateMatcher)){var m=new Date;if(f[1]){m.setUTCFullYear(parseInt(f[1],10))}if(f[2]){m.setUTCMonth(parseInt(f[2]-1,10))}if(f[3]){m.setUTCDate(parseInt(f[3],10))}if(f[4]){m.setUTCHours(parseInt(f[4],10))}if(f[5]){m.setUTCMinutes(parseInt(f[5],10))}if(f[6]){m.setUTCSeconds(parseInt(f[6],10))}if(f[7]){m.setUTCMilliseconds(parseInt(f[7],10))}return m}return null}default:return o===null?"":(o+"")}}else{if(p.childNodes.length==1&&(p.childNodes[0].nodeType==3||p.childNodes[0].nodeType==4)){return n._node2obj(p.childNodes[0],j)}else{if(n._getTypeFromWsdl(p.nodeName,j).toLowerCase().indexOf("arrayof")==-1){var e=p.hasChildNodes()?{}:null;for(var g=0,c=p.childNodes.length;g<c;g++){e[p.childNodes[g].nodeName]=n._node2obj(p.childNodes[g],j)}return e}else{var h=[];for(var g=0,c=p.childNodes.length;g<c;g++){h.push(n._node2obj(p.childNodes[g],j))}return h}}}return null},_wrapParams:function(f){var d=this,c=[];for(var e in f){switch(typeof(f[e])){case"string":case"number":case"boolean":case"object":c.push("<"+e+">"+d._wrapParam(f[e])+"</"+e+">");break;default:break}}return c.join("")},_map:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},_wrapParam:function(f){var j=this,m="",c=j._map,e,g,h,l;switch(typeof(f)){case"string":m+=f.replace(/[<>&"']/g,function(n){return c[n]});break;case"number":case"boolean":m+=f+"";break;case"object":e=Object.prototype.toString.call(f);if(e==="[object Date]"&&isFinite(+f)){m+=j._date2utc(f)}else{if(e==="[object Array]"){for(var d in f){l=f[d];switch(typeof l){case"number":h=parseInt(l,10)===Math.ceil(l)?"int":"double";break;case"boolean":h="bool";break;case"string":h="string";break;case"object":g=Object.prototype.toString.call(l);if(g==="[object Array]"){h="Array"}else{if(g==="[object Date]"&&isFinite(+l)){h="DateTime"}else{h="object"}}break}m+="<"+h+">"+j._wrapParam(f[d])+"</"+h+">"}}else{for(var d in f){if(f.hasOwnProperty(d)){m+="<"+d+">"+j._wrapParam(f[d])+"</"+d+">"}}}}break}return m},_date2utc:function(f){var c=this,e=this._zeroPad;return f.getUTCFullYear()+"-"+e(f.getUTCMonth()+1)+"-"+e(f.getUTCDate())+"T"+e(f.getUTCHours())+":"+e(f.getUTCMinutes())+":"+e(f.getUTCSeconds())+"."+e(f.getUTCMilliseconds(),3)},_zeroPad:function(d,c){if(!c){c=2}d=((!d&&d!==0)?"":(""+d));while(d.length<c){d="0"+d}return d}}});Class("xui.DragDrop",null,{Static:{_eh:"_dd",_id:"xui.dd:proxy:",_idi:"xui.dd:td:",_type:{blank:1,move:1,shape:1,deep_copy:1,copy:1,icon:1,none:1},_Icons:{none:"0 0",move:"0 -16px",link:"0 -32px",add:"0 -48px"},_profile:{},_left:function(value){var proxySize=this.$proxySize;with(this._profile){if(magneticDistance>0&&xMagneticLines.length){var l=xMagneticLines.length;while(l--){if(Math.abs(value+proxySize-xMagneticLines[l])<=magneticDistance){return xMagneticLines[l]-proxySize}}}if(widthIncrement>1){return Math.floor((value+proxySize)/widthIncrement)*widthIncrement-proxySize}return value}},_top:function(value){var proxySize=this.$proxySize;with(this._profile){if(magneticDistance>0&&yMagneticLines.length){var l=yMagneticLines.length;while(l--){if(Math.abs(value+proxySize-yMagneticLines[l])<=magneticDistance){return yMagneticLines[l]-proxySize}}}if(heightIncrement>1){return Math.floor((value+proxySize)/heightIncrement)*heightIncrement-proxySize}return value}},_ini:function(g){var f=this,e=f._profile,c=xui.win;f._box={width:c.width()+c.scrollLeft(),height:c.height()+c.scrollTop()};e.ox=e.x;e.oy=e.y;if(f._proxy=g){f._proxystyle=g.get(0).style;f._profile.curPos=f._cssPos=f._proxy.cssPos();f._cssPos_x=e.x-f._cssPos.left;f._cssPos_y=e.y-f._cssPos.top;e.restrictedLeft=e.x-(e.maxLeftOffset||0);e.restrictedRight=e.x+(e.maxRightOffset||0);e.restrictedTop=e.y-(e.maxTopOffset||0);e.restrictedBottom=e.y+(e.maxBottomOffset||0);f._proxyLeft=f._pre.left=f._cssPos.left;f._proxyTop=f._pre.top=f._cssPos.top;if("move"!==e.dragType){f._proxy.css("zIndex",xui.Dom.TOP_ZINDEX*10);xui.setNodeData(f._proxy.get(0),"zIndexIgnore",1)}}},_reset:function(){var f=this,e=null,c=false;xui.tryF(f.$reset);f.setDropFace();f._resetProxy();f.$proxySize=50;f.$mousemove=f.$mouseup=f.$onselectstart=f.$ondragstart="*";f._cursor="";f._pre={};f._proxyLeft=f._proxyTop=f._cssPos_x=f._cssPos_y=0;f._stop=c;if(f._onDrag&&f._onDrag.tasks){f._onDrag.tasks.length=0;delete f._onDrag.tasks}if(f._onDragover&&f._onDragover.tasks){f._onDragover.tasks.length=0;delete f._onDragover.tasks}if(f._c_droppable){f._c_droppable.length=0}f._c_droppable=f._c_dropactive=f._cssPos=f._box=f._dropElement=f._source=f._proxy=f._proxystyle=f._onDrag=f._onDragover=e;f._profile={$id:xui.rand(),dragType:"shape",dragCursor:"move",targetReposition:true,dragIcon:xui.ini.img_dd,magneticDistance:0,xMagneticLines:[],yMagneticLines:[],widthIncrement:0,heightIncrement:0,dragDefer:0,horizontalOnly:c,verticalOnly:c,maxBottomOffset:e,maxLeftOffset:e,maxRightOffset:e,maxTopOffset:e,targetNode:e,targetCSS:e,dragKey:e,dragData:e,targetLeft:e,targetTop:e,targetWidth:e,targetHeight:e,targetOffsetParent:e,targetCallback:e,tagVar:e,shadowFrom:e,proxyNode:e,x:0,y:0,ox:0,oy:0,curPos:{},offset:{},isWorking:c,restrictedLeft:e,restrictedRight:e,restrictedTop:e,restrictedBottom:e,dropElement:e};f.__touchingfordd=0;return f},abort:function(){this._stop=true},_end:function(){var h=this,f=window,m=document,e=m.body,j="onmousedown",c="onmousemove",n="onmouseup",g,l;if(xui.browser.isTouch){g=(xui.browser.ie&&f.PointerEvent)?"onpointermove":(xui.browser.ie&&f.MSPointerEvent)?"onmspointermove":"ontouchmove";l=(xui.browser.ie&&f.PointerEvent)?"onpointerup":(xui.browser.ie&&f.MSPointerEvent)?"onmspointerup":"ontouchend"}if(h._proxy){h._unpack()}if(h.$onselectstart!="*"){e.onselectstart=h.$onselectstart}if(h.$ondragstart!="*"){m.ondragstart=h.$ondragstart}if(h.$mousemove!="*"){m[c]=h.$mousemove}if(h.$mouseup!="*"){m[n]=h.$mouseup}if(xui.browser.isTouch){if(h.$touchmove!="*"){m[g]=h.$touchmove}if(h.$touchend!="*"){m[l]=h.$touchend}}return h},startDrag:function(x,h,f,p,g){var A=this,j=window,o;if(A._profile.isWorking){return false}A._end()._reset();A._profile.isWorking=true;A.__touchingfordd=x.type=="xuitouchdown";f=xui.isHash(f)?f:{};x=x||j.event;if(xui.Event.getBtn(x)!=="left"){return true}A._source=f.targetNode=xui(h);A._cursor=A._source.css("cursor");if((o=f.targetNode.get(0))&&!o.id){o.id=xui.Dom._pickDomId();o=null}A._defer=f.dragDefer=xui.isNumb(f.dragDefer)?f.dragDefer:0;if(true===f.dragCursor){f.dragCursor=A._cursor}if(typeof f.dragIcon=="string"){f.dragType="icon"}var C=document,n=C.body,m=xui.Event.getPos(x),B="onmousedown",w="onmousemove",q="onmouseup",l,c;if(xui.browser.isTouch){l=(xui.browser.ie&&j.PointerEvent)?"onpointermove":(xui.browser.ie&&j.MSPointerEvent)?"onmspointermove":"ontouchmove";c=(xui.browser.ie&&j.PointerEvent)?"onpointerup":(xui.browser.ie&&j.MSPointerEvent)?"onmspointerup":"ontouchend"}f.x=m.left;f.y=m.top;f.dragKey=p||f.dragKey||null;f.dragData=g||f.dragData||null;var u=xui.Event.getSrc(x);A._start=function(F){var E=A._profile;xui.merge(E,f,"with");A._source.beforeDragbegin();if(A._stop){A._end()._reset();return false}if(xui.Event&&(o=A._source.get(0))){xui.Event._preDroppable=o.id;o=null}if(E.dragType=="icon"){E.targetReposition=false}A._ini(E.dragType=="none"?null:A._pack(m,E.targetNode));if(f.x>=A._box.width||f.y>=A._box.height){A._end()._reset();return true}A._source.onDragbegin();if(E.dragDefer<1){A.$mousemove=C[w];A.$mouseup=C[q];if(xui.browser.isTouch){A.$touchmove=C[l];A.$touchend=C[c]}}if(xui.browser.ie){xui.setTimeout(function(){if(u.releaseCapture){u.releaseCapture()}})}C[w]=A.$onDrag;C[q]=A.$onDrop;if(xui.browser.isTouch){C[l]=A.$onDrag;C[c]=A.$onDrop}A._source.afterDragbegin();if(E.dragDefer>0){A.$onDrag.call(A,F)}if(xui.browser.isTouch&&A.__touchingfordd){A._c_droppable=[];var D=xui.$cache.droppable[E.dragKey],d=[];xui.arr.each(D,function(I){if(!xui.use(I).get(0)){d.push(I);return}var H=xui.use(I),J=H.offsetHeight(),e=H.offsetWidth(),G=H.css("visibility"),K;if(e&&J&&G!="hidden"){K=H.offset();K.width=e;K.height=J;K.id=I;A._c_droppable.unshift(K)}});if(d.length){xui.arr.each(d,function(e){xui.arr.removeValue(D,e)})}}};if(xui.browser.ie){A.$ondragstart=C.ondragstart;A.$onselectstart=n.onselectstart;C.ondragstart=n.onselectstart=null;if(C.selection&&C.selection.empty){try{C.selection.empty()}catch(x){}}}xui.Event.stopBubble(x);if(f.targetNode.get(0)!==C){xui(C).onMousedown(true,xui.Event.getEventPara(x,m))}if(f.dragDefer<1){xui.tryF(A._start,[x],A);return false}else{A.$mouseup=C[q];C[q]=function(d){xui.DragDrop._end()._reset();return xui.tryF(document.onmouseup,[d],null,true)};if(xui.browser.isTouch){A.$touchend=C[c];C[c]=C[q]}var r={};A.$mousemove=C[w];C[w]=function(D){var d=xui.Event.getPos(D);if(d.left===r.left&&d.top===r.top){return}r=d;if(--A._defer<=0){xui.DragDrop._start(D)}return false};if(xui.browser.isTouch){A.$touchmove=C[l];C[l]=C[w]}}},$onDrag:function(n){var r=xui.DragDrop,c=r._profile;if(r.$SimulateMousemoveInMobileDevice){return false}n=n||window.event;if(!c.isWorking||r._stop){r.$onDrop(n);return true}var w=xui.Event.getPos(n);c.x=w.left;c.y=w.top;if(!c.isWorking){return false}if(r._proxy){if(!c.verticalOnly){r._proxyLeft=Math.floor(r._left(((c.maxLeftOffset!==null&&c.x<=c.restrictedLeft)?c.restrictedLeft:(c.maxRightOffset!==null&&c.x>=c.restrictedRight)?c.restrictedRight:c.x)-r._cssPos_x));if(r._proxyLeft-r._pre.left){r._proxystyle.left=Math.round(parseFloat(r._proxyLeft))+"px"}r._pre.left=r._proxyLeft;c.curPos.left=r._proxyLeft+r.$proxySize}if(!c.horizontalOnly){r._proxyTop=Math.floor(r._top(((c.maxTopOffset!==null&&c.y<=c.restrictedTop)?c.restrictedTop:(c.maxBottomOffset!==null&&c.y>=c.restrictedBottom)?c.restrictedBottom:c.y)-r._cssPos_y));if(r._proxyTop-r._pre.top){r._proxystyle.top=Math.round(parseFloat(r._proxyTop))+"px"}r._pre.top=r._proxyTop;c.curPos.top=r._proxyTop+r.$proxySize}}else{c.curPos.left=c.x;c.curPos.top=c.y}if(r._onDrag!=1){if(r._onDrag){r._onDrag(n,r._source._get(0))}else{r._onDrag=1;r._source.onDrag(true,xui.Event.getEventPara(n,w))}}if(xui.browser.isTouch&&r.__touchingfordd){if(r._c_droppable){for(var h=0,g=r._c_droppable.length;h<g;h++){var f=r._c_droppable[h],q=xui.use(f.id).get(0),m=r._c_dropactive,u=xui.use(m).get(0);if(c.x>=f.left&&c.y>=f.top&&c.x<=(f.left+f.width)&&c.y<=(f.top+f.height)){if(m==f.id){var j=n.changedTouches[0];r.$SimulateMousemoveInMobileDevice=1;xui.Event.simulateEvent(q,"mousemove",{screenX:j.screenX,screenY:j.screenY,clientX:j.clientX,clientY:j.clientY});delete r.$SimulateMousemoveInMobileDevice}else{xui.Event.simulateEvent(q,"mouseover",{screenX:c.left,screenY:c.top,clientX:c.left,clientY:c.top});r._c_dropactive=f.id;if(m&&u){xui.Event.simulateEvent(u,"mouseout",{screenX:c.left,screenY:c.top,clientX:c.left,clientY:c.top})}}break}else{if(m==f.id){if(u){xui.Event.simulateEvent(u,"mouseout",{screenX:c.left,screenY:c.top,clientX:c.left,clientY:c.top})}r._c_dropactive=null;break}}}}}return false},$onDrop:function(h){var j=xui.DragDrop,g=j._profile,c=xui.Event;h=h||window.event;j._end();if(g.isWorking){j.setDropFace();var f=j._source.onDragstop(true,c.getEventPara(h));if(j._dropElement){xui.use(j._dropElement).onDrop(true,c.getEventPara(h))}}j._reset();c.stopBubble(h);xui.tryF(document.onmouseup,[h]);return !!f},setDropElement:function(c){this._profile.dropElement=this._dropElement=c;return this},getProfile:function(){var e=this,c=e._profile;c.offset=e._proxy?{x:e._proxyLeft-c.ox+e._cssPos_x,y:e._proxyTop-c.oy+e._cssPos_y}:{x:c.x-c.ox,y:c.y-c.oy};return c},setDropFace:function(l,h){var m=this,g='<div style="position:absolute;z-index:'+xui.Dom.TOP_ZINDEX+";font-size:0;line-height:0;border-",e=":dashed 1px #ff6600;",j=m._Region,c=m._rh,f="backgroundColor";if(j&&j.parent()){j.remove(false)}if(m._R){m._R.css(f,m._RB);delete m._R;delete m._RB}if(l){if(!j||!j.get(0)){j=m._Region=xui.create(g+"top"+e+'left:0;top:0;width:100%;height:0;"></div>'+g+"right"+e+'right:0;top:0;height:100%;width:0;"></div>'+g+"bottom"+e+'bottom:0;left:0;width:100%;height:0;"></div>'+g+'left:solid 2px #ff6600;width:0;left:0;top:0;height:100%;"></div>');c=m._rh=xui([j.get(1),j.get(3)])}l=xui(l);if(xui.browser.ie6){c.height("100%")}if(l.css("display")=="block"){xui.setNodeData(j.get(0),"zIndexIgnore",1);l.append(j);j.top(l.scrollTop()).left(l.scrollLeft());if(xui.browser.ie6&&!c.get(0).offsetHeight){c.height(l.get(0).offsetHeight)}}else{m._RB=l.get(0).style[f];m._R=l;l.css(f,"#FA8072")}m.setDragIcon(h||"move")}else{m.setDragIcon("none")}return m},setDragIcon:function(f){xui.resetRun("setDropFace",null);var h=this,g=h._profile,e=g.proxyNode,c=h._Icons;if(e&&g.dragType=="icon"){e.first(4).css(typeof f=="object"?f:{backgroundPosition:(c[f]||f)})}return h},_setProxy:function(l,j){var e,c,h=this,f=h._profile,g=xui.Dom;if(!g.byId(h._id)){xui("body").prepend(xui.create('<div id="'+h._id+'" style="left:0;top:0;border:0;font-size:0;line-height:0;padding:'+h.$proxySize+"px;position:absolute;background:url("+xui.ini.img_bg+') repeat;"><div style="font-size:0;line-height:0;" id="'+h._idi+'">'+(xui.browser.ie6?"&nbsp;":"")+"</div></div>"))}e=xui(h._id);if(f.dragKey){h.$proxySize=0;e.css("padding",0)}else{j.left-=h.$proxySize;j.top-=h.$proxySize;if(!f.targetOffsetParent){g.setCover(true,null,false,f.dragCursor)}}if(c=f.targetOffsetParent){xui(c).append(e)}if(l){xui(h._idi).empty(false).append(l);f.proxyNode=l}else{f.proxyNode=xui(h._idi)}e.css({display:"",zIndex:g.TOP_ZINDEX*10,cursor:f.dragCursor}).offset(j,c);xui.setNodeData(e.get(0),"zIndexIgnore",1);return e},_resetProxy:function(){var m=this,h=m._profile,l=xui.Dom,g=m._id,f=m._idi;if(l.byId(g)){var e,c,j=xui(f),e=xui(g);if(xui.browser.ie6){j.html("&nbsp;")}else{j.empty()}j.attr("style","font-size:0;line-height:0;");xui("body").prepend(e.css({zIndex:0,cursor:"",display:"none",padding:Math.round(parseFloat(m.$proxySize))+"px"}));h.proxyNode=m._proxystyle=null;l.setCover(false)}},_pack:function(l,f){var g,j={},o={},h=this,c=h._profile,m;if(c.targetLeft===null||null===c.targetTop){m=f.offset(null,c.targetOffsetParent)}j.left=null!==c.targetLeft?c.targetLeft:m.left;j.top=null!==c.targetTop?c.targetTop:m.top;switch(c.dragType){case"deep_copy":case"copy":var m;o.width=xui.isNumb(c.targetWidth)?c.targetWidth:(f.cssSize().width||0);o.height=xui.isNumb(c.targetHeight)?c.targetHeight:(f.cssSize().height||0);var e=f.clone(c.dragType=="deep_copy").css({position:"relative",margin:"0",left:"0",top:"0",right:"",bottom:"",cursor:c.dragCursor,cssFloat:"none"}).cssSize(o).id("",true).css("opacity",0.8);if(c.targetCallback){c.targetCallback(e)}e.query("*").id("",true);if(c.targetCSS){e.css(c.targetCSS)}g=h._setProxy(e,j);break;case"shape":o.width=null!==c.targetWidth?c.targetWidth:f.offsetWidth();o.height=null!==c.targetHeight?c.targetHeight:f.offsetHeight();o.width-=2;o.height-=2;g=h._setProxy(xui.create("div").css({border:"dashed 1px",fontSize:"0",lineHeight:"0"}).cssSize(o),j);break;case"blank":g=h._setProxy(null,j);break;case"icon":j.left=xui.isNumb(c.targetLeft)?c.targetLeft:(l.left+16);j.top=xui.isNumb(c.targetTop)?c.targetTop:(l.top+16);m='<table border="0" class="xui-node xui-node-table"><tr><td valign="top"><span class="xui-node xui-node-span" style="background:url('+c.dragIcon+") no-repeat left top;width:"+(xui.isNumb(c.targetWidth)?c.targetWidth:16)+"px;height:"+(xui.isNumb(c.targetHeight)?c.targetHeight:16)+'px;" ></span></td><td id="xui:dd:shadow" '+(c.shadowFrom?'style="border:solid 1px #e5e5e5;background:#fff;font-size:12px;line-height:14px;"':"")+">"+(c.shadowFrom?xui(c.shadowFrom).clone(true).css({left:"auto",top:"auto",position:"relative"}).outerHTML().replace(/\s*id\=[^\s\>]*/g,""):"")+"</td></tr></table>";g=h._setProxy(xui.create(m).css("opacity",0.8),j);break;case"move":h.$proxySize=0;g=f;if(g.css("position")!="absolute"){g.css("position","absolute").offset(j)}g.css("cursor",c.dragCursor)}return g},_unpack:function(){var h=this,g=h._profile,c,e;if(g.targetReposition&&("move"!=g.dragType)){if((c=xui(h._source))){if(!c.isEmpty()){if(c.css("position")!="absolute"){c.css("position","absolute").cssPos(c.offset(null,c.get(0).offsetParent))}if(xui.browser.ie){c.cssRegion({right:"",bottom:""})}c.offset(g.curPos,g.targetOffsetParent||document.body)}}}if("move"==g.dragType){h._source.css("cursor",h._cursor)}},_unRegister:function(f,e){var h=this._eh;xui([f]).$removeEvent("beforeMouseover",h).$removeEvent("beforeMouseout",h).$removeEvent("beforeMousemove",h);var g=xui.getNodeData(f.$xid,["_dropKeys"]),j=xui.$cache.droppable;if(g){for(var d in g){if(j[d]){xui.arr.removeValue(j[d],f.$xid)}}}xui.setNodeData(f.$xid,["_dropKeys"])},_register:function(e,q){var g=this._eh;xui(e).beforeMouseover(function(o,l,h){var c=xui.DragDrop,o=c._profile;if(o.dragKey&&xui.getNodeData(h,["_dropKeys",o.dragKey])){c.setDropElement(h);c._onDragover=null;xui.use(h).onDragenter(true);if(c._dropElement){xui.resetRun("setDropFace",c.setDropFace,0,[h],c)}}},g).beforeMouseout(function(o,l,h){var c=xui.DragDrop,o=c._profile;if(o.dragKey&&xui.getNodeData(h,["_dropKeys",o.dragKey])){xui.use(h).onDragleave(true);if(c._dropElement==h){c.setDropElement(c._onDragover=null);xui.resetRun("setDropFace",c.setDropFace,0,[null],c)}}},g).beforeMousemove(function(c,w,o){var l=xui.DragDrop,r=l._onDragover,u=l._profile;if(r==1){return}if(l._dropElement==o&&u.dragKey&&xui.getNodeData(o,["_dropKeys",u.dragKey])){if(r){r(w,o)}else{l._onDragover=1;xui.use(o).onDragover(true,xui.Event.getEventPara(w))}}},g);var d=xui.getNodeData(e.$xid,["_dropKeys"]),n=xui.$cache.droppable;if(d){for(var j in d){if(n[j]){xui.arr.removeValue(n[j],e.$xid)}}}var m={},p=q.split(/[^\w-]+/);for(var j=0,f=p.length;j<f;j++){m[p[j]]=1;n[p[j]]=n[p[j]]||[];n[p[j]].push(e.$xid)}xui.setNodeData(e.$xid,["_dropKeys"],m)}},After:function(){this._reset();xui.each({startDrag:function(g,d,c,f){xui.DragDrop.startDrag(g,this.get(0),d,c||"",f||null);return this},draggable:function(d,h,g,m,l){var e=this,l=l?typeof(l)=="function"?xui.tryF(getTarget,[],this):xui(l):null,c=xui.DragDrop;if(!l||!l.get(0)){l=e}e.addClass("xui-ui-unselectable");if(d===undefined){d=true}else{if(typeof d=="object"){h=d;d=true}}var j=function(n,f,o){if(xui.getId(xui.Event.getSrc(f))!=o){return true}l.startDrag(f,h,g,m)};if(!!d){e.$addEvent("beforeMousedown",j,c._eh,-1)}else{e.$removeEvent("beforeMousedown",c._eh)}return e},droppable:function(c,e){if(c===undefined){c=true}e=e||"default";var f=xui.DragDrop;return this.each(function(d){if(!!c){f._register(d,e)}else{f._unRegister(d,e)}})}},function(d,c){xui.Dom.plugIn(c,d)})}});Class("xui.Tips",null,{Constructor:function(){return null},Initialize:function(){var d=xui.DragDrop,c=this;if(d){d.$reset=function(){c._pos={left:d._profile.x,top:d._profile.y}}}xui.CSS.addStyleSheet(".xui-tips{position:absolute;overflow:visible;visibility:hidden;left:-10000px;border-radius:1px;} .xui-tips-i{overflow:hidden;position:relative;}.xui-tips-i span{display:inline;}.xui-tips-c{padding:.125em .25em .25em .25em;}.xui-tips-c *{line-height:1.22em;}.xui-tips .xui-tips-c{border-radius:1px;}",this.KEY);xui.doc.afterMousedown(function(){c._cancel()},"$Tips",-1).afterMousemove(function(j,h){if(d.isWorking){return}var f=xui.Event,g,l;if((g=xui.resetRun.$cache)&&g["$Tips"]){c._pos=f.getPos(h)}if(c._from){c._pos=f.getPos(h);c._showF();xui.resetRun("$Tips3")}else{if(c._showed&&c.MOVABLE){g=f.getPos(h);l=c._Node.style;l.left=Math.min(c._tpl._ww-c._tpl._w,Math.max(0,Math.round((parseFloat(l.left)||0)+(g.left-c._pos.left),10)))+"px";l.top=Math.min(c._tpl._hh-c._tpl._h,Math.max(0,Math.round((parseFloat(l.top)||0)+(g.top-c._pos.top),10)))+"px";c._pos=g}}},"$Tips",-1).afterMouseover(function(p,u){var f=xui.Event,m=f.$FALSE,h=f.getSrc(u),g,r,A,o,q=0,B,w=function(e){if(c._markId){c._cancel()}return e};if(!h){return w(m)}try{while((!h.id||h.id==xui.$localeDomId)&&h.parentNode!==document&&q++<10){h=h.parentNode}if(!(g=(typeof h.id=="string"?h.id:null))){h=null;return w(m)}}catch(u){}if((r=f._getProfile(g))&&r.box&&r.KEY=="xui.UIProfile"){if(r.properties.disableTips||r.behavior.disableTips){h=null;return w(false)}var x=r.behavior.NoTips;if(x){for(var n=0,j=x.length;n<j;n++){if(g.indexOf(r.keys[x[n]])===0){return w(false)}}}x=r.behavior.PanelKeys;if(x){for(var n=0,j=x.length;n<j;n++){if(g.indexOf(r.keys[x[n]])===0){return w(false)}}}x=r.behavior.HoverEffected;A=r.onShowTips?g:g.replace(c._reg,function(l,e){return x&&(e in x)?l:":"});if(c._markId&&A==c._markId){return m}c._markId=A;c._pos=f.getPos(u);if(c._showed){c._from=r;c._enode=g;c._showF()}else{xui.resetRun("$Tips",function(){c._from=r;c._enode=g;xui.resetRun("$Tips3",function(){if(c._from){c._showF()}})},c.DELAYTIME)}}else{c._cancel()}h=null;return m},"$Tips",-1).afterMouseout(function(m,l){if(c._markId){var j=xui.Event,n,f,g=0,h=l.toElement||l.relatedTarget;if(!h){f=1}else{try{while((!h.id||h.id==xui.$localeDomId)&&h.parentNode!==document&&g++<10){h=h.parentNode}if(!(n=(typeof h.id=="string"?h.id:null))){h=null;f=1}}catch(l){f=1}}if(f){c._cancel()}return j.$FALSE}},"$Tips",-1).afterMouseup(function(g,f){c._cancel()},"$Tips",-1);this._Types={"default":new function(){this.show=function(r,n,q){if(!n){return}var u=this,g,f,x,p,l;if(!(g=u.node)||!g.get(0)){g=u.node=xui.create('<div class="xui-node xui-node-div xui-tips  xui-ui-shadow xui-custom"><div class="xui-node xui-wrapper xui-node-div xui-tips-i xui-custom"></div></div>');f=u._ruler=xui.create('<div class="xui-node xui-wrapper xui-node-div xui-tips  xui-ui-shadow xui-custom"><div class="xui-node xui-node-div xui-tips-i xui-custom"></div></div>');u.n=g.first();u._n=f.first();xui("body").append(f)}f=u._ruler;if(document.body.lastChild!=g.get(0)){xui("body").append(g,false,true)}x=typeof r=="object"?r[q||xui.Tips.TIPSKEY]:r;if(typeof x=="function"){x=x()}if(x+=""){var j=/^\s*\</.test(x);x=xui.adjustRes(x);xui.Tips._curTips=x;if(!r.transTips||!j){x='<div class="xui-ui-ctrl xui-node xui-node-div  xui-uiborder-flat xui-uicell-alt xui-node-tips xui-tips-c xui-custom">'+x+"</div>"}u._n.get(0).innerHTML=x;u._ww=xui.win.width();u._hh=xui.win.height();p=Math.min(j?u._ww:c.MAXWIDTH,f.get(0).offsetWidth+2);var e=g.get(0).style,m=u.n.get(0),o=m.style;e.visibility="hidden";m.innerHTML=x;if(xui.browser.ie){e.width=o.width=(u._w=Math.round(p+(p%2)))+"px";l=m.offsetHeight;e.height=(u._h=Math.round(l-(l%2)))+"px"}else{o.width=(u._w=Math.round(p))+"px";u._h=u.n.height()}if(n===true){e.visibility="visible"}else{g.popToTop((n["xui.UI"]||n["xui.UIProfile"]||n["xui.Dom"]||n.nodeType==1||typeof n=="string")?n:{left:n.left,top:n.top,region:{left:n.left,top:n.top-12,width:24,height:32}},1)}e=o=m=null}else{g.css("zIndex",0).hide()}};this.hide=function(){this.node.css("zIndex",0).hide()}}}},Static:{_reg:/-([\w]+):/,TIPSKEY:"tips",MAXWIDTH:600,MOVABLE:true,DELAYTIME:400,AUTOHIDETIME:5000,_showF:function(){var d=this,g=d._from,f=xui.Dom.byId(d._enode),l=d._pos,j,h,e,c=true;d._from=d._enode=null;if(!f||!g||!l||!(h=g.box)){return}c=false!==((e=g.CF)&&(e=e.showTips)&&e(g,f,l));if(c!==false){c=false!==(h._showTips&&h._showTips(g,f,l))}if(c!==false){if(((e=g)&&e.tips)||(e&&(e=e.properties)&&e.tips)){d.show(l,e);c=false}else{if((e=g)&&(e=e.properties)&&e.autoTips&&("caption" in e)&&e.tips===""){if(e.caption||e.labelCaption){d.show(l,{tips:e.caption||e.labelCaption});c=false}}}}if(c!==false){d.hide()}else{if(!d.MOVABLE){xui.resetRun("$Tips2",d.hide,d.AUTOHIDETIME,null,d)}}f=l=g=null},getTips:function(){return this._curTips},setTips:function(c){if(this._curTips&&this._tpl&&this._Node){this._tpl.show(c,true)}},setPos:function(d,c){var e=this;if((e=e._Node)&&(e=e.style)){if(d||d===0){e.left=Math.round(parseFloat(d))+"px"}if(c||c===0){e.top=Math.round(parseFloat(c))+"px"}}},show:function(g,f,e){var c=this,d;c._pos=g;if(c._item===f){return}if(typeof f=="string"||(f&&(f[e||xui.Tips.TIPSKEY]))){d=c._tpl=c._Types[f.tipsTemplate]||c._Types["default"];d.show(f,g,e);c._Node=d.node.get(0);c._item=f;c._showed=true}else{c._cancel()}},hide:function(){var c=this;if(c._showed){if(c._tpl){c._tpl.hide()}c._clear()}},_cancel:function(){var c=this;if(c._markId){if(c._showed){c.hide()}else{xui.resetRun("$Tips");xui.resetRun("$Tips3");c._clear()}}},_clear:function(){var c=this;c._Node=c._curTips=c._markId=c._from=c._tpl=c._item=c._showed=null}}});Class("xui.History",null,{Static:{_fid:"xui:history",_type:(xui.browser.ie&&(xui.browser.ver<8))?"iframe":("onhashchange" in window)?"event":"timer",_excallback:null,_callback:function(e,j,d){var g=this,c=[],h;xui.arr.each(xui.Module._cache,function(f){if(f._events&&("onFragmentChanged" in f._events)){if(xui.isFun(h=f._events.onFragmentChanged)||(xui.isArr(h)&&h[0].type)){f.fireEvent("onFragmentChanged",[e,j,d])}}});if(xui.isFun(g._excallback)){g._excallback(e,j,d)}},setCallback:function(f){var c=this,e=location.hash;if(e){e="#!"+encodeURIComponent((""+decodeURIComponent(e)).replace(/^#!/,""))}else{e="#!"}c._excallback=f;c._lastFI=decodeURIComponent(e);switch(c._type){case"event":window.onhashchange=c._checker;break;case"iframe":document.body.appendChild(document.createElement('<iframe id="'+c._fid+'" src="about:blank" style="display: none;"></iframe>'));var d=document.getElementById(c._fid).contentWindow.document;d.open("javascript:'<html></html>'");d.write('<html><head><script type="text/javascript">parent.xui.History._checker(\''+e+"');<\/script></head><body></body></html>");d.close();case"timer":if(c._itimer){clearInterval(c._itimer)}c._itimer=setInterval(c._checker,200);break}c._callback(decodeURIComponent(c._lastFI.replace(/^#!/,"")),true,f);return c},_checker:function(d){var c=xui.History;switch(c._type){case"iframe":if(xui.isSet(d)){location.hash=d}case"event":case"timer":if(decodeURIComponent(location.hash)!=decodeURIComponent(c._lastFI)){c._lastFI=decodeURIComponent(location.hash);c._callback(decodeURIComponent(location.hash.replace(/^#(!)?/,"")))}break}},getFI:function(){return this._lastFI},setFI:function(f,e){var c=this;if(f){f="#!"+encodeURIComponent((""+decodeURIComponent(f)).replace(/^#!/,""))}else{f="#!"}if(c._lastFI==decodeURIComponent(f)){return false}switch(c._type){case"iframe":var d=document.getElementById(c._fid).contentWindow.document;d.open("javascript:'<html></html>'");d.write('<html><head><script type="text/javascript">parent.xui.History._checker(\''+f+"');<\/script></head><body></body></html>");d.close();break;case"event":case"timer":location.hash=c._lastFI=decodeURIComponent(f);if(e!==false){c._callback(decodeURIComponent(f.replace(/^#!/,"")))}break}}}});Class("xui.ModuleFactory",null,{Initialize:function(){var c=this;xui.getModule=function(d,e,j,h,g,f){return c.getModule.apply(c,arguments)};xui.newModule=function(d,e,h,g,f){return c.newModule.apply(c,arguments)};xui.showModule=function(p,h,e,j,g,l,o,n,d,f,m){return c.getModule(p,function(r,q,u){if(!r&&false!==xui.tryF(h,[q,u],q)){this.show.apply(q,[e,n,d,u,f,m])}else{xui.tryF(e,[r,q,u],q)}},j,g,l,o)};xui.getCom=xui.getModule;xui.newCom=xui.newModule;xui.showCom=xui.showModule;c.setCom=c.setModule;c.getComFromCache=c.getModuleFromCache;c.getCom=c.getModule;c.newCom=c.newModule;c.storeCom=c.storeModule;c.prepareComs=c.prepareModules;xui.ComFactory=c},Static:{_pro:{},_cache:{},_domId:"xui:ModuleFactory:",getProfile:function(c){return c?this._pro[c]:this._pro},setProfile:function(c,d){if(typeof c=="string"){this._pro[c]=d}else{if(xui.isHash(c)){this._pro=c}}return this},destroyAll:function(){xui.each(this._cache,function(c){xui.tryF(c.destroy,[],c)});this._cache={}},broadcast:function(d){if(typeof d=="function"){var e,f=this._cache;for(e in f){d.call(f[e],e)}}},setModule:function(d,c){this._cache[d]=c;if(c){c.moduleRefId=d}return this},getModuleFromCache:function(c){return this._cache[c]||null},getModule:function(g,d,n,m,q,x){if(!g){var o=new Error("No id");xui.tryF(d,[o,null,n]);if(n&&xui.Thread.isAlive(n)){xui.Thread(n).abort()}throw o;return}m=m!==false;var u=this._cache,f=this._pro,l,j;if(m&&u[g]&&!u[g].destroyed){xui.tryF(d,[null,u[g],n],u[g]);return u[g]}else{if(!(l=f[g])){l={cls:g,cached:m,properties:q,events:x};j=g}else{j=l.cls||l}var w=arguments.callee,r=this,h=function(c,p,A){if(!xui.isFun(c)){throw"'"+j+"' is not a constructor"}var B=new c();if(p.properties){xui.merge(B.properties,p.properties,"all")}if(p.events){xui.merge(B.events,p.events,"all")}if(p.cached!==false){xui.ModuleFactory.setModule(g,B)}var e=[function(F,E,G){var C=E.getUIComponents().get(),D=function(H,K,I){var J=arguments.callee;xui.arr.each(H,function(M,N){if(M.children){var L=[];xui.arr.each(M.children,function(O){L[L.length]=O[0]});J(L,K)}})};D(C,p.children,1)}];e.push(A||null);if(d){xui.Thread(A).insert({task:d,args:[null,B,A],scope:B})}xui.tryF(B[p.iniMethod||"create"],e,B)};xui.Thread.observableRun(function(e){var c=function(B){var p=this||xui.SC.get(j);if(p&&p.$xui$){xui.Thread(B).insert({task:h,args:[p,l,B]})}else{var A=new Error("Cant find Class '"+j+"' in the corresponding file (maybe SyntaxError)");xui.tryF(d,[A,null,B]);if(B&&xui.Thread.isAlive(B)){xui.Thread(B).abort()}throw A}};xui.SC(j,function(A){if(A){c.call(this,e)}else{var p=new Error("No class name");xui.tryF(d,[p,null,e]);if(e&&xui.Thread.isAlive(e)){xui.Thread(e).abort()}throw p}},true,e,{retry:0,onFail:function(p){xui.tryF(d,[p,null,e])}})},null,n)}},newModule:function(c,d,g,f,e){return this.getModule(c,d,g,false,f,e)},storeModule:function(h){var d,e,g=this._cache,f=this._domId;if(e=g[h]){if(!(d=xui.Dom.byId(f))){xui("body").prepend(xui.create('<div id="'+f+'" style="display:none;"></div>'))}d=xui(f);e=e.getUIComponents();if(!e.isEmpty()){e.get(0).unlinkParent();d.append(e)}}},prepareModules:function(c){var e=this,d=[];xui.arr.each(c,function(f){d.push(function(){e.getModule(f)})});xui.Thread(null,d,500).start();return this}}});Class("xui.Debugger",null,{Static:{$time:xui.stamp(),_id1:"xui:dbg::_frm",_id4:"xui:dbg::_head",_id2:"xui:dbg::_con",_id3:"xui:dbg::_inp",err:function(c,e,d){if(xui.browser.gek&&c=="Error loading script"){return true}xui.Debugger.log(">>"+c+" at File: "+e+" ( line "+d+" ).");return true},trace:function(l){var g=xui.toArr(arguments),f=g[1]||arguments.callee.caller,c=g[2]||[];if(f){c.push('function "'+(f.$name$||"")+'" in Class "'+(f.$original$||"")+'"');if(f.caller){try{arguments.callee(null,f.caller,c,1)}catch(j){}}}if(!g[3]){var d=[];d.push(" >> Object Info:");if(typeof l=="object"){for(var h in l){d.push(" -- "+h+" : "+l[h])}}else{d.push(l)}d.push(" >> Function Trace: "+c.join(" <= "));xui.Debugger.log.apply(xui.Debugger,d)}f=null},log:function(){var t1,t2,time,self=this,arr=xui.toArr(arguments),str;if(!arr.length){return}t1=document.createElement("div");t2=document.createElement("div");t2.className="xui-uibase xui-dbg-con1";time=xui.stamp();t2.appendChild(document.createTextNode("Time stamp : "+time+"("+(time-self.$time)+")"));self.$time=time;t1.appendChild(t2);for(var i=0,l=arr.length;i<l;i++){str=arr[i];t2=document.createElement("div");t2.className="xui-uibase xui-dbg-con2";t2.appendChild(document.createTextNode(" "+xui.stringify(xui.isArguments(str)?xui.toArr(str):str)));t1.appendChild(t2)}if(!xui.Dom.byId(self._id2)){var ns=xui.create("<div id="+self._id1+' style="left:5px;top:'+(xui.win.scrollTop()+5)+'px;" class="xui-ui-reset xui-node xui-node-div xui-wrapper xui-dbg-frm xui-custom"><div class="xui-node xui-node-div xui-dbg-box xui-custom"><div id='+self._id4+' class="xui-node xui-node-div xui-uibar xui-dbg-header xui-custom">&nbsp;&nbsp;:&nbsp;)&nbsp;&nbsp;CrossUI Monitor window <span class="xui-node xui-node-span xui-dbg-cmds xui-custom"><a class="xui-node xui-node-a xui-custom" href="javascript:;" onclick="xui(\''+self._id2+'\').empty();">Clear</a><a class="xui-node xui-node-a xui-custom" href="javascript:;" onclick="xui(\''+self._id1+"').remove();\">✖</a></span></div><div id="+self._id2+' class="xui-node xui-node-div xui-uibase xui-dbg-content xui-custom"></div><div class="xui-node xui-node-div xui-uibase xui-dbg-tail xui-custom"><table class="xui-node xui-node-table xui-custom"><tr><td style="font-family:serif;">&nbsp;>>>&nbsp;</td><td style="width:100%"><input class="xui-node xui-node-input xui-custom" id='+self._id3+" /></td></tr></table></div></div></div>");xui("body").append(ns);self.$con=xui(self._id2);xui(self._id4).draggable(true,null,null,null,xui(self._id4).parent(2));if(xui.Dom.css3Support("boxShadow")){ns.css("boxShadow","2px 2px 5px #ababab")}if(xui.browser.ie6){ns.height(ns.offsetHeight());ns.width(299);xui.asyRun(function(){ns.width(300)})}var bak="",temp;xui(self._id3).onKeydown(function(p,e,s){var k=xui.Event.getKey(e).key;s=xui.use(s).get(0);if(k=="enter"){switch(s.value){case"?":case"help":self.$con.append(xui.create("<div class='xui-node xui-node-div xui-uibase xui-dbg-con3 xui-custom'><p class='xui-node xui-node-p xui-custom'><strong  class='xui-node xui-node-strong xui-custom'>vailable commands:</strong></p><ul  class='xui-node xui-node-ul xui-custom'><li  class='xui-node xui-node-li xui-custom'> -- <strong  class='xui-node xui-node-strong xui-custom'>[clr]</strong> or <strong>[clear]</strong> : clears the message</li><li  class='xui-node xui-node-li xui-custom'> -- <strong  class='xui-node xui-node-strong xui-custom'>[?]</strong> or <strong  class='xui-node xui-node-strong xui-custom'>[help]</strong> : shows this message</li><li  class='xui-node xui-node-li xui-custom'> -- <strong class='xui-node xui-node-strong xui-custom'>any other</strong>: shows its string representation</li></ul></div>"));break;case"clr":case"clear":xui(self._id2).empty();break;default:try{temp=s.value;if(/^\s*\x7b/.test(temp)){temp="("+temp+")"}self.log(eval(temp))}catch(e){self.$con.append(xui.create("<div  class='xui-node xui-node-div xui-uibase xui-dbg-con4 xui-custom'>"+String(e)+"</div>"));return}}bak=s.value;s.value=""}else{if(k=="up"||k=="down"){var a=s.value;s.value=bak||"";bak=a}}k=s=temp=bak=null})}self.$con.append(t1).scrollTop(self.$con.scrollHeight());t1=t2=null}},Initialize:function(){xui.CSS.addStyleSheet(".xui-dbg-frm{position:absolute;width:25em;z-index:2000;}.xui-dbg-header{cursor:move;height:1.5em;padding-top:.25em;position:relative;border-bottom:solid 1px #CCC;background-color:#FFAB3F;font-weight:bold;}.xui-dbg-cmds{position:absolute;right:.25em;top:.25em;}.xui-dbg-cmds a{margin:.25em;}.xui-dbg-box{position:relative;overflow:hidden;border:solid 1px #AAA;}.xui-dbg-content{position:relative;width:100%;overflow:auto;height:25em;overflow-x:hidden;}.xui-dbg-con1{background-color:#CCC;width:24.5empx;}.xui-dbg-con2{padding-left:.5em;border-bottom:dashed 1px #CCC;width:24.5em;}.xui-dbg-con3{padding-left:.5em;border-bottom:dashed 1px #CCC;background:#EEE;color:#0000ff;width:24.5em;}.xui-dbg-con4{padding-left:.5em;border-bottom:dashed 1px #CCC;background:#EEE;color:#ff0000;width:24.5em;}.xui-dbg-tail{overflow:hidden;position:relative;border-top:solid 1px #CCC;height:1.3333333333333333em;background:#fff;color:#0000ff;}.xui-dbg-tail input{width:100%;border:0;background:transparent;}",this.KEY);xui.echo=function(){if(!xui.debugMode){return false}xui.Debugger.log.apply(xui.Debugger,xui.toArr(arguments))};xui.message=function(n,p,d,g){d=d||300;if(xui.browser.ie){d=d+(d%2)}var c,m,o=arguments.callee,q=o.stack||(o.stack=[]),j=o.allmsg||(o.allmsg=[]),A=xui.win,e=A.scrollLeft()+A.width()/2-d/2,w=A.height(),x=A.scrollTop();c=q.pop();while(c&&!c.get(0)){c=q.pop()}if(!c){c='<div class="xui-ui-reset xui-node xui-node-div xui-wrapper xui-uibar xui-uiborder-outset xui-custom" style="border:solid 1px #cdcdcd;position:absolute;overflow:visible;top:-50px;"><div class="xui-node xui-node-div xui-custom" style="font-size:1.25em;overflow:hidden;font-weight:bold;padding:.25em;"></div><div class="xui-node xui-node-div xui-custom" style="font-size:1em;padding:.5em;overflow:hidden;"></div></div>';c=xui.create(c);if(c.addBorder){c.addBorder()}j.push(c);if(xui.Dom.css3Support("boxShadow")){c.css("boxShadow","2px 2px 5px #ababab")}}if(document.body.lastChild!=c.get(0)){xui("body").append(c,false,true)}c.topZindex(true);c.__hide=0;c.css({left:e+"px",width:d+"px",visibility:"visible"}).first().html(p||"").css("display",p?"":"none").next().html(n||"");if(xui.browser.ie&&xui.browser.ver<=8){c.ieRemedy()}if(o.last&&o.last.get(0)&&c!=o.last){var r=o.last;var f=r.left();if(r._thread&&r._thread.id&&r._thread.isAlive()){r._thread.abort()}r._thread=r.animate({left:[f,f+(r.width+d)/2+20]},function(){r.left(f)},function(){r.left(f+(r.width+d)/2+20)}).start();var u=r.offsetHeight();xui.filter(j,function(h){if(h.isEmpty()){return false}if(!h.__hide&&h!=c&&h!=r){if(h._thread.id&&h._thread.isAlive()){h._thread.abort()}h.topBy(u)}})}o.last=c;o.last.width=d;m=c.height();if(xui.browser.ie6){c.cssSize({height:m,width:d+2})}if(c._thread&&c._thread.id&&c._thread.isAlive()){c._thread.abort()}c._thread=c.animate({top:[x-m-20,x+20]},function(){c.top(x-m-20)},function(){c.top(x+20)},300,0,"expoOut").start();xui.asyRun(function(){if(c._thread&&c._thread.id&&c._thread.isAlive()){c._thread.abort()}c._thread=c.animate({top:[c.top(),w+20]},null,function(){q.push(c);c.hide();c.__hide=1},300,0).start()},g||5000);o=null};if(xui.isDefined(window.console)&&(typeof window.console.log=="function")){xui.log=function(){window.console.log.apply(window.console,xui.toArr(arguments))}}else{if(xui.debugMode){xui.log=xui.echo;window.onerror=this.err}}}});new function(){xui.builtinFontIcon={"xui-icon-xui":"&#xe61b;","xui-load-error":"&#xe682;","xui-icon-numbers":"&#xe681;","xui-icon-number0":"&#xe67c;","xui-icon-number1":"&#xe67d;","xui-icon-number2":"&#xe680;","xui-icon-number3":"&#xe67b;","xui-icon-number4":"&#xe64c;","xui-icon-number5":"&#xe61c;","xui-icon-number6":"&#xe67a;","xui-icon-number7":"&#xe65a;","xui-icon-number8":"&#xe67e;","xui-icon-number9":"&#xe67f;","xui-icon-placeholder":"&#xe62c;","xui-icon-empty":"&#xe62c;","xui-icon-filter":"&#xe61a;","xui-icon-search":"&#xe619;","xui-uicmd-helpinput":"&#xe671;","xui-icon-zoomin":"&#xe61d;","xui-icon-zoomout":"&#xe61e;","xui-icon-bullet":"&#xe632;","xui-icon-minus":"&#xe606;","xui-uicmd-add":"&#xe609;","xui-icon-star":"&#xe649;","xui-icon-dragmove":"&#xe64a;","xui-uicmd-check":"&#xe631;","xui-uicmd-date":"&#xe64b;","xui-icon-number":"&#xe633;","xui-uicmd-pop":"&#xe61f;","xui-icon-mouse":"&#xe64d;","xui-icon-prev":"&#xe60a;","xui-icon-question":"&#xe63d;","xui-icon-loading":"&#xe68d;","xui-icon-indent":"&#xe634;","xui-icon-outdent":"&#xe635;","xui-icon-strikethrough":"&#xe636;","xui-icon-inserthr":"&#xe637;","xui-uicmd-remove":"&#xe66d;","xui-icon-super":"&#xe638;","xui-icon-sub":"&#xe639;","xui-icon-alignjustify":"&#xe62b;","xui-icon-alignright":"&#xe646;","xui-uicmd-arrowdrop":"&#xe623;","xui-icon-upload":"&#xe624;","xui-icon-formatbrush":"&#xe63a;","xui-refresh":"&#xe625;","xui-icon-undo":"&#xe660;","xui-uicmd-refresh":"&#xe621;","xui-icon-date":"&#xe626;","xui-icon-trash":"&#xe60c;","xui-icon-alignleft":"&#xe647;","xui-icon-singleright":"&#xe672;","xui-icon-singleleft":"&#xe673;","xui-icon-singledown":"&#xe82e","xui-icon-singleup":"&#xe82f","xui-uicmd-max":"&#xe60d;","xui-icon-last":"&#xe60f;","xui-icon-error":"&#xe674;","xui-icon-remove":"&#xe627;","xui-uicmd-pin":"&#xe628;","xui-icon-link":"&#xe63b;","xui-icon-forecolor":"&#xe63c;","xui-uicmd-time":"&#xe64f;","xui-icon-aligncenter":"&#xe666;","xui-uicmd-check-checked":"&#xe608;","xui-uicmd-cmdbox":"&#xe64e;","xui-uicmd-toggle":"&#xe601;","xui-uicmd-getter":"&#xe657;","xui-uicmd-save":"&#xe629;","xui-icon-dragcopy":"&#xe612;","xui-icon-dropdown":"&#xe679;","xui-uicmd-popbox":"&#xe668;","xui-uicmd-close":"&#xe62a;","xui-uicmd-datetime":"&#xe66c;","xui-icon-arrowright":"&#xe652;","xui-icon-font":"&#xe63e;","xui-icon-bgcolor":"&#xe63f;","xui-icon-mobile":"&#xe600;","xui-icon-clock":"&#xe602;","xui-icon-circledown":"&#xe603;","xui-icon-circleleft":"&#xe607;","xui-icon-circleright":"&#xe658;","xui-icon-circleup":"&#xe659;","xui-uicmd-opt":"&#xe610;","xui-icon-italic":"&#xe640;","xui-icon-redo":"&#xe661;","xui-icon-bold":"&#xe641;","xui-icon-bigup":"&#xe650;","xui-icon-doubledown":"&#xe65c;","xui-icon-doubleleft":"&#xe65d;","xui-icon-doubleright":"&#xe65e;","xui-icon-doubleup":"&#xe65f;","xui-uicmd-color":"&#xe62e;","xui-icon-breaklink":"&#xe642;","xui-icon-picture":"&#xe643;","xui-icon-back":"&#xe62d;","xui-icon-dragadd":"&#xe614;","xui-icon-formatclear":"&#xe644;","xui-uicmd-select":"&#xe66e;","xui-uicmd-file":"&#xe66b;","xui-icon-triangle-up":"&#xe676;","xui-icon-dragstop":"&#xe651;","xui-uicmd-dotted":"&#xe62f;","xui-icon-dialog":"&#xe82c;","xui-icon-print":"&#xe613;","xui-icon-right":"&#xe616;","xui-icon-file":"&#xe617;","xui-uicmd-info":"&#xe618;","xui-icon-smill":"&#xe65b;","xui-icon-sort":"&#xe620;","xui-icon-arrowtop":"&#xe654;","xui-icon-file-fold":"&#xe622;","xui-icon-circle":"&#xe656;","xui-icon-underline":"&#xe645;","xui-uicmd-radio":"&#xe604;","xui-uicmd-radio-checked":"&#xe605;","xui-uicmd-restore":"&#xe630;","xui-uicmd-toggle-checked":"&#xe662;","xui-icon-smallup":"&#xe663;","xui-icon-smalldown":"&#xe664;","xui-icon-html":"&#xe665;","xui-icon-code":"&#xe648;","xui-uicmd-min":"&#xe667;","xui-uicmd-location":"&#xe66f;","xui-icon-file-expand":"&#xe669;","xui-uicmd-delete":"&#xe670;","xui-uicmd-land":"&#xe615;","xui-icon-arrowbottom":"&#xe655;","xui-icon-arrowleft":"&#xe653;","xui-icon-next":"&#xe60b;","xui-icon-first":"&#xe66a;","xui-icon-triangle-left":"&#xe675;","xui-icon-triangle-down":"&#xe677;","xui-icon-triangle-right":"&#xe678;","xui-icon-sort-checked":"&#xe6bb;","xui-icon-transparent":"&#xe60e;","xui-icon-menu":"&#xe611;","xui-icon-menu-checked":"&#xe82d;"};if(xui.browser.ie678){xui.__iefix2=xui.builtinFontIcon}};Class("xui.UIProfile","xui.Profile",{Instance:{renderId:null,_render:function(){var j=this,h=j.boxing(),n,c=xui.$cache.profileMap;if(j.beforeRender&&false===h.beforeRender(j)){return}if(!j.renderId){var o=xui.Dom.byId(j.$domId);if(!o){return}if(j.domId!=j.$domId){o.id=j.domId}c[j.domId]=c[j.$domId]=j;if(!o.$xid){xui.UI.$addEventsHanlder(j,o,true)}if(j._elset){for(var f=1,e=j._elset.length;f<e;f++){xui.UI.$addEventsHanlder(j,j._elset[f].node,true)}}if(xui.browser.ie&&xui.browser.ver<10&&"selectable" in j.properties){xui.setNodeData(o,"_onxuisel",j.properties.selectable?"true":"false")}j.rendered=j.renderId=o.$xid;o=null}if(j.CA&&!xui.isEmpty(j.CA)){h.setCustomAttr(j.CA)}if(j.CS&&!xui.isEmpty(j.CS)){h.setCustomStyle(j.CS)}if(xui.browser.isTouch){if((n=j.box.$Behaviors.DroppableKeys)&&n.length){xui.arr.each(n,function(l){h.getSubNode(l,true).each(function(w){var u=j.box.getDropKeys(j,w.$xid);if(u){var x=xui.$cache.droppable,q=u.split(/[^\w-]+/);for(var r=0,p=q.length;r<p;r++){x[q[r]]=x[q[r]]||[];x[q[r]].push(w.$xid)}}})})}}if(xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){var d={auto:1,scroll:1};xui.each(j.box.$Appearances,function(p,l){if(d[p.overflow]){j.getSubNode(l,true).$touchscroll("xy")}else{if(d[p["overflow-x"]]){j.getSubNode(l,true).$touchscroll("x")}else{if(d[p["overflow-y"]]){j.getSubNode(l,true).$touchscroll("y")}}}});if(d[j.properties.overflow]){h.setOverflow(j.properties.overflow,true)}}if(n=j.RenderTrigger){for(var f=0,e=n.length;f<e;f++){n[f].call(j)}delete j.RenderTrigger}if(j.onRender){h.onRender(j)}xui.tryF(j.$onrender,[],j);if(arguments[0]===true&&(n=j.LayoutTrigger)){for(var f=0,e=n.length;f<e;f++){n[f].call(j)}if(j.onLayout){h.onLayout(j)}}if(!j.properties.lazyAppend){if(j.children){for(var f=0,m;m=j.children[f++];){if(m[0]._render){m[0]._render(true)}}}if(j.$attached){for(var f=0,m;m=j.$attached[f++];){if(m._render){m._render(true)}}delete j.$attached}if(j.exchildren){var g=[];for(var f=0,m;m=j.exchildren[f++];){h.append(m[0],m[1])}delete j.exchildren}if(j.exmodules){var g=[];for(var f=0,m;m=j.exmodules[f++];){m[0].show(null,h,m[1],false)}delete j.exmodules}}j.renderCompleted=1},__gc:function(){var e=this,d;if(e.destroyed){return}if(e.$beforeDestroy){xui.each(e.$beforeDestroy,function(g){xui.tryF(g,[],e)});xui.breakO(e.$beforeDestroy,2)}xui.tryF(e.$ondestory,[],e);if(e.onDestroy){e.boxing().onDestroy()}if(e.destroyTrigger){e.destroyTrigger()}if(!e.serialId){return}if(d=e._$composed){xui.each(d,function(g){g.__gc()})}e.clearCache();if(!e.$noReclaim){d=xui.$cache.reclaimId;(d[e.key]||(d[e.key]=[])).push(e.serialId)}else{delete e.$noReclaim}delete xui.$cache.profileMap[e.domId];delete xui.$cache.profileMap[e.$domId];if(e.box){delete e.box._namePool[e.alias]}var f;if(e.alias&&e.host&&(f=e.host[e.alias])&&(f=f._nodes)&&(f.length===0||f.length===1&&f[0]==e)){delete e.host[e.alias]}e.unLinkAll();if(e.LayoutTrigger){e.LayoutTrigger.length=0}if(e.RenderTrigger){e.RenderTrigger.length=0}if((d=e.children).length){d=xui.copy(d);for(var c=0;c<d.length;c++){d[c][0].__gc();d[c].length=0}d.length=0}e.destroyed=true;if(e.$afterDestroy){xui.each(e.$afterDestroy,function(g){xui.tryF(g,[],e)});xui.breakO(e.$afterDestroy,2)}if(e.afterDestroy){e.boxing().afterDestroy(e)}xui.breakO([e.properties,e.events,e.CF,e.CB,e.CC,e.CA,e.CS,e],2);e.destroyed=true},linkParent:function(d,f,c){var e=this;e.unlinkParent();if(!e.destroyed){e.parent=d;e.childrenId=f;e.link(d.children,"$parent",[e,f],c)}return e},unlinkParent:function(){var c=this;delete c.parent;delete c.childrenId;c.unLink("$parent");return c},getRootNode:function(){return xui.getNodeData(this.renderId,"element")},getRoot:function(){var c=this;return c.renderId?(c["*"]||(c["*"]=xui([c.renderId],false))):xui([],false)},getContainer:function(c){if(c!==true&&(c=typeof c=="string"?c:null)){c=this.getSubIdByItemId(c)}return this.box._CONTAINERKEY?this.getSubNodes(this.box._CONTAINERKEY,c):this.keys.PANEL?this.getSubNodes(this.keys.PANEL,c):this.getRoot()},getEmSize:function(f){var e=this,c=e.getRoot(),d=c.get(0);return(!f&&e._nodeEmSize)||(d?(e._nodeEmSize=c._getEmSize()):xui.CSS._getDftEmSize())},adjustSize:function(d,e){var h=this,c=h.getRootNode();if(c&&(d||(c=c.style))){var g=function(){xui.UI.$tryResize(h,d?h.properties.width:c.width,d?h.properties.height:c.height,true)};if(e){xui.asyRun(g)}g()}},$px:function(f,e,c){var d=this;return xui.CSS.$px(f,e||function(){return d.getEmSize()},c)},$em:function(f,e,c){var d=this;return xui.CSS.$em(f,e||function(){return d.getEmSize()},c)},$px2em:function(f,e,c){var d=this;return xui.CSS.$px2em(f,e||function(){return d.getEmSize()},c)},$em2px:function(f,e,c){var d=this;return xui.CSS.$em2px(f,e||function(){return d.getEmSize()},c)},$forceu:function(g,c,f,d){var e=this;return xui.CSS.$forceu(g,c,f||function(){return e.getEmSize()},d)},$addpx:function(d,c,f){var e=this;return xui.CSS.$addpx(d,c,f||function(){return e.getEmSize()})},$isEm:function(c){return xui.CSS.$isEm(c)},$isPx:function(c){return xui.CSS.$isPx(c)},$picku:function(c){return xui.CSS.$picku(c)},$addu:function(c){return xui.CSS.$addu(c)},_cacheR1:/^\w[\w_-]*$/,setDomId:function(f){var d=this,e=xui.$cache.profileMap;if(typeof f=="string"&&(d._cacheR1.test(f)||f==d.$domId)&&!xui.Dom.byId(f)){if(d.domId!=d.$domId){delete e[d.domId]}d.domId=f;if(d.renderId){d.getRootNode().id=f}if(e[d.$domId]){e[f]=d}}return d},getDomId:function(){return this.domId},clearCache:function(){var e=this,d=e.$_egetter;for(var c in d){d[c].length=0;delete d[c]}d=e.$_domid;for(var c in d){d[c].__gc();delete d[c]}delete e["*"];return e},_getEV:function(n,e,d){var r=this,o=e+"+"+d,m=r.$_egetter||(r.$_egetter={}),c;if(m[o]){Array.prototype.push.apply(n,m[o]);return}else{c=m[o]=[]}var h=xui.$cache.profileMap,q,p;if((q=h[e])&&(q=q.events)&&(q=q[d])){for(var j=0,f=q.length;j<f;j++){if(typeof q[q[j]]=="function"){c.push(n[n.length]=q[q[j]])}}}p=e.split(":")[0].split("-")[1];if(typeof(((q=r._CB)&&(p?(q=q[p]):1))&&(q=q[d]))=="function"){c.push(n[n.length]=q)}else{if(typeof(((q=r.CB)&&(p?(q=q[p]):1))&&(q=q[d]))=="function"){c.push(n[n.length]=q)}else{if(typeof(((q=r.behavior)&&(p?(q=q[p]):1))&&(q=q[d]))=="function"){c.push(n[n.length]=q)}}}},_cacheR2:/<!--\x03([^>^\s]*)\x04-->/g,toHtml:function(f){var E=this,d=E.properties,A=E.box,r={},B,x="xui.UIProfile",w="xui.Module",e,q,n,g,j,D,C,p;if(E.destroyed){return""}if(A["xui.svg"]){A._RenderSVG(E);return""}else{p=A._prepareData(E);if(A._dynamicTemplate){A._dynamicTemplate(E)}B=A._build(E,p);if((!d.lazyAppend||f)&&(j=E.children)){for(q=0,n=j.length;q<n;q++){g=j[q];if(g&&g[0]){if(g[0][w]){var u=new xui.UI.MoudluePlaceHolder({host:g[0].host,alias:g[0].alias});u.get(0)._module=g[0];g[0]=u.get(0)}if(g[0][x]){e=g[1]||"";D=r[e]||(r[e]=[]);D[D.length]=g[0].toHtml(f)}}}}return B.replace(E._cacheR2,function(h,c){return r[c]?r[c].join(""):""})}},_buildItems:function(e,d,h){var f=this,g=f.box,j=g._rpt(f,xui.UI.$doTemplate(f,xui.get(xui.$cache.template,[g.KEY,f._hash]),d,e)),c=xui.UI.$toDom(f,j.replace(f._cacheR2,""),h);if(f.CA&&!xui.isEmpty(f.CA)){f.boxing().setCustomAttr(f.CA,undefined,c)}if(f.CS&&!xui.isEmpty(f.CS)){f.boxing().setCustomStyle(f.CS,undefined,c)}return c},serialize:function(w,B,h){var x,l,q={},A=this,g=(x=A.box._beforeSerialized)?x(A):A,d={alias:g.alias,key:g.key,host:g.host},j=g.moduleClass+"["+g.moduleXid+"]";if(d.host===A){delete d.host}else{if(g.host&&!B){if(w!==false){d.host="@this"}else{delete d.host}}}if(typeof g.theme=="string"){d.theme=g.theme}if(g.$domId!=g.domId){d.domId=g.domId}var u={},f=g.box.$DataStruct,e=xui.absObj.$specialChars;xui.merge(u,g.properties,function(m,c){return(c in f)&&f[c]!==m&&!e[c.charAt(0)]});if(!xui.isEmpty(u)){d.properties=u}if(!xui.isEmpty(x=this.getEvents())){d.events=x}var n=g.box.$EventHandlers;xui.filter(d.events,function(m,c){return m!=n[c]});if(xui.isEmpty(d.events)){delete d.events}if(!xui.isEmpty(g.CB)){d.CB=xui.copy(g.CB)}if(!xui.isEmpty(g.CC)){d.CC=xui.copy(g.CC)}if(!xui.isEmpty(g.CF)){d.CF=xui.copy(g.CF)}if(!xui.isEmpty(g.CS)){d.CS=xui.clone(g.CS,function(m,c){return !((c+"").charAt(0)=="$"&&!m)})}if(!xui.isEmpty(g.CA)){d.CA=xui.copy(g.CA)}if(typeof g.theme=="string"){d.theme=g.theme}if(false!==h&&g.children&&g.children.length){if(g.box.KEY!="xui.UI.SVGPaper"){xui.arr.stableSort(g.children,function(c,m){c=(c[0].properties.tabindex||0);m=(m[0].properties.tabindex||0);return c>m?1:c==m?0:-1})}x=d.children=[];xui.arr.each(g.children,function(m,c,p,o){c=m[0];if(c.moduleClass&&c.moduleXid&&(p=xui.SC.get(c.moduleClass))&&(p=p.getInstance(c.moduleXid))&&p["xui.Module"]){o=c.moduleClass+"["+c.moduleXid+"]";if(o!==j){if(q[o]){return}else{q[o]=1;c=p}}}l=[c.serialize(false,B)];if(m[1]){l[1]=m[1]}x[x.length]=l})}if(false!==h&&g.exchildren&&g.exchildren.length){d.exchildren=g.exchildren}q=null;return w===false?d:xui.serialize(d)},_applySetAction:function(d,g,h,f,c,e){if(this.renderId){return d.call(this,g,h,f,c,e)}},getKey:function(e,d){var c;if(e.charAt(0)=="!"){e=xui.use(e).id()}if(e.indexOf(":")==-1){e=(c=xui.$cache.profileMap[e])&&(c.$domId)}if(e){e=e.split(":")[0];if(d){e=e.split("-")[1]||"KEY"}}return e||""},getSubId:function(d){var c;if(d.charAt(0)=="!"){d=xui.use(d).id()}if(d.indexOf(":")==-1){d=(c=xui.$cache.profileMap[d])&&(c.$domId)}return d?d.split(":")[2]:""},pickSubId:function(d){var c=this,e,f=c.cache_subid||(c.cache_subid={});if((f[d]||(f[d]=[]))[0]){return f[d].shift()}f=c.subId||(c.subId={});e=(f[d]||(f[d]=new xui.id)).next();return e},reclaimSubId:function(e,c){var d=this.cache_subid||(this.cache_subid={});(d[c]||(d[c]=[])).push(e)},_cacheR3:/\./g,_cacheH1:{},getClass:function(e,c){e=this.keys[e]||e;var d=this,f=e+":"+(c||"");return d._cacheH1[f]||(d._cacheH1[f]=e.replace(d._cacheR3,"-").toLowerCase().replace("xui-ui","xui")+(c||""))},_getSubNodeId:function(f,e,d){var c=this.$domId.split(":");c[0]=f;c[2]=xui.isSet(e)?(e+""):"";if(d){c[2]+="_"+d}f=c.join(":");return f==this.$domId?xui.$cache.profileMap[f].domId:f},getSubNode:function(e,d,c){var g=this;if(!g.renderId){return xui()}var e=g.keys[e]||e,j,f=g.$_domid||(g.$_domid={});if(d===true){if(e==g.keys.KEY){j=xui([g.renderId])}if(!j||!j.get(0)){j=xui([g.renderId]).query("*","id",new RegExp("^"+e+":"+g.serialId+(c?("_"+c):"")))}}else{if(!xui.isSet(d)&&f[e]&&f[e]._nodes.length==1){return f[e]}j=xui(g._getSubNodeId(e,d,c));if(j._nodes.length==1&&!xui.isSet(d)){f[e]=j}}return j},getSubNodes:function(g,c,r){if(!xui.isDefined(c)){c=true}var l=this,m=[],q=typeof g=="string",n=typeof c=="string",m,d,p,h=Array.prototype.push;if(c===true||xui.isNull(c)){if(!q){m=[];for(var f=0;d=g[f++];){m.push(l.keys[d]||d)}g="("+m.join("|")+")"}h.apply(m,l.getSubNode(g,true,r).get())}else{if(q){if(n){h.apply(m,l.getSubNode(g,c,r).get())}else{for(var e=0;p=c[e++];){h.apply(m,l.getSubNode(g,p,r).get())}}}else{for(var f=0;d=g[f++];){if(n){h.apply(m,l.getSubNode(d,c,r).get())}else{for(var e=0;p=c[e++];){h.apply(m,l.getSubNode(d,p,r).get())}}}}}return xui(m)},getSubNodeByItemId:function(d,e,c){return(e=this.getSubIdByItemId(e))?this.getSubNode(d,e,c):xui()},getItemByItemId:function(e){var d=this,c;if(xui.isNumb(e)){e=xui.get(d.properties.items,[e,"id"])}if((c=d.ItemIdMapSubSerialId)&&(c=c[e])){return d.SubSerialIdMapItem[c]}c=d.queryItems(d.properties.items,function(g,f){return g.id==e},1,1);return c&&c[0]},getSubIdByItemId:function(e){var d=this,c;if(xui.isNumb(e)){e=xui.get(d.properties.items,[e,"id"])}return(c=this.ItemIdMapSubSerialId)&&c[e]},getItemByDom:function(c){return this.SubSerialIdMapItem&&this.SubSerialIdMapItem[this.getSubId(typeof c=="string"?c.charAt(0)=="!"?((c=xui.use(c).get(0))&&c.id):c:c.id)]},getItemIdByDom:function(d){var c;return(c=this.getItemByDom(d))&&c.id},queryItems:function(g,e,d,m,c){var j=[],h=arguments.callee,l=h.f||(h.f=function(p,o,n,u,f,q){xui.arr.each(p,function(w,r){if(o===true||o.call(null,w,r,p)){q.push(f?[w,r,p]:w);if(u){return false}}if(n&&w.sub&&w.sub.length){l(w.sub,o,n,u,f,q)}})});l(g,e,d,m,c,j);return j}},Static:{getFromDom:function(c){if((c=(c&&c.KEY=="xui.Dom")?c.get(0).id:typeof c=="string"?c.charAt(0)=="!"?((c=xui.use(c).get(0))&&c.id):c:(c&&c.id))&&(c=xui.Event._getProfile(c))&&c["xui.UIProfile"]){return c}}}});Class("xui.UI","xui.absObj",{Before:function(d,c,e){xui.absBox.$type[d.replace("xui.UI.","").replace("xui.","")]=xui.absBox.$type[d]=d;return true},After:function(){var C=this,o=arguments.callee,A,B,f,x,n,h,g,l,q,r,p,m;xui.absObj.After.apply(this,arguments);if(C.Behaviors&&C.Behaviors.PanelKeys&&C.$DataModel&&C.$DataModel.dataField){delete C.$DataModel.dataField;delete C.$DataStruct.dataField;delete C.prototype.setDataField;delete C.prototype.getDataField}C._ctrlId=new xui.id();C._idCache=[];C.$cssKeys={};B=C.$Keys;B.KEY=B.$key=C.KEY;C.addTemplateKeys(xui.toArr(B,true));r="$Behaviors";f={};if((B=C.$parent)&&(l=B.length)){while(l--){p=B[l][r];for(h in p){if(typeof p[h]=="object"){if(xui.isArr(p[h])){x=f[h]||(f[h]=[]);x.push.apply(x,p[h])}else{x=f[h]||(f[h]={});xui.merge(x,p[h])}}else{f[h]=p[h]}}}}C[r]=f;r="$Templates";f={};if((B=C.$parent)&&(l=B[0])){for(h in l[r]){if(h.charAt(0)!="$"){f[h]=l[r][h]}}}C[r]=xui.clone(f);r="$Appearances";f={};if((B=C.$parent)&&(l=B.length)){while(l--){p=B[l];for(h in p[r]){B=p[r][h];x=f[h]||(f[h]={});xui.merge(x,B)}}}C[r]=f;C.setTemplate(C.Templates);delete C.Templates;C.setBehavior(C.Behaviors||{});delete C.Behaviors;C.setAppearance(C.Appearances);delete C.Appearances;if(B=C.PublicAppearance){xui.UI.$cache_css+=C.buildCSSText(B);delete C.PublicAppearance}},Instance:{hoverPop:function(f,j,h,m,l,g){var e=this.get(0),c=e.boxing();if(!e.box.$EventHandlers.beforeHoverEffect){c.getRoot().hoverPop(f,j,h,m,l,g);return this}f=xui(f);if(!xui.isDefined(j)){j="outer"}var d=g||(c.getRoot().xid()+":"+f.xid());c.each(function(n){n.$beforeHover=j===null?null:function(p,o,q,r,w){if(q.$force){return}if(w=="mouseover"){xui.resetRun(d,null);var u=xui.getData([d,"$ui.hover.pop"])&&xui.getNodeData(f.get(0)||"empty","$ui.hover.parent")==r;if(!u){xui.setData([d,"$ui.hover.pop"],o);xui.setNodeData(f.get(0)||"empty","$ui.hover.parent",r);if(!h||false!==h(p,f,q,r,o)){f.popToTop(r,j,l);f.onMouseover(function(){xui(r).onMouseover(true)},"hoverPop").onMouseout(function(){xui(r).onMouseout(true)},"hoverPop")}}}else{xui.resetRun(d,function(){xui.setData([d,"$ui.hover.pop"]);xui.setNodeData(f.get(0)||"empty","$ui.hover.parent",0);if(!m||false!==m(p,f,q,r,"host",o)){f.hide();f.onMouseover(null,"hoverPop").onMouseout(null,"hoverPop")}})}}});if(f){f.onMouseover(j===null?null:function(n){if(n.$force){return}xui.resetRun(d,null)},d).onMouseout(j===null?null:function(n,o,p){if(o.$force){return}xui.resetRun(d,function(){xui.setData([d,"$ui.hover.pop"]);xui.setNodeData(f.get(0)||"empty","$ui.hover.parent",0);var q=xui.getData([d,"$ui.hover.pop"]);if(!m||false!==m(n,f,o,p,"pop",q)){f.hide();f.onMouseover(null,"hoverPop").onMouseout(null,"hoverPop")}})},d)}f.css("display","none");return this},setTheme:function(e){if(typeof e!="string"||!e){e=null}var d,c=[];this.each(function(f){if(e!=f.theme){if(e===null){delete f.theme}else{f.theme=e}c.push(f)}});xui.UI.pack(c,false).refresh();return this},getTheme:function(){return this.get(0)&&this.get(0).theme},getModule:function(d){var c=this.get(0);if(c){return c.getModule(d)}},destroy:function(c,e){var d=this;this.each(function(l,h){if(l.destroyed){return}if(l.beforeDestroy&&false===l.boxing().beforeDestroy()){return}var j=l.properties,g=c?null:xui.Dom._getEffects(j.hideEffects,0),f=function(){if(l.$beforeDestroy){xui.each(l.$beforeDestroy,function(m){xui.tryF(m,[],l)});xui.breakO(l.$beforeDestroy,2)}if(l.$afterDestroy){xui.each(l.$afterDestroy,function(m){xui.tryF(m,[],l)});xui.breakO(l.$afterDestroy,2)}if(l.renderId){l.getRoot().remove(true,e)}else{l.__gc()}xui.arr.removeFrom(d._nodes,h)};if(g){xui.Dom._vAnimate(l.getRoot(),false,f)}else{f()}},null,true)},isDestroyed:function(){return !!(this.get(0)?this.get(0).destroyed:1)},_toDomElems:function(){var c=[];xui.arr.each(this._nodes,function(d){if(!d.renderId){c.push(d)}});if(c.length){xui.UI.pack(c,false).render()}c.length=0;xui.arr.each(this._nodes,function(d){c.push(d.renderId)});return c},_ini:function(l,f,r,D,d,m,n,j,o){var x=this,C=x.constructor,g,q="default",h,e=C._namePool,G=xui.UI.__resetDftProp,F=C.__resetDftProp,E=C.$adjustProp,w=C.$DataStruct,u,B;if(l&&l["xui.Profile"]){g=l;u=g.alias||C.pickAlias();xui.UIProfile.apply(g,[r,x.$key,u,C,null,f])}else{if(l&&l.key&&xui.absBox.$type[l.key]){h=l;l=null;u=h.alias;u=(u&&!e[u])?u:C.pickAlias()}else{u=C.pickAlias()}g=new xui.UIProfile(r,x.$key,u,C,l,f,h)}e[u]=1;for(var A in w){if(!(A in g.properties)){B=F&&(A in F)?F[A]:G&&(A in G)?G[A]:w[A];g.properties[A]=typeof B=="object"?xui.clone(B,true):B}}if(typeof(E)=="function"){E(g)}g.keys=C.$Keys;g.CS=d?xui.copy(d):(g.CS||{});g.CB=n?xui.copy(n):(g.CB||{});g.CC=m?xui.copy(m):(g.CC||{});g.CF=j?xui.copy(j):(g.CF||{});g.CA=o?xui.copy(o):(g.CA||{});if(typeof D=="string"){g.theme=D}g.template=C.getTemplate();g.behavior=C.$Behaviors;if(!g.serialId){g.serialId=C._pickSerialId()}g.$domId=g.key+":"+g.serialId+":";g.domId=g.domId||g.$domId;g.RenderTrigger=xui.copy(C.$RenderTrigger);g.LayoutTrigger=xui.copy(C.$LayoutTrigger);g.link(xui.UI._cache,"UI").link(C._cache,"self").link(xui._pool,"xui");B=g.children;g.children=[];if(B&&B.length){for(var A=0,p;p=B[A++];){if(!p[0]["xui.UIProfile"]){p[0]=xui.create(p[0]).get(0)}if(p[0]["xui.UIProfile"]){p[0].linkParent(g,p[1])}else{if(p[0]["xui.Module"]){p[0].getUIComponents().each(function(c){c.linkParent(g,p[1])})}}}}x._nodes.push(g);g.Instace=x;x.n0=g;return x},busy:function(f,e,d,c){e=typeof e=="string"?e:"Loading...";if(f===true){xui.Dom.busy()}return this.each(function(g){xui.resetRun(g.$xid+":busy",function(m,l,j){if(!m.box){return}var o=m.keys,n;l=o[l]||o.BORDER||o.PANEL||o.KEY;var h=m.getSubNode(l,j);if(h.isEmpty()){return}if(!m.$busy||m.$busy.isEmpty()){n=m.$busy=xui.create('<button class="xui-node xui-node-div xuicon xui-icon-loading xui-cover xui-custom" style="position:absolute;text-align:center;left:0;top:0;z-index:10;border:0;padding:0;margin:0;padding-top:2em;width:100%;height:100%;"><div class="xui-node xui-node-div xui-coverlabel xui-custom"></div></button>')}n=m.$busy;n.first().html(e,false);h.append(n)},50,[g,d,c])})},free:function(){xui.Dom.free();return this.each(function(c){xui.resetRun(c.$xid+":busy");if(c.$busy){c.$busy.remove();delete c.$busy}})},adjustSize:function(c){return this.each(function(d){d.adjustSize(c)})},reLayout:function(c){return this.each(function(e){if(!e.renderId){return}delete e._nodeEmSize;var d=e.properties;if((!e.$noB)&&d.border&&e.boxing()._border){e.boxing()._border(null,false)}e.$forceRelayout=1;if(d.position=="absolute"&&d.dock&&d.dock!="none"){e.boxing().adjustDock(c)}else{if(c){e._resize_h=e._resize_w=-1}xui.UI.$tryResize(e,d.width,d.height,c)}delete e.$forceRelayout})},toHtml:function(d){var c=[];xui.arr.each(this._nodes,function(e){c[c.length]=e.toHtml(d)});return c.join("")},render:function(d){var j=this,h=[],g,f,c,e=j._nodes,p,m=[],q=xui.Dom.byId;xui.UI.$applyCSS();for(g=0;c=e[g++];){if(!c.renderId&&!xui.Dom.byId(c.domId)&&!xui.Dom.byId(c.$domId)){h[h.length]=c}}if(f=h.length){for(g=0;g<f;g++){if(c=h[g].toHtml()){m[m.length]=c}}if(m.length){xui.UI.$toDom(j.get(0),m.join(""))}}for(g=0;c=e[g++];){c._render(d)}m.length=h.length=0;return j},renderOnto:function(g,f){g=xui(g);if(g.isEmpty()){return this}var c=this,h=c.get(0),e=arguments.callee,d=e.paras||(e.paras=function(m){var l=m.cssRegion();l.tabindex=m.attr("tabIndex");if(l.tabindex<=0){delete l.tabindex}l.zIndex=m.css("zIndex");l.position=m.css("position");return l}),j=g.id();xui.merge(h.properties,d(g),"all");h.properties.dock="none";if(!h.alias&&j){h.alias=j}if(h.alias){c.setHost(f||window,h.alias)}c.render(true);g.replace(c.getRoot());if(j){c.setDomId(j)}return c},setDomId:function(c){this.get(0).setDomId(c);return this},hide:function(c){return this.each(function(f){if(f.renderId){var e=f.properties,d=c?null:xui.Dom._getEffects(e.hideEffects,0);f.getRoot().hide(function(){e.top=e.left=Math.round(parseFloat(xui.Dom.HIDE_VALUE));e.dockIgnore=true},d)}})},show:function(e,d,g,f,c){return this.each(function(u){var q=u.properties,m=u.boxing(),j,l=u.getRoot(),h=function(){if(u&&!u.destroyed&&q.activeAnim){xui.asyRun(function(){if(u&&!u.destroyed){u.boxing().setActiveAnim(q.activeAnim,true)}})}};g=(g||g===0)?(g||0):null;f=(f||f===0)?(f||0):null;if(g!==null){q.left=g}if(f!==null){q.top=f}if(xui.getNodeData(u.renderId,"_xuihide")){j=1;q.dockIgnore=false;l.show(g&&u.$forceu(g),f&&u.$forceu(f),h,c);if(q.position=="absolute"&&q.dock&&q.dock!="none"){xui.UI.$dock(u,false,true)}}else{e=e||u.parent;if(!e&&(!u.renderId||(u.getRootNode().id||"").indexOf(xui.Dom._emptyDivId)===0)){e=xui("body")}}var r=e,w;if(r){if(r["xui.UIProfile"]){w=r.renderId;r=r.boxing()}else{if(r["xui.UI"]){w=(w=r.get(0))&&w.renderId}else{w=(r=xui(r))&&r._nodes[0]}}if(w){r.append(m,d);if(!j){l.show(g&&u.$forceu(g),f&&u.$forceu(f),h)}}}})},clone:function(){return arguments.callee.upper.apply(this,["domId"])},refresh:function(l){var x,e,o,c,w,u,g,j,r,f,m,h,d,q,n=this;return n.each(function(E,C){if(!E.renderId){return}h=E.box;var D=E.host,B=E.alias;if(E.host&&E.host["xui.Module"]){E.host.$ignoreAutoDestroy=true}u=E.$xid;g=E.serialId;j=E.moduleClass;r=E.moduleXid;f=E.$afterRefresh;if(typeof E.boxing().getUIValue=="function"){q=E.boxing().getUIValue();if((E.boxing().getValue()+" ")==(q+" ")){q=null}}if(o=!!E.parent){c=E.parent.boxing();x=E.childrenId}else{c=E.getRoot().parent()}e=l?xui.Dom.getEmptyDiv(E.$inDesign).get(0):xui.$getGhostDiv();E.boxing().getChildren().reBoxing().each(function(G){e.appendChild(G)});e=null;d=xui.copy(E.children);E.boxing().removeChildren();w=E.serialize(false,true);m=E.$refreshTrigger;var A=xui.create("span");E.getRoot().replace(A);E.$noReclaim=1;var p=E.Instace;E.boxing().destroy(true,true);xui.merge(E,w,"all");delete E.destroyed;E.$xid=u;E.serialId=g;E.moduleClass=j;E.moduleXid=r;var F=new h(E).render();if(p){xui.merge(p,F,"all");F.get(0).Instace=p;F=p}n[C]=F.get(0);if(m){m.call(m.target,F.get(0))}if(o){c.append(F,x)}else{c.append(F)}if(D){F.setHost(D,B)}xui.arr.each(d,function(G){delete G[0].$dockParent;F.append.apply(F,G)});A.replace(F.get(0).getRoot());A.remove();A=null;if(q){F.setUIValue(q,true,null,"refresh")}if(f){F.get(0).$afterRefresh=f;f(F.get(0))}if(F.host&&F.host["xui.Module"]){delete F.host.$ignoreAutoDestroy}})},append:function(l,c,f,e){var p=this.get(0),d=p.properties;var j,m,n=arguments[4],h=arguments[5];f=!!f;if(e){if(e["xui.UI"]){e=e.get(0)}xui.arr.each(p.children,function(r,q){if(r[0]===e){j=q;return false}});if(xui.isNumb(j)){j=f?j:(j+1);m=e.getRoot();if(m.isEmpty()){m=null}}}else{j=f?0:-1}if(xui.isHash(l)||xui.isStr(l)){l=xui.create(l)}if(l["xui.UIProfile"]){l=l.boxing()}if(p.beforeAppend&&false===this.beforeAppend(p,l,c,f,e)){return}if(l["xui.Module"]){if(c!==false){var g=j;l.getUIComponents().each(function(q){q.linkParent(p,c,e?(g++):g)})}if(p.renderId){h=n?h:p.getContainer(c);if(h&&(!h.isEmpty())&&(!d.lazyAppend||h.css("display")!="none")){if(!e){h[f?"prepend":"append"](l)}else{if(m){m[f?"addPrev":"addNext"](l)}}}}else{xui.arr.insertAny(p.exmodules||(p.exmodules=[]),[l,c],j,true)}}else{if(c!==false){if(l["xui.UI"]){var g=j;l.each(function(q){q.linkParent(p,c,e?(g++):g)})}}if(p.renderId){var o;if(p.parent&&xui.get(p,["properties","dock"])!="none"&&"absolute"==xui.get(p,["properties","position"])&&!xui.get(p,["properties","dockIgnore"])&&!xui.get(p,["properties","dockFloat"])){if(l["xui.absBox"]){o=l.reBoxing().parent()}}h=n?h:p.getContainer(c);if(h&&(!h.isEmpty())&&(!d.lazyAppend||h.css("display")!="none")){if(!e){h[f?"prepend":"append"](l)}else{if(m){m[f?"addPrev":"addNext"](l)}}}if(o&&o.get(0)){o.onSize()}}else{if(!l["xui.UI"]){xui.arr.insertAny(p.exchildren||(p.exchildren=[]),[l,c],j,true)}}}if(p.afterAppend){this.afterAppend(p,l,c,f,e)}return this},getParent:function(){var c=this.get(0);if(c){return c.parent&&c.parent.boxing()}},getChildrenId:function(){var c=this.get(0);if(c){return c.childrenId}},getChildren:function(c,l){if(l===false||l=="withModule"){var d=this.get(0),e={},m=[],j,o=d.moduleClass,n=d.moduleXid,h=function(r){if(r.moduleClass&&r.moduleXid){if(r.moduleClass!==o&&r.moduleXid!==n){if(e[j=r.moduleClass+"'"+r.moduleXid+"]"]){return null}else{e[j]=1;var f=r.getModule();if(f&&f.moduleClass&&f.moduleXid){if(f.moduleClass!==o&&f.moduleXid!==n){return h(f)}else{return f}}}}}return r},g=function(f){xui.arr.each(f.children,function(p,q){q=h(p[0]);if(q){m.push(q);if(q["xui.UIProfile"]&&q.children&&q.children.length){g(q)}}})};xui.arr.each(d.children,function(f,p){if((c&&typeof(c)=="string")?f[1]===c:1){p=h(f[0]);if(p){m.push(p);if(p["xui.UIProfile"]&&p.children&&p.children.length){g(p)}}}});return m}else{var m=[],g=function(f){xui.arr.each(f.children,function(p){m.push(p[0]);if(p[0].children&&p[0].children.length){g(p[0])}})};xui.arr.each(this.get(0).children,function(f){if((c&&typeof(c)=="string")?f[1]===c:1){m.push(f[0]);if((l===true||l=="recurse")&&f[0].children&&f[0].children.length){g(f[0])}}});return xui.UI.pack(m)}},removeChildren:function(c,e,d){return this.each(function(j){var l=xui.copy(j.children),h=j.box.$DataModel.valueSeparator||";",g,f;xui.arr.each(l,function(m){g=0;if(!c||c===true){g=1}else{if(xui.isStr(c)||xui.isArr(c)){f=xui.isArr(c)?c:(c+"").split(h);g=xui.arr.indexOf(f,m[1])!=-1||xui.arr.indexOf(f,m[0])!=-1||xui.arr.indexOf(f,m[0].boxing())!=-1}else{g=m[0]==c["xui.UI"]?c.get(0):c}}if(g){if(j.beforeRemove&&false===j.boxing().beforeRemove(j,m[0],m[1],e)){return}m[0].unlinkParent();if(j.afterRemove){j.boxing().afterRemove(j,m[0],m[1],e)}if(e&&!m[0].destroyed){m[0].boxing().destroy(true,d)}}})})},draggable:function(d,g,e,c,f){return this.each(function(h){h.getSubNode(h.keys[e]||"KEY",true).beforeMousedown(d?function(n,l,m){if(xui.Event.getBtn(l)!="left"){return}if(n.properties.disabled){return}var j=j?typeof(j)=="function"?xui.tryF(getTarget,[],h):xui(j):null;if(!j||!j.get(0)){j=xui(m)}c=c||{};c.dragKey=d;c.dragData=typeof g=="function"?g():g;xui.merge(c,{dragCursor:"pointer",dragType:"icon",dragDefer:2});j.startDrag(l,c)}:null,"_d",-1).beforeDragbegin(d?function(j,l,m){xui.use(m).onMouseout(true,{$force:true}).onMouseup(true)}:null,"_d",-1);if(!d){h.clearCache()}})},setCustomFunction:function(c,d){return this.each(function(e){if(typeof c=="string"){if(d){e.CF[c]=d}else{delete e.CF[c]}}else{e.CF=c||{}}})},setCustomClass:function(d,f){var e=arguments.callee,c=(e.fun||(e.fun=function(o,l,m,j){if(!m[l]){return}var n=o.getSubNode(l,true),g;if(!n.isEmpty()){xui.arr.each(m[l].split(/\s+/),function(h){n[j?"removeClass":"addClass"](h)})}}));return this.each(function(l){var g=xui.copy(l.CC),j;if(typeof d=="string"){j=d;d=xui.copy(l.CC);d[j]=f}xui.filter(d,function(n,m){if(!/^[A-Z][A-Z0-9]*$/.test(m)){j=d.KEY=d.KEY||{};if(!(m in j)){j[m]=n}return false}if(!n){return false}});if(d&&typeof d=="object"){if(l.renderId){for(var h in g){c(l,h,g,true)}for(var h in d){c(l,h,d)}}l.CC=d}else{if(l.renderId){for(var h in g){c(l,h,g,true)}}l.CC={}}delete l._nodeEmSize})},setCustomAttr:function(e,g,d){var f=arguments.callee,c=(f.fun||(f.fun=function(q,o,n,l,m){if(!n[o]){return}var j=q.keys[o]||o,p,h;if(m){p=m.query("*","id",j==q.keys.KEY?q.domId:new RegExp("^"+j+":"+q.serialId))}else{p=q.getSubNode(o,true)}if(!p.isEmpty()){if(xui.isHash(n[o])){xui.each(n[o],function(u,r){p.attr(r,l?"":(u&&typeof u=="string")?xui.adjustRes(u,0,1):u)})}}}));return this.each(function(m){var h=xui.copy(m.CA),l;if(typeof e=="string"){l=e;e=xui.copy(m.CA);e[l]=g}xui.filter(e,function(p,n){if(!/^[A-Z][A-Z0-9]*$/.test(n)){l=e.KEY=e.KEY||{};if(!(n in l)){l[n]=p}return false}if(!p){return false}});if(!!e&&typeof e=="object"){if(e){xui.filter(e,function(p,n){return n!="id"&&n!="class"&&n!="style"&&n!="$xid"})}if(m.renderId){for(var j in e){c(m,j,h,true,d)}for(var j in e){c(m,j,e,false,d)}}m.CA=e}else{if(m.renderId){for(var j in h){c(m,j,h,true,d)}}m.CA={}}})},setCustomStyle:function(e,g,d){var f=arguments.callee,c=(f.fun||(f.fun=function(p,o,n,l,m){if(!n[o]){return}var j=p.keys[o]||o,q,h;if(m){q=m.query("*","id",j==p.keys.KEY?p.domId:new RegExp("^"+j+":"+p.serialId))}else{q=p.getSubNode(o,true)}if(!q.isEmpty()){if(xui.isStr(n[o])){xui.arr.each(n[o].split(";"),function(u,r){if((h=u.split(":")).length>=2){r=h.shift();u=h.join(":");r=r.replace(/\-(\w)/g,function(x,w){return w.toUpperCase()});q.css(r,(l?"":(u&&typeof u=="string")?xui.adjustRes(u,0,1):u)||"")}})}else{if(xui.isHash(n[o])){xui.each(n[o],function(r,u){if(xui.isStr(r)){if(u.indexOf("background")===0||r.indexOf(";")==-1){q.css(u,(l?"":(r&&typeof r=="string")?xui.adjustRes(r,0,1):r)||"")}else{xui.arr.each(r.split(";"),function(w){if((h=w.split(":")).length>=2){u=h.shift();w=h.join(":");u=u.replace(/\-(\w)/g,function(A,x){return x.toUpperCase()});q.css(u,(l?"":(w&&typeof w=="string")?xui.adjustRes(w,0,1):w)||"")}})}}else{u=u.replace(/\-(\w)/g,function(x,w){return w.toUpperCase()});q.css(u,(l?"":(r&&typeof r=="string")?xui.adjustRes(r,0,1):r)||"")}})}}}}));return this.each(function(m){var h=xui.copy(m.CS),l;if(typeof e=="string"){l=e;e=xui.copy(m.CS);e[l]=g}xui.filter(e,function(p,n){if(!/^[A-Z][A-Z0-9]*$/.test(n)){l=e.KEY=e.KEY||{};if(!(n in l)){l[n]=p}return false}if(!p){return false}});if(!!e&&typeof e=="object"){if(m.renderId){for(var j in h){c(m,j,h,true,d)}for(var j in e){c(m,j,e,false,d)}}m.CS=e}else{if(m.renderId){for(var j in h){c(m,j,h,true,d)}}m.CS={}}delete m._nodeEmSize})},setCustomBehavior:function(c,d){return this.each(function(e){if(typeof c=="string"){if(e.keys[c]){e.CB[c]=d||{}}}else{e.CB=c||{}}if(e.CB.KEY){xui.merge(e.CB,e.CB.KEY,"all");delete e.CB.KEY}e.clearCache()})},adjustDock:function(c){return this.each(function(e){if(!e.renderId){return}var g=e.properties;if(g.conDockRelative){e.boxing().adjustSize()}if(g.position=="absolute"){if("dock" in g&&g.dock&&g.dock!="none"&&e.renderId){var f=e.getRootNode();if(f&&f.clientHeight){if(c){f.style.width=(parseFloat(e.$px(f.style.width))||0+1)+"px";f.style.height=(parseFloat(e.$px(f.style.height))||0+1)+"px";e._resize_h=e._resize_w=-1}xui.UI.$dock(e,true,true)}}}else{if(xui.get(e,["parent","properties","conDockRelative"])){var d=e.parent;xui.UI._adjustConW(d,d.getRoot(),e.getRoot().parent().width(),e.getRootNode())}}if(e.$onDock){var f=e.boxing().getContainer(true);if(f&&f.onSize&&f.get(0)){f.onSize()}}})}},Initialize:function(){var d=this.prototype;xui.arr.each("getSubNode,getSubNodes,getDomId,getRootNode,getRoot,getContainer".split(","),function(f){if(!d[f]){d[f]=function(){var g=this.get(0);return g?g[f].apply(g,arguments):null}}d[f].$original$="xui.UI";d[f].$type$="instance";d[f].$name$=f});var c=this,e={};xui.each(xui.UI.$ps,function(f,g){e[g]={$spaceunit:1,ini:"auto",action:function(n){var l=this,o=l.properties,h=false,m;l.getRoot()[g]?l.getRoot()[g](n):xui.Dom._setUnitStyle(l.getRootNode(),g,n);if(g=="width"||g=="height"){if(!l.box._onresize&&l.onResize){l.boxing().onResize(l,g=="width"?n:null,g=="height"?n:null)}}else{if(l.onMove){l.boxing().onMove(l,g=="left"?n:null,g=="top"?n:null,g=="right"?n:null,g=="bottom"?n:null)}}if(o.position=="absolute"&&o.dock!="none"){m={$type:o.dock,$dockid:xui.arr.indexOf(["width","height","fill","cover"],o.dock)!=-1?l.$xid:null};switch(o.dock){case"middle":if(g!="height"&&g!="top"){return}m.top=m.height=1;break;case"center":if(g!="width"&&g!="left"){return}m.left=m.width=1;break;case"top":if(g!="height"&&g!="top"){return}m.width=m.height=1;break;case"bottom":if(g!="height"&&g!="bottom"){return}m.width=m.height=1;break;case"left":if(g!="width"&&g!="left"){return}m.width=m.height=1;break;case"right":if(g!="width"&&g!="right"){return}m.width=m.height=1;break;case"width":if("width"==g){return}m.width=1;break;case"height":if("height"==g){return}m.height=1;break;case"fill":case"cover":if(g=="width"&&g=="height"){return}m.width=m.height=1;break}var j=xui.UIProfile.getFromDom(l.$dockParent);if(j){j.boxing().adjustDock(true)}}}}});xui.merge(e,{renderer:{ini:null},zIndex:{ini:1,action:function(f){this.getRoot().css("zIndex",f)}},tabindex:{ini:1,action:function(h){var g=this,f=new RegExp("^"+g.key+"[-\\w]*:"+g.serialId+":");g.getRoot().query("*",function(j){return j.id&&f.test(j.id)&&j.getAttribute("tabIndex")}).attr("tabIndex",h)}},position:{ini:"absolute",listbox:["","static","relative","absolute"],action:function(g){var f=this,h=f.properties;f.getRoot().css("position",g);if(("dock" in f.box.$DataModel)&&h.dock!="none"&&!h.dockIgnore){g=h.dock;h.dock="none";f.boxing().adjustDock(true);h.dock=g}}},visibility:{listbox:["","visible","hidden"],action:function(f){this.getRoot().css("visibility",f);if(this.$resizer){if(f=="hidden"){this.$resizer.hide()}else{this.$resizer.show()}}xui.setNodeData(this.getRootNode(),"_setVisibility",1)}},display:{listbox:["","none","block","inline","inline-block"],action:function(f){if(f=="inline-block"){this.getRoot().setInlineBlock()}else{this.getRoot().css("display",f)}}},selectable:{ini:false,action:function(f){this.getRoot().setSelectable(!!f)}}});c.setDataModel(e);xui.UI.$cache_css+=xui.UI.buildCSSText({".xui-css-viewport, .xui-css-viewport body":{height:"100%",border:"0 none",margin:"0",padding:"0"},".xui-ui-draggable":{},".xui-inline-block":{display:xui.$inlineBlock,zoom:xui.browser.ie?1:null},".xui-ui-input":{background:"#fff"},".xui-ui-shadow-input":{"-moz-box-shadow":"inset 2px 2px 2px #EEEEEE","-webkit-box-shadow":"inset 2px 2px 2px #EEEEEE","box-shadow":"inset 2px 2px 2px #EEEEEE"},".xui-ui-shadow":{"-moz-box-shadow":"2px 2px 4px #CCC","-webkit-box-shadow":"2px 2px 4px #CCC","box-shadow":"2px 2px 4px #CCC","-ms-filter":(xui.browser.ie&&xui.browser.ver==8)?"progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#9f9f9f')":null,filter:(xui.browser.ie&&xui.browser.ver<=8)?"progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#9f9f9f')":null},".xui-ui-shadow-r":{"-moz-box-shadow":"1px 0  1px #CCC","-webkit-box-shadow":"1px 0  1px #CCC","box-shadow":"1px 0  1px #CCC","z-index":10},".xui-ui-shadow-b":{"-moz-box-shadow":"0 1px 1px #CCC","-webkit-box-shadow":"0 1px 1px #CCC","box-shadow":"0 1px 1px #CCC","z-index":10},".xui-ui-image":{"vertical-align":"middle",width:"1.3333333333333333em",height:"1.3333333333333333em","background-repeat":"no-repeat"},".xui-uicmd-none, .xui-display-none":{display:"none"},".xui-uitembg":{padding:".25em .5em","background-color":"transparent",border:"solid 1px transparent"},".xui-uitembg-hover":{$order:1,"background-color":"#E0E0E0","border-color":"#CDCDCD"},".xui-uitembg-active":{$order:2,"background-color":"#CDCDCD","border-color":"B6B6B6"},".xui-uitembg-checked":{$order:3,"background-color":"#CDCDCD","border-color":"B6B6B6"},".xui-uicell":{"background-color":"#F9F9FB"},".xui-uicell-hover":{$order:1,"background-color":"#d9e8fb"},".xui-uicell-checked":{$order:2,"background-color":"#ABABAB",color:"#fff"},".xui-uicell-alt":{$order:3,"background-color":"#FDF8D2"},".xui-special-icon":{color:"#3393D2","text-shadow":"1px 1px 4px #ccc"},".xui-uibar-top, .xui-uibar-bottom, .xui-uibar-top-s, .xui-uibar-bottom-s":{position:"relative","vertical-align":"baseline"},".xui-uibar-top td, .xui-uibar-top-s td, .xui-uibar-bottom td, .xui-uibar-bottom-s td":{},".xui-uibar-top":{},".xui-uibar-top .xui-uibar-tdl":{$order:1,position:"absolute",width:"12px",left:0,top:0,height:"100%"},".xui-uibar-top .xui-uibar-tdm":{$order:1,position:"absolute",top:0,left:"12px",right:"12px",height:"100%",width:xui.browser.ie&&xui.browser.ver<=7?"expression((this.parentNode.offsetWidth - 24)+'px')":null},".xui-uibar-top .xui-uibar-tdr":{$order:1,position:"absolute",width:"12px",top:0,right:0,height:"100%"},".xui-uibar-top .xui-uibar-tdlt":{$order:1,position:"absolute",width:"12px",left:0,top:0,height:"1.5em"},".xui-uibar-top .xui-uibar-tdmt":{$order:1,position:"absolute",top:0,left:0,right:0,height:"1.5em",width:xui.browser.ie&&xui.browser.ver<=7?"expression((this.parentNode.offsetWidth)+'px')":null},".xui-uibar-top .xui-uibar-tdrt":{$order:1,position:"absolute",width:"12px",right:0,top:0,height:"1.5em"},".xui-uibar-focus, .xui-uibar-top-focus .xui-uibar-tdl, .xui-uibar-top-focus .xui-uibar-tdm, .xui-uibar-top-focus .xui-uibar-tdr":{"background-color":"#B6B6B6"},".xui-uibar-top-focus .xuifont, .xui-uibar-top-focus .xuicon, .xui-uibar-top-focus .xui-uicaption":{},".xui-uibar-top .xui-uibar-cmdl":{overflow:"hidden",position:"relative",padding:".75em 0 .5em .5em","white-space":"nowrap"},".xui-uibar-top2 .xui-uibar-cmdr":{position:"absolute",top:"-.334em",right:"0","text-align":"right"},".xui-uibar-top .xui-uibar-cmdr":{position:"absolute",top:".75em",right:".5em","text-align":"right"},".xui-uibar-top .xui-uibar-tdb":{position:"relative",display:"none",margin:".16667em .16667em 0 .16667em"},".xui-uicon-main":{position:"relative","padding-left":".3333em","z-index":1,overflow:"visible"},".xui-uicon-maini":{"padding-right":".3333em"},".xui-uibar-bottom":{padding:"3px 0"},".xui-uibar-bottom .xui-uibar-tdl":{$order:1,position:"absolute",width:"12px",left:0,bottom:0,height:"100%"},".xui-uibar-bottom .xui-uibar-tdm":{$order:1,position:"absolute",bottom:0,left:"12px",right:"12px",height:"100%",width:xui.browser.ie&&xui.browser.ver<=7?"expression((this.parentNode.offsetWidth - 24)+'px')":null},".xui-uibar-bottom .xui-uibar-tdr":{$order:1,position:"absolute",width:"12px",right:0,bottom:0,height:"100%"},".xui-uibar-top-s, .xui-uibar-bottom-s, .xui-uibar-top-s .xui-uibar-t":{$order:3,height:"5px"},".xui-uibar-top-s .xui-uibar-tdl":{$order:3,position:"absolute",width:"12px",left:0,top:0,height:"100%"},".xui-uibar-top-s .xui-uibar-tdm":{$order:3,position:"absolute",top:0,left:"12px",right:"12px",height:"100%",width:xui.browser.ie&&xui.browser.ver<=7?"expression((this.parentNode.offsetWidth - 24)+'px')":null},".xui-uibar-top-s .xui-uibar-tdr":{$order:3,position:"absolute",width:"12px",top:0,right:0,height:"100%"},".xui-uibar-top-s .xui-uibar-cmdl":{$order:3,display:"none"},".xui-uibar-top-s .xui-uibar-cmdr":{$order:3,display:"none"},".xui-uibar-bottom-s .xui-uibar-tdl":{$order:3,position:"absolute",width:"12px",left:0,bottom:0,height:"100%"},".xui-uibar-bottom-s .xui-uibar-tdm":{$order:3,position:"absolute",bottom:0,left:"12px",right:"12px",height:"100%",width:xui.browser.ie&&xui.browser.ver<=7?"expression((this.parentNode.offsetWidth - 24)+'px')":null},".xui-uibar-bottom-s .xui-uibar-tdr":{$order:3,position:"absolute",width:"12px",right:0,bottom:0,height:"100%"}})+xui.UI.buildCSSText({".xui-ui-unselectable":{$order:0,"-moz-user-select":xui.browser.gek?"-moz-none":null,"-khtml-user-select":xui.browser.kde?"none":null,"-webkit-user-select":xui.browser.kde?"none":null,"-o-user-select":xui.browser.opr?"none":null,"-ms-user-select":(xui.browser.ie||xui.browser.newie)?"none":null,"user-select":"none"},".xui-ui-selectable":{$order:1,"-moz-user-select":xui.browser.gek?"text":null,"-khtml-user-select":xui.browser.kde?"text":null,"-webkit-user-select":xui.browser.kde?"text":null,"-o-user-select":xui.browser.opr?"text":null,"-ms-user-select":(xui.browser.ie||xui.browser.newie)?"text":null,"user-select":"text"},".xui-uiw-shell":{display:xui.$inlineBlock,zoom:xui.browser.ie&&xui.browser.ver<=7?1:null,border:0,padding:0,margin:0},".xui-uiw-frame":{$order:1,display:"block",position:"relative",border:0,padding:0,margin:0,width:"100%",height:"100%","-moz-box-flex":"1"},".xui-uiw-border":{$order:2,display:"block",position:"relative",border:0,padding:0,margin:0,left:0,top:0,width:"100%",height:"100%"}})+xui.UI.buildCSSText({".xui-uibase":{"background-color":"#FFFFFF"},".xui-uicontainer":{},".xui-uibar":{"background-color":"#E0E0E0"},".xui-uibar-hover":{$order:1,"background-color":"#CDCDCD"},".xui-uibar-active, .xui-uibar-checked, .xui-uibar-expand, .xui-uimenu-hover, .xui-uimenu-active":{$order:2,"background-color":"#ABABAB"},".xui-ui-ctrl-highlight, .xui-node-highlight, .xui-uibar-checked,  .xui-uibar-expand, .xui-uimenu-hover, .xui-uimenu-active":{$order:3,color:"#FFF"},".xui-ui-btn::-moz-focus-inner":{$order:3,padding:"0 !important",border:"0 none !important"},".xui-uigradient":{$order:4,border:"solid 1px #B6B6B6",color:"#333","text-shadow":"0px 1px 1px rgba(255,255,255,1)","text-decoration":"none","white-space":"nowrap","-moz-box-shadow":"inset 0px 1px 0px 0px #ffffff","-webkit-box-shadow":"inset 0px 1px 0px 0px #ffffff","box-shadow":"inset 0px 1px 0px 0px #ffffff","background-image_1":"linear-gradient(top,  #FFF 5%,  #CDCDCD 100%)","background-image_2":"-webkit-gradient(linear, 0% 0%, 0% 100%, from(0.05, #FFF), to(1, #CDCDCD))","background-image_3":"-webkit-linear-gradient(top,  #FFF 5%,  #CDCDCD 100%)","background-image_4":"-moz-linear-gradient(top,  #FFF 5%,  #CDCDCD 100%)","background-image_5":"-o-linear-gradient(top,  #FFF 5%,  #CDCDCD 100%)","background-image_6":"-ms-linear-gradient(top,  #FFF 5%,  #CDCDCD 100%)","-ms-filter":(xui.browser.ie&&xui.browser.ver==8)?"progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#CDCDCD', GradientType=0)":null,filter:(xui.browser.ie&&xui.browser.ver<=9)?"progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#CDCDCD', GradientType=0)":null},".xui-uigradient-hover, .xui-uigradient:hover":{$order:5,"background-image_1":"linear-gradient(top,  #FFF 5%,  #EEE 100%)","background-image_2":"-webkit-gradient(linear, 0% 0%, 0% 100%, from(0.05, #FFF), to(1, #EEE))","background-image_3":"-webkit-linear-gradient(top,  #FFF 5%,  #EEE 100%)","background-image_4":"-moz-linear-gradient(top,  #FFF 5%,  #EEE 100%)","background-image_5":"-o-linear-gradient(top,  #FFF 5%,  #EEE 100%)","background-image_6":"-ms-linear-gradient(top,  #FFF 5%,  #EEE 100%)","-ms-filter":(xui.browser.ie&&xui.browser.ver==8)?"progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#CDCDCD', GradientType=0)":null,filter:(xui.browser.ie&&xui.browser.ver<=9)?"progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#CDCDCD', GradientType=0)":null},".xui-uigradient-active, .xui-uigradient-checked, .xui-uigradient-expand, .xui-uigradient:active, .xui-uigradient-active:hover, .xui-uigradient-checked:hover, .xui-uigradient-expand:hover":{$order:6,"background-image_1":"linear-gradient(top,  #CDCDCD 5%,  #FFF)","background-image_2":"-webkit-gradient(linear, 0% 0%, 0% 100%, from(0.05, #CDCDCD), to(1, #FFF))","background-image_3":"-webkit-linear-gradient(top,  #CDCDCD 5%,  #FFF 100%)","background-image_4":"-moz-linear-gradient(top,  #CDCDCD 5%,  #FFF 100%)","background-image_5":"-o-linear-gradient(top,  #CDCDCD 5%,  #FFF 100%)","background-image_6":"-ms-linear-gradient(top,  #CDCDCD 5%,  #FFF 100%)","-ms-filter":(xui.browser.ie&&xui.browser.ver==8)?"progid:DXImageTransform.Microsoft.gradient(startColorstr='#CDCDCD', endColorstr='#FFFFFF', GradientType=0)":null,filter:(xui.browser.ie&&xui.browser.ver<=9)?"progid:DXImageTransform.Microsoft.gradient(startColorstr='#CDCDCD', endColorstr='#FFFFFF', GradientType=0)":null},".xui-ui-btn":{$order:7,padding:"4px","white-space":"normal",cursor:"pointer",border:"solid 1px #B6B6B6",display:xui.$inlineBlock,"text-align":"center","line-height":"1",zoom:xui.browser.ie?1:null,width_1:(xui.browser.ie&&xui.browser.ver<=7)?"auto":null,overflow:(xui.browser.ie&&xui.browser.ver<=7)?"visible":null},".xui-ui-btn:hover, .xui-ui-btn-hover":{$order:8,"border-color":"#B5B5B5"},".xui-uiborder-l":{"border-left-style":"solid","border-left-width":"1px","border-left-color":"#F6F6F6"},".xui-uiborder-r":{"border-right-style":"solid","border-right-width":"1px","border-right-color":"#B6B6B6"},".xui-uiborder-t":{"border-top-style":"solid","border-top-width":"1px","border-top-color":"#F6F6F6"},".xui-uiborder-b, .xui-uitem-split":{"border-bottom-style":"solid","border-bottom-width":"1px","border-bottom-color":"#B6B6B6"},".xui-uiborder-nob":{$order:1,"border-bottom-width":0,"border-bottom-style":"none"},".xui-uiborder-hidden":{border:"solid 1px transparent",background:"none"},".xui-uiborder-hidden-active, .xui-uiborder-hidden-checked":{background:"#efefef"},".xui-uiborder-flat":{border:"solid 1px #B6B6B6"},".xui-uiborder-outset":{$order:8,border:"solid 1px","border-color":"#F6F6F6 #B6B6B6 #B6B6B6 #F6F6F6"},".xui-uiborder-inset, .xui-uiborder-hidden-active, .xui-uiborder-hidden-checked":{$order:10,border:"solid 1px","border-color":"#B6B6B6 #F6F6F6 #F6F6F6 #B6B6B6"},".xui-uiborder-dark, .xui-uiborder-flat-hover":{"border-color":"#B6B6B6"},".xui-uiborder-light, .xui-uiborder-hidden-hover":{"border-color":"#efefef"},".xui-uiborder-radius":{$order:11,"border-radius":"3px","-moz-border-radius":"3px","-webkit-border-radius":"3px","-o-border-radius":"3px","-ms-border-radius":"3px","-khtml-border-radius":"3px"},".xui-uiborder-radius-big":{$order:11,"border-radius":"6px","-moz-border-radius":"6px","-webkit-border-radius":"6px","-o-border-radius":"6px","-ms-border-radius":"6px","-khtml-border-radius":"6px"},".xui-uiborder-radius-tl":{$order:12,"border-top-left-radius":"3px","-moz-border-top-left-radius":"3px","-webkit-border-top-left-radius":"3px","-o-border-top-left-radius":"3px","-ms-border-top-left-radius":"3px","-khtml-border-top-left-radius":"3px"},".xui-uiborder-radius-tr":{$order:12,"border-top-right-radius":"3px","-moz-border-top-right-radius":"3px","-webkit-border-top-right-radius":"3px","-o-border-top-right-radius":"3px","-ms-border-top-right-radius":"3px","-khtml-border-top-right-radius":"3px"},".xui-uiborder-radius-br":{$order:12,"border-bottom-right-radius":"3px","-moz-border-bottom-right--radius":"3px","-webkit-border-bottom-right--radius":"3px","-o-border-bottom-right--radius":"3px","-ms-border-bottom-right--radius":"3px","-khtml-border-bottom-right--radius":"3px"},".xui-uiborder-radius-bl":{$order:12,"border-bottom-left-radius":"3px","-moz-border-bottom-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","-o-border-bottom-left-radius":"3px","-ms-border-bottom-left-radius":"3px","-khtml-border-bottom-left-radius":"3px"},".xui-uiborder-radius-big-tl":{$order:13,"border-top-left-radius":"6px","-moz-border-top-left-radius":"6px","-webkit-border-top-left-radius":"6px","-o-border-top-left-radius":"6px","-ms-border-top-left-radius":"6px","-khtml-border-top-left-radius":"6px"},".xui-uiborder-radius-big-tr":{$order:13,"border-top-right-radius":"6px","-moz-border-top-right-radius":"6px","-webkit-border-top-right-radius":"6px","-o-border-top-right-radius":"6px","-ms-border-top-right-radius":"6px","-khtml-border-top-right-radius":"6px"},".xui-uiborder-radius-big-br":{$order:13,"border-bottom-right-radius":"6px","-moz-border-bottom-right--radius":"6px","-webkit-border-bottom-right--radius":"6px","-o-border-bottom-right--radius":"6px","-ms-border-bottom-right--radius":"6px","-khtml-border-bottom-right--radius":"6px"},".xui-uiborder-radius-big-bl":{$order:13,"border-bottom-left-radius":"6px","-moz-border-bottom-left-radius":"6px","-webkit-border-bottom-left-radius":"6px","-o-border-bottom-left-radius":"6px","-ms-border-bottom-left-radius":"6px","-khtml-border-bottom-left-radius":"6px"},".xui-uiborder-noradius":{$order:15,"border-radius":"0 !important","-moz-border-radius":"0 !important","-webkit-border-radius":"0 !important","-o-border-radius":"0 !important","-ms-border-radius":"0 !important","-khtml-border-radius":"0 !important"},".xui-uiborder-noradius-l":{$order:15,"border-top-left-radius":"0 !important","-moz-border-top-left-radius":"0 !important","-webkit-border-top-left-radius":"0 !important","-o-border-top-left-radius":"0 !important","-ms-border-top-left-radius":"0 !important","-khtml-border-top-left-radius":"0 !important","border-bottom-left-radius":"0 !important","-moz-border-bottom-left-radius":"0 !important","-webkit-border-bottom-left-radius":"0 !important","-o-border-bottom-left-radius":"0 !important","-ms-border-bottom-left-radius":"0 !important","-khtml-border-bottom-left-radius":"0 !important"},".xui-uiborder-noradius-r":{$order:15,"border-top-right-radius":"0 !important","-moz-border-top-right-radius":"0 !important","-webkit-border-top-right-radius":"0 !important","-o-border-top-right-radius":"0 !important","-ms-border-top-right-radius":"0 !important","-khtml-border-top-right-radius":"0 !important","border-bottom-right-radius":"0 !important","-moz-border-bottom-right-radius":"0 !important","-webkit-border-bottom-right-radius":"0 !important","-o-border-bottom-right-radius":"0 !important","-ms-border-bottom-right-radius":"0 !important","-khtml-border-bottom-right-radius":"0 !important"},".xui-uiborder-noradius-t":{$order:15,"border-top-left-radius":"0 !important","-moz-border-top-left-radius":"0 !important","-webkit-border-top-left-radius":"0 !important","-o-border-top-left-radius":"0 !important","-ms-border-top-left-radius":"0 !important","-khtml-border-top-left-radius":"0 !important","border-top-right-radius":"0 !important","-moz-border-top-right-radius":"0 !important","-webkit-border-top-right-radius":"0 !important","-o-border-top-right-radius":"0 !important","-ms-border-top-right-radius":"0 !important","-khtml-border-top-right-radius":"0 !important"},".xui-uiborder-noradius-b":{$order:15,"border-bottom-left-radius":"0 !important","-moz-border-bottom-left-radius":"0 !important","-webkit-border-bottom-left-radius":"0 !important","-o-border-bottom-left-radius":"0 !important","-ms-border-bottom-left-radius":"0 !important","-khtml-border-bottom-left-radius":"0 !important","border-bottom-right-radius":"0 !important","-moz-border-bottom-right-radius":"0 !important","-webkit-border-bottom-right-radius":"0 !important","-o-border-bottom-right-radius":"0 !important","-ms-border-bottom-right-radius":"0 !important","-khtml-border-bottom-right-radius":"0 !important"},".xui-ui-noshadow, .xui-ui-noshadow .xui-ui-shadow-input, .xui-ui-noshadow .xui-ui-shadow, .xui-ui-noshadow .xui-ui-shadow-b, .xui-ui-noshadow .xui-ui-shadow-r,  .xui-ui-readonly .xui-ui-shadow-input":{$order:15,"-moz-box-shadow":"none !important","-webkit-box-shadow":"none !important","box-shadow":"none !important"},".xui-uiborder-circle":{$order:16,"border-radius":"50%","-moz-border-radius":"50%","-webkit-border-radius":"50%","-o-border-radius":"50%","-ms-border-radius":"50%","-khtml-border-radius":"50%"},".xui-uiflag-1":{$order:16,"border-radius":"50%","-moz-border-radius":"50%","-webkit-border-radius":"50%","-o-border-radius":"50%","-ms-border-radius":"50%","-khtml-border-radius":"50%",width:"1em",height:"1em",padding:"4px","background-color":"#eb6e1a",color:"#fff !important",overflow:"hidden","text-align":"center"},".xui-uiborder-none":{$order:20,border:"none"},".xui-uisb":{position:"absolute"},".xui-uisb-none":{display:"none"},".xui-uisb-left":{left:0,top:0,width:"3em",height:"100%"},".xui-uisb-right":{top:0,right:0,width:"3em",height:"100%"},".xui-uisb-top":{left:0,top:0,width:"100%",height:"3em"},".xui-uisb-bottom":{left:0,bottom:0,width:"100%",height:"3em"},".xui-uisbbtn":{position:"absolute",cursor:"pointer","z-index":1,width:"1em",height:"1em"},".xui-uisb-left .xui-uisbbtn":{left:0,top:0},".xui-uisb-right .xui-uisbbtn":{right:0,top:0},".xui-uisb-top .xui-uisbbtn":{right:0,bottom:0},".xui-uisb-bottom .xui-uisbbtn":{right:0,top:0},".xui-uisbcap":{position:"relative","text-align":"center",width:"100%",height:"100%"},".xui-uisb-left .xui-uisbcap, .xui-uisb-right .xui-uisbcap":{"writing-mode":"tb-rl",filter:"flipv fliph"},".xui-ltag-cmds":{"vertical-align":"middle"},".xui-rtag-cmds":{"vertical-align":"middle"},".xui-tag-cmd":{"margin-left":".167em",padding:"0 .167em","vertical-align":"middle"},".xui-inline-object":{"vertical-align":"middle",margin:"0 .16666667em"}});xui.UI.$cache_css2+=xui.UI.buildCSSText({".xui-uitem-split":{display:"block",position:"relative",overflow:"visible","white-space":"nowrap",margin:"2px 0",padding:0},".xui-css-noscroll, .xui-css-noscroll body":{overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"},".xui-css-noscrollx, .xui-css-noscroll body":{"overflow-x":"hidden"},".xui-css-noscrolly, .xui-css-noscroll body":{"overflow-y":"hidden"},".xui-css-dockparent":{overflow:"hidden"},".xui-ui-dirty":{$order:1,"background-image":"url(data:image/gif;base64,R0lGODlhBwAHAPcAAAAAADDSEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAAHAAcAAAgYAAMIHPhvoMB/BQkiVLgwAMKHDh9KnBgQADs=)","background-repeat":"no-repeat","background-position":"left top"},".xui-float-clear":{clear:"both"},".xui-float-left":{"float":"left"},".xui-float-right":{"float":"right"},".xui-ui-ellipsis":{"max-width":"100%","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"},".xui-ui-ruler":{width:0,height:"1.22em","vertical-align":"middle"},".xui-nodatauri .xui-ui-dirty":{$order:2,"background-image":xui.UI.$oldBg("dirtymark.gif","no-repeat left top")},".xui-ui-ctrl-readonly, .xui-node-readonly, input[readonly], textarea[readonly], input:read-only, textarea:read-only, .xui-ui-readonly, .xui-ui-itemreadonly, .xui-ui-readonly, .xui-ui-readonly .xui-node, .xui-ui-itemreadonly .xui-node":{$order:2,color:"#666666 !important"},"button::-moz-focus-inner, input::-moz-focus-inner":{padding:0,border:0},".xui-ui-ctrl-disabled, .xui-node-disabled, button:disabled, a:disabled, input:disabled, textarea:disabled,  .xui-ui-disabled,  .xui-ui-itemdisabled,  .xui-ui-disabled .xui-node, .xui-ui-itemdisabled .xui-node, .xui-uicell-disabled, .xui-uicell-disabled .xui-node":{$order:2,cursor:"not-allowed",color:"#808080 !important"},".xui-ui-ctrl-disabled, .xui-node-disabled, button:disabled, a:disabled, input:disabled, textarea:disabled,  .xui-ui-disabled input,.xui-ui-disabled textarea, .xui-ui-itemdisabled input, .xui-ui-itemdisabled textarea, .xui-uicell-disabled":{$order:3,"background-color":"#eee !important"},".xui-ui-invalid, .xui-ui-invalid .xui-node":{$order:1,"background-color":"#FFEBCD !important"},".xui-item-row":{display:"block","white-space":"nowrap"},".xui-required":{color:"#ff0000 !important"},".xui-alert":{"background-color":"#ff6600 !important"},".xui-icon-loading":{$order:7,width:(xui.browser.ie&&xui.browser.ver<=8)?"1em":null,height:(xui.browser.ie&&xui.browser.ver<=8)?"1em":null,"background-image":(xui.browser.ie&&xui.browser.ver<10)?"url("+xui.ini.img_busy+")":null,"background-repeat":(xui.browser.ie&&xui.browser.ver<10)?"no-repeat":null,"background-position":(xui.browser.ie&&xui.browser.ver<10)?"center center":null},".xui-icon-loading:before":{$order:7,visibility:(xui.browser.ie&&xui.browser.ver<10)?"hidden":null},".xui-load-error":{width:(xui.browser.ie&&xui.browser.ver<=8)?"1em":null,height:(xui.browser.ie&&xui.browser.ver<=8)?"1em":null,"background-image":(xui.browser.ie&&xui.browser.ver<=8)?"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAAJdnBBZwAAABAAAAAQAFzGrcMAAADdSURBVCjPfdGxTsJQGIbhpw20GgN1IZQBDQnGxvu/FEU3IjEBB5SKUsGkdTiCYeGb/pw803uixum1iMJ1KZdp40dpYQWNqBERuXItRY1YrPJspmm0wNAYlZkvdPR1jTVmtJAZgUhliaWFQs9IqYwxkKhUUnf64NuTD6kBMTK8mKgkigNZaGQBJGqfVh6PyFotCWC/NxMbiUL+/xhjJ9Y5kEriVk9HbBdAKZI7A+8ebLQVhigDmNvqKg7k3kZbamceOpSmbvSkXq1xIfSfKh2lPlf/pWa7Tx3A6c86vV+v4FNOkQDWwAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMC0wMi0xMVQxMTo1MDowOC0wNjowMNYQZfsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMDYtMDUtMDVUMTM6MjI6NDAtMDU6MDC/5P4aAAAAAElFTkSuQmCC)":null,"background-repeat":(xui.browser.ie&&xui.browser.ver<=8)?"no-repeat":null,"background-position":(xui.browser.ie&&xui.browser.ver<=8)?"center center":null},".xui-load-error:before":{$order:7,visibility:(xui.browser.ie&&xui.browser.ver<=8)?"hidden":null},".xui-ui-clear":{$order:10,border:"none",background:"none"}})},$End:function(){var d={},c=this.$Keys;xui.filter(this.getAppearance(),function(q,p){var n=p.split(/\s*,\s*/),g;for(var f=n.length-1;f>=0;f--){g=n[f].match(/[A-Z][A-Z0-9]*/g);if(g&&g.length){for(var h=0,e=g.length;h<e;h++){if(!c[g[h]]){n.splice(f,1);break}}}}if(n.length){d[n.join(", ")]=q}});this.setAppearance(d);xui.UI.$cache_css+=this.buildCSSText(this.$Appearances)},Static:{$cache_css:"",$cache_css2:"",$css_tag_dirty:"xui-ui-dirty",$css_tag_invalid:"xui-ui-invalid",$tag_left:"{",$tag_right:"}",$tag_subId:"_serialId",$tag_subId_c:"_serialId_c",$x01:/\x01/img,$x01r:/ \x01 /img,$tag_special:"\x01",$ID:"\x01id\x01",$DOMID:"\x01domid\x01",$CLS:"\x01cls\x01",$MODULECLS:"\x01modulecls\x01",$TAGCLASS:"\x01tagcls\x01",$childTag:"<!--\x03{id}\x04-->",$onSize:function(d,f){var c=d.getRootNode().style;if(f.width||f.height){xui.UI.$tryResize(d,c.width,c.height)}c=null},$ps:{left:1,top:1,width:1,height:1,right:1,bottom:1},objectProp:{},$toDom:function(g,m,j){if(j===false){return xui.str.toDom(m)}var d=xui.Dom.getEmptyDiv(g.$inDesign).get(0),h=[];d.style.position="relative";d.innerHTML=m;this.$addEventsHanlder(g,d);for(var f=0,e=d.childNodes,c=e.length;f<c;f++){xui.$registerNode(e[f]);h[h.length]=e[f].$xid}d=null;return xui(h,false)},$evtsindesign:{onload:1,onerror:1,onscroll:1,onunload:1,onsize:1,onmousedown:1,onmouseup:1},_handleEventConf:function(d,c){var e=this},$addEventsHanlder:function(g,f,u){var c=xui.$cache.UIKeyMapEvents,n=xui.Event._eventHandler,q=this.$evtsindesign,x=xui.Event.$eventhandler,e=xui.toArr(f.getElementsByTagName("*")),p,h,o,m,d,w,r;if(u){e.push(f)}if(h=e.length){for(p=0;p<h;p++){if((f=e[p]).nodeType!=1){continue}if(d=f.id){if(w=c[d]||c[d.substr(0,d.indexOf(":"))]){r=xui.$registerNode(f);r=r.eHandlers||(r.eHandlers={});for(o in w){if(g.$inDesign&&!q[o]){continue}r[o]=w[o];if(m=n[o]){r[m]=f[m]=w[o];if(xui.browser.isTouch&&m=="onmousedown"){xui.setNodeData(f,["eHandlers","onxuitouchdown"],x);if(f.addEventListener){f.addEventListener("xuitouchdown",x,false)}else{if(f.attachEvent){f.attachEvent("xuitouchdown",x)}}}}}}}}}e.length=0;f=w=null},setDftProp:function(c){this.__resetDftProp=c;return this},getFromDom:function(c){if(c=xui.UIProfile.getFromDom(c)){return c.boxing()}},_ensureValues:function(d){var e=[],j=0,g=0,l,h=this.KEY,f=xui.$cache.profileMap,c=xui.getNodeData;if(d["xui.absBox"]){d=d._nodes}for(;l=d[j++];){if((l.box&&l.box[h])||((l=f[c(l.renderId?l.renderId:l,["element","id"])])&&l.box&&l.box[h])){e[g++]=l}}return e.length<=1?e:this._unique(e)},__gc:function(){var e=this,d=e.$key,c=xui.$cache;xui.breakO([c.template[d],c.reclaimId[d],e._cache,e._idCache,e.$DataModel,e.$Templates,e.$Behaviors,e],2);delete xui.absBox.$type[d.replace("xui.UI.","")];delete xui.absBox.$type[d];xui.filter(xui.$cache.UIKeyMapEvents,function(g,f){return !(f==d||f.indexOf(d+"-")==0)});Class.__gc(d)},_pickSerialId:function(){var c=xui.$cache.reclaimId[this.$key];if(c&&c[0]){return c.pop()}return this._ctrlId.next()},$oldBg:function(f,d,e,c){return function(g){return"url("+xui.ini.path+"appearance/_oldbrowser/"+f+") "+(d||"")}},$ieOldBg:function(c){return function(d){return'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+xui.ini.path+"appearance/_oldbrowser/"+c+'",sizingMethod="crop")'}},$doTemplate:function(c,D,e,G,g,d,f){var o=arguments.callee,j,h,p,u=xui.UI.$x01,w=" \x01 ",q="",B=xui.isArr(e),C=D[G||""],m=!g,g=g||[];G=f||G;if(B){if(typeof C!="function"){C=o}for(var A=0;h=e[A++];){if(false===C(c,D,h,G,g,A)){break}}}else{if(h=e.object){g[g.length]=h.toHtml()}else{if(typeof C=="function"){h=C(c,D,e,G,g);if(h){G=h}}else{G=G?G+".":"";var F=C[0],E=C[1];for(var A=0,x=F.length;A<x;A++){if(p=E[A]){if(p in e){h=e[p];if(p.substr(0,4)=="_fi_"){if(xui.__iefix2&&(F[A-1]=="_the_next_is_fonticon_"||p=="_fi_")){h=xui.str.trim(h).split(/\s+/).pop();h=(h in xui.__iefix2)?xui.__iefix2[h]:q}else{if(p=="_fi_"){h=q}}}if(D[j=G+p]&&h){o(c,D,h,j,g)}else{g[g.length]=(h===undefined||h===null||h===NaN)?q:typeof h=="string"?h.replace(u,w):h}}}else{g[g.length]=(F[A]===undefined||F[A]===null||F[A]===NaN)?q:F[A]}}}}}if(m){return g.join("")}},$buildTemplate:function(m,O,T,r,e){if(O&&(O.tagName+"").toLowerCase()=="text"){e[e.length]=O.text;return}var C=arguments.callee,A=m.behavior?T?m.behavior[T]:m.behavior:null,j=m.properties,R=C.map1||(C.map1={tagName:1,text:1}),P=C.map2||(C.map2={image:1,input:1,br:1,meta:1,hr:1,abbr:1,embed:1}),M=C.map3||(C.map3={input:1,textarea:1,pre:1,code:1}),I=C.r2||(C.r2=/[a-z]/),H=C.r3||(C.r3=/^(on|before|after)/),E=C.r7||(C.r7=/([^{}]*)\{([\w]+)\}([^{}]*)/g),n=false,q=xui.UI,d=q.$tag_special,x,D,N,p,B,f;if(!O){O=m.template}f=T?m.keys[T]:m.key;if(!O.tagName){O.tagName="span"}if(O.id!==null){O.id=T?f+":"+q.$ID+":"+q.$tag_left+(O.$customId?q.$tag_subId_c:q.$tag_subId)+q.$tag_right:q.$DOMID}else{delete O.id}if(O.className!==null){N=O.className||"";if(!O._NativeElement){x=q.$CLS+(T?"-"+T.toLowerCase():"");p=O.tagName.charAt(0)!="{"?O.tagName.toLowerCase():O.tagName;B=(p=="button"||p=="input"||p=="textarea"||p=="select"||p=="keygen")?"xui-ui-reset":"";O["class"]="xui-node"+(B?(" "+B):"")+" xui-node-"+p+(x?(" "+x):"")+(N?(" "+N):"")+(O.$fonticon?(" "+O.$fonticon):"")+(f==m.key?(" xui-ui-ctrl "+((xui.browser.ie&&xui.browser.ver<10)?"":"{_selectable} ")):"")}else{O["class"]=N+" "+(f==m.key?((xui.browser.ie&&xui.browser.ver<10)?"":"{_selectable} "):"")}O["class"]+=" "+d+(T||"KEY")+"_CT"+d+" "+d+(T||"KEY")+"_CC"+d+" "+q.$MODULECLS+" "+q.$TAGCLASS+(j._tagClass?" "+j._tagClass:"")+" xui-custom"}delete O.className;O.style=(O.style?(O.style+";"):"")+d+(T||"KEY")+"_CS"+d;var L=[],K={},h=O.tagName.charAt(0)!="{"?O.tagName.toLowerCase():O.tagName,w=O.text,c=xui.absObj.$specialChars;for(var J in O){if(!O[J]){continue}if(!c[J.charAt(0)]&&!R[J]){D=O[J];if(!I.test(J)){if(typeof D=="object"){if(!D.$order){D.$order=0}D.$key=J;L[L.length]=D}}else{K[J]=D}}}xui.arr.stableSort(L,function(l,o){l=l.$order||0;o=o.$order||0;return l>o?1:l==o?0:-1});if(!e){n=true;e=[]}e[e.length]="<"+h+" ";for(var J in K){if(K[J]){e[e.length]=J+'="'+K[J]+'" '}}if(O.className!==null){O.className=N}delete O["class"];e[e.length]=d+(T||"KEY")+"_CA"+d;e[e.length]=">";if(!P[h]&&w){e[e.length]=w}if(O.$fonticon&&xui.__iefix2){O.$fonticon=xui.str.trim(O.$fonticon);if(xui.__iefix2[O.$fonticon]){e[e.length]=xui.__iefix2[O.$fonticon]}else{if(/^\s*\{\s*_fi_[\w\s]+\}\s*$/.test(O.$fonticon)){e[e.length]="{_the_next_is_fonticon_}"+O.$fonticon}}}delete O.$fonticon;for(var J=0,G=L.length;J<G;){D=L[J++];C(m,D,D.$key,r,e)}if(!P[h]){e[e.length]="</"+h+">"}if(n){var S=r[0],Q=r[1],F=e.join(""),g=false;F.replace(E,function(o,l,U,u){if(l){S[S.length]=l}Q[S.length]=S[S.length]=U;if(u){S[S.length]=u}g=true;return""});if(!g){S[0]=F}}},_rpt:function(d,m){var j=arguments.callee,n=d.host,h=(n&&n["xui.Module"]&&n.customStyle&&!xui.isEmpty(n.customStyle))?(" xui-module-"+n.$xid):null,l=xui.UI,o=l.$tag_special,e=function(r,q,p){q="";for(p in r){q+=(p+'="'+r[p]+'" ')}return q},c=j._r||(j._r=new RegExp(o+"([0-9A-Z_]+)_C([CTA])"+o+"|"+o+"([\\w_\\-\\.]*)"+o,"img")),g={id:d.serialId,cls:d.getClass("KEY"),domid:d.$domId,modulecls:h,tagcls:(d.tagcls||"")},f={A:d.CA,C:d.CC,T:d._CT};return m.replace(c,function(q,p,u,r){return g[r]||(f[u]?(u=="A"?e(f[u][p]):(f[u][p]||"")):"")}).replace(l.$x01r,"\x01")},_build:function(d,o){var r,A,e,w=xui.UI,x=[[],[]],B=this,q=B.KEY,c=xui.$cache.template,n=d._hash="b:"+(d.template._subid||"")+";!"+(d._exhash||"");if(typeof d.theme=="string"){var p=d._CT={},f=d.key.replace(/\./g,"-").toLowerCase().replace("xui-ui","xui")+"-";xui.each(d.keys,function(j,h){if(h.charAt(0)!="$"){p[h]=f+d.theme+"-"+h.toLowerCase()}})}if(!(r=xui.get(c,[q,n]))){w.$buildTemplate(d,null,null,x);xui.set(c,[q,n,""],x);if(A=d.template.$submap){for(var l in A){if(typeof(e=A[l])!="function"){var x=[[],[]];for(var g in e){if(typeof e[g]=="object"){w.$buildTemplate(d,e[g],g,x)}}e=x}xui.set(c,[q,n,l],e)}}r=xui.get(c,[q,n])}if(!r){return""}return B._rpt(d,w.$doTemplate(d,r,o))},_setDefaultBehavior:function(l){var c=this,g=arguments.callee,j=g._m||(g._m={"":1,KEY:1,$key:1}),h=g._f1||(g._f1=function(f,o,p){var n=function(A,F,q){var I,w=xui.use(q).id(),H,G=A.getSubId(w),u=A.properties,r,E,D;if(u.disabled||u.readonly){return}H=A.SubSerialIdMapItem&&A.SubSerialIdMapItem[G];if(H&&H.disabled){return}if(H&&H.readonly){return}switch(typeof f){case"string":r=A.getSubNode(f,G)._get();break;case"function":E=[f];break;case"object":r=[];E=[];for(var x,C=0,B=f.length;C<B;C++){x=f[C];if(typeof x=="string"){r.push.apply(r,A.getSubNode(x,G)._get())}else{E.push(x)}}}if(r&&r.length){r=xui(r);D=A.boxing();if(p==1){if(o=="mouseover"){if(A.$beforeHover&&false==A.$beforeHover(A,H,F,q,"mouseover")){return}if(u.disableHoverEffect){return}if(A.beforeHoverEffect&&false===D.beforeHoverEffect(A,H,F,q,"mouseover")){return}}if(o=="mousedown"){if(A.$beforeClick&&false==A.$beforeClick(A,H,F,q,"mousedown")){return}if(u.disableClickEffect){return}if(A.beforeClickEffect&&false===D.beforeClickEffect(A,H,F,q,"mousedown")){return}}r.tagClass("-"+(o=="mouseover"?"hover":o=="mousedown"?"active":o))}else{if(o=="mouseup"){if(A.$beforeClick&&false==A.$beforeClick(A,H,F,q,"mouseup")){return}if(u.disableClickEffect){return}if(A.beforeClickEffect&&false===D.beforeClickEffect(A,H,F,q,"mouseup")){return}r.tagClass("-active",false)}else{if(A.$beforeHover&&false==A.$beforeHover(A,H,F,q,"mouseout")){return}if(u.disableHoverEffect){return}if(A.beforeHoverEffect&&false===D.beforeHoverEffect(A,H,F,q,"mouseout")){return}r.tagClass("(-hover|-active)",false)}}}if(E&&E.length){xui.arr.each(E,function(J){xui.tryF(J,[A],A)});E.length=0}};return n}),d={},e;if(!xui.SC.get("xui.absContainer")){Class("xui.absContainer","xui.absObj",{Instance:{addPanel:function(n,p,q){var r=xui.clone(xui.UI.Panel.$DataStruct,true);xui.merge(r,n,"with");xui.merge(r,{dock:"fill",tag:n.tag||n.id},"all");var o=new xui.UI.Panel(r),f=[];this.append(o,q&&q.id);xui.arr.each(p,function(u){f.push(u[0])});o.append(xui.UI.pack(f,false));return this},removePanel:function(){this.destroy(true)},getPanelPara:function(){return xui.clone(this.get(0).properties,true)},dumpContainer:function(f,n){return this.each(function(u){var w=u.box.$DataModel,B=w.valueSeparator||";",r=u.properties,C="items" in r,A,q,x,o;if(!C){if(o=u.boxing().getContainer()){o.html("",true,false,n)}}else{xui.arr.each(r.items,function(p){q=p.id;if(!f||f===true){A=1}else{x=xui.isArr(f)?f:(f+"").split(B);A=xui.arr.indexOf(x,q)!=-1}if(A){if(o=u.boxing().getContainer(q)){o.html("",true,false,n)}}})}})},getPanelChildren:function(){return this.get(0).children},getFormValues:function(o,f,p){var n={};this.getFormElements(f).each(function(u){var w=u.properties,q=u.boxing(),r=q.getUIValue();if(!o||(r+" ")!==(q.getValue()+" ")){if(p&&q.getCaption){n[w.name||u.alias]={value:r,caption:q.getCaption()}}else{n[w.name||u.alias]=r}}});return n},setFormValues:function(f,n){if(!xui.isEmpty(f)){this.getFormElements(n).each(function(r){var u=r.properties,q=r.boxing();if("value" in u&&(u.name||r.alias) in f){var p=f[u.name||r.alias],o=xui.isHash(p);q.setValue((o&&("value" in p))?p.value:p,true,"module");if(typeof(q.setCaption)=="function"&&o&&"caption" in p){q.setCaption(p.caption,null,true,"module")}}})}return this},getFormElements:function(q,u){var n=this.getChildren(q,false),o=xui.absValue.pack(n);if(u){var f=[],p,r;o.each(function(w,x){p=w.boxing();if((p.getUIValue()+" ")!==(p.getValue()+" ")){f.push(w)}});return xui.absValue.pack(f)}return o},isDirtied:function(p){var n=this.getFormElements(p).get();for(var q=0,f=n.length;q<f;q++){var r=n[q],o;if(r.box["xui.absValue"]){o=r.boxing();if((o.getUIValue()+" ")!==(o.getValue()+" ")){return true}}}return false},checkValid:function(o,n){var p=this.get(0),f=true;this.getFormElements(n).each(function(r){var u=r.properties,q=r.boxing();if(!q.checkValid()){if(!o){if(!r.beforeInputAlert||false!==q.prf.beforeInputAlert(p,r,"invalid")){xui.alert("$inline.invalid",xui.getRes("$inline.invalid")+(u.labelCaption?(" : "+u.labelCaption):""),function(){if(r&&r.renderId){q.activate()}})}return f=false}f=false}});return f},checkRequired:function(o,n){var f=true;this.getFormElements(n).each(function(r,q){var u=r.properties,p=r.boxing();if(u.required&&(!(q=p.getUIValue()))&&q!==0){if(!o){if(!r.beforeInputAlert||false!==p.prf.beforeInputAlert(profile,r,"required")){xui.alert("$inline.required",xui.getRes("$inline.required")+(u.labelCaption?(" : "+u.labelCaption):""),function(){if(r&&r.renderId){p.activate()}})}return f=false}f=false}});return f},formReset:function(f){return this.each(function(o){var q=o.properties,n=o.boxing().getFormElements();if(o.beforeFormReset&&false===o.boxing().beforeFormReset(o,n,f)){return}n.each(function(u,r){if((r=u.properties.$UIvalue)!==u.properties.value){u.boxing().setValue(r,true)}});if(o.afterFormReset){o.boxing().afterFormReset(o,n,f)}})},formSubmit:function(o,n){var r=this;if(!o&&!r.checkValid()){return}var x=r.get(0),A=x.properties,w,u=r.getFormValues(n),q;if(x.beforeFormSubmit&&false===x.boxing().beforeFormSubmit(x,u,n)){return}if(!o&&!r.checkRequired()){return}if(A.formTarget=="Alert"){u=xui.stringify(u);if(xui.Coder&&xui.Coder.formatText){u=xui.Coder.formatText(u)}alert(u)}else{if(/^\s*\{[^}]+\}\s*$/.test(A.formTarget)){w=xui.adjustVar(A.formTarget);w(u)}else{if(/^((\s*function\s*([\w$]+\s*)?\(\s*([\w$\s,]*)\s*\)\s*)(\{([^\{\}]*)\}))\s*$/.test(A.formTarget)){if(w=xui.unserialize(A.formTarget)){w(u)}}else{if(xui.APICaller&&xui.arr.indexOf(["_blank","_self","_parent","_top"],A.formTarget)==-1){q=xui.APICaller.getFromName(A.formTarget)}if(q){q.setQueryArgs(u);q.invoke()}else{xui.Dom.submit(A.formAction,u,A.formMethod,A.formTarget,A.formEnctype)}}}}r.getFormElements().updateValue();if(x.afterFormSubmit){x.boxing().afterFormSubmit(x,u,n)}},_e1:function(n,o,p,q,f){},_e2:function(n,f,o,p){},_e3:function(n,o,f,p){},_e4:function(n,q,r,f,p,o){},_e5:function(f,n,o){},_e6:function(o,f,n){},_e7:function(o,f,n){},_e8:function(n,o,f){}},Static:{$abstract:true,DataModel:{dragKey:"",dropKeys:"",overflow:{ini:xui.browser.deviceType=="touchOnly"?"auto":undefined,combobox:["","visible","hidden","scroll","auto","overflow-x:hidden;overflow-y:auto","overflow-x:auto;overflow-y:hidden"],action:function(f){var n=this;xui.arr.each(n.box.$Behaviors.PanelKeys,function(o){var p=n.getSubNode(o,true);if(f){if(f.indexOf(":")!=-1){xui.arr.each(f.split(/\s*;\s*/g),function(r){var q=r.split(/\s*:\s*/g);if(q.length>1){p.css(xui.str.trim(q[0]),xui.str.trim(q[1]||""))}});return}}p.css("overflow",f||"")})}},panelBgClr:{type:"color",ini:"",action:function(f){var n=this;xui.arr.each(n.box.$Behaviors.PanelKeys,function(o){n.getSubNode(o,true).css("background-color",f)})}},panelBgImg:{format:"image",ini:"",action:function(f){var n=this;xui.arr.each(n.box.$Behaviors.PanelKeys,function(o){n.getSubNode(o,true).css("background-image",f?("url("+xui.adjustRes(f||"")+")"):"")})}},panelBgImgPos:{ini:"",combobox:["","top left","top center","top right","center left","center center","center right","bottom left","bottom center","bottom right","0% 0%","-0px -0px"],action:function(f){var n=this;xui.arr.each(n.box.$Behaviors.PanelKeys,function(o){n.getSubNode(o,true).css("background-position",f)})}},panelBgImgRepeat:{ini:"",combobox:["","repeat","repeat-x","repeat-y","no-repeat"],action:function(f){var n=this;xui.arr.each(n.box.$Behaviors.PanelKeys,function(o){n.getSubNode(o,true).css("background-repeat",f)})}},panelBgImgAttachment:{ini:"",combobox:["","scroll","fixed"],action:function(f){var n=this;xui.arr.each(n.box.$Behaviors.PanelKeys,function(o){n.getSubNode(o,true).css("background-attachment",f)})}},conDockRelative:{ini:false,action:function(){this.adjustSize()}},conDockPadding:{ini:{left:0,top:0,right:0,bottom:0},action:function(){this.boxing().adjustDock(true)}},conDockSpacing:{ini:{width:0,height:0},action:function(){this.boxing().adjustDock(true)}},conDockFlexFill:{ini:"",combobox:["none","width","height","both"],action:function(){this.boxing().adjustDock(true)}},conDockStretch:{ini:"",combobox:["fixed","forward","rearward","stretch","0.25","0.33","0.5","0.25,0.5,0.25"],action:function(){this.boxing().adjustDock(true)}},sandboxTheme:{ini:"",action:function(n,p,q,o,f){xui.UI._refreshSBTheme(this,n,o,f)}},formMethod:{ini:"get",listbox:["get","post"]},formTarget:{ini:"Alert",combobox:["Alert","_blank","_self","_parent","_top","[framename]","[APICaller]","function(d){xui.log(d)}"]},formAction:"",formEnctype:{ini:"application/x-www-form-urlencoded",listbox:["application/x-www-form-urlencoded","multipart/form-data","text/plain"]}}}})}var m=xui.absContainer.prototype;d.beforeInputAlert=m._e6;d.beforeFormReset=d.afterFormReset=m._e7;d.beforeFormSubmit=d.afterFormSubmit=m._e8;if(l.HoverEffected){xui.each(l.HoverEffected,function(n,f){e=j[f]?l:(l[f]||(l[f]={}));if(!n){e.afterMouseover=e.afterMouseout=null}else{e.afterMouseover=h(n,"mouseover",1);e.afterMouseout=h(n,"mouseout",2)}});d.beforeHoverEffect=m._e1}if(l.ClickEffected){xui.each(l.ClickEffected,function(n,f){e=j[f]?l:(l[f]||(l[f]={}));if(!n){e.afterMousedown=e.afterMouseup=null}else{e.afterMousedown=h(n,"mousedown",1);e.afterMouseup=h(n,"mouseup",2)}});d.beforeClickEffect=m._e1}if(l.HotKeyAllowed){xui.merge(l,{beforeKeydown:function(f,n,o){if(f.onHotKeydown){return false!==f.boxing().onHotKeydown(f,xui.Event.getKey(n),n,o)}},beforeKeypress:function(f,n,o){if(f.onHotKeypress){return false!==f.boxing().onHotKeypress(f,xui.Event.getKey(n),n,o)}},beforeKeyup:function(f,n,o){if(f.onHotKeyup){return false!==f.boxing().onHotKeyup(f,xui.Event.getKey(n),n,o)}}});d.onHotKeydown=d.onHotKeypress=d.onHotKeyup=m._e2}if(l.NavKeys){xui.each(l.NavKeys,function(n,q){var f=arguments.callee,p,A=f.m1||(f.m1={KEY:1,$key:1});if(A[q]){return}var w=f.m2||(f.m2={input:1,textarea:1}),u=f.m3||(f.m3={tab:1,enter:1,up:1,down:1,left:1,right:1}),r=f.m4||(f.m4={tab:1,up:1,down:1,left:1,right:1}),x=l[q]||(l[q]={});var x=l[q]||(l[q]={});if(null===n){x.afterKeydown=null}else{x.afterKeydown=function(G,K,B){var H=xui.Event.getKey(K),M=H.key,C=H.ctrlKey,E=H.shiftKey,J=H.altKey,L=false,o=G._smartnav;if(o){var F=xui.use(B).get(0);if(w[H=F.tagName.toLowerCase()]){if(M&&H=="input"&&F.type.toLowerCase()!="text"&&F.type.toLowerCase()!="password"){L=true}else{if(u[M]){var D=xui.use(B).caret(),I=xui.use(B).get(0).value;switch(M){case"up":if(!/[\n\r]/.test(I.substr(0,D[0]))){L=true}break;case"left":if(!E&&(C||(D[0]===0&&(D[1]!==I.length||D[1]===0)))){L=true}break;case"down":if(!/[\n\r]/.test(I.substr(D[1],I.length))){L=true}break;case"right":if(!E&&(C||(D[1]===I.length&&(D[0]!==0||D[1]===0)))){L=true}break;case"enter":if(H=="input"||J){L=true}break;case"tab":L=true;break}}}}else{if(r[M]){L=true}}F=null}else{L=M==="tab"}if(L){if(G.beforeNextFocus&&false===G.boxing().beforeNextFocus(G,K,H.shiftKey,B)){return false}if(o){if(M!="tab"){xui.use(B).nextFocus(("up"==M||"left"==M)?false:true)}}}}}});d.beforeNextFocus=m._e3}if((e=l.DroppableKeys)&&e.length){xui.arr.each(e,function(f){c._droppable(f)});e=c.prototype;xui.arr.each("getDropKeys,setDropKeys".split(","),function(f){if(!e[f]){e[f]=m[f]}});if(l.PanelKeys){xui.arr.each("addPanel,removePanel,dumpContainer,getPanelPara,getPanelChildren,getFormValues,setFormValues,getFormElements,isDirtied,checkValid,checkRequired,formReset,formSubmit".split(","),function(f){if(!e[f]){e[f]=m[f]}})}c.$DataModel.dropKeys=c.$DataStruct.dropKeys="";d.onDragEnter=d.onDragLeave=d.beforeDrop=d.onDrop=d.afterDrop=d.onDropTest=d.onDropMarkShow=d.onDropMarkClear=m._e4}if((e=l.DraggableKeys)&&e.length){xui.arr.each(e,function(f){c._draggable(f)});e=c.prototype;xui.arr.each("getDragKey,setDragKey".split(","),function(f){if(!e[f]){e[f]=m[f]}});c.$DataModel.dragKey=c.$DataStruct.dragKey="";d.onGetDragData=d.onStartDrag=d.onDragStop=m._e5}if((e=l.NoDraggableKeys)&&e.length){c.NoDraggableKeys=e}if((e=l.NoDroppableKeys)&&e.length){c.NoDroppableKeys=e}if((e=l.PanelKeys)&&e.length){e=c.prototype;xui.arr.each("overflow,panelBgClr,panelBgImg,panelBgImgPos,panelBgImgRepeat,panelBgImgAttachment,conDockRelative,conDockPadding,conDockSpacing,conDockFlexFill,conDockStretch,sandboxTheme,formMethod,formTarget,formAction,formEnctype".split(","),function(q){var p="get"+xui.str.initial(q),n;if(!e[p]){e[p]=m[p]}p="set"+xui.str.initial(q);if(!e[p]){e[p]=m[p]}n=xui.absContainer.$DataModel[q];c.$DataStruct[q]=xui.isSet(n.ini)?xui.copy(n.ini):"";c.$DataModel[q]=xui.copy(n)});xui.merge(d,xui.absContainer.$EventHandlers);c["xui.absContainer"]=true}c.setEventHandlers(d)},addTemplateKeys:function(c){var d=this,e=d.KEY,g=arguments.callee,f=g._reg||(g._reg=/\./g);xui.arr.each(c,function(h){d.$cssKeys[h]=(d.$Keys[h]=h=="KEY"?e:e+"-"+h).replace(f,"-").toLowerCase().replace("xui-ui","xui")});return d},_refreshSBTheme:function(e,h,n,j){var g=e.getDomId(),c=g+"sandboxtheme",m=this._getThemePrevId(e),d=xui(c).get(0),f=function(o){xui.CSS._appendSS(e.getRootNode(),xui.UI._adjustCSS(o,m,n),c,true);if(e.$inDesign){e.boxing().reLayout(true).getChildren(true,"recurse").reLayout(true)}};if(d){d.disabled=true;xui(c).remove(false)}if(h){if(/^[a-zA-Z-]+$/.test(h+"")&&(h+"")!=="default"){var l=xui.getPath("xui.appearance."+h,"");xui.getFileAsync(l+"theme.css",function(o){f(o.replace(/\.setting-uikey\{[^}]+\}/,"").replace(/url\(([^)]+)\)/g,"url("+l+"$1)"));xui.tryF(j,[e,h])})}else{f(h+"")}}},_getThemePrevId:function(c){return c?"#"+(c["xui.UIProfile"]?c.getDomId():c).replace(/([.:])/g,"\\$1"):""},_adjustCSS:function(d,e,c){e=e||"";if(c){d=xui.Coder.replace(d,[[/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)/,"$0"],[/\{[^}]*\}/,"$0"],[/([^\/{},]+)/,function(f){return f[0].replace(/([^\s>]+)/,"$1"+c)}]])}return d.replace(/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)/g,"").replace(/^\s*(\.)/,function(g,f){return e+" "+f}).replace(/([},])\s*(\.)/g,function(g,f,h){return f+"\n"+e+" "+h}).replace(/([{;])\s*(.)/g,function(g,f,h){return f+"\n"+(h=="}"?"":"    ")+h}).replace(/url\(([^)]+)\)/g,function(g,f){return"url("+xui.adjustRes(f,0,1)+")"})},setAppearance:function(c){xui.merge(this.$Appearances,c,"all");return this},getAppearance:function(){return this.$Appearances},setTemplate:function(f,q){if(f){var p=this,n=p.$tagName||(p.$tagName={}),m=arguments.callee,c=m.r2||(m.r2=/[a-z]/),l=xui.absObj.$specialChars,g=["KEY"],h=m._fun||(m._fun=function(w,r,j){var x,u;for(u in w){if(!l[u.charAt(0)]){if(!c.test(u)){r[r.length]=u;x=w[u];if(x&&typeof x=="object"){j[u]=x.tagName||"";arguments.callee(x,r,j)}}}}}),o;n.KEY=f.tagName||"";h(f,g,n);p.addTemplateKeys(g);o=p.$Templates;if(typeof q=="string"){f._subid=q;o[q]=f}else{o._=f}if(o=f.$submap){for(var e in o){for(var d in o[e]){m.call(p,o[e],d)}}}}return this},getTemplate:function(c){return this.$Templates[c||"_"]},setBehavior:function(d){if(d){var p=this,l=xui.$cache.UIKeyMapEvents,e=p.$key,C=xui.absObj.$specialChars,c=xui.Event.$eventhandler,g=xui.Event._eventMap,D=arguments.callee,B=D.r1||(D.r1=/[a-z]/),x=D.r2||(D.r2=/^(on|before|after)/),n=p.$Behaviors,r,A,w,u,q,h,f;p._setDefaultBehavior(d);if(d.KEY){xui.merge(d,d.KEY,"all");delete d.KEY}for(A in d){q=d[A];if(!C[A.charAt(0)]){if(!B.test(A)){r=n[A]||(n[A]={});for(w in q){h=q[w];if(!C[w.charAt(0)]){if(h){r[w]=h}else{delete r[w]}}}}else{if(x.test(A)){if(q){n[A]=q}else{delete n[A]}}else{n[A]=q}}}}xui.filter(l,function(m,j){return !(j==e||j.indexOf(e+"-")==0)});for(A in n){q=n[A];if(!C[A.charAt(0)]){if(!B.test(A)){for(w in q){if(!C[w.charAt(0)]&&q[w]){u=e+"-"+A;(l[u]||(l[u]={}))["on"+g[w]]=c}}}else{if(x.test(A)&&q){u=e;(l[u]||(l[u]={}))["on"+g[A]]=c}}}}}return p},getBehavior:function(){return this.$Behaviors},$applyCSS:function(){var f=xui.UI,e=f.$cache_css,d=f.$cache_css2;if(!f.$cssNo){f.$cssNo=1;var c=xui.browser;xui("body").addClass((c.ie?("xui-css-ie xui-css-ie"+c.ver+" "):c.gek?("xui-css-gek xui-css-gek"+c.ver+" "):c.kde?("xui-css-kde xui-css-kde"+c.ver+" "):c.opr?("xui-css-opr xui-css-opr"+c.ver+" "):"")+(c.isSafari?"xui-css-safari ":c.isChrome?"xui-css-chrome ":"")+(c.isMac?"xui-css-mac":c.isLinux?"xui-css-linux ":""));xui("html").addClass("xui-css-base xui-css-viewport xui-uicontainer"+(c.isStrict?" xui-css-strict":""))}if(e){xui.CSS.includeLink(xui.ini.path+"iconfont/iconfont.css","xui-font-icon",true);xui.CSS.addStyleSheet(e,"xui.UI-CSS"+(f.$cssNo++));xui.UI.$cache_css=""}if(d){xui.CSS.addStyleSheet(d,"xui.UI-CSS"+(f.$cssNo++),true);xui.UI.$cache_css2=""}},buildCSSText:function(q){var E=this,A=arguments.callee,f=A._r1||(A._r1=/(^|\s|,)([0-9A-Z_]+)/g),u=[],c=[],w=xui.browser,m=w.ie6,d=w.ie,x=w.gek,B=E.$cssKeys,D,C,e;for(var p in q){if(e=q[p]){D=p.replace(f,function(j,h,l){return h+"."+(B[l]||l)}).toLowerCase();e.$order=parseInt(e.$order,10)||0;e.$=D;u[u.length]=e}}xui.arr.stableSort(u,function(h,j){h=h.$order||0;j=j.$order||0;return h>j?1:h==j?0:-1});for(var p=0,g=u.length;p<g;){e=u[p++];c[c.length]=e.$+"{";if(D=e.$before){c[c.length]=D}if(D=e.$text){c[c.length]=D}for(var n in e){if(n.charAt(0)=="$"){continue}if((C=e[n])||e[n]===0){n=n.replace(/_[0-9]+$/,"");switch(typeof C){case"string":case"number":c[c.length]=n+":"+C+";";break;case"function":c[c.length]=n+":"+C(E.KEY)+";";break;default:xui.arr.each(C,function(h){if(h){c[c.length]=n+":"+h+";"}})}}}if(C=e.$after){c[c.length]=C}c[c.length]="}"}return c.join("")},_prepareCmds:function(h,w,f){var q=this,e=h.properties,d=w.tagCmds||xui.clone(e.tagCmds,true);if(d&&d.length){var g=xui.UI.$tag_subId,r=[],o=[],n;for(var m=0,u=d,j=u.length;m<j;m++){if(typeof u[m]=="string"){n={id:u[m]}}else{n=xui.clone(u[m])}if(f&&xui.isFun(f)){if(!f(n)){continue}}else{if(w.tag&&w.tag.match((new RegExp("\\bno~"+n.id+"\\b")))){continue}}if("id" in n){n.id+=""}else{n.id="cmds"+h.$xid+m}if(n.object){n.object=q._prepareInlineObj(h,n,e.tabindex);n.type="profile"}else{if(!"caption" in n){n.caption=n.id}if(!("tips" in n)){n.tips=n.caption}n.id=n.id.replace(/[^0-9a-zA-Z]/g,"");if(!n.type){n.type="text"}if(n.caption){n.caption=xui.adjustRes(n.caption)}if(n.tips){n.tips=xui.adjustRes(n.tips)}if(n.image){n.image=xui.adjustRes(n.image)||xui.ini.img_bg}n._style="";if("width" in n){n._style+=n.width+(xui.isFinite(n.width)&&"px")+";"}if("height" in n){n._style+=n.height+(xui.isFinite(n.height)&&"px")+";"}n[g]=(w[g]?w[g]:"")+"_"+n.id}if(n.location=="left"){o.push(n)}else{r.push(n)}}w.ltagCmds=o;w.rtagCmds=r}w._ltagDisplay=w.ltagCmds?"":"display:none";w._rtagDisplay=w.rtagCmds?"":"display:none"},$getTagCmdsTpl:function(d){var c={ltagCmds:function(j,h,g,f,e){var l=arguments.callee,m=l._m||(l._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(j,h,g,"tagCmds"+(m[g.type]||".button"),e)},rtagCmds:function(j,h,g,f,e){var l=arguments.callee,m=l._m||(l._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(j,h,g,"tagCmds"+(m[g.type]||".button"),e)},"tagCmds.text":{CMD:{tagName:"span",title:"{tips}",style:"{_style}{itemStyle}",className:"xui-node xui-tag-cmd {itemClass}",tabindex:"{_tabindex}",text:"{caption}"}},"tagCmds.button":{CMD:{tagName:"button",title:"{tips}",style:"{_style}{itemStyle}",className:"xui-node xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius xui-list-cmd xui-tag-cmd {itemClass}",tabindex:"{_tabindex}",text:"{caption}"}},"tagCmds.image":{CMD:{tagName:"image",title:"{tips}",src:"{image}",border:"0",style:"{_style}{itemStyle}",className:"xui-node xui-tag-cmd {itemClass}",tabindex:"{_tabindex}",alt:"{caption}"}}};return d?c["tagCmds."+d]:c},_droppable:function(f){var d=this,e=xui.Event.$eventhandler2,l=d.$Behaviors,c=f=="KEY"?l:(l[f]||(l[f]={})),h=xui.$cache.UIKeyMapEvents,j=f=="KEY"?d.KEY:(d.KEY+"-"+f),g=h[j]||(h[j]={});xui.merge(c,{beforeMouseover:function(p,w,m){var n=p.properties;if(n.disabled||n.readonly){return}if(p.behavior.NoDroppableKeys){var q=p.getKey(xui.Event.getSrc(w).id||"").split("-")[1];if(q&&xui.arr.indexOf(p.behavior.NoDroppableKeys,q)!=-1){return}}var A=m,F,D=xui.DragDrop,o=D.getProfile(),C=o.dragKey,r=o.dragData,B=(F=p.box.$Behaviors.PanelKeys)&&xui.arr.indexOf(F,p.getKey(m,true))!==-1,E,u,x;if(r&&((n.dragSortable&&p.$xid==xui.get(r,["profile","$xid"])&&!B)||(C&&(new RegExp("\\b"+C+"\\b")).test(p.box.getDropKeys(p,A))))){u=p.boxing();if(u.getItemByDom){E=u.getItemByDom(m)}x=[p,w,A,C,r,E];if((F=p.onDropTest)&&(false===u.onDropTest.apply(u,x))){return}if((F=p.box._onDropTest)&&(false===F.apply(p.host||p,x))){return}D.setDropElement(m);if(p.onDropMarkShow&&(false===u.onDropMarkShow.apply(u,x))){}else{if((F=p.box._onDropMarkShow)&&(false===F.apply(p.host||p,x))){}else{xui.resetRun("setDropFace",D.setDropFace,0,[A],D)}}if(F=p.box._onDragEnter){F.apply(p.host||p,x)}if(p.onDragEnter){u.onDragEnter.apply(u,x)}}},beforeMouseout:function(o,r,m){if(o.properties.disabled||o.properties.readonly){return}var x=xui.DragDrop,n=x.getProfile(),w=n.dragKey,p=n.dragData,A,q,u;if(n.dropElement==m){q=o.boxing();if(q.getItemByDom){A=q.getItemByDom(m)}u=[o,r,m,w,p,A];if(o.onDropMarkClear&&(false===q.onDropMarkClear.apply(q,u))){}else{if((t=o.box._onDropMarkClear)&&(false===t.apply(o.host||o,u))){}else{xui.resetRun("setDropFace",x.setDropFace,0,[null],xui.DragDrop)}}if(t=o.box._onDragLeave){t.apply(o.host||o,u)}if(o.onDragLeave){q.onDragLeave.apply(q,u)}x.setDropElement(null)}},beforeDrop:function(o,r,m){var x=xui.DragDrop,n=x.getProfile(),w=n.dragKey,p=n.dragData,B,A,u,q=o.boxing();if(q.getItemByDom){B=q.getItemByDom(m)}u=[o,r,m,w,p,B];if(o.onDropMarkClear&&(false===q.onDropMarkClear.apply(q,u))){}else{if((A=o.box._onDropMarkClear)&&(false===A.apply(o.host||o,u))){}}if(o.beforeDrop&&(false===q.beforeDrop.apply(q,u))){return}if(!o.onDrop||(o.onDrop&&false===q.onDrop.apply(q,u))){if(o.box._onDrop){o.box._onDrop.apply(o.host||o,u)}}if(o.afterDrop){q.afterDrop.apply(q,u)}}},"all");xui.merge(g,{onmouseover:e,onmouseout:e,ondrop:e,afterDrop:e,beforeDrop:e});return d},_draggable:function(f){var d=this,e=xui.Event.$eventhandler2,l=d.$Behaviors,c=f=="KEY"?l:(l[f]||(l[f]={})),h=xui.$cache.UIKeyMapEvents,j=f=="KEY"?d.KEY:(d.KEY+"-"+f),g=h[j]||(h[j]={});xui.merge(c,{beforeMousedown:function(p,u,m){if(xui.Event.getBtn(u)!="left"){return}var n=p.properties;if(n.disabled){return}if(!(n.dragSortable||n.dragKey)){return}if(p.behavior.NoDraggableKeys){var q=p.getKey(xui.Event.getSrc(u).id||"").split("-")[1];if(q&&xui.arr.indexOf(p.behavior.NoDraggableKeys,q)!=-1){return}}var x=xui.Event.getPos(u),r=p.boxing(),w=[p,u,m],A;if(p.onStartDrag&&(false===r.onStartDrag.apply(r,w))){}else{if((A=p.box._onStartDrag)&&(false===A.apply(p.host||p,w))){}else{var o=p.box;xui.use(m).startDrag(u,{dragType:"icon",targetLeft:x.left+12,targetTop:x.top+12,dragCursor:"pointer",dragDefer:2,dragKey:o.getDragKey(p,m),dragData:o.getDragData(p,u,m)})}}},beforeDragbegin:function(m,n,o){xui.use(o).onMouseout(true,{$force:true}).onMouseup(true)},beforeDragstop:function(n,o,p){var m;if(n.onDragStop){n.boxing().onDragStop(n.e,p)}if(m=n.box._onDragStop){m.apply(n.host||n,arguments)}}},"all");xui.merge(g,{onmousedown:e,ondragbegin:e});return d},_adjustConW:function(g,d,n,o){var e=g.properties;if(!e.conDockRelative){return}var f=e.conDockPadding,m=e.conDockSpacing,p=e.conDockStretch,j=d.children(),h=j.size();if(!h){return}j.each(function(u,l,q,r,c){if(o&&u!=o){return}if(u.id&&(q=xui.$cache.profileMap[u.id])&&q.Class&&q.Class["xui.UIProfile"]){c=q.properties.dockStretch||p;r=xui(u).css("position");if(r=="relative"||r=="static"){if(q){xui(u).css({position:"relative",left:f.left+"px",top:"0",right:"auto",bottom:"auto","margin-top":(l===0?f.top:m.height)+"px"});xui(u).width(q.$forceu(q.$px(q.properties.width=n)-f.left-f.right))}}}})},adjustData:function(e,p,m,n){if(!m){m={}}var h=e.box,j=h.$DataModel,f,d;for(f in p){if(f.charAt(0)=="$"){continue}if(p.hasOwnProperty(f)&&!m.hasOwnProperty(f)){m[f]=typeof(d=p[f])=="string"?f=="html"?xui.adjustRes(d,0,1):xui.adjustRes(d,true):d}}if("hidden" in p){m.hidden=p.hidden}var l=p.itemFilter||e.$itemFilter;if(l){m.hidden=!!l(p,e)}m._itemDisplay=p.hidden?"display:none;":"";if("disabled" in j){m.disabled=(xui.isSet(m.disabled)&&m.disabled)?"xui-ui-itemdisabled":""}if("readonly" in j){m.readonly=(xui.isSet(m.readonly)&&m.readonly)?"xui-ui-itemreadonly":""}m.imageDisplay=(m.imageClass||m.image||m.iconFontCode)?"":"display:none";var c;if(m.iconFontCode){if(m.imageClass){var g=m.imageClass.split(/\s+/);xui.filter(g,function(o){return !xui.builtinFontIcon[o]});m.imageClass=g.join(" ")}}else{if(m.imageClass){var g=m.imageClass.split(/\s+/);xui.arr.each(g,function(o){if(xui.builtinFontIcon[o]){c=xui.builtinFontIcon[o];return}},null,true);if(c&&xui.__iefix2){m.iconFontCode=c;xui.filter(g,function(o){return !xui.builtinFontIcon[o]})}m.imageClass=g.join(" ")}if(!c){if(m.image){m.imageClass="xui-icon-placeholder";m.backgroundImage="background-image:url("+m.image+");"}if(m.imagePos){m.backgroundPosition="background-position:"+m.imagePos+";"}else{if(m.image){m.backgroundPosition="background-position:center;"}}if(m.imageBgSize){m.backgroundSize="background-size:"+m.imageBgSize+";"}else{if(m.image){m.backgroundSize="background-size:initial;"}}if(m.imageRepeat){m.backgroundRepeat="background-repeat:"+m.imageRepeat+";"}else{if(m.image){m.backgroundRepeat="background-repeat:no-repeat;"}}}}if(!m.image&&h.IMGNODE){m.image=xui.ini.img_blank}if((typeof(d=m.renderer)=="function")||(typeof(d=p.renderer)=="function")){m.caption=xui.adjustRes(d.call(e,p,m))}return m},$iconAction:function(h,e,g){var l=h.properties,f=h.getSubNode(e||"ICON"),j=(l.imageClass||l.image||l.iconFontCode)?"":"display:none",d;f.css("backgroundImage","none");f.removeClass("xui-icon-placeholder");if(l.imageClass){f.removeClass(l.imageClass)}if(g){f.removeClass(g)}f.html("");if(l.iconFontCode){f.html(l.iconFontCode);if(l.imageClass){var c=l.imageClass.split(/\s+/);xui.filter(c,function(m){return !xui.builtinFontIcon[m]});f.addClass(c.join(" "))}}else{if(l.imageClass){var c=l.imageClass.split(/\s+/);xui.arr.each(c,function(m){if(xui.builtinFontIcon[m]){d=xui.builtinFontIcon[m];return}},null,true);if(d&&xui.__iefix2){l.iconFontCode=d;xui.filter(c,function(m){return !xui.builtinFontIcon[m]})}f.addClass(c.join(" "))}if(l.iconFontCode){f.html(l.iconFontCode)}if(!d){if(l.image){f.addClass("xui-icon-placeholder");f.css("backgroundImage","url("+xui.adjustRes(l.image)+")")}}}f.css("display",j)},cacheData:function(c,d){xui.set(xui.$cache,["UIDATA",c],d);return this},getCachedData:function(c){var d=xui.get(xui.$cache,["UIDATA",c]);if(typeof d=="function"){d=d()}return d},Behaviors:{HotKeyAllowed:true,onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f)!==false}}},DataModel:{autoTips:true,className:{ini:"",action:function(c,d){if(d){this.getRoot().removeClass(d)}this.getRoot().addClass(c);delete this._nodeEmSize}},disableClickEffect:false,disableHoverEffect:false,disableTips:false,disabled:{ini:false,action:function(c){var d=this.getRoot();if(c){d.addClass("xui-ui-disabled")}else{d.removeClass("xui-ui-disabled")}}},spaceUnit:{listbox:["","px","em"],action:function(){this.boxing().reLayout(true).getChildren(true,"recurse").reLayout(true)}},defaultFocus:false,hoverPop:{ini:"",action:function(d,f){var g=this,c=g.boxing(),h=g.properties,e;if(!g.destroyed&&g.host){if(f&&(e=g.host[f])&&(e=e.get(0))&&e.renderId&&!e.destroyed){c.hoverPop(e,null)}if(d&&(e=g.host[d])&&(e=e.get(0))&&e.renderId&&!e.destroyed){c.hoverPop(e,h.hoverPopType,function(){e.properties.tagVar.hoverFrom=arguments},function(){delete e.properties.tagVar.hoverFrom},e.getRoot().parent(),d)}}}},hoverPopType:{ini:"outer",dftWidth:180,listbox:["outer","inner","outerleft-outertop","left-outertop","center-outertop","right-outertop","outerright-outertop","outerleft-top","left-top","center-top","right-top","outerright-top","outerleft-middle","left-middle","center-middle","right-middle","outerright-middle","outerleft-bottom","left-bottom","center-bottom","right-bottom","outerright-bottom","outerleft-outerbottom","left-outerbottom","center-outerbottom","right-outerbottom","outerright-outerbottom"]},locked:{ini:false,action:function(){if(this.$inDesign){this.boxing().refresh(true)}}},dock:{ini:"none",listbox:["none","top","bottom","left","right","center","middle","origin","width","height","fill","cover"],action:function(c){xui.UI.$dock(this,true,true)}},dockIgnore:{ini:false,action:function(d){var c=this;if(c.properties.dock!="none"){xui.UI.$dock(c,true,true)}}},dockFloat:{ini:false,action:function(d){var c=this;if(c.properties.dock!="none"){xui.UI.$dock(c,true,true)}}},dockOrder:{ini:1,action:function(d){var c=this;if(c.properties.dock!="none"){xui.UI.$dock(c,true,true)}}},showEffects:"",hideEffects:"",dockMargin:{ini:{left:0,top:0,right:0,bottom:0},action:function(d){var c=this;d=d||{};d.left=d.left||0;d.top=d.top||0;d.right=d.right||0;d.bottom=d.bottom||0;if(c.properties.dock!="none"){xui.UI.$dock(c,true,true)}}},dockMinW:{$spaceunit:1,ini:0},dockMinH:{$spaceunit:1,ini:0},dockMaxW:{$spaceunit:1,ini:0},dockMaxH:{$spaceunit:1,ini:0},dockIgnoreFlexFill:{ini:false,action:function(d){var c=this;if(c.properties.dock!="none"){xui.UI.$dock(c,true,true)}}},dockStretch:{ini:"",combobox:["fixed","forward","rearward","stretch","0.25","0.33","0.5"],set:function(d){var e=this,c=e.properties;c.dockStretch=d;if(c.dock=="fill"||c.dock=="cover"||c.dock=="width"||c.dock=="height"){if(d!="forward"&&d!="rearward"&&d!="stretch"){c.dockStretch="stretch"}}if(e.rendered&&c.dock!="none"){xui.UI.$dock(e,true,true)}}},tips:{ini:"",action:function(c){var d=xui.Tips;if(d&&d._showed){if(xui.UIProfile.getFromDom(d._markId)==this){d.setTips(c,true)}}}},rotate:{ini:0,action:function(d){var c=this.getRoot(),e=this.boxing();d=parseFloat(d)||0;d=d%360;if(d<0){d=d+360}if(this.box["xui.svg"]){e.setAttr("KEY",{transform:"r"+d},false)}else{c.rotate(d)}}},animConf:{hidden:true,ini:{}},activeAnim:{ini:"",action:function(d){var h=this,g=h.getRootNode(),j=xui.getNodeData(g,"_inthread"),f=xui.getNodeData(g,"_animationreset");if(j&&xui.Thread.isAlive(j)){xui.Thread(j).abort("force");xui.setNodeData(g,"_inthread",null)}if(typeof f=="function"){f();xui.setNodeData(g,"_animationreset",null)}if(d){var c=this.properties.animConf,e=c[d];if(!e){e=xui.Dom.$preDefinedAnims[d]}if(e&&e.params){h.getRoot().animate(e.params,e.onStart,e.onEnd,e.duration||200,null,e.type||"linear",null,e.unit,e.returned,e.times).start()}}}}},EventHandlers:{beforeRender:function(c){},onRender:function(c){},onLayout:function(c){},onResize:function(e,d,c){},onMove:function(e,g,f,d,c){},onDock:function(c,d){},beforePropertyChanged:function(d,c,e,f){},afterPropertyChanged:function(d,c,e,f){},beforeAppend:function(c,d){},afterAppend:function(c,d){},beforeRemove:function(e,f,d,c){},afterRemove:function(e,f,d,c){},onDestroy:function(c){},beforeDestroy:function(c){},afterDestroy:function(c){},onShowTips:function(c,d,e){},onContextmenu:function(c,f,g,d){}},RenderTrigger:function(){var g=this,c=g.boxing(),h=g.properties,d,f=g.getRootNode(),e=f.style;if(h.sandboxTheme){xui.UI._refreshSBTheme(g,h.sandboxTheme)}if(g.box._onresize){if(!g._syncResize&&!g.box._syncResize){var e=g.getRootNode().style,d;if((d=e.visibility)!="hidden"){g._$visibility=d;e.visibility="hidden"}e=null}xui.UI.$tryResize(g,h.width,h.height)}if(h.disabled){c.setDisabled(true,true)}if(h.rotate){c.setRotate(h.rotate,true)}if(!g.$inDesign&&h.hoverPop){xui.asyRun(function(){c.setHoverPop(h.hoverPop,true)})}if(g.behavior.PanelKeys){if(d=h.dataBinder){c.setDataBinder(d,true)}}g._inValid=1},$doResize:function(g,c,f,l,d){if(l||((c||f)&&(g._resize_w!=c||g._resize_h!=f))){if(!g.getRootNode()){return false}g._resize_w=c;g._resize_h=f;xui.tryF(g.box._onresize,[g,c,f,l,d],g.box);if(g.onResize){g.boxing().onResize(g,c,f)}}if("_$visibility" in g){var j=g.getRootNode(),e=j.style;if(e.visibility!="visible"&&!xui.getNodeData(j,"_setVisibility")){e.visibility=g._$visibility}j=e=null;xui.clearTimeout(g._$rs_timer);delete g._$rs_timer;delete g._$rs_args;delete g._$visibility}},$tryResize:function(l,c,j,m,f){var g=l.box,e=g._onresize;if(e&&(m||c||j)){c=((c===""||c=="auto")?"auto":((xui.isFinite(c)||l.$isPx(c))?parseFloat(c):c))||null;j=((j===""||j=="auto")?"auto":((xui.isFinite(j)||l.$isPx(j))?parseFloat(j):j))||null;if("_$visibility" in l){var d=l._$rs_args;if(!d){d=l._$rs_args=[l,null,null];l._$rs_timer=xui.asyRun(function(){if(!l.box){return}if(l&&l._$rs_args){xui.UI.$doResize.apply(null,l._$rs_args)}})}d[1]=c;d[2]=j;d[3]=m;d[4]=f}else{xui.UI.$doResize(l,c,j,m,f)}}},LayoutTrigger:function(){var f=this,c=f.boxing(),h=f.properties;delete f._nodeEmSize;if(h.position=="absolute"){if(h.dock&&h.dock!="none"){if(!f.$laidout){f.$laidout=1;var g=f.getRootNode().style,j=0+f.$picku(g.width),e=0+f.$picku(g.height);switch(h.dock){case"top":case"bottom":case"width":g.width=0;break;case"left":case"right":case"height":g.height=0;break;default:g.width=0;g.height=0}}xui.UI.$dock(this,false,true)}}else{if(xui.get(f,["parent","properties","conDockRelative"])){var d=f.parent;xui.UI._adjustConW(d,f.getRoot().parent(),f.getRoot().parent().width(),f.getRootNode())}}},$dock_args:["top","bottom","left","right","center","middle","width","height"],$dock_map:{middle:1,center:1},$dock:function(m,h,E){var L=m.getRoot(),F=m.box["xui.svg"],g=m.boxing(),M=-1,K=-1,I=-1,H=-1,G=xui((L.get(0)&&L.get(0).parentNode)||m.$dockParent),j=function(f){return xui.browser.ie&&xui.browser.ver<=6?f-f%2:f},B=function(R,U){var V,Z,W,Y,X;if(U){V=xui.win.$getEvent("onSize","dock")}else{if(R&&R.get(0)){V=R.$getEvent("onSize","dock")}}if(V&&V.dockall&&V.dockall.length){for(var T=0,S=V.dockall.length,aa;T<S;T++){aa=V.dockall[T].$dockType;switch(aa){case"fill":case"cover":Y=X=1;break;case"top":case"bottom":case"width":Y=1;break;case"left":case"right":case"height":X=1;break}}}if(Y&&X){W="xui-css-noscroll"}else{if(Y){W="xui-css-noscrollx"}else{if(X){W="xui-css-noscrolly"}}}if(U){xui("html").removeClass(/^xui-css-noscroll(x|y)?$/);Z=xui("body").get(0);if(Z){Z.scroll=""}if(W){if(Y){xui.win.scrollLeft(0)}if(X){xui.win.scrollTop(0)}xui("html").addClass(W);if(Y&&X&&Z){Z.scroll="no"}}}else{R.removeClass(/^xui-css-noscroll(x|y)?$/);if(W){if(Y){R.scrollLeft(0)}if(X){R.scrollTop(0)}R.addClass(W)}}},e=function(R,T,f,S){var p;if(parseFloat(T["dockMin"+f])&&(p=R.$px(T["dockMin"+f]))){S=j(p<=S?S:p)}if(parseFloat(T["dockMax"+f])&&(p=R.$px(T["dockMax"+f]))){S=j(p<=S?p:S)}return S},u=function(R,V,f,S,p,U){var T=xui.$us(R),W=function(X){return R.$forceu(X,T>0?"em":"px",null,true)};if(("left" in U)&&R.$px(p.left)!==U.left){U.left=W(U.left)}if(("top" in U)&&R.$px(p.top)!==U.top){U.top=W(U.top)}if(("right" in U)&&R.$px(p.right)!==U.right){U.right=W(U.right)}if(("bottom" in U)&&R.$px(p.bottom)!==U.bottom){U.bottom=W(U.bottom)}if(("width" in U)&&R.$px(p.width)!==U.width){U.width=W(U.width)}if(("height" in U)&&R.$px(p.height)!==U.height){U.height=W(U.height)}if(!xui.isEmpty(U)){if(F){f._setBBox(U)}else{S.cssRegion(U,true)}}},N=function(Z,ai,S,R,p,f,aj){if(!Z.prevLine.length){return}var U=[],ae,ab,ag,V,af,T,ad,ah,Y=Z.prevLine.length-1,ac=0,W=Z[f],X=xui.CSS;S-=Y*ai;xui.arr.each(Z.prevLine,function(ak){if(ak.pct){U.push(ak)}else{S-=ak.region[R]+ak.margin[f]+ak.margin[aj]}});if(ag=U.length){var aa=0;xui.arr.each(U,function(al,ak){aa+=al.pct});xui.arr.each(U,function(al,ak){T=al.prop;V=al.region;nodefz=al.nodefz;al.pct=al.pct/aa;ae=S*al.pct-al.margin[f]-al.margin[aj];if(parseFloat(T[p])&&(ab=X.$px(T[p],nodefz))){ae=j(ab<=ae?ab:ae)}if(ak==ag-1){ae=S-ac;if(parseFloat(T[p])&&(ab=X.$px(T[p],nodefz))){ae=j(ab<=ae?ab:ae)}V[R]=ae}else{ac+=(V[R]=parseInt(ae,10))}})}xui.arr.each(Z.prevLine,function(al,ak){V=al.region;V[f]=parseInt(W+al.margin[f],10);W+=V[R]+al.margin[f]+al.margin[aj]+ai;u(al.profile,al.isSVG,al.ins,al.node,al.style,V)});Z.prevLine=[]};if(!G.get(0)){return}var l=m.properties,r=xui.$us(l),Q=function(f,p){return m.$forceu(f,r>0?"em":"px",p,true)},D=l.dockMargin,o="auto",J=l.dock||"none",C=xui.Event.getId(G.get(0)),O=function(f,p){f=parseInt(f.properties.dockOrder,10)||0;p=parseInt(p.properties.dockOrder,10)||0;return f>p?1:f==p?0:-1},n,A="$inMatrix",P,x,w,q=L._getEmSize(),d={top:Q(D.top||0,q),left:Q(D.left||0,q),right:Q(D.right||0,q),bottom:Q(D.bottom||0,q)};if(F){var c=g._getBBox();l.left=c.x;l.top=c.y;l.width=c.width;l.height=c.height}if(G.get(0)===document.body||G.get(0)===document||G.get(0)===window){C="!document";w=true}if(C&&(C==xui.Dom._ghostDivId||xui.str.startWith(C,xui.Dom._emptyDivId))){return}if(m.$dockParent!=C||m.$dockType!=J||h){m.$dockParent=C;m.$dockType=J;M=m.unLink("$dockall");K=m.unLink("$dock");I=m.unLink("$dock1");H=m.unLink("$dock2");switch(J){case"middle":n={right:l.right==o?o:(l.right||""),bottom:o,left:l.left==o?o:(l.left||""),width:l.width||"",height:l.height||""};break;case"center":n={right:o,bottom:l.bottom==o?o:(l.bottom||""),top:l.top==o?o:(l.top||""),width:l.width||"",height:l.height||""};break;case"origin":n={right:o,bottom:o,width:l.width||"",height:l.height||""};break;case"top":n={left:d.left,right:d.right,bottom:o,height:l.height||""};break;case"bottom":n={left:d.left,right:d.right,top:o,height:l.height||""};break;case"left":n={right:o,width:l.width||""};break;case"right":n={left:o,width:l.width||""};break;case"width":n={bottom:o,height:l.height||"",top:l.top||""};break;case"height":n={right:o,width:l.width||"",left:l.left||""};break;case"fill":case"cover":n={right:o,bottom:o};break;case"none":n={left:l.left,top:l.top,width:l.width||"",height:l.height||""};break}if(L.get(0)){if(F){g._setBBox(n)}else{L.cssRegion(n,true)}}if(w){G=xui.win;if(!xui.$cache._resizeTime){xui.$cache._resizeTime=1}}if(J!="none"){P=G.$getEvent("onSize","dock");if(!P){P=function(ak){var ae=arguments.callee,aB=xui.CSS,al=xui.UI.$dock_map,ag=xui.UI.$dock_args,an=ae.rePos,aw=ae.pid,aL=ae.pid=="!window"||ae.pid=="!document",az=aL?0:xui.UIProfile.getFromDom(aw),ax=az&&az.properties,aF=az&&az.getRoot(),au=aF&&aF.get(0)&&aF.get(0).style,ab=au&&aF._getEmSize(),am=(ax&&("conDockSpacing" in ax))?ax.conDockSpacing:{width:0,height:0},af=(ax&&("conDockPadding" in ax))?ax.conDockPadding:{left:0,top:0,right:0,bottom:0},U=(ax&&("conDockFlexFill" in ax))?ax.conDockFlexFill:"",T=(ax&&("conDockStretch" in ax))?ax.conDockStretch.split(/[,;\s]+/):[],V=U=="width"||U=="both",ac=U=="height"||U=="both",ap=aL?xui.win:xui(aw);if(!ap.get(0)){return}var aa=ap.get(0),aD=aa.style,aq=xui.$us(l),W=ap._getEmSize(),ay=function(aM,aN){return aB.$forceu(aM,aq>0?"em":"px",aN||W)},S,aI,aH,aE,ah,p,av=aL?xui("body").get(0).style:aD,aj=av.overflow,Z=av.overflowX,Y=av.overflowY;if(aD){aD.overflow=aD.overflowX=aD.overflowY="hidden"}var f=(aD&&aB.$px(aD.width,W))||ap.width()||0,R=(aD&&aB.$px(aD.height,W))||ap.height()||0;if(aD){aD.overflow=aj;aD.overflowX=Z;aD.overflowY=Y}am={width:aB.$px(am.width||0,ab),height:aB.$px(am.height||0,ab)};af={left:aB.$px(af.left||0,ab),top:aB.$px(af.top||0,ab),right:aB.$px(af.right||0,ab),bottom:aB.$px(af.bottom||0,ab)};if(ak.$dockid||!aL||((xui.stamp()-xui.$cache._resizeTime)>50)){S={left:af.left,top:af.top,right:af.right,bottom:af.bottom,width:f,height:R};S.preX=S.oX=S.left;S.preY=S.oY=S.top;S.prevLine=[];S.ww=S.width-S.left-S.right;S.hh=S.height-S.top-S.bottom;S.leftHolder=S.topHolder=S.rightHolder=S.bottomHolder=0;if(V||ac){var aK=0,aJ=0,X=0,aA=0,aC,aG=0,ad=function(aO,aP,aM,aQ,aN){aQ=aO.properties;if(parseFloat(aN=aQ["dockMin"+aP])){aM=Math.max(aO.$px(aN),aM)}if(parseFloat(aN=aQ["dockMax"+aP])){aM=Math.min(aO.$px(aN),aM)}return aM};for(aH=0;ah=ag[aH++];){p=ae[ah];if(p.length){for(aI=0;aE=p[aI++];){if(!(aE.properties.position!="absolute"||aE.properties.dockIgnore||aE.properties.dockIgnoreFlexFill)){var ap=aE.getRoot();if(V&&(ah=="left"||ah=="right"||ah=="width")){aK++;aC=ad(aE,"W",ap.width());aJ+=aC;if(aE.properties.dock!="fill"){aG=Math.max(aG,ad(aE,"H",ap.height()))}}if(ac&&(ah=="top"||ah=="bottom"||ah=="height")){X++;aA+=ad(aE,"H",ap.height())}}}}}if(aA&&aG){aA+=aG}if(aK>=1&&aJ&&S.width){var ai=S.width-af.left-af.right-(aK-1)*am.width;for(aH=0;ah=ag[aH++];){p=ae[ah];if(p.length){for(aI=0;aE=p[aI++];){if(aE.properties.position=="absolute"&&!aE.properties.dockIgnore&&aE.properties.dockIgnoreFlexFill){var ap=aE.getRoot();if(ah=="left"||ah=="right"||ah=="width"){ai-=ad(aE,"W",ap.width());ao-=am.width}}}for(aI=0;aE=p[aI++];){if(!(aE.properties.position!="absolute"||aE.properties.dockIgnore||aE.properties.dockIgnoreFlexFill)){var ap=aE.getRoot();if(ah=="left"||ah=="right"||ah=="width"){ap.width(ay(ad(aE,"W",Math.min(1,(ap.width())/aJ)*ai)))}}}}}}if(X>=1&&aA&&S.height){var ao=S.height-af.top-af.bottom-(X-1)*am.height;for(aH=0;ah=ag[aH++];){p=ae[ah];if(p.length){for(aI=0;aE=p[aI++];){if(aE.properties.position=="absolute"&&!aE.properties.dockIgnore&&aE.properties.dockIgnoreFlexFill){var ap=aE.getRoot();if(ah=="top"||ah=="bottom"||ah=="height"){ao-=ad(aE,"H",ap.height());ao-=am.height}}}for(aI=0;aE=p[aI++];){if(!(aE.properties.position!="absolute"||aE.properties.dockIgnore||aE.properties.dockIgnoreFlexFill)){var ap=aE.getRoot();if(ah=="top"||ah=="bottom"||ah=="height"){ap.height(ay(ad(aE,"H",Math.min(1,(ap.height())/aA)*ao)))}}}}}}if(az&&V){az._conDockFlexFillW=1}if(az&&ac){az._conDockFlexFillH=1}}if(U!="both"){for(aH=0;ah=ag[aH++];){p=ae[ah];if(p.length){for(aI=0;aE=p[aI++];){if(!(aE.properties.position!="absolute"||aE.properties.dockIgnore||aE.properties.dockIgnoreFlexFill)){var ap=aE.getRoot();if(az&&az._conDockFlexFillW&&!V&&(ah=="left"||ah=="right"||ah=="width")){ap.width(ay(aE.properties.width))}if(az&&az._conDockFlexFillH&&!ac&&(ah=="top"||ah=="bottom"||ah=="height")){ap.height(ay(aE.properties.height))}}}}}if(az&&!V){delete az._conDockFlexFillW}if(az&&!ac){delete az._conDockFlexFillH}}for(aH=0;ah=ag[aH++];){S.preX=S.oX;S.preY=S.top;p=ae[ah];var at=0,ar;if(ar=p.length){if(!al[ah]){ak.width=ak.height=1}for(aI=0;aE=p[aI++];){if(aE.properties.position=="absolute"&&!aE.properties.dockIgnore){an(aE,at++,ar,S,ah,ak.$dockid,aL||ak.width,aL||ak.height,am.width,am.height,T)}}}}if(S.later){xui.each(S.later,function(aO){var aM;try{if(aO.isSVG){aO.ins._setBBox(aO)}else{aO.node.cssRegion(aO,true)}if(aM=xui.UIProfile.getFromDom(aO.node.get(0))){delete aO.node;if(!aM.box._onresize&&aM.onResize&&(aO.width!==null||aO.height!==null)){aM.boxing().onResize(aM,aO.width,aO.height)}if(aM.onDock){aM.boxing().onDock(aM,aO)}if(aM.$onDock){aM.$onDock(aM,aO)}}}catch(aN){xui.asyRun(function(){if(!aO.node){return}aO.width+=1;aO.height+=1;if(aO.isSVG){aO.ins._setBBox(aO)}else{aO.node.cssRegion(aO)}aO.width-=1;aO.height-=1;if(aO.isSVG){aO.ins._setBBox(aO)}else{aO.node.cssRegion(aO,true)}if(aM=xui.UIProfile.getFromDom(aO.node.get(0))){delete aO.node;if(!aM.box._onresize&&aM.onResize&&(aO.width!==null||aO.height!==null)){aM.boxing().onResize(aM,aO.width,aO.height)}if(aM.onDock){aM.boxing().onDock(aM,aO)}if(aM.$onDock){aM.$onDock(aM,aO)}}})}})}for(aH=0;ah=ag[aH++];){p=ae[ah];if(p.length){for(aI=0;aE=p[aI++];){if(aE.properties.position=="absolute"&&!aE.properties.dockIgnore){if(!S.later||!S.later[aE.$xid]){if(aE.onDock){aE.boxing().onDock(aE)}if(aE.$onDock){aE.$onDock(aE)}}}}}}if(aL){xui.$cache._resizeTime=xui.stamp()}}ae=an=ap=aD=null};P.pid=C;xui.arr.each(xui.UI.$dock_args,function(f){P[f]=[]});P.dockall=[];P.rePos=function(X,ao,an,T,aA,ar,ay,aF,ab,ae,V){var ap=false;if(ar&&X.$xid!=ar){ap=true}var af=X.properties,aC=xui.CSS,au=af.dockFloat,Y=af.dockMargin,aj=af.dockStretch,ak,ad,U,ai,f,aq=0,aB=0,al=X.getRoot(),ax=X.boxing(),ah=al.get(0),aE=ah.style,am=xui.$us(af),ac=al._getEmSize(),aw=function(aH){return aC.$forceu(aH,am>0?"em":"px",ac)},W,Z,aD,p,aa,R,av=aC.$px(af._dockBorderWidth,ac)||0,at=aC.$px(af._dockBorderHeight,ac)||0,aG={},az,S=X.box["xui.svg"],ag;Y.top=aC.$px(Y.top,ac);Y.left=aC.$px(Y.left,ac);Y.right=aC.$px(Y.right,ac);Y.bottom=aC.$px(Y.bottom,ac);if(S){ag=ax._getBBox();af.left=ag.x;af.top=ag.y;af.width=ag.width;af.height=ag.height}if(aE.display=="none"){return}switch(aA){case"middle":case"center":ak=ad=0;break;default:aj=aj||((aA=="width"||aA=="height")?"":V[ao%V.length])||"stretch";if(aA=="width"||aA=="height"){if(aj!="stretch"&&aj!="forward"&&aj!="rearward"){aj="stretch"}}switch(aj){case"stretch":ak=1;ad=1;U=0;break;case"forward":ak=1;ad=0;U=0;break;case"rearward":ak=0;ad=1;U=0;break;case"fixed":U=1;break;default:U=1;ai=Math.min(1,Math.max(0,parseFloat(aj)))}}f=af.dock=="cover";switch(aA){case"middle":if(S){ax.setTop(Math.max(0,(T.height-ag.height)/2))}else{al.top(aw(Math.max(0,(T.height-al.height())/2)))}break;case"center":if(S){ax.setLeft(Math.max(0,(T.width-ag.width)/2))}else{al.left(aw(Math.max(0,(T.width-al.width())/2)))}break;case"top":if(!ap){if(U){aa=ai?parseFloat(T.ww*ai):j(S?ag.width:aC.$px(af.width,ac))+Y.left+Y.right;if(ai){aa-=ab;aq=e(X,af,"W",aa-Y.left-Y.right);aa=aq+Y.left+Y.right}if((T.preX+aa-T.oX)>T.ww){T.top+=T.topHolder;T.topHolder=0;T.preX=T.oX;N(T,ab,T.ww,"width","dockMaxW","left","right")}T.prevLine.push({profile:X,prop:af,node:al,style:aE,isSVG:S,ins:ax,pct:ai,margin:Y,region:{top:T.top+Y.top,width:aa}});T.preX+=aa+ab;T.topHolder=Math.max(T.topHolder,(S?ag.height:al.offsetHeight())+Y.top+Y.bottom+ae)}else{N(T,ab,T.ww,"width","dockMaxW","left","right");if(T.topHolder){T.top+=T.topHolder;T.preX=T.oX}W=ak?((au?0:T.left)+Y.left):aC.$px(af.left,ac);aD=ad?((au?0:T.right)+Y.right):(T.width-aC.$px(af.width,ac)-aC.$px(af.left,ac));Z=(au?0:T.top)+Y.top;aa=e(X,af,"W",T.width-W-aD-av);u(X,S,ax,al,aE,{left:W,top:Z,width:j(aa)});if(!au){T.top+=(S?ag.height:al.offsetHeight())+Y.top+Y.bottom+ae}}if(an==ao+1){N(T,ab,T.ww,"width","dockMaxW","left","right")}}break;case"bottom":if(!ap){if(U){aa=ai?parseFloat(T.ww*ai):j(S?ag.width:aC.$px(af.width,ac))+Y.left+Y.right;if(ai){aa-=ab;aq=e(X,af,"W",aa-Y.left-Y.right);aa=aq+Y.left+Y.right}if((T.preX+aa-T.oX)>T.ww){T.bottom+=T.bottomHolder;T.bottomHolder=0;T.preX=T.oX;N(T,ab,T.ww,"width","dockMaxW","left","right")}T.prevLine.push({profile:X,prop:af,node:al,style:aE,isSVG:S,ins:ax,pct:ai,margin:Y,region:{bottom:T.bottom+Y.bottom,width:aa}});T.preX+=aa+ab;T.bottomHolder=Math.max(T.bottomHolder,(S?ag.height:al.offsetHeight())+Y.top+Y.bottom+ae)}else{N(T,ab,T.ww,"width","dockMaxW","left","right");if(T.bottomHolder){T.bottom+=T.bottomHolder;T.bottomHolder=0;T.preX=T.oX}W=ak?((au?0:T.left)+Y.left):aC.$px(af.left,ac);aD=ad?((au?0:T.right)+Y.right):(T.width-aC.$px(af.width,ac)-aC.$px(af.left,ac));p=(au?0:T.bottom)+Y.bottom;aa=e(X,af,"W",T.width-W-aD);u(X,S,ax,al,aE,{left:W,bottom:p,width:j(aa)});if(!au){T.bottom+=(S?ag.height:al.offsetHeight())+Y.top+Y.bottom+ae}}if(an==ao+1){N(T,ab,T.ww,"width","dockMaxW","left","right")}}break;case"left":if(!ap){if(T.topHolder){T.top+=T.topHolder+ae;T.topHolder=0;T.oY=T.preY=T.top}if(T.bottomHolder){T.bottom+=T.bottomHolder+ae;T.bottomHolder=0}T.hh=T.height-T.top-T.bottom;if(T.hh<=0){return}if(U){aa=ai?parseFloat(T.hh*ai):j(S?ag.height:aC.$px(af.height,ac))+Y.top+Y.bottom;if(ai){aa-=ae;aB=e(X,af,"H",aa-Y.top-Y.bottom);aa=aB+Y.top+Y.bottom}if((T.preY+aa-T.oY)>T.hh){T.left+=T.leftHolder;T.leftHolder=0;T.preY=T.oY;N(T,ae,T.hh,"height","dockMaxH","top","bottom")}T.prevLine.push({profile:X,prop:af,node:al,style:aE,isSVG:S,ins:ax,pct:ai,margin:Y,region:{left:T.left+Y.left,height:aa}});T.preY+=aa+ae;T.leftHolder=Math.max(T.leftHolder,(S?ag.width:al.offsetWidth())+Y.left+Y.right+ab)}else{N(T,ab,T.hh,"height","dockMaxH","top","bottom");if(T.leftHolder){T.left+=T.leftHolder;T.leftHolder=0;T.preY=T.top}W=(au?0:T.left)+Y.left;Z=ak?((au?0:T.top)+Y.top):aC.$px(af.top,ac);p=ad?((au?0:T.bottom)+Y.bottom):(T.height-aC.$px(af.height,ac)-aC.$px(af.top,ac));aa=e(X,af,"H",T.height-Z-p-at);u(X,S,ax,al,aE,{left:W,top:Z,height:j(aa)});if(!au){T.left+=(S?ag.width:al.offsetWidth())+Y.left+Y.right+ab}}if(an==ao+1){N(T,ab,T.hh,"height","dockMaxH","top","bottom")}}break;case"right":if(!ap){if(T.topHolder){T.top+=T.topHolder;T.topHolder=0;T.oY=T.preY=T.top}if(T.bottomHolder){T.bottom+=T.bottomHolder;T.bottomHolder=0}T.hh=T.height-T.top-T.bottom;if(T.hh<=0){return}if(U){aa=ai?parseFloat(T.hh*ai):j(S?ag.height:aC.$px(af.height,ac))+Y.top+Y.bottom;if(ai){aa-=ae;aB=e(X,af,"H",aa-Y.top-Y.bottom);aa=aB+Y.top+Y.bottom}if((T.preY+aa-T.oY)>T.hh){T.right+=T.rightHolder;T.rightHolder=0;T.preY=T.oY;N(T,ae,T.hh,"height","dockMaxH","top","bottom")}T.prevLine.push({profile:X,prop:af,node:al,style:aE,isSVG:S,ins:ax,pct:ai,margin:Y,region:{right:T.right+Y.right,height:aa}});T.preY+=aa+ae;T.rightHolder=Math.max(T.rightHolder,(S?ag.width:al.offsetWidth())+Y.left+Y.right+ab)}else{N(T,ab,T.hh,"height","dockMaxH","top","bottom");if(T.rightHolder){T.right+=T.rightHolder;T.rightHolder=0;T.preY=T.top}aD=(au?0:T.right)+Y.right;Z=ak?((au?0:T.top)+Y.top):(aC.$px(af.top,ac));p=ad?((au?0:T.bottom)+Y.bottom):(T.height-aC.$px(af.height,ac)-aC.$px(af.top,ac));aa=e(X,af,"H",T.height-Z-p-at);u(X,S,ax,al,aE,{right:aD,top:Z,height:j(aa)});if(!au){T.right+=(S?ag.width:al.offsetWidth())+Y.left+Y.right+ab}}if(an==ao+1){N(T,ab,T.hh,"height","dockMaxH","top","bottom")}}break;case"width":if(!ay){return}if(T.leftHolder){T.left+=T.leftHolder;T.leftHolder=0}if(T.rightHolder){T.right+=T.rightHolder;T.rightHolder=0}W=ak?((f?0:(au?0:T.left))+Y.left):aC.$px(af.left,ac);aD=ad?((f?0:(au?0:T.right))+Y.right):(T.width-aC.$px(af.width,ac)-aC.$px(af.left,ac));Z=af.dock=="width"?(aC.$px(af.top,ac)||0):(ak?((f?0:(au?0:T.top))+Y.top):aC.$px(af.top,ac));aa=e(X,af,"W",T.width-W-aD-av);T.later=T.later||{};T.later[X.$xid]=T.later[X.$xid]||{};xui.merge(T.later[X.$xid],{isSVG:S,ins:ax,node:al,width:aw(aa),left:aw(W),top:aw(Z)},"all");break;case"height":if(!aF){return}if(T.topHolder){T.top+=T.topHolder;T.topHolder=0;T.preX=T.oX}if(T.bottomHolder){T.bottom+=T.bottomHolder;T.bottomHolder=0;T.preX=T.oX}Z=ak?((f?0:(au?0:T.top))+Y.top):aC.$px(af.top,ac);p=ad?((f?0:(au?0:T.bottom))+Y.bottom):(T.height-aC.$px(af.height,ac)-aC.$px(af.top,ac));W=af.dock=="height"?(aC.$px(af.left,ac)||0):(ak?((f?0:(au?0:T.left))+Y.left):aC.$px(af.left,ac));aa=e(X,af,"H",T.height-Z-p-at);T.later=T.later||{};T.later[X.$xid]=T.later[X.$xid]||{};xui.merge(T.later[X.$xid],{isSVG:S,ins:ax,node:al,height:aw(aa),left:aw(W),top:aw(Z)},"all");break}};G.onSize(P,"dock")}if(J=="fill"||J=="cover"){m.link(P.height,"$dock1",null,I);m.link(P.width,"$dock2",null,H);xui.arr.stableSort(P.height,O);xui.arr.stableSort(P.width,O)}else{if(J=="origin"){m.link(P.center,"$dock1",null,I);m.link(P.middle,"$dock2",null,H)}else{m.link(P[J],"$dock",null,K);xui.arr.stableSort(P[J],O)}}m.link(P.dockall,"$dockall",null,M);xui.$cache._resizeTime=1;m.$dockFun=P}B(G,w);if(J!="none"){(m.$beforeDestroy=(m.$beforeDestroy||{}))["releaseDock"]=function(){m.unLink("$dockall");m.unLink("$dock");m.unLink("$dock1");m.unLink("$dock2");B(G,w);if(G&&G.get(0)&&(G=xui.UIProfile.getFromDom(G.id()))){G.boxing().adjustDock();xui.tryF(G.clearCache,[],G)}m=fun=G=null}}else{if(m.$beforeDestroy){delete m.$beforeDestroy.releaseDock}}}if(E){G.onSize()}},_beforeSerialized:function(g){var l,m,c,e={};xui.merge(e,g,"all");var d=e.properties=xui.clone(g.properties,true),f=e.box.$DataStruct,m,j=e.box.$DataModel;for(var h in xui.UI.$ps){if((h in d)&&d[h]===""){d[h]="auto"}}for(var h in j){if(j[h].ini===d[h]){delete d[h]}else{if(j[h]&&j[h]["$spaceunit"]){if((j[h].ini===0||j[h].ini==="0"||j[h].ini==="0px"||j[h].ini==="0em")&&(d[h]===0||d[h]==="0"||d[h]==="0px"||d[h]==="0em")){delete d[h]}else{if((j[h].ini+(xui.isFinite(j[h].ini)?"px":""))==(d[h]+(xui.isFinite(d[h])?"px":""))){delete d[h]}else{if(d[h]!="auto"){m=xui.$us(d);d[h]=g.$forceu(d[h],m==2?"em":m==-2?"px":null)}}}}}}if(d.position=="absolute"){switch(d.dock){case"top":case"bottom":delete delete d.top;delete d.bottom;delete d.right;break;case"left":case"right":delete d.left;delete d.right;delete d.bottom;break}}for(var h in xui.UI.$ps){if((h in d)&&xui.isNaN(d[h])){delete d[h]}}if(d.items&&d.items.length){m=xui.absObj.$specialChars;d.items=xui.clone(d.items,function(q,n,p){return !m[((p===1?q.id:n)+"").charAt(0)]&&q!=undefined})}if(d.tagCmds&&d.tagCmds.length){m=xui.absObj.$specialChars;d.tagCmds=xui.clone(d.tagCmds,function(q,n,p){return !m[((p===1?q.id:n)+"").charAt(0)]&&q!=undefined})}for(var h in g.box._objectProp){if((h in d)&&d[h]&&(xui.isHash(d[h])||xui.isArr(d[h]))&&xui.isEmpty(d[h])){delete d[h]}}var h="tagVar";if((h in d)&&d[h]&&(xui.isHash(d[h])||xui.isArr(d[h]))&&xui.isEmpty(d[h])){delete d[h]}xui.arr.each(["dockMargin","conDockPadding","conDockSpacing","sandboxTheme","propBinder","animConf"],function(o){if(m=d[o]){if(!xui.isHash(m)){return}c=f[o];for(var n in m){if(c[n]!==m[n]){return}}delete d[o]}});if(xui.isEmpty(d.resizerProp)){delete d.resizerProp}if(d.items&&(d.items.length==0||d.listKey)){delete d.items}if(d.tagCmds&&(d.tagCmds.length==0||d.listKey)){delete d.tagCmds}return e},getDropKeys:function(c,d){return c.properties.dropKeys},getDragKey:function(c,d){return c.properties.dragKey||(c.properites.dragSortable&&(c.key+":"+c.$xid))},getDragData:function(c,e,d){return{profile:c,domId:xui.use(d).id(),data:c.onGetDragData?c.boxing().onGetDragData(c,e,d):null}},_prepareData:function(e,h){var c=e.properties,m=this.$DataModel,n=arguments.callee,d=n.map||(n.map=xui.toArr("left,top,bottom,right,width,height")),o=[],l=e.box,p=e.box.adjustData,q;h=h||{};if(c.id){delete c.id}if("required" in m){c._required=c.required?"xui-required":""}if("nodeName" in m&&!c.nodeName){c.nodeName="xui"}if("caption" in m&&c.caption!==null){c.caption=c.caption===undefined?e.alias:c.caption}if("html" in m&&c.html){h.html=xui.adjustRes(c.html,0,1)}if("src" in m&&c.src){h.src=xui.adjustRes(c.src,0,1)}xui.each(c,function(r,j){if(m[j]&&m[j]["$spaceunit"]){if(xui.$us(c)>0){if(c[j]===0||c[j]=="0"){c[j]="0em"}else{if(c[j]===0||c[j]=="0"){c[j]="0px"}}}}});if("$hborder" in m&&m.$hborder){if(e.$isEm(c.width)){h.bWidth=e.$px2em(e.$em2px(c.width)-c.$hborder*2,null,true)+"em"}else{h.bWidth=parseFloat(c.width)-c.$hborder*2}}if("$vborder" in m&&m.$vborder){if(e.$isEm(c.height)){h.bHeight=e.$px2em(e.$em2px(c.height)-c.$vborder*2,null,true)+"em"}else{h.bHeight=parseFloat(c.height)-c.$vborder*2}}for(var f=0,g;g=d[f];f++){var q=(g in h)?h[g]:c[g];if(q||q===0){if(q!="auto"){o[o.length]=g+":"+e.$addu(q)}}}if(c.position){o[o.length]="position:"+c.position}if(c.visibility){o[o.length]="visibility:"+c.visibility}if("zIndex" in c){o[o.length]="z-index:"+c.zIndex}if(c.display){o[o.length]=c.display=="inline-block"?("display:"+xui.$inlineBlock.join("; display:")+";"):("display:"+c.display)}h._style=o.join(";")+";";if(l.$Behaviors.PanelKeys&&!l["xui.absList"]){o=[];if(c.panelBgClr){o[o.length]="background-color:"+c.panelBgClr}if(c.panelBgImg){o[o.length]="background-image:url("+xui.adjustRes(c.panelBgImg)+")"}if(c.panelBgImgPos){o[o.length]="background-position:"+c.panelBgImgPos}if(c.panelBgImgRepeat){o[o.length]="background-repeat:"+c.panelBgImgRepeat}if(c.panelBgImgAttachment){o[o.length]="background-attachment:"+c.panelBgImgAttachment}h._panelstyle=o.join(";")}if("className" in m){h._className=c.className||""}if("readonly" in m){h.readonly=c.readonly?"xui-ui-readonly":""}if("href" in m){h.href=c.href||xui.$DEFAULTHREF}if("tabindex" in m){h.tabindex=c.tabindex||"-1"}if("items" in m){e.ItemIdMapSubSerialId={};e.SubSerialIdMapItem={};c.items=e.box._adjustItems(c.items);h.items=this._prepareItems(e,c.items)}if("selectable" in m){h._selectable=(xui.browser.ie&&xui.browser.ver<10)?"":(c.selectable?"xui-ui-selectable":"xui-ui-unselectable")}h=p(e,c,h);e.prepared=true;return h},_prepareInlineObj:function(e,f,d){var h=f.object;h=h["xui.absBox"]?h.get(0):h["xui.UIProfile"]?h:xui.create(h).get(0);if(h["xui.UIProfile"]){h.properties.position="relative";if("tabindex" in h.properties){h.properties.tabindex=d}var g="xui-inline-object",c=h.CC.KEY||(c=h.CC.KEY="");if(c.indexOf(g)===-1){h.CC.KEY=c+" "+g}}f.$xid=h.$xid;f.$inlineobj=h;h.$conf=f;h.$holder=e;if(h.alias&&(!h.host||h.host===h)){h.boxing().setHost(e.host,h.alias)}(e.$attached||(e.$attached=[])).push(h);return h},_prepareItems:function(f,p,o,h,m){var q=this,x=[],w,c,u,e=xui.UI.$tag_subId,d,j=f.properties.tabindex,r=f.box.adjustData;for(var n=0,g=p.length;n<g;n++){if(typeof p[n]!="object"){p[n]={id:p[n]}}w=p[n];if(p[n].id==="?"){p[n].id=xui.rand()}if(f.beforePrepareItem&&false===f.boxing().beforePrepareItem(f,w,o,h,m)){continue}if(!w.hasOwnProperty("caption")){w.caption=w.id}c={id:w.id};if(o){c._pid=o}d=c[e]=typeof m=="string"?m:f.pickSubId("items");if(false!==h){f.ItemIdMapSubSerialId[w.id]=d;f.SubSerialIdMapItem[d]=w}if(w.object){c.object=q._prepareInlineObj(f,w,j)}else{c._tabindex=j;r(f,w,c);if(q._prepareItem){q._prepareItem(f,c,w,o,n,g,h,m)}}x.push(c)}return x},_showTips:function(c,d,e){if(c.properties.disableTips){return}if(c.onShowTips){return c.boxing().onShowTips(c,d,e)}}}});Class("xui.absList","xui.absObj",{Instance:{activate:function(){var d=this.get(0),c=d.getSubNode("ITEM",true);if(!c.isEmpty()){c.focus()}return this},insertItems:function(j,e,p){var f,m,n,l,c,q,d,g,h,o=this._afterInsertItems;return this.each(function(w){h=w.box;m=h._adjustItems(j);d=w.properties;if(e===true){r=d.$UIvalue||d.value;if(r){r=(r+"").split(d.valueSeparator)}k=w.getItemByItemId(r[0]);e=k?k.id:null}n=w.properties.items;l=xui.arr.subIndexOf(n,"id",e);if(w.renderId){g=h._prepareItems(w,m,e);c=w._buildItems("items",g);if(w.$attached){for(var u=0,r;r=w.$attached[u++];){if(r._render){r._render(true)}}delete w.$attached}if(l==-1){f=w.getSubNode(h._ITEMSKEY||w.keys.ITEMS||w.keys.KEY);if(p){f.prepend(c)}else{f.append(c)}}else{f=w.getSubNodeByItemId(h._ITEMKEY||"ITEM",e);if(p){f.addPrev(c)}else{f.addNext(c)}}}if(l==-1){xui.arr.insertAny(n,m,p?0:-1)}else{xui.arr.insertAny(n,m,p?l:l+1)}if(o){w.boxing()._afterInsertItems(w,g,e,p)}if(w.$itemFilter){w.boxing().doFilter(true)}})},removeItems:function(d,f,g){var h,e,c=this._afterRemoveItems;remove=function(n,j,q,p,m,o){var l=arguments.callee;if(!m){m=xui()}xui.filter(j,function(x){var w,r;if(o||(r=(xui.arr.indexOf(q,x.id)!=-1))){if(n.renderId){if(w=n.ItemIdMapSubSerialId[x.id]){p.push(xui.copy(n.SubSerialIdMapItem[w]));delete n.SubSerialIdMapItem[w];delete n.ItemIdMapSubSerialId[x.id];n.reclaimSubId(w,"items");if(!o){if(!(h=n.getSubNode(n.keys[f]?f:(n.box._ITEMKEY||"ITEM"),w)).isEmpty()){m.merge(h)}if(x.$xid){m.get().push(xui.getObject(x.$xid).getRootNode())}}}}}if(x.sub){l(n,x.sub,q,p,m,o||r)}if(r){for(var u in x){x[u]=null}return false}});m.remove(true,g)};return this.each(function(j){var m=j.properties,l=[];d=xui.isHash(d)?[d.id]:xui.isArr(d)?d:d===0?[0]:d?(d+"").split(m.valueSeparator):null;if(!d){d=((m.$UIvalue||m.value)+"").split(m.valueSeparator)}xui.arr.each(d,function(p,n){d[n]=""+(xui.isNumb(p)?m.items&&m.items[p].id:xui.isHash(p)?p.id:p)});remove(j,m.items,d,l);if(e=m.$UIvalue){if((e=(""+e).split(m.valueSeparator)).length>1){xui.filter(e,function(n){return xui.arr.indexOf(d,n)==-1});m.$UIvalue=e.join(m.valueSeparator)}else{if(xui.arr.indexOf(d,m.$UIvalue)!=-1){m.$UIvalue=null}}}if(c&&j.renderId){j.boxing()._afterRemoveItems(j,l)}})},clearItems:function(c){return this.each(function(d){var e=d.properties;if(d.SubSerialIdMapItem){if(d.renderId){d.getSubNode(d.keys[d.box._ITEMKEY||"ITEM"],true).remove(true,c)}xui.each(d.SubSerialIdMapItem,function(g,f){d.reclaimSubId(f,"items")});d.SubSerialIdMapItem={};d.ItemIdMapSubSerialId={}}e.items.length=0;e.$UIvalue=null})},updateItem:function(o,h){var r=this,g=r.get(0),n,f=g.properties;o=xui.isHash(o)?o.id:o===0?0:o?(o+""):null;if(xui.isNumb(o)){o=xui.get(f.items,[o,"id"])}if(!o){n=f.$UIvalue||f.value;if(n){n=(n+"").split(f.valueSeparator)}n=g.getItemByItemId(n[0]);o=n?n.id:null}var l=g.box,u=f.items,A=g.queryItems(u,function(D){return typeof D=="object"?D.id===o:D==o},true,true,true),m,B,w,d,x,p,q;if(!xui.isHash(h)){h={caption:h+""}}if(A&&A.length){A=A[0];if(typeof A[0]!="object"){B=A[2][A[1]]={id:A[0]}}else{B=A[0]}if(xui.isSet(h.id)){h.id+=""}if(h.id&&o!==h.id){m=h.id;var c=g.ItemIdMapSubSerialId,n;if(!c[m]){if(n=c[o]){c[m]=n;delete c[o];g.SubSerialIdMapItem[n].id=m}else{B.id=m}}}delete h.id;if(xui.isEmpty(h)){return r}x=g.getSubNodeByItemId("ITEM",m||o);if(!x.isEmpty()){if("sub" in h){delete B._created;delete B._checked;delete B._inited;if(B.sub){var j=[];xui.arr.each(B.sub,function(D){j.push(D.id)});r.removeItems(j)}}else{if(B.sub){p=g.getSubNodeByItemId("SUB",m||o)}}xui.merge(B,h,"all");w=xui.get(g,["ItemIdMapSubSerialId",m||o]);d=l._prepareItems(g,[B],B._pid,false,w);x.replace(g._buildItems(arguments[2]||"items",d),false);if(p&&!p.isEmpty()){if(!(q=g.getSubNodeByItemId("SUB",m||o)).isEmpty()){q.replace(p)}}if(typeof r.setUIValue=="function"){var C=f.$UIvalue||"",d=(""+C).split(f.valueSeparator);if(d.length&&xui.arr.indexOf(d,o)!=-1){if(m){xui.arr.removeValue(d,o);d.push(B.id);r.setUIValue(d.join(f.valueSeparator),true,null,"update")}else{r._setCtrlValue(C)}}}}else{xui.merge(B,h,"all")}if(l.$Behaviors.PanelKeys){var e={};if(h.hasOwnProperty("panelBgClr")){e["background-color"]=h.panelBgClr}if(h.hasOwnProperty("panelBgImg")){e["background-image"]=h.panelBgImg?("url("+xui.adjustRes(h.panelBgImg)+")"):""}if(h.hasOwnProperty("panelBgImgPos")){e["position-color"]=h.panelBgImgPos}if(h.hasOwnProperty("panelBgImgRepeat")){e["background-repeat"]=h.panelBgImgRepeat}if(h.hasOwnProperty("panelBgImgAttachment")){e["background-attachment"]=h.panelBgImgAttachment}if(h.hasOwnProperty("overflow")){var n=h.overflow;if(n){if(n.indexOf(":")!=-1){xui.arr.each(n.split(/\s*;\s*/g),function(E){var D=E.split(/\s*:\s*/g);if(D.length>1){e[xui.str.trim(D[0])]=xui.str.trim(D[1]||"")}})}}e.overflow=n||""}if(!xui.isEmpty(e)){xui.arr.each(l.$Behaviors.PanelKeys,function(D){panel=g.getSubNode(D,m||o).css(e)})}}}return r},doFilter:function(d){var f=this,e=f.get(0);if(e){if(!d){delete e.$itemFilter;d=function(){return false}}else{if(xui.isFun(d)){e.$itemFilter=d}else{if(d===true){d=e.$itemFilter}}}var c=function(){var m=e.properties,j=m.items,g=[],l=[],h=function(n){var o=0;xui.arr.each(n,function(p){if(p.sub){if(!p._checked){f.toggleNode(p.id,true,true,true)}if(h(p.sub)){o++;if(p.hidden){g.push(p.id)}}else{if(!p.hidden){l.push(p.id)}}}else{if(d(p,e)){if(!p.hidden){l.push(p.id)}}else{o++;if(p.hidden){g.push(p.id)}}}});return o};h(j);if(g.length){f.showItems(g)}if(l.length){f.showItems(l,false)}f.reLayout(true)};xui.resetRun(e.$xid+":itemFilter",c)}return this},showItems:function(h,d){var g=this,f=g.get(0),c=xui(),e=xui(),j=f.properties;h=xui.isHash(h)?h.id:xui.isArr(h)?h:h===0?[0]:h?(h+"").split(j.valueSeparator):null;if(!h){h=((j.$UIvalue||j.value)+"").split(j.valueSeparator)}if(h&&h.length){xui.arr.each(h,function(m,l){if(l=g.getItemByItemId(m)){if(d===false){if(!l.hidden){e.merge(g.getSubNodeByItemId("ITEM",l.id))}}else{if(l.hidden){c.merge(g.getSubNodeByItemId("ITEM",l.id))}}l.hidden=d===false}})}if(!c.isEmpty()){c.css("display","")}if(!e.isEmpty()){e.css("display","none")}return this},getItems:function(f,e){e=e||this.get(0).properties.items;if(f=="data"){return xui.clone(e,true)}else{if(f=="min"){var d=xui.clone(e,true),c;xui.arr.each(d,function(h,g){d[g]=h.id});return d}else{return e}}},focusItem:function(c){this.getSubNodeByItemId(this.constructor._focusNodeKey,c).focus();return this},scrollIntoView:function(c){c=this.getSubNodeByItemId(this.constructor._focusNodeKey,c);if(c=c.get(0)){c.scrollIntoView()}return this},selectItem:function(c){return this.fireItemClickEvent(c)},fireItemClickEvent:function(c){this.getSubNodeByItemId(this.constructor._focusNodeKey,c).onClick();return this},editItem:function(m){var f=this.get(0),d=f.properties,q,c,p;if(f&&f.renderId&&!f.destroyed){m=xui.isHash(m)?m.id:m===0?0:m?(m+""):null;if(xui.isNumb(m)){m=xui.get(d.items,[m,"id"])}if(!m){p=d.$UIvalue||d.value;if(p){p=(p+"").split(d.valueSeparator)}p=f.getItemByItemId(p[0]);m=p?p.id:null}if(m){if(q=f.getItemByItemId(m)){c=f.getSubNodeByItemId("ITEMCAPTION",m);if(c.isEmpty()){c=f.getSubNodeByItemId("CAPTION",m)}if(!c.isEmpty()){var e=c.parent(),l=c.offset(null,e.get(0)),r=c.cssSize(),j=e.offset(),o=e.cssSize();j.left+=c._paddingW("left");j.top+=c._paddingH("top");o.height+=c._paddingH();var g;if(f.beforeIniEditor){g=f.boxing().beforeIniEditor(f,q,c);if(g===false){return}}if(!g||!g["xui.UI"]){var g=new xui.UI.ComboInput({type:"input"});g.setWidth(Math.max(o.width-l.left,40)).setHeight(Math.max(o.height,20)).setResizer(true).setValue(q.caption||"");if(f.onBeginEdit){f.boxing().onBeginEdit(f,q,g)}var n=function(){xui.resetRun("absList_editor_reset",function(){if(g&&!g.isDestroyed()){g.getRoot().setBlurTrigger("absList_editor_blur",null);g.destroy();g=null}})};g.beforeUIValueSet(function(B,x,w,A,u){if(false!==(f.beforeEditApply&&f.boxing().beforeEditApply(f,q,w,g,u))){f.boxing().updateItem(q.id,{caption:w});if(f.onEndEdit){f.boxing().onEndEdit(f,q,g)}n()}}).onCancel(function(){n()});xui("body").append(g);var h=g.getRoot();h.popToTop({left:l.left+j.left,top:j.top});h.setBlurTrigger("absList_editor_blur",function(){n()});g.activate()}}}}}return this},getSelectedItem:function(){var f=this.getUIValue(true),e=this.get(0),c=[],d;if(xui.isArr(f)){if(f.length){xui.arr.each(f,function(g){if(d=e.getItemByItemId(g)){c.push(d)}});return c}}else{if(f){return e.getItemByItemId(f)}}}},Initialize:function(){var c=this.prototype;xui.arr.each(xui.toArr("getItemByItemId,getItemByDom,getSubIdByItemId,getSubNodeByItemId"),function(d){c[d]=function(){var e=this.get(0);return e[d].apply(e,arguments)};Class._fun(c[d],d,c.KEY,null,"instance")})},Static:{_focusNodeKey:"ITEM",$abstract:true,_ensureValues:xui.UI._ensureValues,DataModel:{listKey:{set:function(d){var e=this,c=e.box.getCachedData(d);if(c){e.boxing().setItems(xui.clone(c))}else{e.boxing().setItems(e.properties.items)}e.properties.listKey=d}},items:{ini:[],set:function(p){var c=this,l=c.boxing(),m=c.properties.items,d,e,n;if(typeof l.setValue=="function"){n=c.properties.value;if(n&&p&&p.length){var g=xui.arr.indexOf(p,n);if(g===-1){g=xui.arr.subIndexOf(p,"id",c.properties.value)}if(g===-1){n=p?p[0]?p[0].id?p[0].id:p[0]:"":""}}}if(m&&m.length){if(c.children&&c.children.length){xui.arr.each(d=c.serialize(false,true).children,function(o){if(o[1]){var q=xui.arr.indexOf(m,o[1]);if(q===-1){q=xui.arr.subIndexOf(m,"id",o[1])}if(q!==-1){o[2]=q}}});l.removeChildren(true,true,true)}l.clearItems(true,true)}l.insertItems(p?xui.copy(p):null);if(p&&p.length&&d){var f={},h={},j=p.length;xui.arr.each(p,function(q,o){f[q.id||q]=o;h[o]=q.id||q});xui.arr.each(d,function(o){var r,q;if(xui.isSet(o[1])){if(xui.isSet(f[o[1]])){q=xui.create(o[0]);l.append(q,o[1]);if(c.$panelRestore){c.$panelRestore(q.get(0))}r=1}else{if(h[o[2]]){q=xui.create(o[0]);l.append(q,h[o[2]]);if(c.$panelRestore){c.$panelRestore(q.get(0))}r=1}}}if(!r){q=xui.create(o[0]);l.append(q,n);if(c.$panelRestore){c.$panelRestore(q.get(0))}}})}if(xui.isSet(n)){l.setValue(n,true,"items")}if(c.renderId){c.adjustSize()}}},dragSortable:false,valueSeparator:";"},RenderTrigger:function(){this.destroyTrigger=function(){xui.each(this.SubSerialIdMapItem,function(c){xui.breakO(c)});this.properties.items.length=0}},EventHandlers:{beforePrepareItem:function(d,e,c){},beforeIniEditor:function(c,d,e){},onBeginEdit:function(d,e,c){},beforeEditApply:function(f,g,d,e,c){},onEndEdit:function(d,e,c){}},getDropKeys:function(c,e){var d=c.getItemByDom(e);return(d&&d.dropKeys)||c.properties.dropKeys},getDragKey:function(c,e){var d=c.getItemByDom(e);return(d&&d.dragKey)||c.properties.dragKey||(c.properties.dragSortable&&(c.key+":"+c.$xid))},_adjustItems:function(d){if(!xui.isSet(d)){d=[]}if(!xui.isArr(d)){d=[d]}var e=xui.copy(d),c;xui.arr.each(e,function(g,f){if(!xui.isHash(g)){e[f]={id:g+""}}else{e[f]=xui.copy(g);e[f].id=xui.isSet(e[f].id)?(e[f].id+""):xui.id()}});return e},_showTips:function(e,g,l){if(e.properties.disableTips){return}if(e.onShowTips){return e.boxing().onShowTips(e,g,l)}if(!xui.Tips){return}var d=e.properties,j=g.id,c=e.getSubId(j),h=e.SubSerialIdMapItem,f=h&&h[c];if(f&&("tips" in f)){if(f.tips){xui.Tips.show(l,f)}else{xui.Tips.hide()}return false}else{if(e.properties.autoTips&&f&&"caption" in f){if(f.caption||f.comment){xui.Tips.show(l,{tips:(f.caption||"")+(f.caption||f.comment?"<br/>":"")+(f.comment||"")})}else{xui.Tips.hide()}return false}else{return true}}}}});Class("xui.absValue","xui.absObj",{Instance:{_getCtrlValue:function(){return this.get(0).properties.$UIvalue},_setCtrlValue:function(c){return this},_setDirtyMark:function(c){return this.each(function(g){if(!g.renderId){return}var f=g.properties,e=f.value!==f.$UIvalue,j=g.getSubNode(c||g.box.DIRYMARKICON||"KEY"),h=xui.UI.$css_tag_dirty;if(g._dirtyFlag!==e){if(f.dirtyMark&&f.showDirtyMark){if(g.beforeDirtyMark&&false===g.boxing().beforeDirtyMark(g,e)){}else{if(e){j.addClass(h)}else{j.removeClass(h)}}}g._dirtyFlag=e}})},getValue:function(e){var d=this.get(0),f=d.properties,c=f.value;if(d.box.$valuemode=="multi"){if(e){if(xui.isStr(c)){c=c.split(f.valueSeparator)}}}if(d.box.$DataModel.selMode&&(f.selMode=="multi"||f.selMode=="multibycheckbox")&&e){if(xui.isStr(c)){c=c.split(f.valueSeparator)}if(c&&xui.isArr(c)&&c.length>1){c.sort()}}return c},getUIValue:function(f){var e=this.get(0),g=e.properties;if(!e.renderId){return g&&g.value}var d=this._getCtrlValue(),c;if(!e.box._checkValid||false!==e.box._checkValid(e,d)){g.$UIvalue=d}c=g.$UIvalue;if(e.box.$valuemode=="multi"){if(f){if(xui.isStr(c)){c=c.split(g.valueSeparator)}}}if(e.box.$DataModel.selMode&&(g.selMode=="multi"||g.selMode=="multibycheckbox")&&f){if(xui.isStr(c)){c=c.split(g.valueSeparator)}if(c&&xui.isArr(c)&&c.length>1){c.sort()}}return c},resetValue:function(d){var c=this;c.each(function(e){var f,g=e.properties;if(typeof(f=e.box._ensureValue)=="function"){d=f.call(e.box,e,d)}if(g.value!==d||g.$UIvalue!==d){if(e.box._beforeResetValue){e.box._beforeResetValue(e)}if(typeof(f=e.$onValueSet)=="function"){f=f.call(e,g.value,d);if(xui.isSet(f)){d=f}}e.boxing()._setCtrlValue(g.value=d);g.$UIvalue=d}e._inValid=1});c._setDirtyMark();return c},setUIValue:function(g,f,e,c){var d=this;this.each(function(j){var o=j.properties,m,n=o.$UIvalue,l=j.boxing();if(f||(n!==g)){if((j.box._checkValid&&false===j.box._checkValid(j,g))||(j.beforeUIValueSet&&false===(m=l.beforeUIValueSet(j,n,g,f,c)))){return}if(m!==undefined&&typeof m!=="boolean"){g=m}if(j.box&&(typeof(m=j.box._ensureValue)=="function")){g=m.call(j.box,j,g)}if(typeof(m=j.$onUIValueSet)=="function"){m=m.call(j,g,f,c);if(xui.isSet(m)){g=m}}var h;if(j.renderId&&!e){h=1;l._setCtrlValue(g)}o.$UIvalue=g;if(j.renderId&&!e){l._setDirtyMark()}if(j.afterUIValueSet){l.afterUIValueSet(j,n,g,f,c)}if(j.onChange){l.onChange(j,n,g,f,c)}if(!o.dirtyMark){l.setValue(g,false,"uiv",h||e)}}});return this},updateValue:function(){return this.each(function(d){var e=d.properties;if(e.value!==e.$UIvalue){var c=d.boxing();if(c.checkValid()){c.setValue(c.getUIValue(),true,"update");c._setDirtyMark()}}})},isDirtied:function(){var c=false;this.each(function(d){var e=d.properties;c=(e.value+" ")!==(e.$UIvalue+" ");if(c){return false}});return c},checkValid:function(f){var g,e,d=true,c=xui.isSet(f);this.each(function(h){g=h.properties;e=true;if(h.box._checkValid2){d=(e=h.box._checkValid2(h))&&d}if(e&&h.box._checkValid){d=h.box._checkValid(h,c?f:g.$UIvalue)&&d}if(!c&&h.renderId){h.boxing()._setDirtyMark()}});return d}},Static:{$abstract:true,DataModel:{readonly:{ini:false,action:function(c){var d=this.getRoot();if(c){d.addClass("xui-ui-readonly")}else{d.removeClass("xui-ui-readonly")}}},required:{ini:false,action:function(c){if(this.keys.LABEL){var d=this.getSubNode("LABEL");if(c){d.addClass("xui-required")}else{d.removeClass("xui-required")}}}},value:{ini:null,set:function(j,f,m,d){var g=this,e=g.properties,c,l=e.value,h=g.boxing();if(g.box._checkValid&&g.box._checkValid(g,j)===false){return}if(g.beforeValueSet&&false===(c=h.beforeValueSet(g,l,j,f,m))){return}if(c!==undefined){j=c}if(typeof(c=g.box._ensureValue)=="function"){j=c.call(g.box,g,j)}if(typeof(c=g.$onValueSet)=="function"){c=c.call(g,l,j,f,m);if(xui.isSet(c)){j=c}}if(g.renderId&&!d){h._setCtrlValue(j)}e.value=e.$UIvalue=j;if(!g._inValid){g._inValid=1}if(g.renderId){h._setDirtyMark()}if(g.afterValueSet){h.afterValueSet(g,l,j,f,m)}if(g.onValueChange){h.onValueChange(g,l,j,f,m)}}},dirtyMark:true,showDirtyMark:true},_ensureValues:xui.UI._ensureValues,_ensureValue:function(c,d){var e=c.properties;if(c.box.$DataModel.selMode&&(e.selMode=="multi"||e.selMode=="multibycheckbox")){if(!xui.isArr(d)){d=(d?(""+d):"").split(e.valueSeparator)}d.sort();return d.join(e.valueSeparator)}else{return xui.isArr(d)?d[0]:d}},EventHandlers:{beforeValueSet:function(e,d,g,f,c){},afterValueSet:function(e,d,g,f,c){},onValueChange:function(e,d,g,f,c){},beforeUIValueSet:function(e,d,g,f,c){},afterUIValueSet:function(e,d,g,f,c){},onChange:function(e,d,g,f,c){},beforeDirtyMark:function(d,c){}},RenderTrigger:function(){var d=this,c=d.boxing(),f=d.properties,e;if(!d.behavior.PanelKeys){if(e=f.dataBinder){c.setDataBinder(e,true)}if(e=f.dataField){c.setDataField(e)}}if(f.value!==undefined){if(typeof(e=d.box._ensureValue)=="function"){f.value=e.call(d.box,d,f.value);if(f.$UIvalue){f.$UIvalue=e.call(d.box,d,f.$UIvalue)}}if(!f.$UIvalue){f.$UIvalue=f.value}c._setCtrlValue(f.$UIvalue,true)}}}});Class("xui.UI.Widget","xui.UI",{Static:{Appearances:{KEY:{},IE67_SHADOW:(xui.browser.ie&&xui.browser.ver<=8)?{"z-index":"-1",position:"absolute",left:0,top:0,width:"100%",height:"100%",overflow:"visible"}:null},Templates:{className:"xui-uiw-shell {_className}",style:"{_style}",IE67_SHADOW:(xui.browser.ie&&xui.browser.ver<=8)?{}:null,FRAME:{$order:2,className:"xui-uiw-frame ",BORDER:{$order:1,style:"width:{bWidth};height:{bHeight};",className:"xui-uiw-border"}}},Behaviors:{onSize:xui.UI.$onSize},DataModel:{width:{$spaceunit:1,ini:"10em"},height:{$spaceunit:1,ini:"10em"},shadow:{ini:false,action:function(c){if(xui.browser.ie&&xui.browser.ver<=8){var d=this.getSubNode("IE67_SHADOW");if(c){d.addClass("xui-ui-shadow xui-uiborder-r xui-uiborder-b xui-uiborder-radius-br")}else{d.removeClass("xui-ui-shadow xui-uiborder-r xui-uiborder-b xui-uiborder-radius-br")}}else{var d=this.getSubNode("BORDER");if(c){d.addClass("xui-ui-shadow")}else{d.removeClass("xui-ui-shadow")}}}},$hborder:0,$vborder:0},RenderTrigger:function(){var c=this,d=c.properties,e=c.boxing();if(c.renderId){if((!c.$noB)&&d.border&&e._border){e._border()}}if((!c.$noR)&&d.resizer&&e.setResizer){e.setResizer(d.resizer,true)}if((!c.$noS)&&d.shadow&&e.setShadow){e.setShadow(true,true)}},_onresize:function(f,d,q){var c=f.properties,j=f.getSubNode("BORDER"),p=(xui.browser.ie&&xui.browser.ver<=8)?f.getSubNode("IE67_SHADOW"):null,o,h=xui.$us(c),m=function(r,u){return f.$forceu(r,h>0?"em":"px",u)},l=f.$px(d),g=f.$px(q),e=Math.max(0,(c.$b_lw||0)-(c.$hborder||0)),n=Math.max(0,(c.$b_tw||0)-(c.$vborder||0));if(l&&"auto"!==l){l-=Math.max((c.$hborder||0)*2,(c.$b_lw||0)+(c.$b_rw||0));if(xui.browser.ie&&xui.browser.ver<=6){l=(f.$px(l/2))*2}}if(g&&"auto"!==g){g-=Math.max((c.$vborder||0)*2,(c.$b_lw||0)+(c.$b_rw||0));if(xui.browser.ie&&xui.browser.ver<=6){g=(f.$px(g/2))*2}if(xui.browser.ie&&xui.browser.ver<=6&&null===d){j.ieRemedy();if(p){p.ieRemedy()}}}o={left:m(e),top:m(n),width:m(l),height:m(g)};j.cssRegion(o);if(p){p.cssRegion(o)}if((f.$resizer)&&xui.browser.ie){j.ieRemedy();if(p){p.ieRemedy()}}return o}}});Class("xui.UI.Link","xui.UI",{Static:{Appearances:{KEY:{cursor:"pointer"}},Templates:{tagName:"a",className:"{_className}",style:"{_style}",href:"{href}",target:"{target}",tabindex:"{tabindex}",text:"{caption}"},Behaviors:{HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},onClick:function(d,g,h){var f;if(!d.properties.disabled&&d.onClick){f=d.boxing().onClick(d,g,h)}var c=xui.use(h).attr("href");return typeof f=="boolean"?f:(c.indexOf("javascript:")===0||c.indexOf("#")===0)?false:true}},DataModel:{caption:{ini:undefined,action:function(c){c=(xui.isSet(c)?c:"")+"";this.getRoot().html(xui.adjustRes(c,true))}},href:{ini:xui.$DEFAULTHREF,action:function(c){this.getRoot().attr("href",c)}},target:{action:function(c){this.getRoot().attr("target",c)}}},EventHandlers:{onClick:function(c,d){}}}});Class("xui.UI.Element","xui.UI",{Static:{_objectProp:{attributes:1},Templates:{_NativeElement:true,tagName:"{nodeName}",className:"xui-node xui-wrapper {_className}",style:"{_style};",tabindex:"{tabindex}",text:"{html}"+xui.UI.$childTag},DataModel:{width:{$spaceunit:1,ini:"8em"},height:{$spaceunit:1,ini:"1em"},nodeName:{ini:"xui",action:function(c){this.boxing().refresh()}},selectable:true,html:{html:1,action:function(c,d,e){this.getRoot().html(xui.adjustRes(c,0,1),null,null,e)}},attributes:{ini:{},action:function(d,e){var c=this.getRoot();if(!xui.isEmpty(e)){xui.each(e,function(g,f){c.attr(f,null)})}if(!xui.isEmpty(d)){xui.each(d,function(g,f){c.attr(f,g)})}}},tabindex:-1},Appearances:{KEY:{"line-height":"auto"}},Behaviors:{HoverEffected:{KEY:"KEY"},onClick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onClick){return c.boxing().onClick(c,f,g)}}},EventHandlers:{onClick:function(c,f,d){}},RenderTrigger:function(){var d=this.properties.attributes;if(!xui.isEmpty(d)){var c=this.getRoot();xui.each(d,function(f,e){c.attr(e,f)})}}}});Class("xui.UI.Icon","xui.UI",{Static:{Templates:{className:"xui-node xui-wrapper {_className}",style:"{_style};",ICON:{className:"xuicon {imageClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{imageDisplay}{_fontsize}{_fontclr}",text:"{iconFontCode}"}},DataModel:{selectable:null,html:null,attributes:null,renderer:null,defaultFocus:null,tabindex:-1,image:{format:"image",action:function(c){xui.UI.$iconAction(this)}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c||"center")}},imageBgSize:{action:function(c){this.getSubNode("ICON").css("backgroundSize",c||"")}},imageClass:{ini:"",action:function(c,d){xui.UI.$iconAction(this,"ICON",d)}},iconFontCode:{action:function(c){xui.UI.$iconAction(this)}},iconFontSize:{action:function(c){this.getSubNode("ICON").css("fontSize",c||"")}},iconColor:{type:"color",action:function(c){this.getSubNode("ICON").css("color",c||"")}}},Appearances:{KEY:{overflow:"visible"},ICON:{position:"relative",display:xui.$inlineBlock,zoom:xui.browser.ie?1:null}},Behaviors:{HoverEffected:{ICON:"ICON"},ClickEffected:{ICON:"ICON"},onClick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onClick){return c.boxing().onClick(c,f,g)}}},EventHandlers:{onClick:function(c,f,d){}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);if(d.iconFontSize){d._fontsize="font-size:"+d.iconFontSize+";"}if(d.iconColor){d._fontclr="color:"+d.iconColor+";"}return d}}});Class("xui.UI.HTMLButton","xui.UI.Element",{Instance:{activate:function(){this.getRoot().focus();return this}},Static:{Templates:{tagName:"button",className:"xui-ui-unselectable xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius {_className}",style:"{_style};",tabindex:"{tabindex}",text:"{html}"+xui.UI.$childTag},Appearances:{KEY:{cursor:"pointer",padding:"4px"}},DataModel:{nodeName:null,tabindex:1,width:"auto",height:"auto",disabled:{ini:false,action:function(d){var e=this.getRoot(),c="xui-ui-disabled";if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}e.attr("disabled",d?"1":null)}}},Behaviors:{HoverEffected:{KEY:"KEY"}}}});Class("xui.UI.Button",["xui.UI.HTMLButton","xui.absValue"],{Initialize:function(){xui.UI.SButton=xui.UI.Button;var c="xui.UI.SButton";xui.absBox.$type[c.replace("xui.UI.","")]=xui.absBox.$type[c]=c;this.$activeClass$="xui.UI.Button"},Instance:{activate:function(){this.getRoot().focus();return this},_setCtrlValue:function(c){if(xui.isNull(c)||!xui.isDefined(c)){c=false}return this.each(function(e){var d=e.properties;if(d.type!="status"){return}e.getRoot().tagClass("-checked",c)})},resetValue:function(e){this.each(function(f){if(f.properties.type=="drop"){f.boxing().setCaption("",true)}});var c=arguments.callee.upper,d=c.apply(this,xui.toArr(arguments));c=null;return d},setUIValue:function(f,e){this.each(function(g){var h=g.properties;if(h.$UIvalue!==f&&h.type=="drop"){g.boxing().setCaption("",true)}});var c=arguments.callee.upper,d=c.apply(this,xui.toArr(arguments));c=null;return d}},Static:{DIRYMARKICON:"BACKGROUND",Templates:{tagName:"button",className:"xui-ui-unselectable xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius {_className}",style:"{_style};{_align}",tabindex:"{tabindex}",BACKGROUND:{tagName:"div"},ICON:{$order:1,className:"xuicon {imageClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{imageDisplay}",text:"{iconFontCode}"},CAPTION:{$order:2,className:"",text:"{caption}"},DROP:{$order:3,className:"xuifont xui-special-icon",style:"{_showDrop}",$fonticon:"xui-uicmd-arrowdrop"}},Appearances:{BACKGROUND:{"z-index":-1,position:"absolute",left:0,top:0,width:"100%",height:"100%"},DROP:{"vertical-align":"middle","padding-left":".66667em"}},Behaviors:{HoverEffected:{KEY:["KEY","DROP"]},NavKeys:{KEY:1},onClick:function(d,g,h){var f=d.properties;if(f.disabled){return false}var c=d.boxing();if(f.type=="status"){if(f.readonly){return false}c.setUIValue(!f.$UIvalue,null,null,"click");if(d.onChecked){c.onChecked(d,g,f.$UIvalue)}}if(d.onClick){return c.onClick(d,g,h,f.$UIvalue)}if(f.type=="drop"&&d.onClickDrop){return c.onClickDrop(d,g,h,f.$UIvalue)}},onKeydown:function(d,g,h){var f=xui.Event.getKey(g),c=f.key;if(c==" "||c=="enter"){d.getSubNode("KEY").afterMousedown();d.__fakeclick=1}},onKeyup:function(d,g,h){var f=xui.Event.getKey(g),c=f.key;if(c==" "||c=="enter"){d.getSubNode("KEY").afterMouseup();if(d.__fakeclick){xui.use(h).onClick()}}delete d.__fakeclick}},DataModel:{html:null,image:{format:"image",action:function(c){xui.UI.$iconAction(this)}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c||"center")}},imageBgSize:{action:function(c){this.getSubNode("ICON").css("backgroundSize",c||"")}},imageClass:{ini:"",action:function(c,d){xui.UI.$iconAction(this,"ICON",d)}},iconFontCode:{action:function(c){xui.UI.$iconAction(this)}},caption:{ini:undefined,action:function(c){c=(xui.isSet(c)?c:"")+"";this.getSubNode("CAPTION").html(xui.adjustRes(c,0,1))}},hAlign:{ini:"center",listbox:["left","center","right"],action:function(c){this.getRoot().css("textAlign",c)}},vAlign:{ini:"middle",listbox:["top","middle","bottom"],action:function(c){}},value:{ini:false},type:{ini:"normal",listbox:["normal","status","drop"],action:function(e){var d=this,c=d.getSubNode("DROP");if(e=="drop"){c.css("display","")}else{c.css("display","none")}}}},_ensureValue:function(c,d){if(c.properties.type=="status"){return !!d}else{return d}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d._align="text-align:"+d.hAlign+";";d._showDrop=d.type=="drop"?"":"display:none";return d},RenderTrigger:function(){var c=this,d=c.properties,e=c.boxing();if(d.type=="status"&&d.value){e.setValue(true,true,"render")}},EventHandlers:{onClick:function(c,f,g,d){},onClickDrop:function(c,f,g,d){},onChecked:function(c,f,d){}}}});Class("xui.UI.Span","xui.UI",{Static:{Templates:{className:"{_className}",style:"{_style};{_overflow};",tabindex:"{tabindex}",text:"{html}"+xui.UI.$childTag},DataModel:{width:{$spaceunit:1,ini:"2em"},height:{$spaceunit:1,ini:"1em"},selectable:true,html:{html:1,action:function(c,d,e){this.getRoot().html(xui.adjustRes(c,0,1),null,null,e)}},overflow:{ini:xui.browser.deviceType=="touchOnly"?"auto":undefined,combobox:["","visible","hidden","scroll","auto","overflow-x:hidden;overflow-y:auto","overflow-x:auto;overflow-y:hidden"],action:function(c){var d=this.getContainer();if(c){if(c.indexOf(":")!=-1){xui.arr.each(c.split(/\s*;\s*/g),function(f){var e=f.split(/\s*:\s*/g);if(e.length>1){d.css(xui.str.trim(e[0]),xui.str.trim(e[1]||""))}});return}}d.css("overflow",c||"")}},tabindex:-1},Appearances:{KEY:{"line-height":"auto"}},Behaviors:{HoverEffected:{KEY:"KEY",ICON:"ICON"},onClick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onClick){return c.boxing().onClick(c,f,g)}}},EventHandlers:{onClick:function(c,f,d){}},_prepareData:function(c,d){d=arguments.callee.upper.call(this,c,d);if(xui.isStr(d.overflow)){d._overflow=d.overflow.indexOf(":")!=-1?(d.overflow):(d.overflow?("overflow:"+d.overflow):"")}return d}}});Class("xui.UI.CSSBox","xui.UI.Span",{Instance:{adjustDock:null,draggable:null,busy:null,free:null},Static:{$initRootHidden:true,_objectProp:{normalStatus:1,hoverStatus:1,activeStatus:1,focusStatus:1},Templates:{style:"left:"+xui.Dom.HIDE_VALUE+";top:"+xui.Dom.HIDE_VALUE+";width:12.5em;height:5em;visibility:hidden;display:none;position:absolute;z-index:0;",className:"{_className}",text:"{_html}"},DataModel:{className:{ini:null,action:function(){this.box._refreshCSS(this)}},sandbox:{ini:"",action:function(c){this.box._refreshCSS(this)}},normalStatus:{ini:{},action:function(c){this.box._refreshCSS(this)}},hoverStatus:{ini:{},action:function(c){this.box._refreshCSS(this)}},activeStatus:{ini:{},action:function(c){this.box._refreshCSS(this)}},focusStatus:{ini:{},action:function(c){this.box._refreshCSS(this)}},spaceUnit:null,showEffects:null,hideEffects:null,position:null,display:null,visibility:null,zIndex:null,left:null,top:null,width:null,height:null,right:null,bottom:null,rotate:null,activeAnim:null,hoverPop:null,hoverPopType:null,dock:null,dockStretch:null,dockIgnoreFlexFill:null,renderer:null,display:null,html:null,selectable:null,overflow:null,tabindex:null,autoTips:null,disableClickEffect:null,disableHoverEffect:null,disableTips:null,disabled:null,defaultFocus:null,dockStretch:null,dockIgnore:null,dockOrder:null,dockMargin:null,dockFloat:null,dockMinW:null,dockMinH:null,dockMaxW:null,dockMaxH:null,tips:null},$adjustProp:function(f,g){var j=f.properties,c=(!g&&j.className)||("xui-css-"+f.$xid),d,e=1,h={};f.box.getAll().each(function(l){if(l!==f){h[l.properties.className]=1}});while(h[c]){c=c+(e++)}j.className=c},RenderTrigger:function(){var c=this;if(!c.$inDesign){xui("body").append(c.getRoot())}},_prepareData:function(d,e){e=arguments.callee.upper.call(this,d,e);var c=this._getCon(d);e._html="Text"+(c?("<style id='"+d.getDomId()+"cssnode' type='text/css'>"+c+"</style>"):"");return e},_getCon:function(f){var j="",n="",l,c=f.properties,m=c.className,h=c.normalStatus,g=c.hoverStatus,e=c.activeStatus,d=c.focusStatus;if(h&&!xui.isEmpty(h)){j+="."+m+"{"+xui.Dom.$adjustCss(h,true)+"}\n";if(h.color){j+="."+m+" .xui-node{color:"+h.color+"}"}}if(g&&!xui.isEmpty(g)){j+="."+m+":hover, ."+m+"-hover{"+xui.Dom.$adjustCss(g,true)+"}\n";if(g.color){j+="."+m+" .xui-node{color:"+g.color+"}"}}if(e&&!xui.isEmpty(e)){j+="."+m+":active, ."+m+":checked, ."+m+"-active, ."+m+"-checked, ."+m+"-checked:hover, ."+m+"-active:hover{"+xui.Dom.$adjustCss(e,true)+"}";if(e.color){j+="."+m+" .xui-node{color:"+e.color+"}"}}if(d&&!xui.isEmpty(d)){j+="."+m+":focus, ."+m+"-focus{"+xui.Dom.$adjustCss(d,true)+"}";if(d.color){j+="."+m+" .xui-node{color:"+d.color+"}"}}if(l=c.sandbox){l=(f.host&&f.host[l]&&f.host[l].get(0))||(xui(l).get(0)&&l);if(l){n=xui.UI._getThemePrevId(l)}}else{if(f.$inDesign){if(l=f.parent){n=xui.UI._getThemePrevId(l)}}}return xui.UI._adjustCSS(j,n)},_refreshCSS:function(d){var c=this;xui.resetRun(d.key+":"+d.$xid,function(){if(d.destroyed){return}var h=d.getDomId()+"cssnode",g=d.properties,e=d.getRoot(),f=c._getCon(d);e.query("style").remove(false);xui.Dom._setClass(e.get(0),g.className);if(f){xui.CSS._appendSS(e.get(0),f,h,false)}})},EventHandlers:{beforeInputAlert:null,onContextmenu:null,onClick:null,onDock:null,onLayout:null,onMove:null,onRender:null,onResize:null,onShowTips:null,beforeHoverEffect:null,beforeAppend:null,afterAppend:null,beforeRender:null,afterRender:null,beforeRemove:null,afterRemove:null,onHotKeydown:null,onHotKeypress:null,onHotKeyup:null}}});Class("xui.UI.Div","xui.UI",{Initialize:function(){xui.UI.Pane=xui.UI.Div;var c="xui.UI.Pane";xui.absBox.$type[c.replace("xui.UI.","")]=xui.absBox.$type[c]=c;this.$activeClass$="xui.UI.Div"},Static:{Appearances:{KEY:{outline:xui.browser.gek?"none":null,zoom:(xui.browser.ie&&xui.browser.ver<9)?"1":null,background:xui.browser.ie?"url("+xui.ini.img_bg+") no-repeat left top":null,"line-height":"auto"}},Templates:{tagName:"div",className:"xui-uicontainer {_className}",style:"{_style};{_panelstyle};{_overflow};",tabindex:"{tabindex}",text:"{html}"+xui.UI.$childTag},DataModel:{iframeAutoLoad:{ini:"",action:function(){this.box._applyAutoLoad(this)}},ajaxAutoLoad:{ini:"",action:function(){this.box._applyAutoLoad(this)}},width:{$spaceunit:1,ini:"10em"},height:{$spaceunit:1,ini:"10em"},selectable:true,html:{html:1,action:function(c,d,e){this.getRoot().html(xui.adjustRes(c,0,1),null,null,e)}},overflow:{ini:xui.browser.deviceType=="touchOnly"?"auto":undefined,combobox:["","visible","hidden","scroll","auto","overflow-x:hidden;overflow-y:auto","overflow-x:auto;overflow-y:hidden"],action:function(c){var d=this.getContainer();if(c){if(c.indexOf(":")!=-1){xui.arr.each(c.split(/\s*;\s*/g),function(f){var e=f.split(/\s*:\s*/g);if(e.length>1){d.css(xui.str.trim(e[0]),xui.str.trim(e[1]||""))}});return}}d.css("overflow",c||"")}},tabindex:-1},RenderTrigger:function(){var c=this;if(c.box.KEY=="xui.UI.Div"){if(c.properties.iframeAutoLoad||c.properties.ajaxAutoLoad){c.box._applyAutoLoad(this)}}},Behaviors:{DroppableKeys:["KEY"],PanelKeys:["KEY"],onClick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onClick){return c.boxing().onClick(c,f,g)}}},EventHandlers:{onClick:function(c,f,d){}},_prepareData:function(c,d){d=arguments.callee.upper.call(this,c,d);if(xui.isStr(d.overflow)){d._overflow=d.overflow.indexOf(":")!=-1?(d.overflow):(d.overflow?("overflow:"+d.overflow):"")}return d},_applyAutoLoad:function(g){var c=g.properties,l=g.boxing();if(c.iframeAutoLoad){l.getContainer().css("overflow","hidden");var n=typeof c.iframeAutoLoad=="string"?{url:c.iframeAutoLoad}:xui.clone(c.iframeAutoLoad,true),d="biframe_"+xui.stamp(),m=xui.browser.ie&&xui.browser.ver<9,h=document.createElement(m?"<iframe name='"+d+"'>":"iframe");n.url=xui.adjustRes(n.url,false,true);h.id=h.name=d;if(xui.isHash(c.iframeAutoLoad)){c.iframeAutoLoad.frameName=d}c._frameName=d;if(!n.query){n.query={}}n.query._rand=xui.rand();h.frameBorder="0";h.marginWidth="0";h.marginHeight="0";h.vspace="0";h.hspace="0";h.allowTransparency="true";h.width="100%";h.height="100%";l.getContainer().html("",false);l.append(h);if((n.method||"").toLowerCase()=="post"){xui.Dom.submit(n.url,n.query,"post",d,n.enctype)}else{h.src=n.url}}else{if(c.ajaxAutoLoad){var j=typeof c.ajaxAutoLoad=="string"?{url:c.ajaxAutoLoad}:xui.clone(c.ajaxAutoLoad,true),o={rspType:"text"};if(!j.query){j.query={}}j.query._rand=xui.rand();xui.merge(o,j.options);l.busy();var f=l.getContainer();xui.Ajax(xui.adjustRes(j.url,false,true),j.query,function(e){f.html(e,true,true);l.free()},function(e){f.html("<div>"+e+"</div>",true,false);l.free()},null,o).start()}}},_onresize:function(d,c){if(c){xui.UI._adjustConW(d,d.getRoot(),c)}}}});Class("xui.UI.MoudluePlaceHolder","xui.UI.Div",{Instance:{destroy:function(c,d){var e=this.get(0);if(!e){return}(e.$afterDestroy=(e.$afterDestroy||{}))["destroyAttachedModule"]=function(){if(!this._replaced&&this._module){this._module.destroy()}};return arguments.callee.upper.apply(this,[c,d])},adjustDock:null,draggable:null,busy:null,free:null,setProperties:function(d,e){var c=this.get(0);if(!c._properties){c._properties={}}if(!d){c._properties={}}else{if(typeof d=="string"){c._properties[d]=e}else{xui.merge(c._properties,d,"all")}}return this},getValue:function(){return xui.get(this.get(0),["_properties","value"])},setValue:function(c){xui.set(this.get(0),["_properties","value"],c);return this},getUIValue:function(){return this.get(0)._$UIvalue},setUIValue:function(c){this.get(0)._$UIvalue=c;return this},getProperties:function(d){var c=this.get(0);if(!c._properties){c._properties={}}return d?c._properties[d]:c._properties},setEvents:function(d,e){var c=this.get(0);if(!c._events){c._events={}}if(!d){c._events={}}else{if(typeof d=="string"){c._events[d]=e}else{xui.merge(c._events,d,"all")}}return this},getEvents:function(d){var c=this.get(0);if(!c._events){c._events={}}return d?this._events[d]:this._events},replaceWithModule:function(g){var d=this,j=d.get(0),c,f,h,e;if(!j||j.destroyed||j._replaced||!j.getRootNode()){return}j._replaced=1;if(j.$beforeReplaced){j.$beforeReplaced.call(g)}if(j.host||j.alias){g.setHost(j.host,j.alias)}if("_$UIvalue" in j){g.$UIvalue=j._$UIvalue}if(f=j._events){g.setEvents(f)}if(f=j._properties){g.setProperties(f)}if(j.moduleClass&&j.moduleXid){if(c=xui.Module.getInstance(j.moduleClass,j.moduleXid)){c.AddComponents(g)}}if(h=j.parent){e=j.childrenId;g.show(function(){if(j.$afterReplaced){j.$afterReplaced.call(g)}j.alias=null;j._module=null;if(j.box){j.boxing().destroy()}},h,e)}else{if(j.rendered&&(h=j.getRoot().parent())&&!h.isEmpty()){g.show(function(){if(j.$afterReplaced){j.$afterReplaced.call(g)}j.alias=null;j._module=null;if(j.box){j.boxing().destroy()}},h)}}if(j.$afterReplaced){j.$afterReplaced.call(g)}j.alias=null;j._module=null;d.destroy()}},Static:{Templates:{tagName:"div",style:"left:0;top:0;width:0;height:0;visibility:hidden;display:none;position:absolute;z-index:0;"},DataModel:{showEffects:null,hideEffects:null,activeAnim:null,hoverPop:null,hoverPopType:null,dock:null,dockStretch:null,renderer:null,html:null,disableClickEffect:null,disableHoverEffect:null,disableTips:null,disabled:null,defaultFocus:null,dockStretch:null,dockIgnore:null,dockOrder:null,dockMargin:null,dockFloat:null,dockMinW:null,dockMinH:null,dockMaxW:null,dockMaxH:null,tips:null},EventHandlers:{onContextmenu:null,onDock:null,onLayout:null,onMove:null,onRender:null,onResize:null,onShowTips:null,beforeAppend:null,afterAppend:null,beforeRender:null,afterRender:null,beforeRemove:null,afterRemove:null,onHotKeydown:null,onHotKeypress:null,onHotKeyup:null},RenderTrigger:function(){var c=this;if(c&&!c._replaced&&c._module){c.boxing().replaceWithModule(c._module)}}}});Class("xui.UI.Image","xui.UI",{Initialize:function(){var c=this;c._adjustItems=xui.absList._adjustItems;c.prototype._prepareItems=function(d){return d}},Instance:{getRate:function(){return parseFloat(this.get(0)._rate)||1}},Static:{IMGNODE:1,Templates:{tagName:"img",style:"cursor:{cursor};{_style}",className:"{_className}",border:"0",src:xui.ini.img_bg,alt:"{alt}"},Behaviors:{HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},DraggableKeys:["KEY"],onError:function(c,d,f){c.boxing().onError(c)},onLoad:function(f,h,j){var c=xui.use(j).get(0),g;try{g=c.src}catch(h){return}if(g!=xui.ini.img_bg){var d=new Image();d.onload=function(){if(!f||f.isDestroyed){return}var l=f.properties,e=f.box._adjust(f,(l.width===""||l.width=="auto")?d.width:l.width,(l.height===""||l.height=="auto")?d.height:l.height);if(f.$afterLoad){f.$afterLoad.apply(f.host,[f,g,e[0],e[1]])}f.boxing().afterLoad(f,g,e[0],e[1]);if(l.dock!="none"){f.boxing().adjustDock()}d.onload=null};d.src=g;xui.Dom.fixPng(c)}},onClick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onClick){return c.boxing().onClick(c,f,g)}},onDblclick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onDblclick){c.boxing().onDblclick(c,f,g)}}},RenderTrigger:function(){var d=this,f=d.properties,c=f.src,e=f.activeItem;if(e&&-1!=xui.arr.subIndexOf(f.items,"id",e)){d.boxing().setActiveItem(e,true)}else{if(c){d.boxing().setSrc(c,c!=xui.ini.img_bg)}}},EventHandlers:{onClick:function(c,d,f){},onDblclick:function(c,d,f){},onError:function(c){},beforeLoad:function(c){},afterLoad:function(e,f,d,c){}},_adjust:function(j,f,n){var e=j.properties,d=j.getRootNode(),l=xui.$us(e),m=function(o,p){return j.$forceu(o,l>0?"em":"px",p)};f=f?j.$px(f,null,true):f;n=n?j.$px(n,null,true):n;d.style.width=d.style.height="";if(f>0&&n>0){var h=e.maxWidth/f,g=e.maxHeight/n,c=h<g?h:g;if(c>=1){c=1}j._rate=c;return[d.width=f*c,d.height=n*c]}return[0,0]},DataModel:{maxWidth:{ini:800,action:function(c){var d=this.getRootNode(),e=this.properties;this.box._adjust(this,(e.width===""||e.width=="auto")?d.width:e.width,(e.height===""||e.height=="auto")?d.height:e.height)}},maxHeight:{ini:600,action:function(c){var d=this.getRootNode(),e=this.properties;this.box._adjust(this,(e.width===""||e.width=="auto")?d.width:e.width,(e.height===""||e.height=="auto")?d.height:e.height)}},width:{ini:"auto",action:function(c){var e=this.getRootNode(),f=this.properties,d=new Image();d.src=e.src;this.box._adjust(this,(c===""||c=="auto")?d.width:c,(f.height===""||f.height=="auto")?d.height:f.height)}},height:{ini:"auto",action:function(c){var e=this.getRootNode(),f=this.properties,d=new Image();d.src=e.src;this.box._adjust(this,(f.width===""||f.width=="auto")?d.width:f.width,(c===""||c=="auto")?d.height:c)}},src:{format:"image",ini:xui.ini.img_bg,linkage:["activeItem"],action:function(d){var c=this;if(false!==c.boxing().beforeLoad(this)){xui.asyRun(function(){c.getRoot().attr({width:"0",height:"0",src:xui.adjustRes(d)})})}if(!c.$inner){c.properties.activeItem=""}}},alt:{ini:"",action:function(c){this.getRoot().attr("alt",c)}},items:{ini:[]},activeItem:{ini:"",linkage:["src","alt","tips"],action:function(e){var d=this.properties.items,g=xui.arr.subIndexOf(d,"id",""+e),h,f=this.boxing(),l,j,c;if((g!=-1)&&(h=d[g])){l=h.image||xui.ini.img_bg;j=h.alt||"";c=h.tips||""}this.$inner=1;f.setSrc(l||xui.ini.img_bg,true);delete this.$inner;f.setAlt(j||"");f.setTips(c||"")}},cursor:{ini:"auto",combobox:["","default","text","pointer","move","crosshair","wait","help","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize"],action:function(c){this.getRoot().css("cursor",c)}}}}});Class("xui.UI.Flash","xui.UI",{Instance:{refreshFlash:function(){var d="",c=this.constructor;return this.each(function(e){xui.resetRun(e.domId,function(){c._clearMemory(e);if(e.properties.src){c._drawSWF(e)}})})},getFlash:function(){return this.constructor._getSWF(this.get(0))}},Static:{Appearances:{KEY:{overflow:"hidden"},BOX:{position:"absolute",left:0,top:0,"z-index":1},COVER:{position:"absolute",left:"-1px",top:"-1px",width:0,height:0,"z-index":4}},Templates:{tagName:"div",className:"{_className}",style:"{_style}",BOX:{tagName:"div"},COVER:{tagName:"div",style:"background-image:url("+xui.ini.img_bg+");"}},Behaviors:{onSize:xui.UI.$onSize},DataModel:{selectable:true,width:{$spaceunit:1,ini:"30em"},height:{$spaceunit:1,ini:"25em"},cover:false,src:{format:"flash",ini:"",action:function(c){this.boxing().refreshFlash()}},parameters:{ini:{},action:function(c){this.boxing().refreshFlash()}},flashvars:{ini:{},action:function(c){this.boxing().refreshFlash()}}},RenderTrigger:function(){(this.$beforeDestroy=(this.$beforeDestroy||{}))["flashClearMem"]=function(){if(this.box){this.box._clearMemory(this)}};this.boxing().refreshFlash()},getFlashVersion:function(){if(xui.browser.ie){try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{c.AllowScriptAccess="always"}catch(d){return"6,0,0"}}catch(d){}finally{try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(d){}}}else{try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(d){}}return"0,0,0"},_getSWF:function(c){var d=xui.isStr(c)?c:(this._idtag+c.serialId);return(xui.browser.ie?window[d]:((document.embeds&&document.embeds[d])||window.document[d]))||document.getElementById(d)},_clearMemory:function(f){var g=this._idtag+f.serialId;var d=xui.fun(),e=f.box._getSWF(f);if(e){e.style.display="none";if(xui.browser.ie){for(var c in e){if(typeof e[c]=="function"){e[c]=d}}if(window[g]){window[g]=undefined}}else{if(document.embeds&&document.embeds[g]){document.embeds[g]=undefined}if(window.document[g]){window.document[g]=undefined}}e=d=null}},_drawSWF:function(g){var f=this;var l=g.properties,e=g.serialId,j=xui.adjustRes(l.src),h=l.parameters,d=xui.copy(l.flashvars),c="";d.DOMId=g.box._idtag+g.serialId;d.chartWidth=l.width;d.chartHeight=l.height;if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){c+='<embed type="application/x-shockwave-flash" src="'+j+"?"+xui.urlEncode(h)+'" ';c+='width="'+l.width+'" height="'+l.height+'" ';c+='id="'+d.DOMId+'" name="'+d.DOMId+'" ';c+='wmode="opaque" ';c+='flashvars="'+xui.urlEncode(d)+'" ';c+="/>"}else{c+='<object id="'+d.DOMId+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ';c+='width="'+l.width+'" height="'+l.height+'">';c+='<param name="movie" value="'+j+"?"+xui.urlEncode(h)+'" />';c+='<param name="wmode" value="opaque" />';c+='<param name="flashvars" value="'+xui.urlEncode(d)+'" />';c+="</object>"}g.getSubNode("BOX").html(c,false)},_onresize:function(e,d,l){var c=e.properties,g=xui.$us(c),j=function(n,o){return e.$forceu(n,g>0?"em":"px",o)},m=e.getSubNode("BOX").cssSize(),h=d?e.$px(d):d,f=l?e.$px(l):l;if((d&&!xui.compareNumber(m.width,h,6))||(l&&!xui.compareNumber(m.height,f,6))){if(d){c.width=j(h)}if(l){c.height=j(f)}m={width:d?c.width:null,height:l?c.height:null};e.getSubNode("BOX").cssSize(m,true);if(e.$inDesign||c.cover){e.getSubNode("COVER").cssSize(m,true)}e.boxing().refreshFlash()}}}});Class("xui.UI.Audio","xui.UI",{Instance:{play:function(){var c=this.getSubNode("H5"),d=c.get(0);if(d){d.play()}},pause:function(){var c=this.getSubNode("H5"),d=c.get(0);if(d){d.pause()}},load:function(){var c=this.getSubNode("H5"),d=c.get(0);if(d){d.load()}},canPlayType:function(e){var c=this.getSubNode("H5"),d=c.get(0);if(d){return d.canPlayType(e)}}},Static:{Appearances:{KEY:{overflow:"hidden"},H5:{position:"absolute",left:0,top:0,"z-index":1}},Templates:{tagName:"div",className:"{_className}",style:"{_style}",H5:{tagName:"audio"}},Behaviors:{HotKeyAllowed:false,onSize:xui.UI.$onSize},DataModel:{selectable:true,width:{$spaceunit:1,ini:"18em"},height:{$spaceunit:1,ini:"5em"},src:{ini:"",action:function(c){this.getSubNode("H5").attr("src",c||null)}},controls:{ini:true,action:function(c){this.getSubNode("H5").attr("controls",c||null)}},preload:{ini:false,action:function(c){this.getSubNode("H5").attr("preload",c||null)}},loop:{ini:false,action:function(c){this.getSubNode("H5").attr("loop",c||null)}},muted:{ini:false,action:function(c){this.getSubNode("H5").attr("muted",c||null)}},volume:{ini:1,action:function(c){this.getSubNode("H5").attr("volume",c)}},autoplay:{ini:false,action:function(c){this.getSubNode("H5").attr("autoplay",c||null)}}},RenderTrigger:function(){var f=this,d=f.getSubNode("H5"),g=f.properties,c=function(){if(f.onMediaEvent){f.boxing().onMediaEvent(f,event,arguments)}},e;"loadstart progress durationchange seeked seeking timeupdate playing canplay canplaythrough volumechange ratechange loadedmetadata loadeddata play pause ended".split(" ").forEach(function(j,h){if(d&&d.get(0)){d.get(0).addEventListener(j,c,false)}});(f.$beforeDestroy=(f.$beforeDestroy||{}))["detachEvents"]=function(){"loadstart progress durationchange seeked seeking timeupdate playing canplay canplaythrough volumechange ratechange loadedmetadata loadeddata play pause ended".split(" ").forEach(function(j,h){if(d&&d.get(0)){d.get(0).removeEventListener(j,c,false)}})};if(e=g.src){d.attr("src",e)}if(e=g.controls){d.attr("controls",e)}if(e=g.preload){d.attr("preload",e)}if(e=g.loop){d.attr("loop",e)}if(e=g.muted){d.attr("muted",e)}if(e=g.autoplay){d.attr("autoplay",e)}if((e=g.volume)!==1){d.attr("volume",e)}},EventHandlers:{onMediaEvent:function(d,c,e){}},_onresize:function(e,d,n){var l=e.getSubNode("H5"),o=l.cssSize(),c=e.properties,g=xui.$us(c),j=function(p,q){return e.$forceu(p,g>0?"em":"px",q)},m=e.getRoot(),h=d?e.$px(d):d,f=n?e.$px(n):n;if((d&&!xui.compareNumber(o.width,h,6))||(n&&!xui.compareNumber(o.height,f,6))){if(d){c.width=j(h);l.attr("width",h)}if(n){c.height=j(f);l.attr("height",f)}}}}});Class("xui.UI.Video","xui.UI.Audio",{Instance:{},Static:{Templates:{tagName:"div",className:"{_className}",style:"{_style}",H5:{tagName:"video",width:"{width}",height:"{height}"}},DataModel:{width:{$spaceunit:1,ini:"34em"},height:{$spaceunit:1,ini:"25em"},poster:{format:"image",ini:"",action:function(c){this.getSubNode("H5").attr("poster",c||null)}}},RenderTrigger:function(){var e=this,c=e.getSubNode("H5"),f=e.properties,d;if(d=f.poster){c.attr("poster",d)}},_onresize:function(e,d,m){var l=e.getSubNode("H5"),n=l.cssSize(),c=e.properties,g=xui.$us(c),j=function(o,p){return e.$forceu(o,g>0?"em":"px",p)},h=e.$px(d),f=e.$px(m);if((d&&!xui.compareNumber(n.width,h,6))||(m&&!xui.compareNumber(n.height,f,6))){if(d){c.width=j(h);l.attr("width",h)}if(m){c.height=j(f);l.attr("height",f)}}}}});Class("xui.UI.Resizer","xui.UI",{Instance:{_attachTo:function(f,e){var d=this,c=d.get(0);c._target=xui(f);c._parent=e||xui("body");c._parent.append(d);c.$resizeId=xui(f).id();return d},show:function(){var c=this;c.each(function(d){d.getRoot().css("display","")});if(xui.browser.ie){c.reBoxing().ieRemedy()}return c},hide:function(){var c=this;c.reBoxing().css("display","none");return c}},Initialize:function(){this.addTemplateKeys(["HANDLER","HIDDEN","MOVE","CONF1","CONF2","ROTATE","L","R","T","B","LT","RT","LB","RB","REGION"]);xui.each({addResizer:function(e,d,c){var g=xui([this.get(0)]);e=e||{};xui.merge(e,{_attached:true});var f=new xui.UI.Resizer(e)._attachTo(g,g);if(d){f.onUpdate(d)}if(c){f.onChange(c)}return f},removeResizer:function(){var c=this.id();xui.arr.each(xui.UI.Resizer._cache,function(d){if(d&&d.$resizeId==c){d.boxing().destroy(true)}});return this},$getResizer:function(){var d=this.id(),c;xui.arr.each(xui.UI.Resizer._cache,function(e){if(e&&e.$resizeId==d){c=e;return false}});return c&&c.boxing()}},function(d,c){xui.Dom.plugIn(c,d)});xui.each({_resizer:function(d,c){return this.each(function(g){var e=g.getSubNode("BORDER"),f=g.properties;if(e.$getResizer()){return}c=c||{};var h=function(A,u,D,m){var o=arguments.callee.profile,n=o.getRoot(),B=o.boxing(),j=o.properties,r=o.box["xui.svg"],C;if(D){var x=null,q=null,p=null,C=null;if(C=D.width){n.widthBy(C);j.width=x=o.$forceu(r?B.getWidth():n.width())}if(C=D.height){n.heightBy(C);j.height=q=o.$forceu(r?B.getHeight():n.height())}xui.UI.$tryResize(o,x,q,true);if(!o.box._onresize&&o.onResize&&(x!==null||q!==null)){B.onResize(o,x,q)}}if(m){if((C=m.left)&&!(j.left=="auto"&&Math.round(parseFloat(j.right))>=0)){n.leftBy(C);j.left=p=o.$forceu(r?B.getLeft():n.left())}if((C=m.top)&&!(j.top=="auto"&&Math.round(parseFloat(j.bottom))>=0)){n.topBy(C);j.top=C=o.$forceu(r?B.getTop():n.top())}if(o.onMove&&(p!==null||C!==null)){B.onMove(o,p,C,null,null)}}return false};h.profile=g;g.$resizer=e.addResizer(c,h);g.$resizer.get(0).$parentUIProfile=g;if(f.visibility=="hidden"){g.$resizer.hide()}})},_unResizer:function(){return this.each(function(d){var c=d.getSubNode("BORDER");if(!c.$getResizer()){return}c.removeResizer();delete d.$resizer})}},function(d,c){xui.UI.Widget.plugIn(c,d)});xui.UI.Widget.setDataModel({resizer:{ini:false,action:function(e){var d=this.boxing();if(e){var f=this.properties,c={};xui.each("minHeight,minWidth,maxHeight,maxWidth".split(","),function(g){if(g in f){c[g]=f[g]}});if(f.resizerProp&&!xui.isEmpty(f.resizerProp)){xui.merge(c,f.resizerProp,"all")}if(f.tagVar.resizerProp){xui.merge(c,f.tagVar.resizerProp,"all")}d._resizer(e,c);if(this.$inDesign){this.$resizer.get(0).$inDesign=1}}else{d._unResizer()}}},resizerProp:{ini:{}}})},Static:{Templates:{tagName:"div",className:"{_disabled}",style:"{_style};"},Appearances:{KEY:{position:"absolute",margin:"0 -1px -1px 0",visibility:"visible",background:(xui.browser.ie&&!xui.browser.newie)?("url("+xui.ini.img_bg+")"):"","z-index":60,cursor:"move"},"KEY.disabled":{background:"url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 200 200'><rect x='0' y='0' width='200' height='200' stroke='black' fill='transparent' stroke-width='1'></rect><path d='M200 0 L0 200 ' stroke='black' stroke-width='1'/><path d='M0 0 L200 200 ' stroke='black' stroke-width='1'/></svg>\")","background-repeat":"no-repeat","background-position":"center center","background-size":"100% 100%, auto","background-color":"#bbb",opacity:"0.3"},"KEY.disabled.active":{"background-color":"#eee"},"KEY.disabled div":{display:"none"},MOVE:{position:"absolute",display:"block","z-index":100,visibility:"visible"},"CONF1, CONF2, ROTATE":{position:"absolute",display:"block","z-index":100,visibility:"visible",cursor:"pointer"},ROTATE:{$order:1,cursor:"crosshair"},HANDLER:{$order:0,position:"absolute",display:"block",border:"solid 1px","z-index":100,visibility:"visible"},T:{$order:1,left:"50%",cursor:"n-resize"},RT:{$order:1,cursor:"ne-resize","z-index":110},R:{$order:1,top:"50%",cursor:"e-resize"},RB:{$order:1,cursor:"se-resize","z-index":110},B:{$order:1,left:"50%",cursor:"s-resize"},LB:{$order:1,cursor:"sw-resize","z-index":110},L:{$order:1,top:"50%",cursor:"w-resize"},LT:{$order:1,cursor:"nw-resize","z-index":110},HIDDEN:{$order:10,"background-color":"transparent","border-width":0}},Behaviors:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,"move")},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f,"move")},onDrag:function(c,d,f){c.box._onDrag(c,d,f,"move")},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,"move")},onDblclick:function(c,d,f){if(c.onDblclick){c.boxing().onDblclick(c,d,f)}},CONF1:{onMouseover:function(c,d,f){if(c.properties.disabled){return false}if(c.onConfig){return c.boxing().onConfig(c,d,f,"left","mouseover")}return false},onMousedown:function(c,d,f){if(c.properties.disabled){return false}if(c.onConfig){return c.boxing().onConfig(c,d,f,"left","mousedown")}return false},onClick:function(c,d,f){if(c.properties.disabled){return false}if(c.onConfig){return c.boxing().onConfig(c,d,f,"left","click")}return false}},CONF2:{onMouseover:function(c,d,f){if(c.properties.disabled){return false}if(c.onConfig){return c.boxing().onConfig(c,d,f,"right","mouseover")}return false},onMousedown:function(c,d,f){if(c.properties.disabled){return false}if(c.onConfig){return c.boxing().onConfig(c,d,f,"right","mousedown")}return false},onClick:function(c,d,f){if(c.properties.disabled){return false}if(c.onConfig){return c.boxing().onConfig(c,d,f,"right","click")}return false}},ROTATE:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,"rotate");return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f,"rotate")},onDrag:function(c,d,f){c.box._onDrag(c,d,f,"rotate")},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,"rotate")}},LT:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,"nw");return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f,"nw")},onDrag:function(c,d,f){c.box._onDrag(c,d,f,"nw")},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,"nw")}},RT:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,"ne");return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f,"ne")},onDrag:function(c,d,f){c.box._onDrag(c,d,f,"ne")},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,"ne")}},LB:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,"sw");return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f,"sw")},onDrag:function(c,d,f){c.box._onDrag(c,d,f,"sw")},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,"sw")}},RB:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,"se");return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f,"se")},onDrag:function(c,d,f){c.box._onDrag(c,d,f,"se")},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,"se")}},L:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,"w");return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f,"w")},onDrag:function(c,d,f){c.box._onDrag(c,d,f,"w")},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,"w")}},T:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,"n");return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f,"n")},onDrag:function(c,d,f){c.box._onDrag(c,d,f,"n")},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,"n")}},R:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,"e");return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f,"e")},onDrag:function(c,d,f){c.box._onDrag(c,d,f,"e")},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,"e")}},B:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,"s");return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f,"s")},onDrag:function(c,d,f){c.box._onDrag(c,d,f,"s")},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,"s")}}},DataModel:{_attached:false,forceVisible:false,forceMovable:"",singleDir:false,vertical:true,horizontal:true,minHeight:12,minWidth:12,maxHeight:5000,maxWidth:5000,handlerSize:8,handlerOffset:1,disabled:{ini:false,action:function(c){if(c){this.getRoot().addClass("disabled")}else{this.getRoot().removeClass("disabled")}}},leftConfigBtn:{ini:false,action:function(c){this.getSubNode("CONF1").css("display",c?"":"none")}},rightConfigBtn:{ini:false,action:function(c){this.getSubNode("CONF2").css("display",c?"":"none")}},rotatable:{ini:false,action:function(c){if(c&&xui.browser.ie&&xui.browser.ver<=8){c=false}this.getSubNode("ROTATE").css("display",c?"":"none")}},left:100,top:100,height:100,width:100,position:"absolute",display:"block"},EventHandlers:{onDblclick:function(c,d,f){},onUpdate:function(f,g,e,c,d){},onChange:function(d,c){},onConfig:function(d,f,g,h,c){}},_dynamicTemplate:function(e){var h=e.properties,o,g,l,f=e._exhash="$_attached:"+h._attached+";forceVisible:"+h.forceVisible+";singleDir:"+h.singleDir+";vertical:"+h.vertical+";horizontal:"+h.horizontal+";forceMovable:"+h.forceMovable+";";var c=arguments.callee.map||(arguments.callee.map={MOVE:{tagName:"div",className:"xuifont",$fonticon:"xui-icon-dragmove",style:"font-size: 1.5em;top:50%;left:50%;margin-left:-0.5em;margin-top:-0.5em;"},CONF1:{tagName:"div",className:"xuifont",$fonticon:"xui-icon-star",style:"font-size: 1.5em;top:-1.125em;left:-1.125em;{_leftCofigBtn};"},CONF2:{tagName:"div",className:"xuifont",$fonticon:"xui-uicmd-opt",style:"font-size: 1.5em;top:-1.125em;left:auto;right:-1.125em;{_rightCofigBtn};"},ROTATE:{tagName:"div",className:"xuifont",$fonticon:"xui-icon-circle",style:"font-size: 1.5em;top:-1.25em;left:50%;margin-left:-0.5em;{_rotateBtn};"},T:{tagName:"div",style:"top:-{_extend};margin-left:-{_extend};width:{_handlerSize};height:{_handlerSize};"},RT:{tagName:"div",style:"top:-{_extend};right:-{_extend};width:{_handlerSize};height:{_handlerSize};"},R:{tagName:"div",style:"right:-{_extend};margin-top:-{_extend};width:{_handlerSize};height:{_handlerSize};"},RB:{tagName:"div",style:"bottom:-{_extend};right:-{_extend};width:{_handlerSize};height:{_handlerSize};"},B:{tagName:"div",style:"bottom:-{_extend};margin-left:-{_extend};width:{_handlerSize};height:{_handlerSize};"},LB:{tagName:"div",style:"bottom:-{_extend};left:-{_extend};width:{_handlerSize};height:{_handlerSize};"},L:{tagName:"div",style:"left:-{_extend};margin-top:-{_extend};width:{_handlerSize};height:{_handlerSize};"},LT:{tagName:"div",style:"left:-{_extend};top:-{_extend};width:{_handlerSize};height:{_handlerSize};"},cover:{T:{tagName:"div",style:"width:100%;left:0em;top:-{_extend};height:{_handlerSize};"},RT:{tagName:"div",style:"top:-{_extend};right:-{_extend};width:{_handlerSize};height:{_handlerSize};"},R:{tagName:"div",style:"height:100%;top:0em;right:-{_extend};width:{_handlerSize};"},RB:{tagName:"div",style:"right:-{_extend};bottom:-{_extend};width:{_handlerSize};height:{_handlerSize};"},B:{tagName:"div",style:"width:100%;left:0em;bottom:-{_extend};height:{_handlerSize};"},LB:{tagName:"div",style:"left:-{_extend};bottom:-{_extend};width:{_handlerSize};height:{_handlerSize};"},L:{tagName:"div",style:"height:100%;top:0em;left:-{_extend};width:{_handlerSize};"},LT:{tagName:"div",style:"top:-{_extend};left:-{_extend};width:{_handlerSize};height:{_handlerSize};"}}});var j=e.box.getTemplate(f);if(!j){var m,d;j=xui.clone(e.box.getTemplate());m=h._cover?c.cover:c;if(h._move){j.MOVE=c.MOVE}j.CONF1=c.CONF1;j.CONF2=c.CONF2;j.ROTATE=c.ROTATE;if(h.vertical){if(!h.singleDir){j.T=m.T}j.B=m.B}if(h.horizontal){if(!h.singleDir){j.L=m.L}j.R=m.R;if(h.vertical){if(!h.singleDir){j.LB=m.LB;j.RT=m.RT;j.LT=m.LT}j.RB=m.RB}}d=e.getClass("KEY","-handler")+" ";if(m=j.T){m.className=d}if(m=j.RT){m.className=d}if(m=j.R){m.className=d}if(m=j.RB){m.className=d}if(m=j.B){m.className=d}if(m=j.LB){m.className=d}if(m=j.L){m.className=d}if(m=j.LT){m.className=d}if(!h._visible){d=e.getClass("KEY","-hidden")+" ";if(m=j.T){m.className+=d}if(m=j.RT){m.className+=d}if(m=j.R){m.className+=d}if(m=j.RB){m.className+=d}if(m=j.B){m.className+=d}if(m=j.LB){m.className+=d}if(m=j.L){m.className+=d}if(m=j.LT){m.className+=d}}e.box.setTemplate(j,f)}e.template=j},_prepareData:function(d){var c=d.properties;c._visible=true;c._cover=false;c._move=true;if(c._attached){c._visible=false;c._cover=true;c._move=false;c.position="static";c.display="inline";c.left=c.top=c.width=c.height=0}if(c.forceVisible){c._visible=true;c._cover=false}if(typeof c.forceMovable=="boolean"){c._move=c.forceMovable}c.extend=(parseFloat(c.handlerSize)||0)/2+(parseFloat(c.handlerOffset)||0);c._handlerSize=d.$em(c.handlerSize)+"em";c._extend=d.$em(c.extend)+"em";c._leftCofigBtn=c.leftConfigBtn?"":"display:none";c._rightCofigBtn=c.rightConfigBtn?"":"display:none";var e=c.rotatable;if(e&&xui.browser.ie&&xui.browser.ver<=8){e=false}c._rotateBtn=e?"":"display:none";c._disabled=c.disabled?"disabled":"";return arguments.callee.upper.call(this,d)},RenderTrigger:function(){var c=this;xui.setNodeData(c.renderId,"zIndexIgnore",1);c.box._tryCursors(c)},_onUpdate:function(g,h,f,c,d){if(h){if(f){h.widthBy(f.width,true).heightBy(f.height,true)}if(c){var e=h.get(0).style;if(e.left=="auto"&&(Math.round(parseFloat(e.right))>=0)){}else{h.leftBy(c.left)}if(e.top=="auto"&&(Math.round(parseFloat(e.bottom))>=0)){}else{h.topBy(c.top)}}if(xui.isDefined(d)){h.rotate(d)}}},_switchAxis:function(c,d,j){var h=(d+360)%360,m=["n","ne","e","se","s","sw","w","nw"],l=Math.round(h/45),f=xui.arr.indexOf(m,c),e=f+l,g=m[e%8];if(j&&e%2==1){if(h<l*45){g=m[(e-1)%8]}else{g=m[(e+1)%8]}}return g},_tryCursors:function(d){var c=(d.getRoot().rotate()+360)%360,e=this._switchAxis,g={T:"n",RT:"ne",R:"e",RB:"se",B:"s",LB:"sw",L:"w",LT:"nw"},h;xui.each(g,function(f,j){if((h=d.getSubNode(j)).get(0)){h.css("cursor",e(f,c)+"-resize")}})},_getDDParas:function(e,c,d){switch(c){case"move":return{move:true};case"rotate":return{rotate:true};case"nw":return{left:true,top:true};case"ne":return{right:true,top:true};case"sw":return{left:true,bottom:true};case"se":return{right:true,bottom:true};case"w":return{left:true};case"n":return{top:true};case"e":return{right:true};case"s":return{bottom:true}}},_onMousedown:function(f,h,j,d){if(f.$inDesign){return}if(f.properties.disabled){return false}var c=this._getDDParas(0,d);if(xui.Event.getBtn(h)!="left"){return}var g=f.$parentUIProfile;if(g&&g["xui.UIProfile"]&&g.beforeResizerDrag&&false===xui.tryF(g.beforeResizerDrag,[g,f,c],g.boxing())){return}var l=xui.Event.getPos(h);xui.use(j).startDrag(h,{dragDefer:2,targetReposition:false,dragType:"blank",dragCursor:true,targetLeft:l.left,targetTop:l.top})},_onDragbegin:function(j,p,c,l){var f=j.properties,d=f.rotatable,g=j.properties._attached?j._target:xui([j.renderId]),u=g.width(),n=g.height(),r=g.offset(),m;if(d){m=g.rotate();if(g.get(0).getBoundingClientRect){var q=g.get(0).getBoundingClientRect();j.o_center={x:(q.right+q.left)/2,y:(q.bottom+q.top)/2}}else{j.o_center={x:r.left+u/2,y:r.top+u/2}}}if(j.properties._attached){j.proxy=xui.Dom.getEmptyDiv();j.proxy.html(" ",false).css({border:"1px dashed",visibility:"visible",position:"absolute"}).offset(r).width(u).height(n).css("zIndex",xui.Dom.TOP_ZINDEX+20);if(m){j.proxy.rotate(m)}}else{j.proxy=g}j.o_w2=j.o_w=u;j.o_h2=j.o_h=n;j.o_pos=j.proxy.cssPos();j.o_size={width:u,height:n};j.o_rotate=m;if(j.regions){j.o_regions=[];j.regions.each(function(e){j.o_regions.push(xui(e).cssSize())})}j.$onDrag=true},_onDrag:function(g,ad,A,B){var U=this._getDDParas(g.o_rotate,B);g.oos=g.oos||{};var o=xui.DragDrop.getProfile(),T=g.properties,f=g.o_rotate,C=g.o_size,n=g.o_pos,G=o.offset,d=G.x,c=G.y,R,P,S,ab,ac,af={};if(d===0&&c===0){return}if(f&&!(U.move||U.rotate)){var Q=function(e){return(e+360)%360},u=Math.pow(Math.pow(d,2)+Math.pow(c,2),0.5),I=Q(Math.atan2(d,-c)*180/Math.PI),O=f+90-I,K=(Q(I-f)<180)?1:-1,J=(Q(I-f)<90||Q(I-f)>270)?-1:1;d=u*Math.abs(Math.cos(O*Math.PI/180))*K;c=u*Math.abs(Math.sin(O*Math.PI/180))*J}if(d==g.oos.width&&c==g.oos.height){return}g.oos={width:d,height:c};if(U.left){S=g.o_w-d;R=n.left+d;if(S<T.minWidth){S=T.minWidth;R=g.o_w+n.left-S}else{if(S>T.maxWidth){S=T.maxWidth;R=g.o_w+n.left-S}}xui.merge(af,{width:S,left:R})}else{if(U.right){S=g.o_w+d;if(S<T.minWidth){S=T.minWidth}else{if(S>T.maxWidth){S=T.maxWidth}}xui.merge(af,{width:S})}}if(U.top){ab=g.o_h-c;P=n.top+c;if(ab<T.minHeight){ab=T.minHeight;P=g.o_h+n.top-ab}else{if(ab>T.maxHeight){ab=T.maxHeight;P=g.o_h+n.top-ab}}xui.merge(af,{height:ab,top:P})}else{if(U.bottom){ab=g.o_h+c;if(ab<T.minHeight){ab=T.minHeight}else{if(ab>T.maxHeight){ab=T.maxHeight}}xui.merge(af,{height:ab})}}if(f&&!(U.move||U.rotate)){delete af.left;delete af.top;var M=Math.abs(Math.cos(f*Math.PI/180)),r=Math.abs(Math.sin(f*Math.PI/180)),Y=n.left+C.width/2,X=n.top+C.height/2,V=C.width*M+C.height*r,ag=C.width*r+C.height*M,ae=Y-V/2,W=X-ag/2,l=(af.left||n.left)+(af.width||C.width)/2,j=(af.top||n.top)+(af.height||C.height)/2,D=(af.width||C.width)*M+(af.height||C.height)*r,L=(af.width||C.width)*r+(af.height||C.height)*M,H=l-D/2,E=j-L/2,F=(D-V)/2,N=(L-ag)/2,aa=l-Y,Z=j-X;af.left=n.left-aa;af.top=n.top-Z;var p=this._switchAxis(B,f,true);switch(p){case"e":if(f<90){af.top-=((af.height||C.height)*M-L/2)-(C.height*M-ag/2)}else{if(f>90&&(f<180)){af.top-=((af.width||C.width)*r-L/2)-(C.width*r-ag/2)}else{if(f>180&&(f<270)){af.top+=((af.width||C.width)*r-L/2)-(C.width*r-ag/2)}else{af.top+=((af.height||C.height)*M-L/2)-(C.height*M-ag/2)}}}af.left+=F;break;case"s":if(f<90){af.left-=((af.height||C.height)*r-D/2)-(C.height*r-V/2)}else{if(f>90&&(f<180)){af.left-=((af.width||C.width)*M-D/2)-(C.width*M-V/2)}else{if(f>180&&(f<270)){af.left+=((af.width||C.width)*M-D/2)-(C.width*M-V/2)}else{af.left+=((af.height||C.height)*r-D/2)-(C.height*r-V/2)}}}af.top+=N;break;case"w":if(f<90){af.top+=((af.height||C.height)*M-L/2)-(C.height*M-ag/2)}else{if(f>90&&(f<180)){af.top+=((af.width||C.width)*r-L/2)-(C.width*r-ag/2)}else{if(f>180&&(f<270)){af.top-=((af.width||C.width)*r-L/2)-(C.width*r-ag/2)}else{af.top-=((af.height||C.height)*M-L/2)-(C.height*M-ag/2)}}}af.left-=F;break;case"n":if(f<90){af.left+=((af.height||C.height)*r-D/2)-(C.height*r-V/2)}else{if(f>90&&(f<180)){af.left+=((af.width||C.width)*M-D/2)-(C.width*M-V/2)}else{if(f>180&&(f<270)){af.left-=((af.width||C.width)*M-D/2)-(C.width*M-V/2)}else{af.left-=((af.height||C.height)*r-D/2)-(C.height*r-V/2)}}}af.top-=N;break}}if(U.left||U.right){if(g.regions&&"width" in af&&af.width!==C.width){var m=af.width-C.width;g.regions.each(function(h,e){xui(h).width(g.o_regions[e].width+m)})}}if(U.top||U.bottom){if(g.regions&&"height" in af&&af.height!==C.height){var q=af.height-C.height;g.regions.each(function(h,e){xui(h).height(g.o_regions[e].height+q)})}}if(U.move){R=n.left+d;P=n.top+c;xui.merge(af,{top:P,left:R})}if(U.rotate){ac=(180-Math.atan2(o.x-g.o_center.x,o.y-g.o_center.y)*180/Math.PI);if(ac<0){ac+=360}xui.merge(af,{rotate:ac})}if(!xui.isEmpty(af)){xui.each(af,function(h,e){af[e]=Math.round(parseFloat(h))+"px"});g.proxy.css(af);if(g.onChange){g.boxing().onChange(g,g.proxy)}}},_onDragstop:function(h,q,c,j){var m,g,u,l,n,p=h.o_size,d=h.o_pos,f=h.proxy,r=this._getDDParas(h.o_rotate,j);if(!r.move&&!r.rotate){m=f.cssSize();u={width:m.width-p.width,height:m.height-p.height};if(u.width===0&&u.height===0){u=null}}g=f.cssPos();l={left:g.left-d.left,top:g.top-d.top};if(l.left===0&&l.top===0){l=null}if(r.rotate){n=f.rotate()}if(h.onUpdate&&false===h.boxing().onUpdate(h,h._target,u,l,n)){}else{h.box._onUpdate(h,h._target,u,l,n)}if(h.properties._attached){if(xui.browser.ie6){h._target.ieRemedy()}h.proxy.html("",false).css({visibility:"hidden",border:"none",zIndex:"0",width:"0",height:"0",rotate:0})}h.$onDrag=false;delete h.o_rotate;h.box._tryCursors(h)}}});Class("xui.UI.Block","xui.UI.Widget",{Initialize:function(){var c=this,d=c.getTemplate();d.className+=" {_sidebarStatus}";xui.merge(d.FRAME.BORDER,{className:"xui-uiw-border {clsBorderType1}",SIDEBAR:{tagName:"div",className:"xui-uisb xui-uibar {_sidebar}",SBCAP:{className:"xui-uisbcap xui-title-node",text:"{sideBarCaption}"},SBBTN:{$order:1,className:"xui-uisbbtn xuifont",$fonticon:"{_fi_btn}"}},PANEL:{tagName:"div",className:"xui-uibar xui-uicontainer {clsBorderType2}",style:"{_panelstyle};{background};{_overflow};",text:"{html}"+xui.UI.$childTag}},"all");c.setTemplate(d);d=c.getAppearance();xui.merge(d,{PANEL:{position:"relative",overflow:"auto"},SBBTN:{"z-index":2,padding:"0.33333em"}});c.setAppearance(d)},Static:{Behaviors:{HoverEffected:{SBBTN:"SBBTN",SBCAP:null},ClickEffected:{SBBTN:"SBBTN"},DroppableKeys:["PANEL"],PanelKeys:["PANEL"],PANEL:{onClick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onClickPanel){return c.boxing().onClickPanel(c,f,g)}}},SBBTN:{onClick:function(g,j,l){var h=g.properties,f=h.sideBarType,d=h.sideBarStatus,m;if(h.disabled){return false}g.boxing().setSideBarStatus(m=d=="fold"?"expand":"fold")}},SIDEBAR:{onClick:function(d,g,h){var f=d.properties,c=d.getSubNode("SBBTN");if(f.disabled){return false}if(xui.Event.getSrc(g).$xid!=c.xid()){if(f.sideBarStatus=="fold"){c.onClick(true)}}}}},EventHandlers:{onClickPanel:function(c,d,f){}},DataModel:{disabled:null,tips:null,rotate:null,iframeAutoLoad:{ini:"",action:function(){xui.UI.Div._applyAutoLoad(this)}},ajaxAutoLoad:{ini:"",action:function(){xui.UI.Div._applyAutoLoad(this)}},selectable:true,html:{html:1,action:function(c,d,e){this.getSubNode("PANEL").html(xui.adjustRes(c,0,1),null,null,e)}},borderType:{ini:"outset",listbox:["none","flat","inset","outset","groove","ridge"],action:function(n){var m=this,e=m.properties,j=m.getSubNode("BORDER"),g=m.getSubNode("PANEL"),f=/^xui-uiborder-/,c="xui-uiborder-flat xui-uiborder-radius",h="xui-uiborder-inset xui-uiborder-radius",d="xui-uiborder-outset xui-uiborder-radius",l=m.getRoot();j.removeClass(f);g.removeClass(f);switch(n){case"flat":j.addClass(c);break;case"inset":j.addClass(h);break;case"outset":j.addClass(d);break;case"groove":j.addClass(h);g.addClass(d);break;case"ridge":j.addClass(d);g.addClass(h);break}m.box._setB(m);xui.UI.$tryResize(m,l.get(0).style.width,l.get(0).style.height,true)}},sideBarType:{ini:"none",listbox:["none","left","top","right","bottom"],action:function(c){var e=this,g=e.properties,d=/^xui-uisb-/,f=e.getSubNode("SIDEBAR");f.removeClass(d);f.addClass("xui-uisb-"+c);e.box._sbicon(e,true);if(g.dock=="none"){xui.UI.$tryResize(e,g.width,g.height,true)}else{e.boxing().adjustDock(true)}}},sideBarCaption:{ini:"",action:function(c){this.getSubNode("SBCAP").html(c)}},sideBarStatus:{ini:"expand",listbox:["expand","fold"],action:function(c){var d=this,e=d.properties;d.getRoot().tagClass("-fold",c!="expand");d.box._sbicon(d,true);xui.UI.$doResize(d,e.width,e.height,true);d.boxing().adjustDock(true)}},sideBarSize:{ini:"2em",action:function(c){var d=this,e=d.properties;if(e.dock=="none"){xui.UI.$tryResize(d,e.width,e.height,true)}else{d.boxing().adjustDock(true)}}},background:{format:"color",ini:"",action:function(c){this.getSubNode("PANEL").css("background",c)}},width:{$spaceunit:1,ini:"10em"},height:{$spaceunit:1,ini:"10em"}},Appearances:{KEY:{"line-height":"auto"},"KEY-fold PANEL":{display:"none"},"KEY-fold SIDEBAR":{cursor:"pointer"}},RenderTrigger:function(){var c=this;if(c.box.KEY=="xui.UI.Block"){if(c.properties.iframeAutoLoad||c.properties.ajaxAutoLoad){xui.UI.Div._applyAutoLoad(this)}}},_sbicon:function(d,e){var g=d.properties,c=g.sideBarType,f=g.sideBarStatus=="fold"?c=="left"?"left":c=="right"?"right":c=="top"?"up":"down":c=="left"?"right":c=="right"?"left":c=="top"?"down":"up";return e?d.getSubNode("SBBTN").replaceClass(/(xui-icon-double)[\w]+/g,"$1"+f):"xui-icon-double"+f},_setB:function(e){var f=e.properties,d=f.borderType,g=e.getSubNode("BORDER"),c=g._borderW("left");f.$hborder=f.$vborder=f.$iborder=0;if(d=="flat"||d=="inset"||d=="outset"){f.$hborder=f.$vborder=c;f.$iborder=0}else{if(d=="groove"||d=="ridge"){f.$hborder=f.$vborder=f.$iborder=c}}},LayoutTrigger:function(){var e=this.properties,c=e.sideBarStatus,d=e.borderType;if(d!="none"){this.boxing().setBorderType(d,true)}if(c=="fold"){this.boxing().setSideBarStatus("fold",true)}},_prepareData:function(e){var f=arguments.callee.upper.call(this,e),d=f.sideBarType,c=f.sideBarStatus;f.background=f.background?"background:"+f.background:"";if(xui.isStr(f.overflow)){f._overflow=f.overflow.indexOf(":")!=-1?(f.overflow):(f.overflow?("overflow:"+f.overflow):"")}f._sidebar="xui-uisb-"+d;f._sidebarStatus=c=="fold"?e.getClass("KEY","-fold"):"";f._fi_btn=e.box._sbicon(e);return f},_onresize:function(d,q,p){var o=arguments.callee.upper.apply(this,arguments),r=d.getRoot(),u=d.getSubNode("BORDER"),l=d.getSubNode("PANEL"),m=d.getSubNode("SIDEBAR"),C=d.getSubNode("SBCAP"),c=d.properties,n=c.sideBarStatus,x=c.sideBarType,A=(c.$iborder||0)*2,g=xui.$us(c),B=function(E,F){return d.$forceu(E,g>0?"em":"px",F)},w=d.getEmSize()/r._getEmSize(),h=l._getEmSize(w),D=q?d.$px(o.width):o.width,f=p?d.$px(o.height):o.height,e=d.$px(c.sideBarSize),j=B(e);o.left=o.top=0;if(x!="none"){C.css("line-height",B(e-2));if(x=="left"||x=="right"){m.width(j);if(p&&"auto"!==p){m.height(B(f-A))}}else{m.height(j);m.width(B(D-A))}if(n=="fold"){if(x=="left"||x=="right"){r.width(B(e+c.$hborder*2));u.width(j)}else{r.height(B(e+c.$hborder*2));u.height(j)}return}else{switch(x){case"left":D-=e;o.left=e;break;case"right":D-=e;break;case"top":f-=e;o.top=e;break;case"bottom":f-=e;break}}}if(o.width){o.width=B(D-A,h)}if(o.height&&"auto"!==o.height){o.height=B(f-A,h)}l.cssRegion(o,true);if(o.width){xui.UI._adjustConW(d,l,o.width)}},_showTips:function(c,d,h){var e=c.properties;if(e.disableTips){return}if(c.onShowTips){return c.boxing().onShowTips(c,d,h)}if(!xui.Tips){return}if(e.sideBarType=="none"){return}var g=d.id,f=c.keys;if(e.sideBarStatus=="fold"&&(g.indexOf(f.SBCAP)===0||g.indexOf(f.SBBTN)===0)){xui.Tips.show(h,{tips:xui.wrapRes("$inline.Expand")});return false}else{if(e.sideBarStatus=="expand"&&g.indexOf(f.SBBTN)===0){xui.Tips.show(h,{tips:xui.wrapRes("$inline.Fold")});return false}}}}});Class("xui.UI.Label","xui.UI",{Initialize:function(){xui.UI.SLabel=xui.UI.Label;var c="xui.UI.SLabel";xui.absBox.$type[c.replace("xui.UI.","")]=xui.absBox.$type[c]=c},Static:{Templates:{tagName:"label",className:"{_className}",style:"{_style};text-align:{hAlign}",ICON:{$order:0,className:"xuicon {imageClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{imageDisplay}",text:"{iconFontCode}"},CAPTION:{text:"{caption}",style:"{_fc}{_fw}{_fs}","font-size":"1em",$order:1}},Appearances:{},DataModel:{selectable:true,caption:{ini:undefined,action:function(c){c=(xui.isSet(c)?c:"")+"";this.getSubNode("CAPTION").html(xui.adjustRes(c,true))}},image:{format:"image",action:function(c){xui.UI.$iconAction(this)}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c||"center")}},imageBgSize:{action:function(c){this.getSubNode("ICON").css("backgroundSize",c||"")}},imageClass:{ini:"",action:function(c,d){xui.UI.$iconAction(this,"ICON",d)}},iconFontCode:{action:function(c){xui.UI.$iconAction(this)}},hAlign:{ini:"right",listbox:["left","center","right"],action:function(c){this.getRoot().css("textAlign",c)}},fontColor:{ini:"",type:"color",action:function(c){this.getSubNode("CAPTION").css("color",c)}},fontSize:{combobox:["","1.25em","1.5em","2em","3em"],action:function(c){this.getSubNode("CAPTION").css("fontSize",c)}},fontWeight:{combobox:["","normal","bolder","bold","lighter","100","200","300","400","500","600","700","800","900"],action:function(c){this.getSubNode("CAPTION").css("fontWeight",c)}}},Behaviors:{HoverEffected:{KEY:"KEY",ICON:"ICON"},onClick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onClick){return c.boxing().onClick(c,f,g)}}},EventHandlers:{onClick:function(c,d,f){}},_prepareData:function(c,d){d=arguments.callee.upper.call(this,c,d);d._fs="font-size:"+d.fontSize+";";d._fw="font-weight:"+d.fontWeight+";";d._fc="color:"+d.fontColor+";";return d}}});Class("xui.UI.ProgressBar",["xui.UI.Widget","xui.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(e){var d=e.properties.type,f=e.getSubNode("FILL");if(d=="horizontal"){f.width(c+"%")}else{f.top((100-c)+"%").height(c+"%")}e.getSubNode("CAP").text(e.properties.captionTpl.replace(/\{value\}|\*/g,c))})}},Initialize:function(){var c=this,d=c.getTemplate();xui.merge(d.FRAME.BORDER,{className:"xui-uiborder-flat xui-uiborder-radius xui-uibase",FILL:{tagName:"div",style:"{fillBG}",className:"xui-uibar",text:"{html}"+xui.UI.$childTag},INN:{$order:2,tagName:"div",CAP:{tagName:"div"}}},"all");c.setTemplate(d);d=c.getAppearance();xui.merge(d,{BORDER:{overflow:"hidden"},INN:{display:"table",position:"absolute",left:0,top:0,width:"100%",height:"100%"},CAP:{"text-align":"center"},FILL:{border:"none",position:"relative",width:0,height:0,left:0,top:0}});c.setAppearance(d)},Static:{DataModel:{value:0,width:{$spaceunit:1,ini:"25em"},height:{$spaceunit:1,ini:"1.5em"},captionTpl:{ini:"* %",action:function(){this.boxing()._setCtrlValue(this.properties.$UIvalue)}},type:{listbox:["vertical","horizontal"],ini:"horizontal",action:function(d){var c=this.properties.width,e=this.properties.height;this.properties.height=c;this.properties.width=e;this.boxing().refresh()}},fillBG:{ini:"",format:"color",action:function(c){this.getSubNode("FILL").css("background",c)}},$hborder:1,$vborder:1},LayoutTrigger:function(){var c=this.properties,d=this.getSubNode("BORDER");c.$hborder=c.$vborder=d._borderW("left")},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.fillBG=d.fillBG?"background:"+d.fillBG:"";return d},_ensureValue:function(c,d){return parseInt(d,10)||0},_onresize:function(e,d,u){var x=arguments.callee.upper.apply(this,arguments),q,c=e.properties,h=xui.$us(c),j=function(p,A){return e.$forceu(p,h>0?"em":"px",A)},n=e.getRoot(),o=e.getSubNode("INN"),r=e.getSubNode("CAP"),w=e.getSubNode("FILL"),g=e.getEmSize()/n._getEmSize(),f=o._getEmSize(g),l=r._getEmSize(g),m=w._getEmSize(g);if(x.width&&x.width!="auto"){x.width=e.$px(x.width)}if(x.height&&x.height!="auto"){x.height=e.$px(x.height)}if(c.type=="horizontal"){if(x.height){q=j(x.height,f);o.css({"line-height":q});q=j(x.height,m);w.css({height:q,"line-height":q});q=j(x.height,l);r.css({height:q,"line-height":q})}}else{if(x.width){w.css({width:j(x.width,m)});r.css({width:j(x.width,l)})}if(x.height){o.css({"line-height":j(x.height,f)});w.css({"line-height":j(x.height,m)});r.css({"line-height":j(x.height,l)})}}}}});Class("xui.UI.CheckBox",["xui.UI","xui.absValue"],{Initialize:function(){xui.UI.SCheckBox=xui.UI.CheckBox;var c="xui.UI.SCheckBox";xui.absBox.$type[c.replace("xui.UI.","")]=xui.absBox.$type[c]=c},Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this},_setCtrlValue:function(c){return this.each(function(d){d.getSubNode("MARK").tagClass("-checked",!!c)})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["CAPTION"])}},Static:{Templates:{className:"{_className} ",style:"{_style} {_align}",FOCUS:{tabindex:"{tabindex}",MARK:{$order:0,className:"{_iconPosCls} xuifont",$fonticon:"xui-uicmd-check"},ICON:{$order:1,className:"xuicon {imageClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{imageDisplay}",text:"{iconFontCode}"},CAPTION:{$order:2,text:"{caption}"}}},Appearances:{KEY:{overflow:"visible"},MARK:{cursor:"pointer",margin:"0 .334em 0 .1667em","vertical-align":"middle"},FOCUS:{cursor:"default","vertical-align":"middle",padding:".1667em 0"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","font-size":"1em"}},Behaviors:{HoverEffected:{KEY:"MARK",ICON:"ICON"},ClickEffected:{KEY:"MARK"},NavKeys:{FOCUS:1},onClick:function(d,g,h){var f=d.properties,c=d.boxing();if(f.disabled){return false}if(f.readonly){return false}c.setUIValue(!f.$UIvalue,null,null,"click");if(d.onChecked){c.onChecked(d,g,f.$UIvalue)}d.getSubNode("FOCUS").focus()},FOCUS:{onKeydown:function(d,f,g){var c=xui.Event.getKey(f).key;if(c==" "||c=="enter"){d.getRoot().onClick(true);return false}}}},DataModel:{value:false,hAlign:{ini:"left",listbox:["left","center","right"],action:function(c){this.getRoot().css("textAlign",c)}},iconPos:{ini:"left",listbox:["left","right"],action:function(c){this.getSubNode("MARK").removeClass("xui-float-left xui-float-right").addClass("xui-float-"+c)}},image:{format:"image",action:function(c){xui.UI.$iconAction(this)}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c||"center")}},imageBgSize:{action:function(c){this.getSubNode("ICON").css("backgroundSize",c||"")}},imageClass:{ini:"",action:function(c,d){xui.UI.$iconAction(this,"ICON",d)}},iconFontCode:{action:function(c){xui.UI.$iconAction(this)}},caption:{ini:undefined,action:function(c){c=(xui.isSet(c)?c:"")+"";this.getSubNode("CAPTION").html(xui.adjustRes(c,true))}}},EventHandlers:{onChecked:function(c,f,d){}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d._align="text-align:"+d.hAlign+";";d._iconPosCls="xui-float-"+d.iconPos;return d},_ensureValue:function(c,d){return !!d}}});Class("xui.UI.Slider",["xui.UI","xui.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(e){var d=e.properties,j=d.steps,h=function(p){return e.getSubNode(p)},n=h("IND1"),l=h("IND2"),g=h("BG"),q=d.type=="vertical",f=e.box._v2a(e,c),u=q?"top":"left",o=q?"height":"width",m,r=xui.adjustRes(d.labelCaption,true)||"";if(d.isRange){n[u](f[0]+"%");l[u](f[1]+"%");g[u](f[0]+"%")[o]((f[1]-f[0])+"%");m=(d.numberTpl+"").replace(/[*12]/g,function(p){return p=="1"?xui.formatNumeric(f[0],d.precision||0,null,null,true):p=="2"?xui.formatNumeric(f[1],d.precision||0,null,null,true):r})}else{n[u](f[0]+"%");g[o](f[0]+"%");m=(d.numberTpl+"").replace(/1[^2]*2/,"1").replace("1",xui.formatNumeric(f[0],d.precision||0,null,null,true));if(m.indexOf("*")!=-1){m=m.replace("*",r)}else{m+=r}}if(d.labelPos!="none"&&parseFloat(d.labelSize)){e.getSubNode("LABEL").html(m)}})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["BOX"])}},Static:{Templates:{style:"{_style}",className:"{_className} xui-ui-ellipsis {_cls}",LABEL:{className:"{_required}",style:"{labelShow};width:{_labelSize};{labelHAlign}",text:"{labelCaption}"},BOX:{tagName:"div",RULER:{$order:1,tagName:"div",className:"xui-uiborder-flat xui-uibase xui-uiborder-radius",BG:{tagName:"div",className:"xui-uibar xui-uiborder-radius"},},IND:{$order:2,IND1:{tagName:"span",className:"xui-uibar xui-uigradient xui-ui-btn xui-uiborder-circle xuicon xui-icon-placeholder",style:"{_showD}",tabindex:"{tabindex}"},IND2:{tagName:"span",className:"xui-uibar xui-uigradient xui-ui-btn xui-uiborder-circle xuicon xui-icon-placeholder",style:"{_showD2}",tabindex:"{tabindex}"}},DECREASE:{style:"{_showDes}",className:"xuifont",$fonticon:"{_fi_decls}",tabindex:"{tabindex}"},INCREASE:{style:"{_showIns}",className:"xuifont",$fonticon:"{_fi_incls}",tabindex:"{tabindex}"}}},Appearances:{"IND, BT, RULER, IND1, IND2, DECREASE, INCREASE":{position:"absolute"},LABEL:{"z-index":1,top:0,left:0,position:"absolute","padding-top":".5em"},BOX:{position:"absolute",left:0,top:0,width:"100%",height:"100%"},"KEY-h BOX":{$order:1,height:"2em"},"KEY-v BOX":{$order:2,width:"2em"},"KEY-v LABEL":{"writing-mode":"tb-rl",filter:"flipv fliph"},"KEY-h DECREASE, KEY-h INCREASE":{top:"50%","margin-top":"-.5em"},"KEY-h IND1,KEY-h IND2, KEY-v IND1,KEY-v IND2":{padding:0,margin:0},"KEY-h DECREASE":{$order:1,left:0},"KEY-h INCREASE":{$order:1,right:0},BG:{position:"absolute",left:0,top:0,height:"100%",width:"100%"},"KEY-h IND":{"z-index":1,top:"50%",height:"2px","margin-top":"-1px"},"KEY-h RULER":{$order:2,top:"50%",height:"2px","margin-top":"-2px"},"KEY-v DECREASE, KEY-v INCREASE":{$order:10,left:"50%","margin-left":"-.5em"},"KEY-v DECREASE":{$order:10,top:0},"KEY-v INCREASE":{$order:10,bottom:0},"KEY-v IND":{$order:10,"z-index":1,left:"50%",width:"2px","margin-left":"-1px"},"KEY-v RULER":{$order:10,"z-index":1,left:"50%",width:"2px","margin-left":"-2px"},"KEY-h IND1,KEY-h IND2":{$order:1,"z-index":2,left:0,top:0,cursor:"e-resize","margin-top":"-.5em","margin-left":"-.5em"},"KEY-v IND1,KEY-v IND2":{$order:10,"z-index":2,left:0,top:0,cursor:"n-resize","margin-top":"-.5em","margin-left":"-.5em"}},Behaviors:{HoverEffected:{IND1:"IND1",IND2:"IND2",DECREASE:"DECREASE",INCREASE:"INCREASE"},ClickEffected:{IND1:"IND1",IND2:"IND2",DECREASE:"DECREASE",INCREASE:"INCREASE"},onSize:xui.UI.$onSize,IND:{onClick:function(f,n,c){var d=f.properties;if(d.disabled||d.readonly){return false}var x=xui.use(c).offset(),w=xui.Event.getPos(n),j=f.box._v2a(f,f.properties.$UIvalue),h,g,q=d.type=="vertical",o=q?"top":"left",m=q?"top":"left",l=q?"height":"width",u=w[o]-x[o],r=(u/xui.use(c)[l]())*100;if(!d.isRange){j[0]=r}else{h=f.getSubNode("IND1")[m](),g=f.getSubNode("IND2")[m]();if(Math.abs(h-u)<Math.abs(g-u)){j[0]=r}else{j[1]=r}}f.boxing().setUIValue(f.box._adjustValue(f,j),null,null,"click")}},IND1:{onKeydown:function(f,h,j){var g=f.properties;if(g.disabled||g.readonly){return}var d=g.type=="vertical",c=xui.Event.getKey(h).key;if(c==(d?"up":"left")){f.box._auto(f,false)}if(c==(d?"down":"right")){f.box._auto(f,true)}},onKeyout:function(c){xui.Thread.abort(c.$xid+":auto")},onKeyup:function(c){xui.Thread.abort(c.$xid+":auto")},beforeMousedown:function(d,j,m){if(xui.Event.getBtn(j)!="left"){return}var h=d.properties;if(h.disabled||h.readonly){return}var c=h.type=="vertical",l=c?"top":"left",g=c?"height":"width",f=d.box;xui.use(m).startDrag(j,{widthIncrement:h.steps?d._size/h.steps:null,dragType:"none",targetReposition:true,horizontalOnly:c?true:null,verticalOnly:c?null:true,maxLeftOffset:xui.use(m)[l](),maxRightOffset:xui.use(m).parent()[g]()-xui.use(m)[l](),dragCursor:"default"});xui.use(m).css("zIndex",10).focus();d.getSubNode("IND2").css("zIndex",5)},beforeDragbegin:function(d,f,g){var c=d.properties.type=="vertical";xui(g)[c?"top":"left"](d.__x=d.$px(xui.use(g)[c?"top":"left"]()))},onDrag:function(f,g,j){var h=xui.DragDrop.getProfile().offset,d=f.properties.type=="vertical",c=f.box._v2a(f,f.properties.$UIvalue);c[0]=((f.__x+h[d?"y":"x"])/xui.use(j).parent()[d?"height":"width"]())*100;f.boxing().setUIValue(f.box._adjustValue(f,c),null,null,"drag")},onDragstop:function(c,d,f){xui(f).onMouseout(true,{$force:true}).onMouseup(true)},onClick:function(){return false}},IND2:{onKeydown:function(f,h,j){var g=f.properties;if(g.disabled||g.readonly){return}var d=g.type=="vertical",c=xui.Event.getKey(h).key;if(c==(d?"up":"left")){f.box._auto(f,false)}if(c==(d?"down":"right")){f.box._auto(f,true)}},onKeyout:function(c){xui.Thread.abort(c.$xid+":auto")},onKeyup:function(c){xui.Thread.abort(c.$xid+":auto")},beforeMousedown:function(d,j,m){if(xui.Event.getBtn(j)!="left"){return}var h=d.properties;if(h.disabled||h.readonly){return}var c=h.type=="vertical",l=c?"top":"left",g=c?"height":"width",f=d.box;xui.use(m).startDrag(j,{widthIncrement:h.steps?d._size/h.steps:null,dragType:"none",targetReposition:true,horizontalOnly:c?true:null,verticalOnly:c?null:true,maxLeftOffset:xui.use(m)[l](),maxRightOffset:xui.use(m).parent()[g]()-xui.use(m)[l](),dragCursor:"default"});xui.use(m).css("zIndex",10).focus();d.getSubNode("IND1").css("zIndex",5)},beforeDragbegin:function(d,f,g){var c=d.properties.type=="vertical";xui(g)[c?"top":"left"](d.__x=d.$px(xui.use(g)[c?"top":"left"]()))},onDrag:function(f,g,j){var h=xui.DragDrop.getProfile().offset,d=f.properties.type=="vertical",c=f.box._v2a(f,f.properties.$UIvalue);c[1]=((f.__x+h[d?"y":"x"])/xui.use(j).parent()[d?"height":"width"]())*100;f.boxing().setUIValue(f.box._adjustValue(f,c),null,null,"drag2")},onDragstop:function(c,d,f){xui(f).onMouseout(true,{$force:true}).onMouseup(true)},onClick:function(){return false}},DECREASE:{onMousedown:function(c){if(c.properties.disabled||c.properties.readonly){return}c.box._auto(c,false)},onMouseout:function(c){if(c.properties.disabled||c.properties.readonly){return}xui.Thread.abort(c.$xid+":auto")},onMouseup:function(c){if(c.properties.disabled||c.properties.readonly){return}xui.Thread.abort(c.$xid+":auto")}},INCREASE:{onMousedown:function(c){if(c.properties.disabled||c.properties.readonly){return}c.box._auto(c,true)},onMouseout:function(c){if(c.properties.disabled||c.properties.readonly){return}xui.Thread.abort(c.$xid+":auto")},onMouseup:function(c){if(c.properties.disabled||c.properties.readonly){return}xui.Thread.abort(c.$xid+":auto")}},LABEL:{onClick:function(c,d,f){if(c.properties.disabled){return false}if(c.onLabelClick){c.boxing().onLabelClick(c,d,f)}},onDblClick:function(c,d,f){if(c.properties.disabled){return false}if(c.onLabelDblClick){c.boxing().onLabelDblClick(c,d,f)}},onMousedown:function(c,d,f){if(xui.Event.getBtn(d)!="left"){return}if(c.properties.disabled){return false}if(c.onLabelActive){c.boxing().onLabelActive(c,d,f)}}}},DataModel:{position:"absolute",width:{$spaceunit:1,ini:"15em"},height:{$spaceunit:1,ini:"4em"},precision:0,numberTpl:"* - 1% ~ 2%",steps:0,value:"0:0",type:{listbox:["vertical","horizontal"],ini:"horizontal",action:function(c){this.boxing().refresh()}},isRange:{ini:true,action:function(c){this.boxing().refresh()}},showIncreaseHandle:{ini:true,action:function(c){this.adjustSize()}},showDecreaseHandle:{ini:true,action:function(c){this.adjustSize()}},labelSize:{$spaceunit:2,ini:0,action:function(c){this.getSubNode("LABEL").css({display:c?"":"none"});xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelPos:{ini:"left",listbox:["none","left","top","right","bottom"],action:function(c){xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelGap:{$spaceunit:2,ini:4,action:function(c){xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelCaption:{ini:"",action:function(c){var d=this.properties;if(d.labelPos!="none"&&parseFloat(d.labelSize)){this.getSubNode("LABEL").html(xui.adjustRes((xui.isSet(c)?c:"")+"",true))}}},labelHAlign:{ini:"right",listbox:["","left","center","right"],action:function(c){this.getSubNode("LABEL").css("textAlign",c)}}},EventHandlers:{onLabelClick:function(c,d,f){},onLabelDblClick:function(c,d,f){},onLabelActive:function(c,d,f){}},_prepareData:function(e){var g=arguments.callee.upper.call(this,e),f="display:none",c;g._showDes=g.showDecreaseHandle?"":f,g._showIns=g.showIncreaseHandle?"":f,g._showD2=g.isRange?"":f;g._cls=e.getClass("KEY",g.type=="vertical"?"-v":"-h");g.labelHAlign=g.labelHAlign?("text-align:"+g.labelHAlign):"";g.labelShow=g.labelPos!="none"&&g.labelSize&&g.labelSize!="auto"?"":"display:none";g._labelSize=g.labelSize?"":0+e.$picku();if(g.labelPos!="none"&&g.labelSize&&g.labelCaption){g.labelCaption=xui.adjustRes(g.labelCaption,true)}g._fi_decls="xui-icon-single"+(g.type=="vertical"?"up":"left");g._fi_incls="xui-icon-single"+(g.type=="vertical"?"down":"right");return g},_adjustValue:function(d,e){var f=d.properties,c=[];c[0]=parseFloat(e[0])||0;c[1]=parseFloat(e[1])||0;if(f.steps){e=100/f.steps;c[0]=Math.ceil(c[0]/e);if(f.isRange){c[1]=Math.ceil(c[1]/e)}}return f.isRange?c.join(":"):(c[0]+"")},_ensureValue:function(d,m){var c=d.properties,l=String(m).split(":"),f=0,h=c.steps?c.steps:100,j=[],g=function(n){return parseFloat(n)||0},e=function(n){return Math.min(h,Math.max(f,n))};j[0]=g(l[0]);if(c.isRange){j[1]=g(l[1]);if(j[0]>j[1]){l=j[1];j[1]=j[0];j[0]=l}}j[0]=e(j[0]);if(c.isRange){j[1]=e(j[1])}return c.isRange?j.join(":"):(j[0]+"")},_v2a:function(f,d){var c=f.properties.steps,e;d=typeof d=="string"?d.split(":"):d;d[0]=parseFloat(d[0])||0;d[1]=parseFloat(d[1])||0;if(c){d[0]=d[0]*100/c}if(c){d[1]=d[1]*100/c}if(d[0]>d[1]){e=d[0];d[1]=d[0];d[0]=e}return d},_auto:function(g,j){var c=g.$xid+":auto";if(xui.Thread.isAlive(c)){return}var d=g.properties,m,f=(d.steps?100/d.steps:1)*(j?1:-1),e={delay:300},h=g.box._v2a(g,d.$UIvalue),l=function(){h[0]+=f;if(d.isRange){h[1]+=f}g.boxing().setUIValue(g.box._adjustValue(g,h),null,null,"auto");e.delay*=0.8};e.task=l;xui.Thread(c,[e],500,null,l,null,true).start()},_onresize:function(h,K,H){var g=h.properties,l=g.type,N=function(f){return h.getSubNode(f)},L=N("KEY"),G=N("RULER"),u=N("IND"),B=N("IND1"),n=h.$px(".75em"),C=N("BOX"),p=N("LABEL"),e=N("INCREASE"),d=N("DECREASE"),q=xui.$us(g),P=function(f,w){return h.$forceu(f,q>0?"em":"px",w)},M=h.getEmSize()/L._getEmSize(),m=p._getEmSize(M),r=G._getEmSize(M),J=u._getEmSize(M),p=h.getSubNode("LABEL"),I=g.labelPos,o=(I=="none"||!I)?0:h.$px(g.labelSize,m)||0,O=(I=="none"||!I)?0:h.$px(g.labelGap)||0,F,c,Q,j;if(K&&K!="auto"){K=h.$px(K)}if(H&&H!="auto"){H=h.$px(H)}C.cssPos({left:P(F=I=="left"?o:0),top:P(c=I=="top"?o:0)});d.css("display",g.showDecreaseHandle?"":"none");e.css("display",g.showIncreaseHandle?"":"none");if(l=="vertical"){C.cssSize({width:"",height:P(j=H===null?null:Math.max(0,(H-((I=="top"||I=="bottom")?o:0))))});var E=h.$px("1em"),D=g.showIncreaseHandle?E:0,A=g.showDecreaseHandle?E:0,x=B._borderH("top");if(j){G.top(P(D+n,r)).height(P(j-D-A-2*n,r));u.top(P(D+n-x,J)).height(P(j-D-A-2*n,J))}if(o){p.cssRegion({left:P(K===null?null:Math.max(0,I=="right"?(C.width()+O):0),m),top:P(H===null?null:Math.max(0,I=="bottom"?(H-o+O):0),m),width:"",height:P(H===null?null:Math.max(0,((I=="top"||I=="bottom")?(o-O):H)),m)})}}else{C.cssSize({width:P(Q=K===null?null:Math.max(0,(K-((I=="left"||I=="right")?o:0)))),height:""});var E=h.$px("1em"),D=g.showIncreaseHandle?E:0,A=g.showDecreaseHandle?E:0,x=B._borderW("left");if(Q){G.left(P(D+n,r)).width(P(Q-D-A-2*n,r));u.left(P(D+n-x,J)).width(P(Q-D-A-2*n,J))}if(o){p.cssRegion({left:P(K===null?null:Math.max(0,I=="right"?(K-o+O):0),m),top:P(H===null?null:Math.max(0,I=="bottom"?(C.height()+O):0),m),width:P(K===null?null:Math.max(0,((I=="left"||I=="right")?(o-O):K)),m),height:P(H===null?null:Math.max(0,((I=="top"||I=="bottom")?(o-O):H)),m)})}}}}});Class("xui.UI.Input",["xui.UI.Widget","xui.absValue"],{Instance:{_setTB:function(e){var d=this.get(0),g=d.properties,h,c;if(!d.host||!g.tipsBinder){return}var f=d.tips;c=d.tips=d.tips||g.tips||"";h=xui.getObject(g.tipsBinder)||((h=d.host[g.tipsBinder])&&h.get(0));if(h&&(h.key=="xui.UI.Span"||h.key=="xui.UI.Div"||h.key=="xui.UI.SLabel")){if(h.renderId){h.getRootNode().innerHTML=c.charAt(0)=="$"?xui.wrapRes(c):c;h.getRoot().css("color",e==1?"gray":e==2?"red":"#000")}}if(f!==d.tips&&xui.Tips&&xui.Tips.getTips()){xui.Tips.setTips(d.tips)}},activate:function(c){var d=this.get(0);if(d&&d.renderId){var f=d.getSubNode("INPUT").get(0);if(f){try{f.focus();if(c||xui.browser.deviceType!="touchOnly"){try{if(f.tagName.toLowerCase()=="input"||!/[\n\r]/.test(f.value)){f.select()}else{xui(f).caret(0,0)}}catch(g){}}}catch(g){}delete d._justFocus}}return this},_setCtrlValue:function(c){if(xui.isNull(c)||!xui.isDefined(c)){c=""}return this.each(function(d){if(d.$Mask&&!c){c=d.$Mask}d.$_inner=1;d.getSubNode("INPUT").attr("value",c+"");delete d.$_inner})},_getCtrlValue:function(){var d=this.getSubNode("INPUT"),c=(d&&!d.isEmpty())?this.getSubNode("INPUT").attr("value"):"";if(c.indexOf("\r")!=-1){c=c.replace(/(\r\n|\r)/g,"\n")}if(this.get(0).$Mask&&this.get(0).$Mask==c){c=""}return c},_setDirtyMark:function(){return this.each(function(e){var l=e.properties,c=e.getSubNode("INPUT"),p=e.box,h=e.boxing(),j=xui.UI.$css_tag_dirty,n=xui.UI.$css_tag_invalid,m=l.value!==l.$UIvalue;var g=e.tips;if(e._inValid==2){e.tips=l.tipsErr||l.tips}else{if(e._inValid==1){e.tips=l.tips}else{e.tips=l.tipsOK||l.tips}}if(g!==e.tips&&xui.Tips&&xui.Tips.getTips()){xui.Tips.setTips(e.tips)}if(e._dirtyFlag!==m){if(l.dirtyMark&&l.showDirtyMark){if(e.beforeDirtyMark&&false===h.beforeDirtyMark(e,m)){}else{if(e._dirtyFlag=m){c.addClass(j)}else{c.removeClass(j)}}}e._dirtyFlag=m}if(e.beforeFormatMark&&false===h.beforeFormatMark(e,e._inValid==2)){}else{var f=e.getSubNode("ERROR");if(e._inValid==2){c.addClass(n);f.css("display","block")}else{c.removeClass(n);f.css("display","none")}}h._setTB(e._inValid)})}},Initialize:function(){var c=this.getTemplate();xui.merge(c.FRAME.BORDER,{style:"",LABEL:{className:"{_required} xui-ui-ellipsis",style:"{labelShow};width:{_labelSize};{labelHAlign}",text:"{labelCaption}"},BOX:{className:"xui-ui-input xui-ui-shadow-input xui-uiborder-flat xui-uiborder-radius xui-uibase",WRAP:{tagName:"div",INPUT:{$order:10,className:"xui-ui-ellipsis",tagName:"input",type:"{_inputtype}",maxlength:"{maxlength}",tabindex:"{tabindex}",placeholder:"{placeholder}",style:"{_css};{hAlign};"}}}},"all");c.FRAME.ERROR={className:"xuifont",$fonticon:"xui-icon-error"};this.setTemplate(c)},Static:{_syncResize:true,_maskMap:{"~":"[+-]","1":"[0-9]",a:"[A-Za-z]",u:"[A-Z]",l:"[a-z]","*":"[A-Za-z0-9]"},_maskSpace:"_",Appearances:{KEY:{position:"relative"},BORDER:{},WRAP:{left:0,position:"absolute",overflow:(xui.browser.gek&&xui.browser.ver<3)?"auto":"visible"},BOX:{left:0,top:0,position:"absolute",overflow:"hidden","z-index":10},LABEL:{$order:100,"z-index":1,top:0,left:0,position:"absolute","padding-top":"4px","padding-bottom":"4px"},INPUT:{$order:100,"padding-top":"4px","padding-left":"4px","padding-right":"4px","padding-bottom":"4px","background-color":"transparent",border:0,margin:0,"text-align":"left","margin-top":xui.browser.ie67?"-1px":null,position:"relative","z-index":10,width:"8.5em",overflow:xui.browser.ie678?"hidden":"auto","overflow-y":xui.browser.ie678?"hidden":"auto","overflow-x":xui.browser.ie678?"hidden":"hidden",resize:"none"},ERROR:{position:"absolute",right:".25em",top:".25em",display:"none","z-index":20}},Behaviors:{HoverEffected:{BOX:["BOX"]},NavKeys:{INPUT:1},LABEL:{onClick:function(c,d,f){if(c.properties.disabled){return false}if(c.onLabelClick){c.boxing().onLabelClick(c,d,f)}},onDblClick:function(c,d,f){if(c.properties.disabled){return false}if(c.onLabelDblClick){c.boxing().onLabelDblClick(c,d,f)}},onMousedown:function(c,d,f){if(xui.Event.getBtn(d)!="left"){return}if(c.properties.disabled){return false}if(c.onLabelActive){c.boxing().onLabelActive(c,d,f)}}},INPUT:{onChange:function(f,j,m){if(f.$_onedit||f.$_inner||f.destroyed||!f.box){return}var h=f.properties,d=f.box,l=f._inValid,c=f.boxing(),g=xui.use(m).get(0).value;if(f.$Mask&&f.$Mask==g){g=""}c.setUIValue(g,null,null,"onchange");if(h.$UIvalue!==g){c._setCtrlValue(h.$UIvalue)}if(l!==f._inValid){if(f.renderId){c._setDirtyMark()}}d._asyCheck(f)},onKeydown:function(h,l,n){var j=h.properties,d=h.box,c=j.multiLines,f=xui.Event,g=f.getKey(l);if(j.disabled||j.readonly){return}if(g.key=="enter"&&(!c||g.altKey)){xui.use(n).onChange()}d._asyCheck(h);if(j.mask){if(g.key.length>1){h.$ignore=true}else{delete h.$ignore}switch(g.key){case"backspace":d._changeMask(h,xui.use(n).get(0),"",false);return false;case"delete":d._changeMask(h,xui.use(n).get(0),"");return false}}},onKeypress:function(g,j,c){var f=g.properties,m=g.box,o=g.box,d=o._maskMap,h=xui.Event.getKey(j),n,l=xui.use(c).caret();if(g.beforeKeypress&&false===g.boxing().beforeKeypress(g,l,h,j,c)){return false}n=g.CF.beforeKeypress||g.$beforeKeypress;if(n&&false===n(g,l,h,j,c)){return false}m._asyCheck(g);if(f.mask){if(g.$ignore){delete g.$ignore;return true}if(h.ctrlKey||h.altKey){return true}o._changeMask(g,xui.use(c).get(0),h.key,true);return false}},onKeyup:function(d,h,j){var g=d.properties,c=d.box;if(xui.Event.getKey(h).key=="esc"){d.boxing()._setCtrlValue(g.$UIvalue);if(d.onCancel){d.boxing().onCancel(d)}}if(g.dynCheck){var f=xui.use(j).get(0).value;d.box._checkValid(d,f);d.boxing()._setDirtyMark()}c._asyCheck(d)},onMousedown:function(c,d,f){c._mousedownmark=1;xui.asyRun(function(){if(c){delete c._mousedownmark}})},onMouseup:function(c,f,g){if(c.properties.selectOnFocus&&c._justFocus){var d=xui.use(g).get(0);if(!d.readOnly&&d.select){c.$mouseupDelayFun=xui.asyRun(function(){delete c.$mouseupDelayFun;if(xui.browser.deviceType!="touchOnly"){if(d.tagName.toLowerCase()=="input"||!/[\n\r]/.test(d.value)){d.select()}}})}delete c._justFocus}if(c._activedonmousedown){delete c._activedonmousedown;var d=xui.use(g).get(0);if(d.tagName.toLowerCase()=="input"||!/[\n\r]/.test(d.value)){d.select()}}},onFocus:function(d,j,l){var h=d.properties,c=d.box;if(h.disabled||h.readonly){return false}if(d.onFocus){d.boxing().onFocus(d)}d.getSubNode("BOX").tagClass("-focus");var f=xui.use(l).get(0);if(h.mask){var g=f.value;if(!g){d.$focusDelayFun=xui.asyRun(function(){if(!d.box){return}delete d.$focusDelayFun;d.$_inner=true;f.value=d.$Mask;delete d.$_inner;c._setCaret(d,f)})}}if(h.selectOnFocus&&!f.readOnly&&f.select){if(xui.browser.kde){d.$focusDelayFun2=xui.asyRun(function(){delete d.$focusDelayFun2;if(xui.browser.deviceType!="touchOnly"){if(f.tagName.toLowerCase()=="input"||!/[\n\r]/.test(f.value)){f.select()}}})}else{if(xui.browser.deviceType!="touchOnly"){if(f.tagName.toLowerCase()=="input"||!/[\n\r]/.test(f.value)){f.select()}}}if(d._mousedownmark){d._justFocus=1}}d.boxing()._setTB(3);c._asyCheck(d)},onBlur:function(d,h,j){xui.resetRun(d.$xid+":asycheck");if(d.$focusDelayFun){xui.clearTimeout(d.$focusDelayFun)}if(d.$focusDelayFun2){xui.clearTimeout(d.$focusDelayFun2)}if(d.$focusDelayFun2){xui.clearTimeout(d.$mouseupDelayFun)}var g=d.properties,c=d.box;if(g.disabled||g.readonly){return false}if(d.onBlur){d.boxing().onBlur(d)}if(d.destroyed){return false}d.getSubNode("BOX").tagClass("-focus",false);var f=xui.use(j).get(0).value;if(d.$Mask&&d.$Mask==f){f=""}if(g.$UIvalue==f){d.box._checkValid(d,f)}d.boxing()._setDirtyMark();c._asyCheck(d,false)}}},DataModel:{selectable:true,tipsErr:"",tipsOK:"",dynCheck:false,selectOnFocus:true,placeholder:{ini:"",action:function(c){this.getSubNode("INPUT").attr("placeholder",c)}},labelSize:{$spaceunit:2,ini:"0",action:function(c){this.getSubNode("LABEL").css({display:c?"":"none"});xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelPos:{ini:"left",listbox:["none","left","top","right","bottom"],action:function(c){xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelGap:{$spaceunit:2,ini:"4",action:function(c){xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelCaption:{ini:"",action:function(c){c=(xui.isSet(c)?c:"")+"";this.getSubNode("LABEL").html(xui.adjustRes(c,true))}},labelHAlign:{ini:"right",listbox:["","left","center","right"],action:function(c){this.getSubNode("LABEL").css("textAlign",c)}},valueFormat:{helpinput:[{caption:"required",id:"[^.*]"},{caption:"email",id:"^[\\w\\.=-]+@[\\w\\.-]+\\.[\\w\\.-]{2,4}$"},{caption:"charOnly",id:"^[a-zA-Z]*$"},{caption:"words",id:"^[\\w ]*$"},{captoin:"size",id:"^(([1-9]\d*.\d+)|([1-9]\d*)|(.\d\d*))s*(px|em)?$"},{caption:"integer",id:"^-?\\d\\d*$"},{caption:"positiveInteger",id:"^\\d\\d*$"},{caption:"number",id:"^-?(\\d\\d*\\.\\d*$)|(^-?\\d\\d*$)|(^-?\\.\\d\\d*$)"},{caption:"filepath",id:"([\\/]?[\\w_]+)+\\.\\w{1,9}$"},{caption:"URL",id:"^(http|https|ftp)\\:\\/\\/[\\w\\-\\_\\.]+[\\w\\-\\_](:[\\w]*)?\\/?([\\w\\-\\._\\?\\,\\'\\/\\\\\\+&amp;%\\$#\\=~])*$"},{caption:"color",id:"^\\#[0-9A-Fa-f]{6}$"},{caption:"HH:MM",id:"^(([0-1][0-9])|([2][0-3])):([0-5][0-9])$"},{caption:"HH:MM:SS",id:"^(([0-1][0-9])|([2][0-3])):([0-5][0-9])\\:([0-5][0-9])$"},{caption:"YYYY-MM-DD",id:"^([0-9]{4})\\-(([0][0-9])|([1][0-2]))\\-([0-3][0-9])$"},{caption:"DD/MM/YYYY",id:"^(([0-2][0-9])|([3][0-1]))/(([0][0-9])|([1][0-2]))/([0-9]{4})$"}]},mask:{action:function(e){var d=this,c=d.box;if(e){d.$MaskFormat=function(l,j){var g=l._maskMap,h=[],n=/[A-Za-z0-9]/;xui.arr.each(j.split(""),function(p,m){h.push(g[p]||(n.test(p)?"":"\\")+p)});return"^"+h.join("")+"$"}(c,e);d.$Mask=function(n,j){var g=n._maskMap,h=[],l=n._maskSpace;xui.arr.each(j.split(""),function(p,m){h.push(g[p]?l:p)});return h.join("")}(c,e);var f=d.properties.$UIvalue;f=xui.isSet(f)?(f+""):"";d.boxing()._setCtrlValue(f+d.$Mask.slice(f.length))}else{delete d.$MaskFormat;delete d.$Mask}}},value:"",width:{$spaceunit:1,ini:"10em"},height:{$spaceunit:1,ini:"auto"},disabled:{ini:false,action:function(d){var e=this.getSubNode("INPUT"),c="xui-ui-disabled";if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}if((""+e.get(0).type).toLowerCase()!="button"){if(!d&&this.properties.readonly){d=true}e.attr("readonly",d)}}},hAlign:{ini:"",listbox:["","left","center","right"],action:function(c){this.getSubNode("INPUT").css("textAlign",c)}},readonly:{ini:false,action:function(d){var e=this.getSubNode("INPUT"),c="xui-ui-readonly";if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}if((""+e.get(0).type).toLowerCase()!="button"){if(!d&&this.properties.disabled){d=true}e.attr("readonly",d)}}},type:{ini:"text",listbox:["text","password"],set:function(c){var d=this;d.properties.type=c;if(d.renderId){d.boxing().refresh(true)}}},maxlength:{ini:-1,action:function(c){this.getSubNode("INPUT").attr("maxlength",c)}},multiLines:{ini:false,action:function(c){this.boxing().refresh()}},tipsBinder:{ini:"",set:function(c){if(c["xui.UIProfile"]){c=c.$xid}if(c["xui.UI"]&&(c=c.get(0))){c=c.$xid}this.properties.tipsBinder=c+""}}},EventHandlers:{onFocus:function(c){},onBlur:function(c){},onCancel:function(c){},beforeFormatCheck:function(c,d){},beforeFormatMark:function(c,d){},beforeKeypress:function(d,h,c,f,g){},onLabelClick:function(c,d,f){},onLabelDblClick:function(c,d,f){},onLabelActive:function(c,d,f){}},_prepareData:function(e){var f={},h=e.properties,c;if(h.height=="auto"){f.height="1.83em"}var g=arguments.callee.upper.call(this,e,f);g._inputtype=g.type||"";if(g.maxlength<0){g.maxlength=""}if(xui.browser.kde){g._css="resize:none;"}g.hAlign=g.hAlign?("text-align:"+g.hAlign):"";g.labelHAlign=g.labelHAlign?("text-align:"+g.labelHAlign):"";g.labelShow=g.labelPos!="none"&&g.labelSize&&g.labelSize!="auto"?"":"display:none";g._labelSize=g.labelSize?"":0+e.$picku();if(g.labelCaption){g.labelCaption=xui.adjustRes(g.labelCaption,true)}return g},_dynamicTemplate:function(f){var d=f.properties,c,g=f._exhash="$multiLines:"+d.multiLines,e=f.box.getTemplate(g);d.$UIvalue=d.value;if(!e){e=xui.clone(f.box.getTemplate());if(d.multiLines){c=e.FRAME.BORDER.BOX.WRAP.INPUT;c.tagName="textarea";c.className="";delete c.type}f.box.setTemplate(e,g)}f.template=e},_ensureValue:function(c,d){return""+(xui.isSet(d)?d:"")},RenderTrigger:function(){var d=this,g=d.properties;xui.asyRun(function(){if(d.box){d.boxing()._setTB(1)}});d.getSubNode("WRAP").$firfox2();if(g.readonly){d.boxing().setReadonly(true,true)}if(g.tipsBinder){d.boxing().setTipsBinder(g.tipsBinder,true)}var j=xui.browser.ie,h=d.getSubNode("INPUT").get(0),c=d.box,e=function(f){if(j&&("propertyName" in f)&&f.propertyName!="value"){return}c._asyCheck(d,false)};if(j&&h.attachEvent){h.attachEvent("onpropertychange",e);h.attachEvent("ondrop",e);d.$ondestory=function(){var f=this.getSubNode("INPUT").get(0);if(f){f.detachEvent("onpropertychange",e);f.detachEvent("ondrop",e)}f=e=null}}else{h.addEventListener("input",e,false);h.addEventListener("drop",e,false);if(xui.browser.gek){h.addEventListener("dragdrop",e,false)}d.$ondestory=function(){var f=this.getSubNode("INPUT").get(0);if(f){f.removeEventListener("input",e,false);f.removeEventListener("drop",e,false);if(xui.browser.gek){f.removeEventListener("dragdrop",e,false)}}f=e=null}}h=null},LayoutTrigger:function(){var c=this.properties;if(c.mask){this.boxing().setMask(c.mask,true)}},_changeMask:function(f,h,j,r,d){if(false!==d){var D=this,q=f.properties,C=D._maskMap,u=D._maskSpace,c=q.mask,e=f.$Mask,l=xui(h),m=l.caret();if(r===false&&m[0]==m[1]&&m[0]>0){l.caret(m[0]-1,m[0])}if(r===undefined&&m[0]==m[1]){l.caret(m[0],m[0]+1)}if(r===true){if(e.charAt(m[0])!=u){var x=m[0]+e.substr(m[0],e.length).indexOf(u);l.caret(x,Math.max(m[1],x))}}var m=l.caret(),w=h.value,o=q.mask.charAt(m[0]),g=D._maskMap[o],A,n;if(g&&j&&j.length==1){if(o=="l"){j=j.toLowerCase()}else{if(o=="u"){j=j.toUpperCase()}}}if(g&&new RegExp("^"+g+"$").test(j)||j==""){n=w;if(m[0]!=m[1]){n=n.substr(0,m[0])+e.substr(m[0],m[1]-m[0])+n.substr(m[1],n.length-m[1])}if(j){n=n.substr(0,m[0])+j+n.substr(m[0]+1,n.length-m[0]-1)}var B=[];xui.arr.each(c.split(""),function(E,p){B.push((new RegExp("^"+(C[E]?C[E]:"\\"+E)+"$").test(n.charAt(p)))?n.charAt(p):e.charAt(p))});if(r===true){j=e.substr(m[0]+1,w.length-m[0]-1);A=j.indexOf(u);A=m[0]+(A==-1?0:A)+1}else{A=m[0]}if(xui.browser.opr){if(r===undefined){xui.arr.insertAny(B,u,A)}if(r===false){xui.arr.insertAny(B,u,A++)}}w=B.join("");h.value=w;f.boxing().setUIValue(w==e?"":w,null,null,"mask");D._setCaret(f,h,A)}}else{var D=this,q=f.properties,C=D._maskMap,c=q.mask,e=f.$Mask,n=h.value,B=[];xui.arr.each(c.split(""),function(E,p){B.push((new RegExp("^"+(C[E]?C[E]:"\\"+E)+"$").test(n.charAt(p)))?n.charAt(p):e.charAt(p))});w=B.join("");h.value=w;f.boxing().setUIValue(w==e?"":w,null,null,"mask")}},_setCaret:function(c,d,e){if(c.properties.mask){if(typeof e!="number"){e=d.value.indexOf(this._maskSpace)}xui(d).caret(e,e)}},_checkValid2:function(c){if(!c.renderId){return true}return this._checkValid(c,c.getSubNode("INPUT").get(0).value)},_checkValid:function(e,f){var g=e.properties,d=(g.mask&&e.$MaskFormat),c=g.valueFormat||e.$valueFormat;if(e.boxing()._toEditor){f=e.boxing()._toEditor(f)}if((e.beforeFormatCheck&&(e.boxing().beforeFormatCheck(e,f)===false))||(((f&&f.length)&&e.$Mask!==f)&&(d&&typeof d=="string"&&!(new RegExp(d)).test((f===0?"0":f)||"")))||(c&&typeof c=="string"&&!(new RegExp(c)).test((f===0?"0":f)||""))){e._inValid=2;return false}e._inValid=3;return true},_asyCheck:function(d,c){if(d.destroyed){return}if(!d.properties.dynCheck&&!d.properties.mask){return}xui.resetRun(d.$xid+":asycheck",function(){if(!d.renderId){return}var f=d.getSubNode("INPUT"),g=f.get(0);if(!g){return}if(d.properties.mask){if(g.value.length!=d.$Mask.length){d.box._changeMask(d,g,"",true,c)}}if(d.properties.dynCheck){var e=g.value;if(d.$Mask&&d.$Mask==e){e=""}d.boxing().setUIValue(e,false,true,null,"asycheck")}})},_onresize:function(j,D,B){var h=j.properties,J=function(f){if(!f){return null}f=j.getSubNode(f);return f},F=J("KEY"),g=J("INPUT"),w=J("BOX"),r=J("LABEL"),u=xui.$us(h),M=function(f,Q){return j.$forceu(f,u>0?"em":"px",Q)},G=j.getEmSize()/F._getEmSize(),I=g._getEmSize(G),o=r._getEmSize(G),P,c,p="xui-node xui-input-input",d=g._paddingH(),H=g._paddingW(),E;P=c=w._borderW()/2;if(B){B=(E=B=="auto")?j.$em2px(1,null,true)+d+2*c:j.$isEm(B)?j.$em2px(B,null,true):B}if(D){D=j.$isEm(D)?j.$em2px(D,null,true):D}if(E){F.height(M(B))}var C=h.labelPos,q=(C=="none"||!C)?0:j.$px(h.labelSize,o)||0,L=(C=="none"||!C)?0:j.$px(h.labelGap)||0,O=D,l=B,n=Math.max(0,(h.$b_lw||0)-P),A=Math.max(0,(h.$b_tw||0)-c);if(null!==O){O-=Math.max(P*2,(h.$b_lw||0)+(h.$b_rw||0));if(xui.browser.ie6){O=(Math.round(parseFloat(O/2)))*2}}if(null!==l){l-=Math.max(c*2,(h.$b_lw||0)+(h.$b_rw||0));if(xui.browser.ie6){l=(Math.round(parseFloat(l/2)))*2}if(xui.browser.ie6&&null===D){w.ieRemedy()}}var e=n+(C=="left"?q:0),N=A+(C=="top"?q:0),K=O===null?null:Math.max(0,O-((C=="left"||C=="right")?q:0)),m=l===null?null:Math.max(0,l-((C=="top"||C=="bottom")?q:0)),x=l===null?null:Math.max(0,B-((C=="top"||C=="bottom")?q:0));if(null!==K&&K-H>0){g.width(M(Math.max(0,K-H),I))}if(null!==m&&m-d>0){g.height(M(Math.max(0,m-d),I))}w.cssRegion({left:M(e),top:M(N),width:M(K),height:M(m)});if(q){r.cssRegion({left:M(O===null?null:C=="right"?(O-q+L+P*2):0,o),top:M(B===null?null:C=="bottom"?(B-q+L):0,o),width:M(O===null?null:Math.max(0,((C=="left"||C=="right")?(q-L):O)),o),height:M(B===null?null:Math.max(0,((C=="top"||C=="bottom")?(q-L):B)-d),o)})}e+=(K||0)+P*2;if((j.$resizer)&&xui.browser.ie){w.ieRemedy()}}}});Class("xui.UI.HiddenInput",["xui.UI","xui.absValue"],{Instance:{activate:function(){return this},_setCtrlValue:function(c){if(xui.isNull(c)||!xui.isDefined(c)){c=""}return this.each(function(d){d.getSubNode("KEY").attr("value",c+"")})},_getCtrlValue:function(){var c=this.getSubNode("KEY");if(v.indexOf("\r")!=-1){v=v.replace(/(\r\n|\r)/g,"\n")}return v}},Static:{$initRootHidden:true,Templates:{className:"xui-display-none",style:"display:none",tagName:"input",type:"hidden"},DataModel:{locked:null,required:null,dataBinder:null,dataField:null,display:null,visibility:null,position:null,left:null,top:null,right:null,bottom:null,width:null,height:null,rotate:null,showEffects:null,hideEffects:null,activeAnim:null,tabindex:null,zIndex:null,defaultFocus:null,hoverPop:null,hoverPopType:null,disabled:null,readonly:null,disableClickEffect:null,disableHoverEffect:null,dock:null,dockOrder:null,dockMargin:null,dockMinW:null,dockMinH:null,dockMaxW:null,dockMaxH:null,dockFloat:null,dockIgnore:null,dirtyMark:null,showDirtyMark:null,selectable:null,autoTips:null,tips:null,disableTips:null,renderer:null,className:null},EventHandlers:{beforeDirtyMark:null,onContextmenu:null,onDock:null,onLayout:null,onMove:null,onRender:null,onResize:null,onShowTips:null,beforeAppend:null,afterAppend:null,beforeRender:null,afterRender:null,beforeRemove:null,afterRemove:null,onHotKeydown:null,onHotKeypress:null,onHotKeyup:null},_ensureValue:function(c,d){return""+(xui.isSet(d)?d:"")}}});Class("xui.UI.RichEditor",["xui.UI","xui.absValue"],{Initialize:function(){this.addTemplateKeys(["TOOLBARBTN"])},Instance:{getEditorWin:function(){return this.get(0).$win},getEditorDoc:function(){return this.get(0).$doc},getEditorBody:function(){var c=this.get(0).$doc;return c&&(c.body||c.documentElement)},_setCtrlValue:function(c){if(!xui.isSet(c)){c=""}return this.each(function(f){var g=window["/"];if(g&&g.indexOf(":/")!=-1){c=c.replace(/{\/}/g,g)}var e=xui.adjustRes(c,0,1);if(!f.$inDesign){var h=f.$doc,d=h&&(h.body||h.documentElement);if(d){d.innerHTML=e;return}}f.getSubNode("EDITOR").html(e)})},_getCtrlValue:function(){var e=this.get(0);if(!e.$inDesign){var g=e.$doc,c=g&&(g.body||g.documentElement);if(c){var d=c.innerHTML,f=window["/"];if(f&&f.indexOf(":/")!=-1){d=d.replace(new RegExp(f,"g"),"{/}")}return d}else{return""}}else{return e.getSubNode("EDITOR").html()}}},Static:{DIRYMARKICON:"DIRTYMARK",Templates:{tagName:"div",style:"{_style}",className:"{_className} xui-ui-selectable",LABEL:{className:"{_required} xui-ui-ellipsis",style:"{labelShow};width:{_labelSize};{labelHAlign}",text:"{labelCaption}"},BOX:{EDITOR:{tagName:"div",className:"xui-uiborder-flat xui-uiborder-radius xui-uibase"},DIRTYMARK:{},POOL:{}}},DataModel:{selectable:true,value:{ini:"",html:1},width:{$spaceunit:1,ini:"32em"},height:{$spaceunit:1,ini:"25em"},frameTemplate:{ini:'<html style="-webkit-overflow-scrolling: touch;padding:0;margin:0;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><style type="text/css">body{height: 100%;-webkit-overflow-scrolling: touch;border:0;padding:0;margin:.5em;cursor:text;color:#000;font-family:sans-serif,Arial,Verdana,"Trebuchet MS";font-style:normal;font-weight:normal;font-size:12px;line-height:1.22em}div, p{margin:0;padding:0;} body, p, div{word-wrap: break-word;} img, input, textarea{cursor:default;}</style></head><body scroll="auto" spellcheck="false"></body></html>',action:function(){this.boxing().refresh()}},frameStyle:"",cmdList:{ini:"font1;font2;align;list;font4;font3;insert;clear;html",action:function(c){var d=this;if(!d.properties.disabled&&!d.properties.readonly){d.box._iniToolBar(d)}}},cmdFilter:{ini:""},disabled:{ini:false,action:function(c){var c=this.properties.disabled||this.properties.readonly,d=this.$doc;if(d){if(d.body.contentEditable!=undefined&&xui.browser.ie){d.body.contentEditable=c?"false":"true"}else{d.designMode=c?"off":"on"}this.box._iniToolBar(this,!c)}}},readonly:{ini:false,action:function(c){this.boxing().setDisabled(c)}},labelSize:{$spaceunit:2,ini:0,action:function(c){this.getSubNode("LABEL").css({display:c&&c!="auto"?"":"none"});xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelPos:{ini:"left",listbox:["none","left","top","right","bottom"],action:function(c){xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelGap:{$spaceunit:2,ini:4,action:function(c){xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelCaption:{ini:"",action:function(c){c=(xui.isSet(c)?c:"")+"";this.getSubNode("LABEL").html(xui.adjustRes(c,true))}},labelHAlign:{ini:"right",listbox:["","left","center","right"],action:function(c){this.getSubNode("LABEL").css("textAlign",c)}}},Appearances:{KEY:{overflow:"hidden"},BOX:{left:0,top:0,width:"100%",position:"absolute",overflow:"hidden"},POOL:{position:"absolute",display:"none"},DIRTYMARK:{position:"absolute",width:"1em",height:"1em"},TOOLBARBTN:{},LABEL:{"z-index":1,top:0,left:0,position:"absolute","padding-top":".5em"},EDITOR:{position:"absolute",display:"block",left:0,top:0,width:"100%",height:"100%",padding:0,margin:0,"z-index":"10"}},Behaviors:{onSize:xui.UI.$onSize,LABEL:{onClick:function(c,d,f){if(c.properties.disabled){return false}if(c.onLabelClick){c.boxing().onLabelClick(c,d,f)}},onDblClick:function(c,d,f){if(c.properties.disabled){return false}if(c.onLabelDblClick){c.boxing().onLabelDblClick(c,d,f)}},onMousedown:function(c,d,f){if(xui.Event.getBtn(d)!="left"){return}if(c.properties.disabled){return false}if(c.onLabelActive){c.boxing().onLabelActive(c,d,f)}}}},EventHandlers:{onInnerEvent:function(d,c,f,g){},onUpdateToolbar:function(c,d,e){},onReady:function(c){},onLabelClick:function(c,d,f){},onLabelDblClick:function(c,d,f){},onLabelActive:function(c,d,f){}},$cmds:{font1:[{id:"bold",command:"Bold",statusButton:true,imageClass:"xuifont xui-icon-bold",_fi_:"xui-icon-bold"},{id:"italic",command:"Italic",statusButton:true,imageClass:"xuifont xui-icon-italic",_fi_:"xui-icon-italic"},{id:"underline",command:"Underline",statusButton:true,imageClass:"xuifont xui-icon-underline",_fi_:"xui-icon-underline"},{id:"strikethrough",command:"strikeThrough",statusButton:true,imageClass:"xuifont xui-icon-strikethrough",_fi_:"xui-icon-strikethrough"}],font2:[{id:"subscript",command:"subscript",statusButton:true,imageClass:"xuifont xui-icon-sub",_fi_:"xui-icon-sub"},{id:"superscript",command:"superscript",statusButton:true,imageClass:"xuifont xui-icon-super",_fi_:"xui-icon-super"}],font3:[{id:"forecolor",command:"custom",imageClass:"xuifont xui-icon-forecolor",_fi_:"xui-icon-forecolor"},{id:"bgcolor",command:"custom",imageClass:"xuifont xui-icon-bgcolor",_fi_:"xui-icon-bgcolor"}],font4:[{id:"fontsize",command:"custom",caption:"$editor.fontsize",dropButton:true},{id:"fontname",command:"custom",caption:"$editor.fontname",dropButton:true},{id:"formatblock",command:"custom",caption:"$editor.formatblock",dropButton:true}],align:[{id:"left",command:"justifyleft",imageClass:"xuifont xui-icon-alignleft",_fi_:"xui-icon-alignleft"},{id:"center",command:"justifycenter",imageClass:"xuifont xui-icon-aligncenter",_fi_:"xui-icon-aligncenter"},{id:"right",command:"justifyright",imageClass:"xuifont xui-icon-alignright",_fi_:"xui-icon-alignright"},{id:"justify",command:"justifyfull",imageClass:"xuifont xui-icon-alignjustify",_fi_:"xui-icon-alignjustify"}],list:[{id:"indent",command:"indent",imageClass:"xuifont xui-icon-indent",_fi_:"xui-icon-indent"},{id:"outdent",command:"outdent",imageClass:"xuifont xui-icon-outdent",_fi_:"xui-icon-outdent"},{id:"ol",command:"insertorderedlist",imageClass:"xuifont xui-icon-number",_fi_:"xui-icon-number"},{id:"ul",command:"insertunorderedlist",imageClass:"xuifont xui-icon-bullet",_fi_:"xui-icon-bullet"}],insert:[{id:"hr",command:"insertHorizontalRule",imageClass:"xuifont xui-icon-inserthr",_fi_:"xui-icon-inserthr"},{id:"insertimage",command:"custom",imageClass:"xuifont xui-icon-picture",_fi_:"xui-icon-picture"},{id:"createlink",command:"custom",imageClass:"xuifont xui-icon-link",_fi_:"xui-icon-link"},{id:"unlink",command:"unlink",imageClass:"xuifont xui-icon-breaklink",_fi_:"xui-icon-breaklink"}],clear:[{id:"removeformat",command:"removeformat",imageClass:"xuifont xui-icon-formatclear",_fi_:"xui-icon-formatclear"}],html:[{id:"html",command:"custom",imageClass:"xuifont xui-icon-html",_fi_:"xui-icon-html"}]},_prepareData:function(e){var f=arguments.callee.upper.call(this,e),c;f.labelHAlign=f.labelHAlign?("text-align:"+f.labelHAlign):"";f.labelShow=f.labelPos!="none"&&f.labelSize&&f.labelSize!="auto"?"":"display:none";f._labelSize=f.labelSize?"":0+e.$picku();if(f.labelCaption){f.labelCaption=xui.adjustRes(f.labelCaption,true)}return f},_updateToolbar:function(f,j,q){var e=xui.$cache.profileMap[f],n;if(!e){return}if(e.properties.disabled||e.properties.readonly){return}if(e&&(n=e.$toolbar)){var o=e.$doc,l=j?false:o.queryCommandState("bold"),h=j?false:o.queryCommandState("italic"),d=j?false:o.queryCommandState("underline"),c=j?false:o.queryCommandState("strikethrough"),m=j?false:o.queryCommandState("subscript"),p=j?false:o.queryCommandState("superscript"),g=n.boxing();g.updateItem("bold",{value:l});g.updateItem("italic",{value:h});g.updateItem("underline",{value:d});g.updateItem("strikethrough",{value:c});g.updateItem("subscript",{value:m});g.updateItem("superscript",{value:p});if(e.onUpdateToolbar){e.boxing().onUpdateToolbar(e,q,o)}o=null}},RenderTrigger:function(){var p=this;if(!p.properties.disabled&&!p.properties.readonly){p.box._iniToolBar(p)}if(!p.$inDesign){var o=p.getSubNode("EDITOR").get(0),g=p.$domId,r=p.properties.frameTemplate,w=p.properties.frameStyle,q=o.id;if(w){r=r.replace(/<\s*\/\s*head\s*>/,"<style>"+(w||"")+"</style></head>")}if(!p.$once){p.$once=true;try{var j=p.$ifr=document.createElement("IFRAME")}catch(x){var j=p.$ifr=document.createElement("<iframe name='"+q+"' id='"+q+"'></iframe>")}var n=this,c=p._eventOutput=function(C){if(n&&(n.properties.disabled||n.properties.readonly)){return}if(n.onInnerEvent){return n.boxing().onInnerEvent(n,C.type,xui.Event.getSrc(C),C)}},u=p._event=function(F){if(n&&(n.properties.disabled||n.properties.readonly)){return}var D=F.type;if(D!=="mouseover"&&D!=="mouseout"){xui.resetRun("RichEditor:"+g,function(){if(!n.box){return}xui.UI.RichEditor._updateToolbar(g,false,D)},100);if(D=="mousedown"){if(xui.browser.applewebkit&&F.target.tagName=="IMG"){var E=p.$win.getSelection(),C=p.$doc.createRange();C.selectNode(F.target);E.removeAllRanges();E.addRange(C)}xui.doc.onMousedown(true)}}if(n.onInnerEvent){return n.boxing().onInnerEvent(n,D,xui.Event.getSrc(F),F)}},l=p._event2=function(D){if(n&&(n.properties.disabled||n.properties.readonly)){return}if(n.onInnerEvent){var C=D.type;xui.resetRun(n.$xid+":frmInnerAsyEvent",function(){if(n&&!n.destroyed){n.boxing().onInnerEvent(n,C,xui.Event.getSrc(D),D)}})}},d=function(C){if(!n){return}if(n.properties.disabled||n.properties.readonly){return}n.box._onchange(n)},h=function(D){if(!n){return}if(n.properties.disabled||n.properties.readonly){return}xui.resetRun("RichEditor:"+g,function(){if(!n.box){return}xui.UI.RichEditor._updateToolbar(g,true,"blur")},100);if(n._onchangethread){clearInterval(n._onchangethread);n._onchangethread=null;if(n&&n.box){n.box._checkc(n)}}var C=n.boxing()._getCtrlValue();n.boxing().setUIValue(C,null,true,"blur")},m=function(D){if(n){var C=n.boxing();xui.asyRun(function(){if(!n.box){return}C.refresh()})}},B,f,A=function(){xui.setTimeout(function(){if(!frames[q]){return}if(!frames[q].document){return}if(p.$win!=frames[q].window){f=p.$win=frames[q].window;B=p.$doc=f.document;B.open();B.write(r);B.close();try{B.execCommand("styleWithCSS",0,false)}catch(E){try{B.execCommand("useCSS",0,true)}catch(E){}}var C=p.properties.disabled||p.properties.readonly;if(B.body.contentEditable!=undefined&&xui.browser.ie){B.body.contentEditable=C?"false":"true"}else{B.designMode=C?"off":"on"}if(C){p.box._iniToolBar(p,false)}f._gekfix=m;if(xui.browser.ie&&B.attachEvent){B.attachEvent("unload",m);if(!C){B.attachEvent("onmousedown",u);B.attachEvent("ondblclick",u);B.attachEvent("onclick",u);B.attachEvent("oncontextmenu",c);B.attachEvent("onkeyup",u);B.attachEvent("onkeydown",u);B.attachEvent("onmouseover",u);B.attachEvent("onmouseout",u);B.attachEvent("onmousemove",l);f.attachEvent("onfocus",d);f.attachEvent("onblur",h);(p.$beforeDestroy=(p.$beforeDestroy||{}))["ifmClearMem"]=function(){var K=this.$win,J=this.$doc,H=this._event,G=this._event2;if(this._onchangethread){clearInterval(this._onchangethread);this._onchangethread=null}try{var F=J.designMode;J.designMode="off";J.designMode="on";J.designMode=F}catch(I){}K._gekfix=undefined;try{J.detachEvent("unload",K._gekfix)}catch(I){}if(!this.properties.disabled&&!this.properties.readonly){J.detachEvent("onmousedown",H);J.detachEvent("ondblclick",H);J.detachEvent("onclick",H);J.detachEvent("oncontextmenu",c);J.detachEvent("onkeyup",H);J.detachEvent("onkeydown",H);J.detachEvent("onmouseover",H);J.detachEvent("onmouseout",H);J.detachEvent("onmousemove",G);K.detachEvent("onfocus",d);K.detachEvent("onblur",h)}K=J=H=G=null}}}else{var D=p;if(xui.browser.opr||!f.addEventListener){D.$repeatT=xui.Thread.repeat(function(){if(!frames[q]){return false}else{if(!D.$win.document||!D.$win.document.defaultView){D.boxing().refresh()}}},99)}else{f.addEventListener("unload",m,false)}if(!C){B.addEventListener("mousedown",u,false);B.addEventListener("dblclick",u,false);B.addEventListener("click",u,false);B.addEventListener("contextmenu",c,false);B.addEventListener("keyup",u,false);B.addEventListener("mouseover",u,false);B.addEventListener("mouseout",u,false);B.addEventListener("mousemove",l,false);if(xui.browser.gek||!f.addEventListener){B.addEventListener("focus",d,false);B.addEventListener("blur",h,false);B.addEventListener("keypress",u,false)}else{f.addEventListener("focus",d,false);f.addEventListener("blur",h,false);B.addEventListener("keydown",u,false)}}(p.$beforeDestroy=(p.$beforeDestroy||{}))["ifmClearMem"]=function(){var J=this.$win,I=this.$doc,K=this.$ifr,G=this._event,F=this._event2;if(xui.browser.opr){if(D.$repeatT){D.$repeatT.abort()}}if(K.detachEvent){K.detachEvent("onload",A)}else{K.onload=null}try{J.removeEventListener("unload",J._gekfix,false)}catch(H){}J._gekfix=undefined;delete frames[this.$frameId];if(!this.properties.disabled&&!this.properties.readonly&&I.removeEventListener){I.removeEventListener("mousedown",G,false);I.removeEventListener("dblclick",G,false);I.removeEventListener("click",G,false);I.removeEventListener("contextmenu",c,false);I.removeEventListener("keyup",G,false);I.removeEventListener("mouseover",G,false);I.removeEventListener("mouseout",G,false);I.removeEventListener("mousemove",F,false);if(xui.browser.gek||!J.removeEventListener){I.removeEventListener("focus",d,false);I.removeEventListener("blur",h,false);I.removeEventListener("keypress",G,false)}else{J.removeEventListener("focus",d,false);J.removeEventListener("blur",h,false);I.removeEventListener("keydown",G,false)}}D=m=G=F=J=I=null}}p.boxing()._setCtrlValue(p.properties.$UIvalue||"");j.style.visibility="";j.style.overflow="auto";if(p.onReady){p.boxing().onReady(p)}}})};p.$frameId=q;j.id=j.name=q;j.className=o.className;j.src="about:blank";j.frameBorder=0;j.border=0;j.scrolling="yes";j.marginWidth=0;j.marginHeight=0;j.tabIndex=-1;j.allowTransparency="allowtransparency";j.style.visibility="hidden";xui.$cache.domPurgeData[j.$xid=o.$xid].element=j;o.parentNode.replaceChild(j,o);if(j.attachEvent){j.attachEvent("onload",A)}else{j.onload=A}}}else{p.boxing()._setCtrlValue(p.properties.value||"")}},_checkc:function(e){if(e&&e.$doc){var f=e.$doc,c=f&&(f.body||f.documentElement);if(!e.__oldv){e.__oldv=c.innerHTML}if(c.innerHTML!=e.__oldv){var d=e.__oldv;e.__oldv=c.innerHTML;e.boxing().onChange(e,d,c.innerHTML)}}},_onchange:function(c){if(c.onChange){if(c._onchangethread){clearInterval(c._onchangethread);c._onchangethread=null}c._onchangethread=setInterval(function(){if(c&&c.box){c.box._checkc(c)}},500)}},_clearPool:function(c){c.getSubNode("POOL").empty();c.$colorPicker=c.$fontsizeList=c.$fontnameList=c.$formatblockList=c.$htmlEditor=null},_iniToolBar:function(d,j){var r=d,n=r.properties,l=(n.cmdFilter||"").split(/[\s,;]+/),u;if(r.$toolbar){r.$toolbar.boxing().destroy(true);delete r._$tb;delete r.$toolbar}if(j!==false){var q,p,c,g=[],m=r.getClass("TOOLBARBTN"),f=n.cmdList.split(/[\s,;]+/),e={};xui.arr.each(f,function(h){if((c=r.box.$cmds[h])&&!e[h]){e[h]=1;xui.filter(c,function(o){if(xui.arr.indexOf(l,o.id)!==-1){return false}if(o.imagePos){o.imageClass=m}o.tips=xui.wrapRes("editor."+o.id)});g.push({id:h,sub:c})}});q=new xui.UI.ToolBar({selectable:false,handler:false,items:g,disabled:n.disabled||n.readonly});q.setCustomStyle("ITEMS","border:none");r.getSubNode("BOX").prepend(q);q.render(true);d.$_tbH=u=q.getRoot().offsetHeight();if(xui.browser.ie){q.getSubNode("BOX").query("*").attr("unselectable","on")}q=r._$tb=q.get(0);q.onClick=r.box._toolbarclick;p=r._$composed={};p[q.$xid]=q;r.$toolbar=q;q.$hostage=r}xui.UI.$tryResize(d,n.width,n.height,true);return u},_toolbarclick:function(d,F,l,D,j){var g=d.$hostage;if(!g.$doc){return}var n=g.properties,h;g.$win.focus();if(F.command=="custom"){var C=F.id,w,f,A,u,E;switch(C){case"forecolor":case"bgcolor":if(!g.$colorPicker){h=true;g.$colorPicker=(new xui.UI.ColorPicker({selectable:false,barDisplay:false})).render(true)}w=g.$colorPicker;break;case"fontsize":case"fontname":case"formatblock":if(g.$lang!=xui.getLang()){g.box._clearPool(g)}g.$lang=xui.getLang();if(C=="fontsize"){if(!g.$fontsizeList){u=xui.getRes("editor.fontsizeList");u=u.split(";");E=[];var q;xui.arr.each(u,function(e){e=e.split(",");q=e[0]=="..."?"1":e[0];E.push({id:e[0],caption:'<font size="'+e[0]+'" '+xui.$IEUNSELECTABLE()+">"+e[1]+"</font>"})});h=true;g.$fontsizeList=(new xui.UI.List({selectable:false,height:"auto",items:E,width:150})).render(true)}w=g.$fontsizeList}else{if(C=="fontname"){if(!g.$fontnameList){u=xui.getRes("editor.fontnameList");u=u.split(";");E=[];var q;xui.arr.each(u,function(e){q=e=="..."?"":e;E.push({id:e,caption:'<span style="font-family:'+e+'" '+xui.$IEUNSELECTABLE()+">"+e+"</span>"})});h=true;g.$fontnameList=(new xui.UI.List({selectable:false,height:"auto",items:E})).render(true)}w=g.$fontnameList}else{if(C=="formatblock"){if(!g.$formatblockList){u=xui.getRes("editor.formatblockList");u=u.split(";");E=[];var q;xui.arr.each(u,function(e){e=e.split(",");q=e[0]=="..."?"span":e[0];E.push({id:e[0],caption:"<"+q+' style="display:inline;padding:0;margin:0" '+xui.$IEUNSELECTABLE()+">"+e[1]+"</"+q+">"})});h=true;g.$formatblockList=(new xui.UI.List({selectable:false,height:"auto",items:E})).render(true)}w=g.$formatblockList}}}break;case"html":if(!g.$htmlEditor){h=true;g.$htmlEditor=new xui.UI.Input({multiLines:true,width:400,height:300,resizer:true})}w=g.$htmlEditor;break}if(w){f=function(){w.beforeUIValueSet(null);g.getSubNode("POOL").append(w.getRoot());A.setBlurTrigger(g.$xid);xui.Event.keyboardHook("esc");xui.asyRun(function(){if(!g||!g.$win){return}g.$win.focus()})};w.setValue("",true,"clear");A=w.reBoxing();if(g.$htmlEditor==w){var B=g.getRoot(),m=g.getSubNode("EDITOR");w.setLeft(m.left()).setTop(m.top()).setWidth(m.offsetWidth()).setHeight(m.offsetHeight());w.setZIndex(10);g.getSubNode("BOX").append(A)}else{A.popToTop(j)}if(h&&xui.browser.ie){w.getSubNode("BOX").query("*").attr("unselectable","on")}xui.tryF(w.activate,[],w);A.setBlurTrigger(g.$xid,function(){if(w==g.$htmlEditor){var e=w._getCtrlValue()}w.setUIValue(e,null,true,"blur");f()});xui.Event.keyboardHook("esc",0,0,0,function(){f()},null,null,d.domId)}switch(C){case"forecolor":case"bgcolor":w.beforeUIValueSet(function(I,J,e){f();var H=g.$doc;if(C=="bgcolor"&&xui.browser.gek){H.execCommand("useCSS",0,false);H.execCommand("hilitecolor",false,"#"+e);H.execCommand("useCSS",0,true)}else{if(C=="bgcolor"){C=xui.browser.opr?"hilitecolor":"backcolor"}H.execCommand(C,false,xui.browser.kde?("#"+e):e)}H=null;return false});break;case"fontsize":case"fontname":case"formatblock":w.beforeUIValueSet(function(K,M,H){f();if(xui.browser.ie&&(H=="..."||C=="formatblock")){var I=g.$doc.selection,e=I?I.createRange():null;if(e&&e.parentElement().ownerDocument!=g.$doc){e=I=null}}var J=function(O,o){var Q=g.$doc;if(e){g.$win.focus();if(O=="formatblock"&&o){var P=e.parentElement(),N;if(P.ownerDocument==Q){if(/^\s*</.test(e.htmlText)){e.collapse(true);P=e.parentElement();if(P.tagName=="BODY"){N=P.innerHTML;P.innerHTML="<"+o+">"+N+"</"+o+">"}else{N=P.outerHTML;N=N.replace(/\<[\w]+/,"<"+o).replace(/[\w]+\>$/,o+">");P.outerHTML=N}}else{e.pasteHTML("<"+o+">"+e.htmlText+"</"+o+">")}}P=null}e.select();I=e=null}Q.execCommand(O,false,o);Q=null};if(H=="..."){var L=xui.getRes("editor."+C);xui.UI.Dialog.prompt(L,L,"",function(o){if(o){J(C,o)}},function(){if(xui.browser.ie){if(e){g.$win.focus();e.select()}I=e=null}})}else{J(C,H)}});break;case"insertimage":case"createlink":var x=xui.getRes("editor."+C),c=xui.getRes("editor."+C+"2");if(xui.browser.ie){var G=g.$doc.selection,r=G?G.createRange():null;if(r&&r.parentElement().ownerDocument!=g.$doc){r=G=null}}xui.UI.Dialog.prompt(x,c,"http://",function(e){if(xui.browser.ie){if(r){g.$win.focus();r.select()}G=r=null}if(e){var o=g.$doc;o.execCommand(C,false,xui.adjustRes(e,0,1));o=null}},function(){if(xui.browser.ie){if(r){g.$win.focus();r.select()}G=r=null}});break;case"html":var p=g.boxing().getUIValue();if(xui.Coder){p=xui.Coder.formatText(p,"html")}w.setValue(p,true,"editor");w.beforeUIValueSet(function(H,I,e){f();g.boxing().setUIValue(e,null,null,"html")});break}}else{g.$doc.execCommand(F.command,false,F.commandArgs||null);if(F.id=="removeformat"){xui.UI.RichEditor._updateToolbar(g.$domId,true,"none")}g.$win.focus()}},_ensureValue:function(c,d){var e=xui.$getGhostDiv();e.innerHTML=(xui.isSet(d)?d:"")+"";d=e.innerHTML;e.innerHTML="";return d},_onresize:function(e,q,o){if(q||o){if(!o){o=e.properties.height}var d=e.properties,r=e.getRoot(),m=e.getSubNode("BOX"),h=e.getSubNode("LABEL"),l=xui.$us(d),w=function(B,C){return e.$forceu(B,l>0?"em":"px",C)},u=e.getEmSize()/r._getEmSize(),g=h._getEmSize(u),p=d.labelPos,j=(p=="none"||!p)?0:e.$px(d.labelSize,g)||0,x=(p=="none"||!p)?0:e.$px(d.labelGap)||0,n,c,A,f;if(q&&q!="auto"){q=e.$px(q)}if(o&&o!="auto"){o=e.$px(o)}m.cssRegion({left:w(n=p=="left"?j:0),top:w(c=p=="top"?j:0),width:w(A=q===null?null:Math.max(0,(q-((p=="left"||p=="right")?j:0)))),height:w(f=o===null?null:Math.max(0,(o-((p=="top"||p=="bottom")?j:0))))});if(j){h.cssRegion({left:w(q===null?null:Math.max(0,p=="right"?(q-j+x):0),g),top:w(o===null?null:Math.max(0,p=="bottom"?(o-j+x):0),g),width:w(q===null?null:Math.max(0,((p=="left"||p=="right")?(j-x):q)),g),height:w(o===null?null:Math.max(0,((p=="top"||p=="bottom")?(j-x):o)),g)})}xui.asyRun(function(){if(!e.renderId){return}var E=e._$tb,C={},D=0,B;if(E){E.getRoot().width(w(A,E.getRoot()));B=E.getRoot().offsetHeight(true);if(B){e.$_tbH=B}else{B=e.$_tbH}}D=(E?(B-1):0);C.height=f-D-2;if(A){C.width=A-2}if(C.width<0){C.width=0}if(C.height<0){C.height=0}if(A||f){if(e&&e.renderId){C.width=w(C.width);C.height=w(C.height);e.getSubNode("EDITOR").top(w(D)).cssSize(C,true);e.getSubNode("DIRTYMARK").left(0+e.$picku()).top(w(D+1))}}},100)}}}});Class("xui.UI.ComboInput","xui.UI.Input",{Instance:{_adjustV:function(c){var d=this.get(0),e=d.properties;if(d.$isNumber){c=(""+c).replace(/[^\d.-]/g,"");c=xui.isNumb(parseFloat(c))?xui.toFixedNumber(c,e.precision):null}else{if(d.properties.type=="date"||d.properties.type=="datetime"){c=xui.isDate(c)?c:xui.isFinite(c)?new Date(parseInt(c,10)):null}else{if(typeof c=="string"&&c.indexOf("\r")!=-1){c=c.replace(/(\r\n|\r)/g,"\n")}}}return c},getValue:function(){var d=arguments.callee.upper,c=d.apply(this,xui.toArr(arguments));d=null;return this._adjustV(c)},getUIValue:function(){var d=arguments.callee.upper,c=d.apply(this,xui.toArr(arguments));d=null;return this._adjustV(c)},_getCtrlValue:function(){return this.get(0).properties.$UIvalue},_setCtrlValue:function(g){var e=this,f=arguments.callee,d=f._r1||(f._r1=/\</),c=f._r2||(f._r2=/\<\/?[^>]+\>/g);return this.each(function(l){if(!l.$typeOK){l.box._iniType(l)}var m=l.getSubNode("INPUT"),j=l.properties.type;g=l.$_onedit?e._toEditor(g):e.getShowValue(g);if(j!=="none"&&j!=="input"&&j!=="password"&&!l.properties.multiLines&&typeof g=="string"&&d.test(g)){g=g.replace(c,"")}if(l.$Mask&&!g){g=l.$Mask}l.$_inner=1;m.attr("value",g||"");delete l.$_inner;if(j=="color"){var h=xui.UI.ColorPicker.getTextColor(g);m.css({backgroundColor:g,color:h});if(l.properties.showMode=="compact"){l.getRoot().query("button").css("color",h)}}})},_compareValue:function(f,e){var d=this.get(0),c;if(c=d.CF.compareValue||d.$compareValue){return c(d,f,e)}return f===e},getShowValue:function(g){var e=this.get(0),h=e.properties,c,d;if(!xui.isDefined(g)){g=h.$UIvalue}if(d=e.CF.getShowValue||e.$getShowValue){c=d(e,g)}else{if("listbox"==h.type){var f=(h.listKey)?xui.UI.getCachedData(h.listKey):h.items;if(f&&(d=xui.arr.subIndexOf(f,"id",g))!=-1){c=f[d].caption+"";if(c&&c.length>0){c=xui.adjustRes(c)}}else{c=null}}else{c=e.$showValue}}if(!xui.isSet(c)&&(e.$inputReadonly||h.inputReadonly)){c=xui.isSet(h.caption)?h.caption:null}return""+(xui.isSet(c)?c:xui.isSet(g)?g:"")},_toEditor:function(e){var d=this.get(0),f=d.properties,c;if(c=d.CF.toEditor||d.$toEditor){return c(d,e)}return e},_fromEditor:function(e){var d=this.get(0),f=d.properties,c;if(c=d.CF.fromEditor||d.$fromEditor){return c(d,e)}return e},setPopWnd:function(c){if(this.isDestroyed()){return}var d=this.get(0);d.$poplink=c?c["xui.Module"]?c.getRoot(true):c["xui.UI"]?c.get(0):c:null;(d.$beforeDestroy=(d.$beforeDestroy||{}))["$poplink"]=function(){if(d.$poplink){xui.filter(d.box.$drop,function(e){return e!==d.$poplink});d.$poplink.boxing().destroy();d.$poplink=null}}},_cache:function(g,c){if(this.isDestroyed()){return}var f=this.get(0);var d=f.$poplink,e=f.properties.cachePopWnd;if(d){if(!e){if(!d.destroyed){d.boxing().destroy(true)}delete f.$poplink;if(c){f.boxing().activate()}}else{if(!f.__tryToHide){f.__tryToHide=xui.asyRun(function(){if(!f.box){return}delete f.__tryToHide;if(!d.destroyed){if(xui.browser.opr){d.getRoot().css("display","none")}if(d.boxing()._clearMouseOver){d.boxing()._clearMouseOver()}f.getSubNode("POOL").append(d.getRoot())}if(c){f.boxing().activate()}})}}}delete f.$poplink;if(f.afterPopHide){this.afterPopHide(f,d,g)}return e},clearPopCache:function(){var c=this.get(0);if(c.renderId){c.getSubNode("POOL").empty()}delete c.$poplink;return this},setUploadObj:function(d){var e=this.get(0),h=e.properties,g=xui(d).get(0);if(g.tagName&&g.tagName.toLowerCase()=="input"&&g.type=="file"){if(e.renderId&&h.type=="file"){var f=e.getSubNode("FILE").get(0);xui.setNodeData(g.$xid=f.$xid,"element",g);g.id=f.id;g.onclick=f.onclick;g.onchange=f.onchange;f.$xid=null;f.id=f.onclick=f.onchange=null;delete e.$_domid[e.keys.FILE];xui([f]).addPrev(g).remove(false);this.setUIValue(g.value||"",null,null,"setfile")}}return this},getUploadObj:function(){var d=this.get(0),g=d.properties;if(d.renderId&&g.type=="file"){var e=d.getSubNode("FILE").get(0);if(!e.value){return null}var f=e.cloneNode(false);f.value="";xui.setNodeData(f.$xid=e.$xid,"element",f);f.onclick=e.onclick;f.onchange=e.onchange;e.$xid=null;e.id=e.onclick=e.onchange=null;delete d.$_domid[d.keys.FILE];xui([e]).addPrev(f).remove(false);f=null;this.setUIValue(this.getValue(),null,null,"getfile");return e}},popFileSelector:function(){var d=this.get(0),f=d.properties;if(d.renderId&&f.type=="file"){var e=d.getSubNode("FILE").get(0);if(xui.browser.ie11){var c=document.createElement("div");e.appendChild(c);c.click();e.removeChild(c)}else{e.click()}}},resetValue:function(e){this.each(function(f){if(f.properties.type=="file"){f.getSubNode("FILE").attr("value","")}});var c=arguments.callee.upper,d=c.apply(this,xui.toArr(arguments));c=null;return d},_drop:function(d,f,c){return this.each(function(l){var w=l.properties,q=w.type,u=w.cachePopWnd;if(w.disabled||w.readonly){return}if(l.$poplink){return}var g,x,h,n=l.boxing(),m=l.getSubNode("BOX"),e=l.getSubNode("RBTN"),r=m.offset();r.top+=m.offsetHeight();if((l.beforeComboPop&&false===n.beforeComboPop(l,r,d,f))){return}if(q=="combobox"||q=="listbox"||q=="helpinput"||q=="date"||q=="time"||q=="datetime"||q=="color"){if(l.__tryToHide){xui.clearTimeout(l.__tryToHide);delete l.__tryToHide}var p;if(u){switch(q){case"time":case"date":case"datetime":case"color":p=q;break;default:if(w.listKey){if(typeof xui.get(xui.$cache,["UIDATA",w.listKey])=="function"){h=p=null}else{p="!"+w.listKey}}else{p="$"+l.$xid}}if(p){xui.filter(l.box.$drop,function(B){return !!B.renderId});h=l.box.$drop[p]}}if(!h){switch(q){case"combobox":case"listbox":case"helpinput":g=xui.create("List");g.setHost(l).setDirtyMark(false).setItems(xui.copy(w.items)).setListKey(w.listKey||"");if(w.dropListWidth){g.setWidth(w.dropListWidth)}else{g.setWidth(l.$forceu(m.offsetWidth()+e.offsetWidth()))}g.setHeight(w.dropListHeight||"auto");g.afterClick(function(){if(!this.destroyed){this.boxing()._cache("",true)}else{g.destroy(true)}return false});g.beforeUIValueSet(function(E,D,C){var o=this.boxing();if(q=="combobox"){var B=E.queryItems(E.properties.items,function(F){return F.id==C},false,true);if(B.length){C=B[0].caption}}o.setUIValue(C,null,null,"pick");return o._cache("",true)});break;case"time":g=xui.create("TimePicker");g.setHost(l);g.beforeClose(function(){if(!this.destroyed){this.boxing()._cache("",true)}return false});g.beforeUIValueSet(function(D,E,C){var B=this.boxing();B.setUIValue(C,null,null,"pick");return B._cache("",true)});break;case"date":case"datetime":g=xui.create("DatePicker");if(q=="datetime"){g.setTimeInput(true)}g.setHost(l);g.beforeClose(function(){if(!this.destroyed){this.boxing()._cache("",true)}else{g.destroy(true)}return false});g.beforeUIValueSet(function(D,E,C){var B=this.boxing();B.setUIValue(String(C.getTime()),null,null,"pick");return B._cache("",true)});break;case"color":g=xui.create("ColorPicker");g.setHost(l);g.beforeClose(function(){if(!this.destroyed){this.boxing()._cache("",true)}else{g.destroy(true)}return false});g.beforeUIValueSet(function(D,E,C){var B=this.boxing();B.setUIValue((C=="transparent"?"":"#")+C,null,null,"pick");return B._cache("",true)});break}if(xui.isHash(w.popCtrlProp)&&!xui.isEmpty(w.popCtrlProp)){g.setProperties(w.popCtrlProp)}if(xui.isHash(w.popCtrlEvents)&&!xui.isEmpty(w.popCtrlEvents)){g.setEvents(w.popCtrlEvents)}h=g.get(0);if(p){l.box.$drop[p]=h}g.render()}g=h.boxing();g.setHost(l);switch(q){case"combobox":case"listbox":case"helpinput":case"time":g.setValue(l.properties.$UIvalue,true,"pop");break;case"date":case"datetime":var A=h.properties;if(A=l.properties.$UIvalue){g.setValue(new Date(parseInt(A,10)),true,"pop")}break;case"color":g.setValue(l.properties.$UIvalue.replace("#",""),true,"pop");break}l.boxing().setPopWnd(g);if(l.beforePopShow&&false===n.beforePopShow(l,h)){return}var j=g.reBoxing();j.popToTop(c||l.getSubNode("BOX"),null,w.parentID);xui.tryF(g.activate,[],g);j.setBlurTrigger(l.key+":"+l.$xid,function(){n._cache("blur");xui.Event.keyboardHookUp("esc")});xui.Event.keyboardHookUp("esc",0,0,0,function(){l.$escclosedrop=1;xui.asyRun(function(){delete l.$escclosedrop});n.activate();xui.Event.keyboardHookUp("esc");n._cache("esc",true);return true})}else{if(q=="file"){l.boxing().popFileSelector()}}if(l.afterPopShow){n.afterPopShow(l,h)}})},expand:function(d){var c=this.get(0);if(c.renderId){c.boxing()._drop(null,d,d)}},collapse:function(){var c=this.get(0);if(c.renderId&&c.$poplink){c.boxing()._cache("call")}},getPopWnd:function(){var c=this.get(0);if(c&&c.$poplink){return c.$poplink.boxing()}}},Initialize:function(){var f=this;f.addTemplateKeys(["ICONB","ICON","UNIT","FILE","LMID","RMID","LBTN","RBTN","SPINBTN","R1","R1B","R2","R2B"]);var e=f.getTemplate();xui.merge(e.FRAME.BORDER,{LBTN:{},RBTN:{},SPINBTN:{R1:{},R2:{}},CMD:{$order:50,tagName:"button",className:"xui-ui-unselectable xui-uiborder-radius-tr xui-uiborder-radius-br xui-uiborder-noradius-l xui-nofocus xui-ui-btn xui-uibar xui-uigradient",style:"{_cmdDisplay}",SMID:{className:"xuifont",$fonticon:"{_fi_commandCls}"}}},"all");var g=e.FRAME.BORDER.BOX;g.className="xui-ui-input xui-ui-shadow-input xui-uiborder-flat xui-uibase {_radius_input} ";g.ICONB={tagName:"button",className:"xui-ui-unselectable xui-nofocus xui-ui-clear",tabindex:"-1",ICON:{className:"xuifont {imageClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{imageDisplay}",text:"{iconFontCode}"}};g.UNIT={tagName:"button",tabindex:"-1",className:"xui-ui-unselectable xui-nofocus",text:"{unit}"};e.FRAME.POOL={};e.className+=" {typecls}";f.setTemplate(e);f._adjustItems=xui.absList._adjustItems;var d=f.prototype,c=xui.absList.prototype;d.getItems=c.getItems;d.getItemByItemId=c.getItemByItemId},Static:{_beforeResetValue:function(c){c.properties.caption=undefined},_iniType:function(g){var h=g.properties,f=h.type,j=g.box;delete g.$beforeKeypress;delete g.$inputReadonly;delete g.$isNumber;delete g.$compareValue;delete g.$getShowValue;delete g.$toEditor;delete g.$fromEditor;delete g.$typeOK;if(f=="listbox"||f=="file"||f=="cmdbox"||f=="button"||f=="dropbutton"){g.$inputReadonly=true}if(f=="file"){g.$xuiFileCtrl=true}if(f!="listbox"&&f!="combobox"&&f!="helpinput"){h.items=[]}if(f=="time"){var e={a:1,c:1,v:1,x:1};xui.merge(g,{$beforeKeypress:function(m,n,l){return l.key.length!=1||/[-0-9:]/.test(l.key)||(l.ctrlKey&&!!e[l.key])},$getShowValue:function(l,c){return c?xui.UI.TimePicker._ensureValue(l,c):""},$fromEditor:function(l,c){if(c){c=xui.UI.TimePicker._ensureValue(l,c);if(c=="00:00"){c=l.properties.$UIvalue}}return c}},"all")}else{if(f=="date"||f=="datetime"){var d=xui.Date;var e={a:1,c:1,v:1,x:1};xui.merge(g,{$beforeKeypress:function(m,n,l){return l.key.length!=1||/[0-9:/\-_ ]/.test(l.key)||(l.ctrlKey&&!!e[l.key])},$compareValue:function(m,l,c){return(!l&&!c)||(String(l)==String(c))},$getShowValue:function(l,c){if(l.properties.dateEditorTpl){return c?d.format(c,l.properties.dateEditorTpl):""}else{return c?d.getText(new Date(parseInt(c,10)),l.properties.type=="datetime"?"ymdhn":"ymd"):""}},$toEditor:function(q,l){if(!l){return""}l=new Date(parseInt(l,10)||0);if(q.properties.dateEditorTpl){return d.format(l,q.properties.dateEditorTpl)}else{var c=(d.get(l,"m")+1)+"",r=d.get(l,"d")+"",o=d.get(l,"h")+"",u=d.get(l,"n")+"";return d.get(l,"y")+"-"+(c.length==1?"0":"")+c+"-"+(r.length==1?"0":"")+r+(q.properties.type=="datetime"?(" "+(o.length==1?"0":"")+o+":"+(u.length==1?"0":"")+u):"")}},$fromEditor:function(l,c){if(c){if(l.properties.dateEditorTpl){c=d.parse(c,l.properties.dateEditorTpl)}else{c=xui.Date.parse(c)}if(!c){c=l.properties.$UIvalue;if(xui.isFinite(c)){c=new Date(parseInt(c,10))}}if(c){if(l.properties.type!="datetime"){c=d.getTimSpanStart(c,"d",1)}if(c.getFullYear()<l.properties.min){c.setTime(l.properties.min)}if(c.getFullYear()>l.properties.max){c.setTime(l.properties.max)}}}return c?String(c.getTime()):""}},"all")}else{if(f=="currency"){g.$isNumber=1;var e={a:1,c:1,v:1,x:1};xui.merge(g,{$beforeKeypress:function(m,n,l){return l.key.length!=1||/[-0-9,. ]/.test(l.key)||(l.ctrlKey&&!!e[l.key])},$compareValue:function(m,l,c){return((l===""&&c!=="")||(c===""&&l!==""))?false:m.box._number(m,l)==m.box._number(m,c)},$getShowValue:function(m,l){var c=m.properties;if(xui.isSet(l)&&l!==""){l=xui.formatNumeric(m.box._number(m,l),c.precision,c.groupingSeparator,c.decimalSeparator,c.forceFillZero,c.trimTailZero);if(m.properties.currencyTpl){l=m.properties.currencyTpl.replace("*",l)}}else{l=""}return l},$toEditor:function(m,l){var c=m.properties;return(xui.isSet(l)&&l!=="")?xui.formatNumeric(m.box._number(m,l),c.precision,c.groupingSeparator,c.decimalSeparator,c.forceFillZero,c.trimTailZero):""},$fromEditor:function(l,c){return(xui.isSet(c)&&c!=="")?l.box._number(l,c):""}},"all")}else{if(f=="number"||f=="spin"||f=="counter"){g.$isNumber=1;var e={a:1,c:1,v:1,x:1};xui.merge(g,{$beforeKeypress:function(m,n,l){return l.key.length!=1||/[-0-9. ]/.test(l.key)||(l.ctrlKey&&!!e[l.key])},$compareValue:function(m,l,c){return((l===""&&c!=="")||(c===""&&l!==""))?false:m.box._number(m,l)==m.box._number(m,c)},$getShowValue:function(m,l){var c=m.properties;l=(xui.isSet(l)&&l!=="")?xui.formatNumeric(m.box._number(m,l),c.precision,c.groupingSeparator,c.decimalSeparator,c.forceFillZero,c.trimTailZero):"";if(l!=""&&m.properties.numberTpl){l=m.properties.numberTpl.replace("*",l)}return l},$toEditor:function(m,l){var c=m.properties;return(xui.isSet(l)&&l!=="")?xui.formatNumeric(m.box._number(m,l),c.precision,c.groupingSeparator,c.decimalSeparator,c.forceFillZero,c.trimTailZero):""},$fromEditor:function(l,c){return(xui.isSet(c)&&c!=="")?l.box._number(l,c):""}},"all")}}}}if(h.value){h.$UIvalue=h.value=j._ensureValue(g,h.value)}g.$typeOK=true},$drop:{},Appearances:{POOL:{position:"absolute",left:0,top:0,width:0,height:0,display:"none",visibility:"hidden"},FILE:{visibility:"hidden","z-index":30,border:0,width:"100%",height:"100%",position:"absolute",padding:0,top:0,right:0,cursor:"pointer",overflow:"hidden"},"KEY-type-number INPUT, KEY-type-spin INPUT, KEY-type-counter INPUT, KEY-type-currency INPUT":{$order:4,"text-align":"right"},"KEY-type-counter INPUT":{$order:4,"text-align":"center"},"KEY-type-file INPUT, KEY-type-button INPUT, KEY-type-dropbutton INPUT, KEY-type-cmdbox INPUT, KEY-type-listbox INPUT":{$order:4,cursor:"pointer","text-align":"left",overflow:"hidden"},"KEY-type-button INPUT, KEY-type-dropbutton INPUT":{$order:5,"text-align":"center"},"LBTN,RBTN,SPINBTN,CMD":{display:"block","z-index":20,cursor:"pointer",padding:0,position:"absolute",width:"1.5em",overflow:"visible"},"ICONB, UNIT":{"z-index":20,cursor:"pointer",position:"absolute",padding:0,margin:0,border:0,background:"none",height:"100%",padding:"0 2px",display:xui.$inlineBlock,zoom:xui.browser.ie67?1:null,width:(xui.browser.ie&&xui.browser.ver<=7)?"auto":null,overflow:(xui.browser.ie&&xui.browser.ver<=7)?"visible":null},ICONB:{left:0,top:0},ICON:{width:"1em"},UNIT:{top:0,right:0},CMD:{$order:2,"z-index":22,padding:0},"R1,R2":{$order:1,display:"block",cursor:"pointer",padding:0,position:"absolute",height:"50%",width:"1.5em",overflow:"visible"},R1:{top:0},R2:{bottom:0},"R1B,R2B":{cursor:"pointer",position:"absolute",left:0,top:"50%",height:"6px","margin-top":"-2px",padding:0,"z-index":2},"SMID,LMID,RMID":{$order:2,cursor:"pointer",padding:0,left:0}},_objectProp:{popCtrlProp:1,popCtrlEvents:1},Behaviors:{HoverEffected:{BOX:"BOX",ICON:"ICON",ICONB:"ICONB"},ClickEffected:{BOX:"BOX"},ICONB:{onClick:function(c,d,f){var g=c.properties;if(g.disabled||g.readonly){return}if(c.onClickIcon){c.boxing().onClickIcon(c,f)}}},UNIT:{onClick:function(c,f,h){var j=c.properties;if(j.disabled||j.readonly){return}if(!j.units){return}var g=xui.create("List",{dirtyMark:false,items:j.units.split(/[,;\:]/),width:"auto",height:"auto",value:j.unit});g.afterClick(function(){g.destroy(true);return false});g.beforeUIValueSet(function(l,m,e){c.boxing().setUnit(xui.str.trim(e))});g.render();var d=g.reBoxing();d.popToTop(h,null,j.parentID);xui.tryF(g.activate,[],g);d.setBlurTrigger(c.key+":unit:"+c.$xid,function(){xui.Event.keyboardHook("esc");g.destroy()});xui.Event.keyboardHookUp("esc",0,0,0,function(){xui.Event.keyboardHook("esc");g.destroy()})}},FILE:{onClick:function(c,d,f){var g=c.properties;if(g.disabled||g.readonly){return}if(c.onFileDlgOpen){c.boxing().onFileDlgOpen(c,f)}},onChange:function(c,d,f){c.boxing().setUIValue(xui.use(f).get(0).value+"",null,null,"onchange")}},LBTN:{onMousedown:function(c){var d=c.properties;if(d.disabled||d.readonly){return}c.box._spin(c,false)},onMouseout:function(c){xui.Thread.abort(c.$xid+":spin")},onMouseup:function(c){xui.Thread.abort(c.$xid+":spin")}},RBTN:{onMousedown:function(d){var e=d.properties,c=e.type;if(c!="counter"){return}if(e.disabled||e.readonly){return}d.box._spin(d,true)},onMouseout:function(c){if(c.properties.type!="counter"){return}xui.Thread.abort(c.$xid+":spin")},onMouseup:function(c){if(c.properties.type!="counter"){return}xui.Thread.abort(c.$xid+":spin")},onClick:function(d,f,g){var h=d.properties,c=h.type;if(c=="counter"){return}if(c=="popbox"||c=="cmdbox"||c=="getter"||c=="dropbutton"){if(d.onClick&&false===d.boxing().onClick(d,f,g,"right",h.$UIvalue)){return}}if(c=="file"){d.boxing().popFileSelector();return}if(h.disabled||h.readonly){return}d.boxing()._drop(f,g);return false}},CMD:{onClick:function(c,d,f){var g=c.properties;if(g.disabled||g.readonly){return}if(c.onCommand&&false===c.boxing().onCommand(c,f,g.commandBtn)){return}if(g.commandBtn=="delete"||g.commandBtn=="remove"){c.boxing().setUIValue("",true)}}},BOX:{onClick:function(c,d,f){var g=c.properties;if(g.type=="cmdbox"||g.type=="button"||g.type=="dropbutton"){if(c.onClick){c.boxing().onClick(c,d,f,"left",g.$UIvalue)}}else{if(g.inputReadonly||c.$inputReadonly){if(g.disabled||g.readonly){return}c.boxing()._drop(d,f)}}}},INPUT:{onClick:function(d,c){if(d.$cell){c=xui.Event.getPos(c);if(c.left===0&&c.top===0){return false}}},onChange:function(g,h,c){if(g.$_onedit||g.$_inner||g.destroyed||!g.box){return}var f=g._inValid,d=g.properties,j=g.box,n=g.boxing(),m=n._fromEditor(xui.use(c).get(0).value),l=d.$UIvalue;if(!n._compareValue(l,m)){if(m===null){n._setCtrlValue(l)}else{n.setUIValue(m,null,null,"onchange");if(d.$UIvalue!==m){n._setCtrlValue(d.$UIvalue)}if(f!==g._inValid){if(g.renderId){n._setDirtyMark()}}}}j._asyCheck(g)},onKeyup:function(f,j,l){var h=f.properties,c=f.box,d=xui.Event.getKey(j);if(h.disabled||h.readonly){return false}if(f.$inputReadonly||h.inputReadonly){return}if(d.key=="esc"){if(f.$escclosedrop){return}f.boxing()._setCtrlValue(h.$UIvalue);if(f.onCancel){f.boxing().onCancel(f)}}if(h.dynCheck){var g=xui.use(l).get(0).value;f.box._checkValid(f,g);f.boxing()._setDirtyMark()}c._asyCheck(f);if(d.key=="down"||d.key=="up"){if(h.type=="spin"||h.type=="counter"){xui.Thread.abort(f.$xid+":spin");return false}}},onMousedown:function(c,d,f){c._mousedownmark=1;xui.asyRun(function(){if(c){delete c._mousedownmark}})},onMouseup:function(c,f,g){if(c.properties.selectOnFocus&&c._stopmouseupcaret){var d=xui.use(g).get(0);if(!d.readOnly&&d.select){c.$mouseupDelayFun=xui.asyRun(function(){delete c.$mouseupDelayFun;if(d.tagName.toLowerCase()=="input"||!/[\n\r]/.test(d.value)){d.select()}})}delete c._stopmouseupcaret}},onFocus:function(g,h,c){var d=g.properties,j=g.box;if(d.disabled||d.readonly){return false}if(g.onFocus){g.boxing().onFocus(g)}if(g.$inputReadonly||d.inputReadonly){return}g.getSubNode("BORDER").tagClass("-focus");var o=g.boxing(),l=d.$UIvalue,n=o._toEditor(l),f=xui.use(c).get(0),q=f.value;if(l!==n&&q!==n){g.$_onedit=true;f.value=n;delete g.$_onedit}if(d.mask){var m=f.value;if(!m){g.$focusDelayFun=xui.asyRun(function(){if(!g.box){return}delete g.$focusDelayFun;g.$_onedit=true;g.boxing()._setCtrlValue(m=g.$Mask);delete g.$_onedit;j._setCaret(g,f)})}}if(d.selectOnFocus&&!f.readOnly&&f.select){if(xui.browser.kde){g.$focusDelayFun2=xui.asyRun(function(){delete g.$focusDelayFun2;if(f.tagName.toLowerCase()=="input"||!/[\n\r]/.test(f.value)){f.select()}})}else{if(f.tagName.toLowerCase()=="input"||!/[\n\r]/.test(f.value)){f.select()}}if(g._mousedownmark){g._stopmouseupcaret=1}}g.boxing()._setTB(3);j._asyCheck(g)},onBlur:function(g,l,m){xui.resetRun(g.$xid+":asycheck");if(g.$focusDelayFun){xui.clearTimeout(g.$focusDelayFun)}if(g.$focusDelayFun2){xui.clearTimeout(g.$focusDelayFun2)}if(g.$focusDelayFun2){xui.clearTimeout(g.$mouseupDelayFun)}var j=g.properties;if(j.disabled||j.readonly){return false}if(g.onBlur){g.boxing().onBlur(g)}if(g.$inputReadonly||j.inputReadonly){return}var d=g.box,c=g.boxing(),h=j.$UIvalue,f=xui.use(m).get(0).value;if(g.$Mask&&g.$Mask==f){f="";h=g.$Mask}f=c._fromEditor(f);g.getSubNode("BORDER").tagClass("-focus",false);if(c._compareValue(j.$UIvalue,f)){g.box._checkValid(g,f);c._setCtrlValue(h)}c._setDirtyMark();d._asyCheck(g,false)},onKeydown:function(h,l,n){var j=h.properties;if(j.disabled||j.readonly){return}var d=h.box,c=j.multiLines,f=xui.Event,g=f.getKey(l);if(g.key=="enter"&&(!c||g.altKey)&&!j.inputReadonly&&!h.$inputReadonly){h.$_onedit=true;h.boxing().setUIValue(h.boxing()._fromEditor(xui.use(n).get(0).value),true,null,"enter");h.$_onedit=false}d._asyCheck(h);if(j.mask){if(g.key.length>1){h.$ignore=true}else{delete h.$ignore}switch(g.key){case"backspace":d._changeMask(h,xui.use(n).get(0),"",false);return false;case"delete":d._changeMask(h,xui.use(n).get(0),"");return false}}if(g.key=="down"||g.key=="up"){if(j.type=="spin"||j.type=="counter"){if(!g.ctrlKey){h.box._spin(h,g.key=="up");return false}}else{if(g.ctrlKey&&j.type!="none"&&j.type!="input"&&j.type!="password"){h.boxing()._drop(l,n);return false}}}},onDblclick:function(c,d,f){c.getSubNode("RBTN").onClick(true)}},R1:{onMousedown:function(c){var d=c.properties;if(d.disabled||d.readonly){return}c.box._spin(c,true)},onMouseout:function(c){xui.Thread.abort(c.$xid+":spin")},onMouseup:function(c){xui.Thread.abort(c.$xid+":spin")}},R2:{onMousedown:function(c){var d=c.properties;if(d.disabled||d.readonly){return}c.box._spin(c,false)},onMouseout:function(c){xui.Thread.abort(c.$xid+":spin")},onMouseup:function(c){xui.Thread.abort(c.$xid+":spin")}}},EventHandlers:{onFileDlgOpen:function(c,d){},onCommand:function(d,e,c){},beforeComboPop:function(c,g,d,f){},beforePopShow:function(c,d){},afterPopShow:function(c,d){},afterPopHide:function(d,e,c){},onClick:function(d,g,h,c,f){},onClickIcon:function(c,d){},beforeUnitUpdated:function(c,d){}},DataModel:{cachePopWnd:true,dateEditorTpl:"",groupingSeparator:",",decimalSeparator:".",forceFillZero:true,trimTailZero:false,parentID:"",popCtrlProp:{ini:{}},popCtrlEvents:{ini:{}},image:{format:"image",action:function(){xui.UI.$iconAction(this);this.boxing().reLayout(true)}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c||"center")}},imageBgSize:{action:function(c){this.getSubNode("ICON").css("backgroundSize",c||"")}},imageClass:{ini:"",action:function(c,d){xui.UI.$iconAction(this,"ICON",d);this.boxing().reLayout(true)}},iconFontCode:{action:function(c){xui.UI.$iconAction(this);this.boxing().reLayout(true)}},dropImageClass:{action:function(c,d){if(d){this.getSubNode("RMID").removeClass(d)}if(c){this.getSubNode("RMID").addClass(c)}}},unit:{ini:"",set:function(c){var d=this;if(d.beforeUnitUpdated&&false===d.boxing().beforeUnitUpdated(d,c)){return}d.properties.unit=c;if(d.renderId){d.getSubNode("UNIT").html(c);d.boxing().reLayout(true)}}},units:"",numberTpl:{ini:"",action:function(){this.boxing().setUIValue(this.properties.$UIvalue,true,null,"tpl")}},currencyTpl:{ini:"$ *",action:function(){this.boxing().setUIValue(this.properties.$UIvalue,true,null,"tpl")}},listKey:{set:function(d){var c=xui.UI.getCachedData(d),e=this;e.boxing().setItems(c?xui.clone(c):e.properties.items);e.properties.listKey=d}},dropListWidth:0,dropListHeight:0,items:{ini:[],set:function(c){var d=this;c=d.properties.items=d.box._adjustItems(c);if(d.renderId){d.SubSerialIdMapItem={};d.ItemIdMapSubSerialId={};d.box._prepareItems(d,c);if(d.$poplink){d.$poplink.boxing().setItems(c)}else{d.boxing().clearPopCache()}}}},type:{ini:"combobox",listbox:xui.toArr("none,input,password,combobox,listbox,file,getter,helpinput,button,dropbutton,cmdbox,popbox,date,time,datetime,color,spin,counter,currency,number"),set:function(c){var d=this;d.properties.type=c;if(d.renderId){d.boxing().refresh(true)}}},showMode:{ini:"normal",listbox:["","normal","compact","transparent"],action:function(){this.boxing().refresh()}},precision:2,increment:0.01,min:-Math.pow(10,15),max:Math.pow(10,15),commandBtn:{ini:"none",combobox:xui.toArr("none,save,delete,add,remove,pop,select,search"),action:function(){this.boxing().refresh()}},disabled:{ini:false,action:function(d){var e=this.getSubNode("INPUT"),c="xui-ui-disabled",f=(""+e.get(0).type);if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}if(f!="button"&&f!="dropbutton"){if(!d&&(this.properties.readonly||this.$inputReadonly)){d=true}e.attr("readonly",d)}}},inputReadonly:{ini:false,action:function(d){var e=this.getSubNode("INPUT"),c="xui-ui-readonly";if(!d&&(this.properties.disabled||this.properties.readonly||this.$inputReadonly)){d=true}if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}e.attr("readonly",d).css("cursor",d?"pointer":"")}},readonly:{ini:false,action:function(d){var e=this.getSubNode("INPUT"),c="xui-ui-readonly";if(!d&&(this.properties.disabled||this.properties.inputReadonly||this.$inputReadonly)){d=true}this.getRoot()[d?"addClass":"removeClass"](c);e.attr("readonly",d).css("cursor",d?"pointer":"")}},caption:{ini:null,set:function(c){var d=this.properties;d.caption=c;if(xui.isSet(c)){c=c+"";d.caption=xui.adjustRes(c,false)}if(this.renderId){if(this.$inputReadonly||d.inputReadonly){this.getSubNode("INPUT").attr("value",this.boxing().getShowValue())}}},get:function(){return this.boxing().getShowValue()}}},RenderTrigger:function(){var d=this,c=d.boxing(),e=d.properties;d.box._iniType(d);if(e.readonly){c.setReadonly(true,true)}else{if(e.inputReadonly){c.setInputReadonly(true,true)}}},_spin:function(g,e){if(g.$inDesign){return}var l=g.$xid+":spin";if(xui.Thread.isAlive(l)){return}var j=g.properties,c=Math.max(j.increment,Math.pow(10,-j.precision)),h=c*(e?1:-1),f={delay:300},d=function(){if(g.destroyed){return false}var m=((+j.$UIvalue)||0)+h;m=(xui.isSet(m)&&m!=="")?xui.formatNumeric(g.box._number(g,m),j.precision,j.groupingSeparator,j.decimalSeparator,j.forceFillZero,j.trimTailZero):"";g.boxing().setUIValue(m,null,null,"spin");f.delay*=0.9};f.task=d;xui.Thread(l,[f],500,null,d,null,true).start()},_dynamicTemplate:function(c){var g=c.properties,h=g.type,m=g.multiLines,d=g.showMode,e=c._exhash="$multiLines:"+m+";type:"+h+";mode:"+d+";",l=c.box.getTemplate(e),j=function(o){return(!d||d=="normal")?o:"xui-ui-clear "+o.replace(/\b(xui-ui-btn|xui-uibar|xui-uigradient|xui-uibase)\b/g,"")};g.$UIvalue=g.value;if(!l){l=xui.clone(c.box.getTemplate());var n=l.FRAME.BORDER,f=n.BOX.WRAP.INPUT;delete n.LBTN;delete n.RBTN;delete n.SPINBTN;f.tagName="input";f.type="text";switch(h){case"none":case"input":case"number":case"currency":break;case"button":f.type="button";break;case"password":f.type="password";break;case"spin":n.SPINBTN={$order:20,className:"xui-ui-unselectable",style:"{rDisplay}",R1:{tagName:"button",className:j("xui-ui-btn xui-uibar xui-uigradient xui-nofocus {_radius_dropt}"),R1B:{className:"xuifont",$fonticon:"xui-icon-smallup"}},R2:{tagName:"button",className:j("xui-ui-btn xui-uibar xui-uigradient xui-nofocus {_radius_dropb}"),R2B:{className:"xuifont",$fonticon:"xui-icon-smalldown"}}};break;case"counter":n.LBTN={$order:1,tagName:"button",className:j("xui-ui-unselectable xui-ui-btn xui-uibar xui-uigradient xui-nofocus {_radius_dropl}"),style:"{_btnlDisplay}",LMID:{className:"xuifont",$fonticon:"{_fi_btnlClass}",style:"{_btnlStyle}"}};break;case"file":n.FILE={$order:20,className:"xui-ui-unselectable  {_radius_dropr}",tagName:"input",type:"file",hidefocus:xui.browser.ie?"hidefocus":null,size:"1"};case"listbox":case"cmdbox":case"dropbutton":n.className+=" xui-ui-noshadow";f.type="button"}if(h!="none"&&h!="input"&&h!="password"&&h!="button"&&h!="spin"&&h!="currency"&&h!="number"){n.RBTN={$order:20,tagName:"button",className:j("xui-ui-unselectable xui-ui-btn xui-uibar xui-uigradient xui-nofocus {_radius_dropr}"),style:"{_btnrDisplay}",RMID:{className:"xuifont",$fonticon:"{_fi_btnrClass}"}}}if(h=="button"||h=="dropbutton"){n.BOX.className+=" xui-uigradient"}if(m){switch(h){case"none":case"input":case"getter":case"helpinput":case"popbox":case"number":case"combobox":f.tagName="textarea";f.className="";delete f.type}}if(d&&d!="normal"){if(d=="transparent"){n.BOX.className="{_radius_input} "}n.CMD.className=j(n.CMD.className)}c.box.setTemplate(l,e)}c.template=l},_prepareData:function(e){var g={},m="display:none",d=e.properties,n=d.type,f=d.showMode,h=e.box.$DataModel.commandBtn.combobox;g=arguments.callee.upper.call(this,e,g);var j=n,p,o,l=j=="counter";j=(j=="combobox"||j=="listbox"||j=="dropbutton")?"arrowdrop":j;g._fi_btnlClass="xui-icon-singleleft";g._fi_btnrClass=j=="counter"?"xui-icon-singleright":(g.dropImageClass||("xui-uicmd-"+j));g._type="text";g._cmdDisplay=(p=(!g.commandBtn)||g.commandBtn=="none")?m:"";g._fi_commandCls=(xui.arr.indexOf(h,g.commandBtn)!=-1?"xui-uicmd-":"")+g.commandBtn;g._btnrDisplay=(o=n=="none"||n=="input"||n=="password"||n=="currency"||n=="number"||n=="button")?m:"";g.typecls=e.getClass("KEY","-type-"+g.type);if(!f||f=="normal"){g._radius_dropl="xui-uiborder-radius-tl xui-uiborder-radius-bl xui-uiborder-noradius-r";g._radius_input=(p&&o)?"xui-uiborder-radius":l?"xui-uiborder-noradius":"xui-uiborder-radius-tl xui-uiborder-radius-bl xui-uiborder-noradius-r";g._radius_dropr=p?"xui-uiborder-radius-tr xui-uiborder-radius-br xui-uiborder-noradius-l":"xui-uiborder-noradius";g._radius_dropt=p?"xui-uiborder-radius-tr xui-uiborder-noradius-l xui-uiborder-noradius-b":"xui-uiborder-noradius";g._radius_dropb=p?"xui-uiborder-radius-br xui-uiborder-noradius-l xui-uiborder-noradius-t":"xui-uiborder-noradius"}else{if(f=="compact"){g._radius_input="xui-uiborder-radius"}}return g},_ensureValue:function(e,g){var f=arguments.callee,l=e.properties;if(!xui.isSet(g)||g===""){return""}if(e.$Mask&&e.$Mask==g){g=""}switch(e.properties.type){case"date":case"datetime":var h;if(g){if(xui.isDate(g)){h=g}else{if(xui.isFinite(g)){h=new Date(parseInt(g,10))}else{h=xui.Date.parse(g+"")}}}return h?String(e.properties.type=="datetime"?h.getTime():xui.Date.getTimSpanStart(h,"d",1).getTime()):"";case"color":var j=xui.UI.ColorPicker._ensureValue(null,g);return(j=="transparent"?"":"#")+j;case"time":return xui.UI.TimePicker._ensureValue(null,g);case"currency":case"number":case"spin":case"counter":return this._number(e,g);default:return typeof g=="string"?g:(g||g===0)?String(g):""}},_number:function(c,d){var e=c.properties;d=xui.toNumeric(d,e.precision,e.groupingSeparator,e.decimalSeparator,e.forceFillZero,e.trimTailZero);if(xui.isSet(e.max)){d=d>e.max?e.max:d}if(xui.isSet(e.min)){d=d<e.min?e.min:d}return d},_onresize:function(j,c,d){var A=j.properties,ag=A.type,N=A.showMode=="compact",Y=function(f){if(!f){return null}f=j.getSubNode(f);return f},G=Y("KEY"),af=Y("INPUT"),F=Y("ICONB"),I=Y("UNIT"),m=Y("BOX"),R=Y("LABEL"),ab=Y(A.commandBtn!="none"?"CMD":null),ae=Y(ag=="counter"?"LBTN":null),D=Y(ag=="spin"?"SPINBTN":(ag=="none"||ag=="input"||ag=="password"||ag=="currency"||ag=="number"||ag=="button")?null:"RBTN"),J=xui.$us(A),M=function(f,ah){return j.$forceu(f,J>0?"em":"px",ah)},V=j.getEmSize()/G._getEmSize(),n=af._getEmSize(V),U=R._getEmSize(V),K=af.get(0).type.toLowerCase()=="button",w,B,O="xui-node xui-input-input",C,x,p,g,L,e,u=0,o=0;w=B=m._borderW()/2;L=j.getEmSize()*1.5;if(d){d=(e=d=="auto")?j.$em2px(1,null,true)+af._paddingH()+2*B:j.$isEm(d)?j.$em2px(d,null,true):d}if(c){c=j.$isEm(c)?j.$em2px(c,null,true):c}if(e){G.height(M(d))}var r=A.labelPos||"left",E=(r=="none"||!r)?0:j.$px(A.labelSize,U,true)||0,X=(r=="none"||!r)?0:j.$px(A.labelGap,null,true)||0,W=c,ac=d,aa=0,q=0,H=0,h=Math.max(0,(A.$b_lw||0)-w),l=Math.max(0,(A.$b_tw||0)-B);if(null!==W){W-=Math.max(w*2,(A.$b_lw||0)+(A.$b_rw||0));q=ae?L:0;H=D?L:0;aa=ab?L:0;if(xui.browser.ie6){W=(Math.round(W/2))*2}}if(null!==ac){ac-=Math.max(B*2,(A.$b_lw||0)+(A.$b_rw||0));if(xui.browser.ie6){ac=(Math.round(ac/2))*2}if(xui.browser.ie6&&null===c){m.ieRemedy()}}var Z=W===null?null:h+(r=="left"?E:0),S=ac===null?null:l+(r=="top"?E:0),Q=W===null?null:Math.max(0,W-((r=="left"||r=="right")?E:0)),ad=ac===null?null:Math.max(0,ac-((r=="top"||r=="bottom")?E:0)),P=ac===null?null:Math.max(0,d-((r=="top"||r=="bottom")?E:0)),T=r=="right"?E:0;if(E){R.css("display","");R.cssRegion({left:M(W===null?null:r=="right"?(W-E+X+w*2):0,U),top:M(d===null?null:r=="bottom"?(d-E+X):0,U),width:M(W===null?null:Math.max(0,((r=="left"||r=="right")?(E-X):W)),U),height:M(d===null?null:Math.max(0,((r=="top"||r=="bottom")?(E-X):d)-p),U)})}else{R.css("display","none")}if(Q!==null){if(N){u+=q;o+=aa+H}else{Q-=aa+H+q}}if(ae){if(P!==null){ae.height(M(Math.max(0,P)))}if(Q!==null){ae.left(M(Z))}ae.top(M(S));if(!N){Z+=q}if(Q!==null){Z-=w;Q+=w}}if(A.image||A.imageClass){F.setInlineBlock();if(C=F.offsetWidth(true)){u+=C}}if(!C){F.css("display","none")}else{if(N&&q){F.left(M(q,F))}}if(aa){ab.top(M(S));if(P!==null){ab.height(M(Math.max(0,P)))}if(Q!==null){ab.css("right",M(T));T+=aa-w;Q+=w}}if(H){D.top(M(S));if(P!==null){D.height(M(Math.max(0,P)))}if(Q!==null){D.css("right",M(T));Q+=w}if(P!==null&&A.type=="spin"){if(P/2-B*2>0){Y("R1").height(M(P/2));Y("R2").height(M(P/2+(Math.round(P)-Math.round(P/2)*2)))}}}if(A.unit){I.setInlineBlock();if(x=I.offsetWidth(true)){o+=x}}if(!x){I.css("display","none")}else{if(N&&(H||aa)){I.css("right",M(H+aa,I))}}m.cssRegion({left:Q?M(Z):null,top:ad?M(S):null,width:Q?M(Q):null,height:ad?M(ad):null});if(u){af.css("paddingLeft",M(u,F))}if(o){af.css("paddingRight",M(o,I))}p=K?0:Math.round(af._paddingH()/2)*2;g=K?0:Math.round(af._paddingW()/2)*2;if(null!==Q&&Q-g>0){af.width(M(Math.max(0,Q-g),n))}if(null!==ad&&ad-p>0){af.height(M(Math.max(0,ad-p),n))}if((j.$resizer)&&xui.browser.ie){m.ieRemedy()}}}});Class("xui.UI.ColorPicker",["xui.UI","xui.absValue"],{Instance:{activate:function(){this.getSubNode("TOGGLE").focus();return this},_setCtrlValue:function(d,c){return this.each(function(l){if(!l.renderId){return}var q=l.box,h=l.properties;if(d&&d.toLowerCase()=="transparent"){d="transparent"}var j=l.$hex=q._to3(d),g=l.$hex.join(""),o=l.$rgb=q.hex2rgb(d),m=l.$hsv=q.rgb2hsv(o),n=function(p,f){l.getSubNode(p).get(0).firstChild.nodeValue=String(f)},e=function(f){return parseInt(f*100,10)};if(d=="transparent"){j=l.$hex=["00","00","00"];o=l.$rgb=[0,0,0];m=l.$hsv=[0,0,0]}n("R",o[0]);n("G",o[1]);n("B",o[2]);n("H",j[0]);n("E",j[1]);n("X",j[2]);if(l.$hexinhsv!=g){n("HH",m[0]);n("S",e(m[1]));n("V",e(m[2]));delete l.$hexinhsv}q._setClrName(l,d=="transparent"?d:g);q._updateDftTip(l);if(h.advance&&l.$hexinadv!=g){q._updateMarks(l,d,true,m[0]);delete l.$hexinadv}if(c!=false){l.getSubNode("CAPTION").html((d=="transparent"?"":"#")+d,false)}})},getColorName:function(){return this.get(0).$clrN||""}},Initialize:function(){var n=this,d=xui.UI.$ID,q=xui.UI.$CLS,r=xui.UI.$tag_special,o=n.KEY,m=n._slist,f=m.length,h,g,j=[],p=xui.$IEUNSELECTABLE(),c='style="visibility:hidden;"',e="xui-node xui-node-span xui-ui-draggable xui-uibase xui-uiborder-flat";n.addTemplateKeys(["DD1","DD2","DD3","R","G","B","TXT","HH","S","V","H","E","X"]);for(h=0;h<f;h++){j.push('<span  id="'+o+"-SC:"+d+":"+m[h]+'" style="background-color:#'+m[h]+'" '+p+' class="xui-node xui-span xuicon xui-uiborder-flat xui-icon-placeholder">'+(xui.__iefix2&&xui.__iefix2["xui-icon-placeholder"]||"")+"</span>");if((h+1)%17==0){j.push("<br />")}}g="<div "+p+'><span class="'+q+'-txt"'+p+'>R: </span><span id="'+o+"-R:"+d+':" class="'+q+"-dd2 "+e+" "+r+"DD2_CC"+r+'" '+p+">R</span><span "+c+'>%</span><span class="'+q+'-txt"'+p+'>G: </span><span id="'+o+"-G:"+d+':" class="'+q+"-dd2 "+e+"  "+r+"DD2_CC"+r+'" '+p+">G</span><span "+c+'>\xB0</span><span class="'+q+'-txt"'+p+'>B: </span><span id="'+o+"-B:"+d+':" class="'+q+"-dd2 "+e+"  "+r+"DD2_CC"+r+'" '+p+">B</span></div><div "+p+'><span class="'+q+'-txt"'+p+'>S: </span><span id="'+o+"-S:"+d+':" class="'+q+"-dd2 "+e+"  "+r+"DD2_CC"+r+'"  '+p+">S</span><span "+p+'>%</span><span class="'+q+'-txt"'+p+'>H: </span><span id="'+o+"-HH:"+d+':" class="'+q+"-dd2 "+e+"  "+r+"DD2_CC"+r+'" '+p+">H</span><span "+p+'>\xB0</span><span class="'+q+'-txt"'+p+'>V: </span><span id="'+o+"-V:"+d+':" class="'+q+"-dd2 "+e+"  "+r+"DD2_CC"+r+'" '+p+">V</span><span "+p+">%</span></div><div "+p+'><span class="'+q+'-txt"'+p+'>HEX: </span><span id="'+o+"-H:"+d+':" class="'+q+"-dd3 "+e+"  "+r+"DD3_CC"+r+'" '+p+'>H</span><span id="'+o+"-E:"+d+':" class="'+q+"-dd3 "+e+"  "+r+"DD3_CC"+r+'" '+p+""+p+'>E</span><span id="'+o+"-X:"+d+':" class="'+q+"-dd3 "+e+"  "+r+"DD1_CC"+r+'" '+p+">X</span></div>";n.setTemplate({style:"{_style};height:auto;width:auto",tagName:"div",onselectstart:"return false",BORDER:{tagName:"div",className:"xui-uiborder-outset xui-uiborder-box xui-uiborder-radius-big",BAR:{tagName:"div",className:"{classBar}",BARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-tl",BARTDLT:{className:"xui-uibar-tdlt"}},BARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar",BARTDMT:{className:"xui-uibar-tdmt"}},BARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-tr",BARTDRT:{className:"xui-uibar-tdrt"}},BARCMDL:{$order:3,tagName:"div",className:"xui-uibar-cmdl",SPACE:{className:"xuifont",$fonticon:"xui-icon-placeholder"}},BARCMDR:{$order:4,tagName:"div",className:"xui-uibar-cmdr",CLOSE:{className:"xuifont",$fonticon:"xui-uicmd-close",style:"{closeDisplay}"}},TBARTDB:{$order:5,tagName:"div",className:"xui-uibar-tdb xui-uiborder-inset xui-uiborder-radius"}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main xui-uibar",MAINI:{tagName:"div",className:"xui-uicon-maini xui-uibar",CON:{$order:1,tagName:"div",className:"xui-uiborder-inset xui-uiborder-radius",SIMPLE:{tagName:"div",TOP:{$order:1,tagName:"div",DATA:{$order:0,tagName:"div",onselectstart:"return false",text:g},EXAM:{$order:3,tagName:"div",className:"xui-uiborder-inset xui-uiborder-radius"}},LIST:{$order:2,tagName:"div",text:j.join("")}},ADV:{$order:2,style:"{advDispay}",tagName:"div",ADVWHEEL:{$order:0,tagName:"div"},ADVCLR:{$order:1,tagName:"div"},ADVMARK1:{$order:3,tagName:"div"},ADVMARK2:{$order:4,tagName:"div"}}}}},TAIL:{$order:3,tagName:"div",className:"xui-uicon-main xui-uibar",TAILI:{tagName:"div",className:"xui-uibar xui-uicon-maini",TRANS:{className:"xuicon",$fonticon:"xui-icon-transparent",tabindex:"{tabindex}",title:"{_transparent}"},CAPTION:{text:"{caption}"},SET:{tagName:"button",className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tabindex:"{tabindex}",text:"{_set}"},TOGGLE:{$order:2,className:"xuifont",$fonticon:"xui-icon-doubleright",tabindex:"{tabindex}"}}},BBAR:{$order:4,tagName:"div",className:"xui-uibar-bottom-s",BBARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-bl"},BBARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar"},BBARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-br"}}}})},Static:{_radius:84,_square:100,_bigRadius:97,DataModel:{height:{ini:"auto",readonly:true},width:{ini:"auto",readonly:true},value:{ini:"FFFFFF",format:"color"},barDisplay:{ini:true,action:function(c){if(c){this.getSubNode("BAR").replaceClass("xui-uibar-top-s","xui-uibar-top")}else{this.getSubNode("BAR").replaceClass("xui-uibar-top","xui-uibar-top-s")}}},closeBtn:{ini:true,action:function(c){this.getSubNode("CLOSE").css("display",c?"":"none")}},advance:{ini:false,action:function(c){var d=this,e=d.getSubNode("TOGGLE");d.getSubNode("ADV").css("display",c?"":"none");d.getSubNode("CON").css("padding-right",c?"205px":"0px");if(xui.__iefix2){e.html(xui.__iefix2[c?"xui-icon-doubleleft":"xui-icon-doubleright"])}else{if(c){e.removeClass("xui-icon-doubleright").addClass("xui-icon-doubleleft")}else{e.removeClass("xui-icon-doubleleft").addClass("xui-icon-doubleright")}}if(c){d.box._updateMarks(d,d.properties.$UIvalue,true,d.$hsv[0])}}}},Appearances:{KEY:{},"TBART, BBART":{"border-spacing":0,"border-collapse":"separate"},MAINI:{padding:".5em .3333em .3333em 0"},CON:{padding:".25em",position:"relative"},".xui-uibar-top BARCMDL":{padding:".25em 0 0 0"},".xui-uibar-top BARCMDR":{top:".3334em",right:".5em"},CMDL:{padding:".25em 0 .25em 0"},DATA:{},"DATA span":{padding:"0 1px","margin-left":"-1px","margin-right":"1px",width:"1.75em"},"DATA div":{padding:".5em 0"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","font-size":"1em"},EXAM:{padding:".125em",position:"absolute",width:"5.5em",height:"5.5em",top:".25em",right:".25em","white-space":"normal","text-align":"center"},"DD1, DD2, DD3":{"padding-right":"2px",cursor:"e-resize","text-align":"center"},TOP:{position:"relative"},LIST:{position:"relative",overflow:"hidden",padding:".25em","white-space":"nowrap","line-height":"1em"},TAILI:{position:"relative",padding:".5em 0 0 0","text-align":"center"},SIMPLE:{position:"relative"},ADV:{position:"absolute",right:"4px",bottom:"4px",width:"195px",height:"195px"},"ADV div":{cursor:"crosshair",position:"absolute"},ADVCLR:{background:xui.browser.ie6?null:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAYAAABUfC3PAAAABGdBTUEAANbY1E9YMgAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjIyt5EXfQAATvhJREFUeF7t3AeUl+Wd8P3ZfXaTbHo1xsQSY2JMjLFHjS32rih2EVEUFEQFkSoCAgKiSG/Se++9997bAMPMML333v7v55qd8UyIKVvenOe85zXnuwzGxPX34Xdd9/0H8i8TJkyInH/++VH+iIT88cXX4Yu6P1f77zX4a77064Z/rf+emi/562vq/gbhm9p/v+77f/b1l/w19f+5L/vP/9mfa/jf2+Drs/+a8P9/7Z+r++OLv//Z//n6v+Csv75+Vl/2nz/736ufYfj7NZznf/7D/+efrJ97+PdvjVq7dm3tgFStSpWrTKUqVqHylatsZSpdKUpWguJ1WqcUrWM6rAPap93aoa3apA0Kf+OVWq7FWqh5mqUZmqKJGqcxGqmhGqRP1V991Us91E2d1UHv6h29qTfUQs3VTE30nJ5WYzXSI3pQ9+lu3aHbdLNu0vW6VlfpCl2uy3SpLtHFulDn6zydq3P0Q31f39W39E19XV/TV/Xv+jf9q/4liPTt2/fT/6+hdPEP1xClje+3qqmpaaHmaqYX9byeVmM10iN6UPfpbt2h23SzbtIfdK2u0hW6XJdVV1dfqkt0sS7U+TpPP6mqqjpHP9T39d3KyspvV1RUfLO8vPzrZWVlXystLf1qcXHxV/Ly8v4tMSHxX7dv2/4v/x717/+JsmbNmoj/khqFPypVrjKVqliFyleuspWpdKUoWQmK12mdUrSO6bAOaJ92a4e2apM2aK1WabmWaKHmabZ/iBmaqkkarzEaqWEarIH6WH3VWz30gbqoo9obQlu1USu11Kt6WS8azvN6Rk/qcT1qWA/pft1jaHfqdt2qPxrgDbpO15SUlFxpmL/Tb4uKin6tXxUWFv6ioKDg5/n5+Rca8s9yc3PPy87O/nFmZuaPMtIzfpiWmvb9pMSk78THxX/r1MlT3zhy+MjX9+3d9x9bNm/56vx58/+9z4d9/k/jRo3/Fcq/fvTRR/+J4h+iRtWqVLnKVKpiFSpfucpWptKVomQlKF6ndUrROqYjOqh9BrFHO7VNm7VR67RKK7REizRfszVTUzVJ4/W5RmmYBhviQH2sfuqtnuquruqk9wy3rd5Sa7U03Ff1sprqBQN+Vk/pCT1m2A/rAd1r4HfpT7rV0G829Bt0vcFfY/BX6grDv9zwL8vJyfkVgEsAXJyRkXFhelr6+ampqT9NSko6NyEh4RwQPzodc/oHx48d/+6hg4e+vXvX7m9u2rjpG6tXrv6P+XPnf23E0BFfaf1663+77ebb/g+U/wNlYNTq1asj/kFrVK3wR7nKVKpiFSpfucpWpn/odKUoWQmKV6xidELHdUQHtV97tFPbDGizNmqdVmmFlmqR5muOoc3UNE3WBI3VaMMbriH6TAPU3xD76EN11/vqZJgd1E5vG+qbel2v6RXDfUlN9JwhP63GhtxIjxr0gwZ9v+4x7DsM+/asrKxbsjIzbzL0P6Snp19r6Fcb+u9TUlIuT05K/o2j59Iz8Wd+afi/MPyfnzxx8oIT0SfOP3rk6HkHDxw810acs3PHzh9t3LDx+ytXrPzuwvkLvz1tyrRvjh0z9hsDBwz8+rvvvPu1h+9/+Cu/+dVv/h3Kv/Xp02dg1KpVqyIGUaNqVSr8UaZSFatQ+co1mGxlKkOpSlGizihWMTqh4zqigwa3X3u0U9u0RRu1TqsNcaWWarEWaI5mGeg0TdEEjdVoQx2hoRqkT/Sx4X6kXuqhbobcWR0N+V29ozaG3UotDftVNTPwpnre0J8x9Cf1uKE/5kf6Q+npGfenpaXd68i5y/D/ZPi3Gv4fHT83+pF/PYBr4mLjroo9HXtFzKmYywFcZgsudSRdAuFiCBft2rnrgq1btv7URpy3bu26c2Gcs2Degh/OmDbj++M+H/fdQQMHfbtvn77f6tyh8zdfavLS12+58ZavXfSzi74K5Su9e/f+LGrlypURw6lRtSpVrjKFP4pVqHyDylWOspShVKUoUWcUqxid0HFDPKJDOqC92qXt2qJNBrpeq7VSS7XYUBdormZpuqYY8ESN0xiNMOShGqxP9bFh91Vvw+6pbupi4B3V3tDb6i1Db63XDf5VvWz4TfWCH/nPAnjK8BunpqQ2AvBISnLKg46e+2zA3QlnEu6AcBuEm23BTRD+YBOuiz4effWxo8euBPE7EL/dv2//rx1Lv9qxfccl7omfb1i/4cJVK1f9bOmSpT9duGDhT2bPnP3jKZOm/GjMqDE/+OzTz77fq0ev73bp2OU7jq1vNX6s8TeuvfLar//0xz/9DyhfgzKoFsUQa1StSpWrTKUqVqEKDDJPOcpShlKVokSdUaxidMKAj+uoDumA9mqXtmuLYW/Seq3RSi3TYkNfqLmaremaYvATNc7gx2ikhhn8YH2qAYbfV731IYAP1BVAJ7UH0E5vAWit1yG8BuEVvQSiCYTnIDxtExrbhEYgHgHxEIj7HUf3wLgTxu0u51tsxE0wboBxHYxr3A9XHdh/4Iq9e/ZebjMu27Z126WbN23+pc24GMhFSxYvOd8l/rNZM2adN3ni5HM/H/35OUMGDflhvz79ftC1U9fvtXu73XdfffnVbz/8wMPf/P1vf/+Nn/zwJ1+H8h+9evUaFLVixYqIQdWoWpUqV5lKVazwR4Gh5SlHWcpQqlKUqDOKNcQYnVS0juqQDmivwe7SDm3VZm3QGkNepWVaooUGPU+zNUNTDXuSxutzAx+l4Rpi6AP1iaH3Ux/1MvjuBv++Oht8B71r+G/bgjcBvJGcnNwCQHMAzQC8COB5AM/qKQhPOJIeg/CwjXjARtwL4S5H0x3uh9sOHzp8s624yVb8Yc/uPdeCuNpj7O9txu/cF7+FcRmMX9mOS2zHxbbjwqmTp54/fuz4n40cPvK8Af0H/NhT1jnvd37/h++0eecHLV9t+b3nnn7uu3fdfte3L/vlZd8853vnfAPKN6AMjlq+fHnE0GpUrUqVq8zASlWiIhUoTznKUoZSDTFFiUpQnE7rpGFG66gO66D2Gepu7dBWbTbYDVqr1Ya7XEu1yHDna45mGvI0TdYEgx6r0QY9QkMN+zN9auAfG/hHfsT3NvAe6mboXQ29o9obfFtDf8vQW/uR/7rBv2bwrxj8SzagieE/bwueNvwnbUEjW/AogIcA3A/gXptwl6PpTy7rW23DzRBudFf8Yf269detXrX66hXLV/zeVvzOnfGbubPnXubeuNRR9UubcfGIYSMuclxd0O+jfufDOM92nPtGizd+/HLTl3/07FPP/tCW/OCm62/63sUXXPydH3z7B9+G8q0Pe344JGrZsmURg6xRtSpVrjKVGmaJilSgPOUoSxkGm6YUJSlBcTptyCcVrWM6rIOGvU+7tUPbDHyLNmqtga/WCi0z9EWab+hzNUvTDX6KJhr+OMMfY/gjNczwByUlJQ8EMMDw+6oPgJ76AML7EDpBeA9COwhvQ3gTwhsQWkBobguagXgRxAsgngHxFIgnHEmPuawftg0P2Ib73BN3u7TvcDTd7q64Ze2atTfBuAHG9bbi2kULFl01b86838+cPvNym/Ebm/FrIL8aNmTYJQM/GXixC/2inh/0vKB92/Y/a9Wy1XnNXmx27jNPPvPjJx594px777z3R+6TH1z40wu/971vfv+7UL7Ts2fPoVFLly6NGGaNqlWpcpUZZqhERSpQnnJkrlkZSlOqkpSgOEM+rVM6oWMGfVgHtV97DHyntmmLgW/UOq0x9BVapsVaYPjzDH6WZmgqgEkaD2CM4Y/ScMMfrM8ADADQTx9B+BBCdwjvQ+isDiDeBfEOiDYQWkFo6Th6FcTL7oWXQDQB8RyIp0E0thWNbMWjjqaHYNxvK+61FXfC+BOM22DcvHTx0ptg/MF7xnVzZs25xnZc5d64wpPV5Y6qy9wdl37y8Se/BHIJkItd6he91fqt890hP3NknffoQ4+e6zH43DtuveOcKy+/8kfnn3v+D777je9+H8r3evToMawWxUBrVK1KlYcMtUwlKlKB8pSjLAPOVJpSlaQEg45XrE7phI4Z+BEd0n7D3qOd2q6tBr9J6wx9jVY675cb/BItNPx5mm34MzTV8CdpPIDPNQrAcABD9BmETyD0V18IvSD0gNANQhfb0BFEexBtQbwFojWI10G8BqI5iGaOpxdBPG8rnrEVTzminnBEPQbjYZvxoLviPhh3w7jDZty+eOHiWx1Vf3RU3Wg7rrcd104cP/Fq23ElkCsGfzb4t0Au692z96VAfulSv8SWXPz6a69f2PSFpuc/2ejJnz1wzwPnuUt+4lH43Mt/ffk5Pz3npz/6zte/80MoP+jRvcfwqCVLlkQMtUbVqlSFgZarTCUqUoHyDDdH2cpU+CNVSYacoHjFOmZOGfYJHdcRAz9k4Pu118B3abu2GvomrTf0tVpl6Mu1xNAXar7mGP5Mg5+myYY/QWMNf7Thj9RQAIMADATwMYB+6g3hQwjdIXR1JHWG0AFCOwjvuCPagGhlI1pCeNVGvAziJRBNQDwH4mkQT4J4fM3qNY96v3ho+bLlD7gz7rUZd9uMO2zGbTBugfHHSRMm3egl8PpRI0ZdO3Tw0KvcH1f279v/d70/7H25O+Syju07Xuoe+dWbb7x5iXvkYsfWRY8++OgFQH528w03//T6q68/zyX/E09eP/72f3z7HCg/6t69+4ioxYsXRwy2RtWqVIXhlqtMJSpSgWHnGXKuspWpNANPVfhXouINO1YxOmngx3VUhw39gPZql8Hv0DZD36wNBr9Wq7TC8Jca/CItMPy5mmX40zUFwEQA4zQGwkgAwwAMAfAZgAHqbxM+gtBLPSB0g9AFQkfb0B5EWxBvgWjtaHodxGsgmrsrmnl6etER9YIj6llb8ZStaLxs6bLHlixa8giMh2DcD+MeGHd5G78Dxm2Oqlu8d9zkMr/BdlxvO65xXF31YY8Pr+z+fvcrOrzb4beesi5zj1zq2PrV8888f8njjz5+sS256LY/3nbBH675w/lX/e6qn/3y57/86Y+//+OffOtr3zoXyo8/+OCDkVGLFi2KGGiNqlWpCkMtV5lKVKQC5RtwrrKVqXSlGnSyEhVv2LGK0UkdN/SjOmzgB7RPuw1+p7YZ/GZt0DrDX62Vhr/M8BdrgeHP1WwAMwBM1SQI4yGM1SgAwzXUNgyC8Ilt+BhEXxC9QPSE8IFjqSuIziDesxHtQLzjnmgDohWIlrbiVVvxiq14yeNskxXLVjwH4xkYT/o45HEYjzmmHobx4PSp0+9zb9wzYdyEOx1Vf7Idt9mOm23HTR53b/io90fX9+ze8xobclWn9zpdCeR3Xg5/C+Q3Lz7/4q+feuKpXz3y4COX3P2nuy/+4x/++PNrfn/NRY6uC35x4S/O9zj8UyjnQTmvW7duo6I8U0cMt0bVqjTcCpWrTCUqUqEh5ytX2co07HSlKVmJBn5G4V8xhn5S0QZ+VId10ND3abfB79R2g9+ijVpv+GsMf6WWG/4SLQQwz/Dn2ICZmgZgMoAJGgthDIQREIZBGAxhoG0YAKIfiD4QPoTQ3Ua8D6KLjegIoj2ItiDeAtEaxOu2ooUjqrkjqpn7oqn74gUYz8J42mY09uL3OIxHYTwE4wFH1X2jR46+e/jQ4Xfajts9Xd3muLrZcXVTjw963ADkehtyDZCrbcjvX3vltSt8jHK5x9/fPPbwY7+2JZf+6ZY//dKW/MIFf/Glv7j0op+f//OLfvidH17wza9+83woP3v//fdHRy1YsCBiyDWqVqUBV6hcZSpRkQoNO1+5ylaWoacrTcmGnqQzijP40zqlaMM/piM6aPj7DX+Pdmk7gK3aBGA9gDVaBWG5lkBYBGG+5kCYCWE6hCkQJmociDEgRoIYDmIwiM9sxCcw+oP4CEQvG9EDRjf3RFcYnRxP78FoB+NtW9EGRqvlS5e3hPHa4kWLX/GD8yUX+Is243kYz3iiesq98YSjqpHH3Edsx0O2436Puvf67Ooux9UdQG7v06vPrT269bjZhX6jO+QGd8h17pBrgFzlHrnyhWdfuOLJx5+8/MF7H/zNPXfc8+tbb7r1Uo/Bv7ziN1dc4ui62OPwz72jXPSNr3zjQigXvN/1/TFRPgqIGGyNqlVlsBUqV5lKVKxCQ85XrnKUZdDpSlOKgSfpjOIN/LROGfgJHdMRgz+k/Qa/V7sMfoe2Gv4mg9+gtVoNYAWApQAWawGAuQBmAZihqRAmQRgP4XMIoyCMsBFDQQwCMRDCxzaiH4g+NuJDEN3dE++D6AyiI4j2tqItiLccUW8uWrjoDZvR0nvGqzbjZRgv2YwmMJ6D8QyMJ23HEzAesx2PeNR9yHbc/3G/j+9xf9ztM6w7Puj6we1Abn2v3Xs3t32r7U1AbvC2fr0NucY9cvXTjZ++qtHDjX4P5PLbb779t14WL3OX/Pq3l/72UkfXL8/70XmXfP9b378Yys+h/Lxrl66fR82bOy9iyDWqNuAqVahcZSox6GIVKl+5Bp6jLGUYeLpSlGToCYo39NOKMfQTOq6jhn9IBwx+r3Yb/k7D36bNhr/R8NdpDYCVhr9MSwAsBDAPwGwAMzUNwmQIEyGMswljIIyEMAzCYNvwGYhPbEN/EH0dTb1A9ATxAYiu7opOnqI6OKLeBfGOI6qNrWjt45A33BmvwWjuTbwZjKYwmtiMZx1VT8N4Esbj7o7H3B0Pezt/0HF1v8fde4Hc7ZPeOzzy3u7IutUdcrM75KZXXnrlRiDX25BrGz3S6BrvJFd7J/k9kN954rrclvzm15f8+rKf/+znv/bk9avvffN7v/z6v3/9Eii/6NK5y9iouXPmRgy4RtWqMuAKlatMJSo27ELlK085hp6lDKUbeoqSDD1B8Yo1+Bid1HEARw3/sA4A2KfdAHZqG4QtADZqPYQ1EFZBWK6lEBZBmA9hDoRZmg5iiibBGA/jcxCjQIwAMUSDbMSnMD6G0c8TVB8YH9qK7rbifRhdYHSE0R5GOxhvw3gTRiub0RLGa943XvFU9ZKnqhe9czzvqHrW3fH0pwM+bQzkcdvxaK+evR52fzzYrUu3+4HcY0PuAnKHDbndhtzqyLq5yXNNbvL4e4OnreuBXHf/3fdf64nrqhuuveH3LvgrXPC/c59c7uj6zbk/OPcyL46XQvkVlF917tx5XNTs2bMjBl2jakOuUoXKVaZSAy9WofINPE85yjLwDKUr1eCTlWDwZxSrGMM/qWjDP2b4h3XQ8PdpD4BdALZrC4BNADZoLYTVEFYAWOo4WgxggeZCmA1hho2YCmIyiAmOprE2YgyIkSCGgRgMYiCIAbaiv634CERvj7Q93RUfOKK6wugMowOMd2G0hfGWS/xNl/gbMFrAeNVR9bLteMl2NLEdz7s7nnV3PPVRrz6NPe428rj7qOPqYU9YD9qQ+99+8+17gdzdonmLO2zI7Z60bnOx3/LEY0/80TvJjUD+4L3kei+K11531XVX+0T4Sj+h9ftLLrrkigt+csHvPA7/FspvoFwG5dedOnUaHzVr1qyIIdeo2oCrVKFylanUsItVqALDzlOOsg08Q+lKNfhkJRr8GcUZ/GmdNPxoHTP8IzoIYL/h79UuAOFfWyFshrABwjqthrASwjIIiyEshDAPwhwIM23DNBBTQEwEMQ7E5yBGgRgOYiiIQS7tT0EMsBX9bEUfGB+6L7q7L7q5vLt4z+jkmHrPZrSD8Q6MNjBaw3jDO0cLj7nNXeQv246m7o4mtuN5x9UzjqunHFeNfWTSyIX+qJ8xfBjIg46s+4HcC+RuIHcC+ZNj67ZHHnjkFpf7ze6Sm9wlNzi6rr/6iquvsyXX2JKr3SdX+Xjl9568rvA2/zsol0P5bceOHSdGzZw5M2LINapWlSFXqFxlKjXsYhWpwMDzlKtsQ89UhqGnKlmJBn9GcYZ/WqcM/4SOG/4RHQKwH8Be7QawE8A2AFu0EcJ6CGsgrNJyEEtALAIxH8RcELMgTHdHTNUkEONBjHU8jXY8jbAVw0AMthWfwfjEVvS3FX1tRW9b0RNGdxjvw+gMoyOM9jDawXgbRhtHVStH1esu8ha2o7m7o5knq6aOqyaerp5zXD3juHrKI29jT1iNgDwG5GEgDwK5H8i9Pte62y+AuNM9cgeQ23zgeOudt915iy35o7vkRo/Bf/AGf52nrms9Cl/r45WrPXld6W3+9//xb/9xBZQrOnboOClqxvQZEQOvUbVhV6lC5SFDL1Wxigy9QHmGnqtsZRp8hlINPkVJBp+geMOP1SnDP6HjAI4COKwDAPYB2KOdELYD2ApgE4ANWgthNYQVEJbahsUgFkCYZyNmg5gJYpqNmAxiIohxtuJzEKNADAcxxFYMshUDbcUAGP0cUX0cUb1g9IDxgaeprjA6w+gAoz2MtjDedlS9CaOV7WhpO16zHa94GWzmuGrquGriuHrO/fGMJ6ynfLjY2HvI40Aec4c87DOth4Dc7wXxPiD3uEfuuu+u++4Acrstuc2W3Oox+I8u+JtsyQ1A/uCnf6+Hcp0nr2u8OF4N5SooV3Z4r8PkqOnTpkcMu0bVBl2lCpWHDLxUxSoy9ALlK9fgs5Vp8BlKM/gUJRl+guINP1YxAE4qGsBRAId1EMI+CHsA7AKwXVshbIKwAcI6CKu1EsRyEEtALLIN830yOxfELBDTQUwFMQnEBMfTWBCjbcVIWzEMxmBb8RmMT2B87PLu62mqt834EEZ3GN1gdIHRyb3xnqPqXUdVWxf5W7bjTdvRyna0tB2vOa5eAdLMcdXU/dHEhf5cm1ZtnvFzIk8BaQzkcRvyGJBHgDzkYn/AsXWfl8R7HVt3A7nTZ1x/csHf7i651dF1y68u/tUfgdx4wXkX3OjJ6wZPXtdDuQ7KtVCuea/9e1Oipk6dGjHoGlUbdJUqVB4y8FKVqMjQC5Rv6LnKUabBZyjN4FOUZPiJijf8OMOP0UkA0ToG4QiAg9oPYS+EXRB2aBuEzRA2QlgPYY1tWAViuY1YCmIxiAUg5oGYrRkwptmKySAm2opxMMbAGAVjuCNqqK0YBGMgjAE2oz+Mj2D0htETRncY78Po4qjqCOM9F3k72/GO7Xjrw+4ftu7erfsb3s5buD9eBfKK+6MZkKYu9BeAPOfF8BlH1lM2pLFH38e9izwG5BEfyT8M5AFbcr8393u9KN5z43U33uWCv/N3l/3udkfXbS74Wy8878Kb3Sc3Q7nJJX8DlBug/AHK9e3fbT81asqUKRHDrlG1qgy7oq5yAy9ViYoMvUD5yjX4HGUZfqbSDD9VyYafqDMA4nQawCkAJ3QMwlEAh3QAwj4IuyHs1HYQW0BsArEexFqX9WoQK0Asc08sBrHQRswHMcdWzAIxHcQUEJMcUeNtxVgYY2CMdEQNgzEExmfeNT6F8TGMfp6o+rjEe8HoAeMDR1VXR1Vn29HRdrS3He086r5jO9oAae24esNx1cL98ar74xUgzYA0BfICkOeAPOtt/Wkgjd0jTzz20GONHFuPukce9vnWQ0Du9xnXfT5SudcFf7ctudPR9ScX/O1AbvPSeKvH4Vug/NFHLDd97f987UYoN77b7t3pUZMnT44Yeo2qDbxKFSFDL1epSgy+SIUGn6885Rh+ljINP12pAJKVCOCM4iCcBnAKwAkdh3AUwGEAB7Qfwh4IuxxL223DVhCbIWzQOhBrbMNKEMtBLAWxyFYsgDEXxmwQM2zFVBiTHVETbcU4GJ87okbBGGEzhsEY7F1jIIxPYPSH0de90dtR9SGMHrajmw8Ru9qOzu6ODo6r9i7zdo6rt4G0cVy1AvIGkBZAXvXzIa8AaebIagqkCZDnvYs8C+Rpn2s9CeQJj7+NgDxqSx5xbD3k2HrAltzvgr/XY/A9tuQu98mdP/vxz/5kS273OHw7lFuh3ALlZih/bNeu3YyoSRMnRQy8RtWGXaWKkIGXq9TAS1SkQkPPV56h5yhLmYafbvhpSjb8JCUAiAcQqxgAJwFE6xiEwzbhIIT9NmEvgN0AdmqbbdgCYhOE9VoLYhWIFRCW2YjFIBaCmAdiDohZIKaDmGorJoGYYCvGeQMfA2KkzRjumBrimBoEY6DNGGAz+juqPrIZvWF8CKO7945uMLrC6ASjg6er9p6u2jmu3nFctXGht/aE9YaXwpbe1F8F8oo7pJkjqymQF4G8YEOedY88A+Qp90hjII/bkkaOrUeBPGxLHnLBP+gN/n5bcq/75B4X/F225E6fDt/pcfhPUG6HchuUW9u2bTszKvxWCIOuCRlylSpVoXIDL1OJgRerUAWGnqdcg89WpsGnK83wU5Rk+AmGH6/YpYuXxAA4ZQuiIRyDcATAIR2AsA/CbtuwE8J2CFshbLYNG0CsA7EGxEoIy7UExCLH0wIY80DMthUzQEyzFVNsxUQY423FWFsxGsZIGMNgDIExyGZ8ajMGwOgH4yMYvR1VPT1ZdXdUdYPRxd3R2XHVwXa0B9LOdrztuGoDpHXzZs3f8HPrLYG8BqS5I+tlIC950noRyAvukeeAPOtp62kgT9qSxh6BH/f2/pgL/lFH1yMu+IdsyQNeGO+Hcp8tucc7yj1Q7vKOcieUO6Dc0fadtrOjxo8fHzH4GgMPValSFQZfrjKDL1GxCg2/QHmGn6tsAFnKAJDmGEqxBckQEiGcgRAH4TSAUzoB4TiEoxAO6yCIfSD2gNgFYgeIbSC2gNhoI9aDWOueWA1iBYhltmIxjIW2Yj6MObZiJowZMKbCmGQzJsIYB+Nzx9RoGCNsxjCbMdgl/pl74xMfIH7sJbCf7ehjO3rZjp6Oqu62433HVRePu51sRwcg7YG09YT1tg15C0hrIG8AaQnkNSDNgbwMpJn3kaYu9iZAnve09SyQZ2zJU0Aa++DxCRd8I0fXY46uR2zJw+6TB90nD9iS+72j3Ocd5V6X/N1Q7oZy1ztvvzMnatzYcRGDrgkZdJUqVaFyAy9TiaEXq9DgC5Rv+LmGn23wWcow/HSlGn6y4SfqjOIgnAYQA+AkgGgdhXAYwiEI+yHshbAbwk4I2yFssRGbQGwAsQ7EGhArQSwHsdRWLAKxAMQ8ELNBzLQZ071nTIExyWZMgDEWxhgYo2AMhzEUxiD3xkAYn7jIP4bRz3b0sR29bEdP29HddnTzuNvFcdXJ/dHB/dHehd4OyDs+y3rLY++bQFoBed2nvi2AvPrQfQ+9AqSZe+Qlx9aLtuQFIM/bkmeBPG1LnvJp8JMu+Cf8MqJGPut6zJY84uh6+Eff/dFD3lEegvIAlPuh3Aflvrffentu1NjPP48YfE3I4KtUafAVBl+uMsMv9SO/2PCLVKB8ALkAspVl+JlKB5AKIFmJEBIUDyEWQgyEkxCidQzEERCHQBwAsQ/EHhA7QewAsRXEZhAbHU/rYawFscpWrICxzF2xGMZCGPNtxRwYs23FDJf3VBhTHFMT+3/UbzyMsTBGO6pGesQdDmOIo2qQo2qgx9wBtqM/jL7ujj62o5fLvIft6O6F8H3HVRcgnYB08PF7eyDtgLwD5C0gb9qQVj7Teh1IC/fIa0Ca+wT4ZSAvedpq6mmriRfFF1zuzzm2nrElTzu6nnJ0NfZu8oQtaeToegzKo1AegfIwkAe/+q9ffRDKA2+1eWt+1JjRYyIGX2PYoSpVGnqFyg29TKUqNvgiFRh+vsHnKUfZhp9p+OlKBZACIEkJAOIBxOk0hFMQTkA4DuEohMMQDkLYD2EvhF3aCWKbjdgCYhOIDSDW2Yo1IFaCWG4rloJYbCsW2Ip5MObAmAVjus2Y6s6YBGMCjPE243NH1WgYI2AMsx1DbMcg2zHQUTXAdvS3HX0dV31sRy/HVU/HVXfHVTcXeldPWJ08YXUA0h5IOyDvAHkbSBsgrYG84R5pCeQ1x9arjq1XPG297HJ/yeX+osu9iS153pY85+h61tH1tKPrSU9djR1dT7hPHvfk1cg7ymNQHoXyCJSH27zZZkHU6FGjI4ZdEzLwKlUadkVdZb4tNfgSQy9SofINP085hp9t+JnKMPw0pQBIApCoMxDiIJyGcEonQUSDOAbiCIRDEPbbhn0gdoPYCWG7toLYbCs2glgPYq2tWAVjha1YBmMJiEWOqPku77kwZsOYCWO6d40pNmOSzZgAY5x7YwyMUTBGwBhmO4bYjkEwPoUxwHb0tx19HVd9bEcvF3pPx1V3IN2AdPXhYmdv6h194vsekHeBtAXyNpA2QN50j7QC8jqQlo6t1xxbzd0lrzi2mgFp6mXxRVvSxFPXC14Yn/Mo/AyUp23JU1CedMk3hvIElMehNILSqE3rNgujRo0cFTH0mpCBV6nSwCvqKjP4UpUYfJEKDb5AeYafo2zDzzL8DKUBSFUygCQAZwDEKxZCDISTEKIhHINwBMIh23BA+yHsgbDLRuwAsQ3EFhCbQGywFetArLEVq0AstxVLYSx2RC2EMd9WzPU0NctmzIAxzZ0xBcYkGONhjIUxBsYoGCMcVcMcVUPcHYNgfApjgO3obzv6Oq4+clz1cqH3dKF398jbDUhXIF3cIR3dIR2AtAfSDsg7QN4C0saHja19tvWGY+t1IC0cW6/akuaOrZdtSTNb8tLF51/c1FNXE0fX8+6T54E865J/FsrTUJ6C8iSUJ6E0frP1m4ujRgwfETH0mpChV6nS0CvqKvNtqeGXGH6RCg2/QPmGn6scAFnKgJAOIFXJEJIgJECIVyyI0yBOgTgB4bhtOAriMIiDIPaD2AtiN4idILaD2GorNsPYaCvWw1gLYrWtWAljua1YAmORzVgAYx6MOTZjFowZMKa6Nya7NyZ6qhrvqBrrqBpjO0bZjuG2YyiQwe6Oz2zHp7ZjgOOqP5C+7o8+QHoB6QmkO5BuNuR9G9IFSCcgHYC09/Mj7YC0dY+8DaSNY+tNx1Yrx9YbtqSlu6SF95JXfRrc3Ja84uhq5uh6yZa86D5pAuUFKC9Aec47yrNQnoHyDJSnW7dqvSRq+LDhEUOvCRl6lSoNvSJk6OUqVYnBF6vQ8AuUb/i5hp+jLACZhp+uVAApAJKUCOEMhDgIpyHEQDgJIRrCMR2BcEgHIOyDsAfCLhuxA8R2EFtsxWYQG0CssxVrQKwCscIRtQzEYhCLbMYCd8ZcGHNsxkybMR3GNBiTYUyEMR7GWBhjYIyyHSNsxzDbMcR2DHJcDXRcfeK4+tj90c/98ZGfD+nts6wPvRj2sCEfeOx9H0hXIJ1tSEcg7wFp72JvB6StY+ttIG1syZtAWtmSNxxbLW1JCxf8ay745p66XoHysvukGZCmLvmmLvkXoTSB8jyU56E81+qNVsuihg4dGjH0mpChV6kyZPAVKjf8UpUYfrHhF6pA+QByAeQoC0CmMiCkQUiBkKxEEGdAxIOIhRBjG05CiNZxEEdBHNZBEPu1F8RuEDttxXYY22BssRUbYayHsRbGai99K4Esh7HUZiyGsRDGfJsxF8ZsGDMdVdMdVVMdVZMcVRNc5OOAjLUdo23HSNsx3HYMtR2DHVeDgHwK5BMgHwPpZ0M+8tFJbxvyoQ3pCaS7z7S62ZCuHn07+6ndTu6RDu6R9kDe9bTV1iPwO46tt9wlbWxJa1vSypa8YUtaOrpaOLpedXS96j55BcjLLvlmUF6C8hKUF6G8CKXJG6+/sTxqyOAhEQOvCRl2tSoNPFShckMvU4mhF6vI4AuVb/h5yjX8bMPPUgaANACpAJKVBCEBQLwjKQ7CaZ2CcMJGREM4ZiOOgDgE4gCIfRD22IhdIHaC2A5iK4jNnqI2glgPYi2I1TZjpSNqOYylNmMxjIUw5tuMuTBmwZgJY7rtmApjMowJtmO87RhrO8bYjlG2Y4TjahiMIY6rQY6rgZ6wPnn8kcc/tiH9bUhfG9IHSC8b0tOG9ADygQ1534Z0BdLZPdIJSAcg7YG8a0vaudzfcZe8DaQNkDdtSWtHVysor9uSlo6uFlBec3S9CqW5t/lXoLwMpRmUZq+3fH1l1OBBgyOGX2PwoWqDr6yrwvDLVWb4pSoGUKRCAAXKg5ALIVtZEDIgpCsVRAqIJAiJEM4oDkQsiBgQJ0FEgzgO4qiNOAzjIIz9MPaC2O3i3uWu2AFjG4wtMDbB2ABjHYw1MFbBWAFjmUt8ic1YBGMBjHmOqjkwZtmOGR5zpwGZYjsm2Y4JtmOc7RhrO8bYjlFARgAZZjuGABnk/hgI5BMfLg4A0h9IXxvSx4b0AvKhDenhYu/uHukGpKt7pItjq5Njq6M39/dsSXtb8q4taetl8W0ob9mSNp663nR0tYbyBpTX/RxKSygtXPItoLwKpTmU5lBegbIq6rOBn0UMvCZk4NWqNPBQhcoNvkylBl9s8EUqVIHh5ykXQA6ALACZSgeQBiAFQLISISRAiIcQCyEGwimdgHAcwlEbcQTEIRAHQOwDsRfEbvfFThjbQWx1RG2GsdERtR7GWhCrbcYqm7ECxjIYi2EsgrHAZsxzb8yBMct2zLAd02BMsR2TbMcE2zHOZT7W4+4Yx9UoICMcV8OADHVcDQbyGZBPvakPsCEfA+kH5CMgfYD0AtITSA8gH3ja6gakqy3pAqSTLekI5D13SXt3ybseg9vZkrbuk7dd8G85utq4T96E0hpKKyhvQHkdSMsQlBYtW7RcHTXw04ERQ68JGXy1qgy9UhWGXq4ylRp+ieEXqdDwCww/LwQgR9kAMgFkAEhTKoRkCEkAEmzCGQhxOg0iBsRJENGOpmMQjkI4DOEghP02Yh+IPSB2gdgBYhuILbZiM4yNtmI9jLUu8NUwVsFYYSuWtmrZegmMhTAW2Ix5NmMOjFkwZsCYZjum2o7JtmMijPEwxtqOMS700bZjpONquPtjqA8XhwAZBGSgI+sTIAOA9AfSD8hHQHq7R3oB6QmkB5APHFvdgHR1bHUB0tnR1clHKh1syXu2pL2j610obW3JO46ut90nbzm62rhP3oTSGkirEJQ3WrzWYm3UJwM+iRh6Tcjgq1Vl8JWqMPxylakUQImKARQCKFA+hDwAOcqGkAUhQ+kgUkGkQEiCkKgzIOJBxNqIGBtxCsYJGMdhHIVxBMQhHQCxX3th7IaxE8YOW7ENxhZbsUkbYKyDscZmrLIZKx1Ty4EstRmLbcZCIAuAzHNUzQEyC8YM2zHNdkwBMgnIRNsx3naMBfI5kNFARgIZDmQYkCFABgH5DMinQAYA6e9Jqx+QvkD6uEd6e/z9EEgPW9LdsfWBLXkfSFdb0sWWdLYlHW1JB0fXe7bkXVvyri1pB6UtlHegvA3lLSBtQlDebPFqi3VRAz4eEDHsmpCBV6vKwCvrKjf4MpUafInBF6vI4AuVb/h5ygWQAyBLmQDSAaQBSFEyhEQICRDOQIiDcBpCjI04CSHaRhyHcNQ9cRjEIRAHQOwDsQfEbluxE8R2EFtBbHaBb7IZG2CsA7HGZqyCsRLGcpf4UhiLYSyEscBRNQ/GHBizYMxwmU+3HVNtx2QvhBMdVxMcV+McV5+7P8a4P0b5LGsEkOFAhgIZDGQQkIFAPgUyAEh/IP2A9HWP9AHS25Z86BG4py3pcfH5P//AlnSzJe/bkq62pIunrs5QOkLpAOU9R1d7KO2hvOvDyHZA2uodKO+81vy1DVH9+/WPGHpNyOCrVWXwlXVVGH6ZSg2/xPCLVWT4hYafHwKQqxwAWQAyHUkZENIhpEJIgZCkRBBnQMSBiAURA+IUiBMgokEcczQd0WEQB7UfxF5H1B4Yu0DssBXbYWy1FZthbISxwTG1DsYaGKtgrISxHMZSGIthLHRULXCRz4Mxx3bMhjHDdky3HVNtx2TbMcl2TAAy3naMdX+MATIayEggwz32DgMyBMggIJ950hroYv8EyAAg/W1JPyAfObb6AOltS3q53Hvakh5AutuSD2xJN0fX+46uLlA625JOQDq6Tzr69cMdoLwHpH0IyruvNn91Y1S/vv0ihl4TMvhqVRl8ZV0VAMpVBqDE8ItVpEIIBRDylQchB0I2hCxlQEiHkAYhBUKyEkEkgIgHEQfiNIhTNuIkiBO24jiIo7biMIxDMA7Yin0w9sLYDWMnjB0wtsHYAmMTjI2OqfUw1ro3VgNZ5d5Y4ahaBmOp7VhsOxYCWWA75gGZ491jlu2YaTum246pQKYAmQRkApDxPlwc68XwcyCjb77hllFARgAZBmQokMFABrlHBgL5FMgnXhI/dmz1tyX9gHzk2OpjS3rbkl5QetqSHraku6eu7kC62ZL3bUlXIF1CUDpD6QSkYwhKh+avNN8U5X+gJWLoNYYeqlaVoVeGDL5C5SqzAaUqAVDsBa7I8AuUDyAPQK6yIWQByASQrjQIqRCSISRBSIRwBkIchFgIMRBOQTgBIdpGHANxFMRhEAdBHHBE7QOxF8RuR9QuGDtAbLMZW0BsArHRZqy3GWthrIGxCsZKGMthLIWxGMZC27HAdswDMhfIbBgzYcxwXE0DMhXIZNsxEcgE7yHjbMhYIGOAjAYyEshwIMOADHWxDwYyCMhnQAYC+cSWDPAI3N+W9APS113yEZA+tqS3Lenl6PoQSg8o3aF88K2vfVvf6gblfShdgXQJQenc/OXmW6L69O4T8aO9xsBrDLzaj/gqVRp8paFXqNzgy1Rq8CUqNvwiwy8IGX6e4ecqB0BWCEIGhHQIqRBSlAwiEUKC4kHEgTgNIgbESRAnQBwHcQzEEVtxGMRBEAdA7LMVe0DsshU7YWyHsc1WbIGxyTG1EcR6rYOxBsYqGCthLIex1HYsgbEIxgLbMR/IXJf5HBizYMx0XE0HMtV2THF/TAYyEcgET1njgIwFMgbIaCAjbchwIMOBDAUyBMggl/tntmSgLfnUlnxy/k/O/9iW9IfSz5b0Ped7P/4ISh9PXb2h9ILyIZCeISg9oHQH8kEISrdXmr2yLap3r94Rg48Yeo2qVWXwoUrDr1C5ygCUAihRsYogFAIoUD6EPAg5ygaRBSETQrrSbEQKiGQQSSASQJwBEQ8iFsRpEKdAnAQRbSuOwzgK4wiMQ7bioPbD2AtjD4xdNmMnjO0wtmoLjE3ujY0w1sNY66lqDZBVQFb6dVjL3R1L3R2LgSyyHQttx3wgc4HMcVzNAjITyHQg07ypTwEyGchEIBOAjAMyFsgYGzIayiggI9wjw4EMAzLUhgwGMgjIZ7ZkIJBP3SWfAPnYlvR3dPV3n/QD8hGQPu6T3kB6A+nlyetDL449v/IvX+kBpLaXm728Pcr/wkHE0COGXqNqA6+qq9LgK1Ru8GUqNfwSFRt+keEXqgBAvvIA5ALIBpClTAgZENIhpEJIgZCsRBAJIM6AiAMRCyIGxCkQJ0BE24pjII6COAziEIgDIPbbjL2OqN0gdjmmdoLYbjO2wdgCYxOMjT4iWW8z1jqq1sBYZTtWwlhhO5bZjiUwFnu6Wmg7FsCY57ia67iabTtmAZnpo5PpQKYCmeIpaxKQiUAmABkHZKwnrc+BjHGxjwIy0oaMgDLcsTXUxylDHFuDoQyyJZ9BGQjkU1vyCZQBUD6G0h9IP09dfaF8BOUjKH2g9AbSK/TySy/viOrZo2fEwCOGXaNqVRl6qNLQK1QeMvjSkOGXGH6xigy/0PDzQwBylQMhG0IWgAylQ0iDkAohGUIShEQlQIiHEAvhNIQYx9NJECdAHAdxDMRREIdtxUEYB0DstxV7YeyBscvT1E4Y22FssxlbYGxyTG2EsR7GOhhrYKy2HatsxwoYy23HUtuxGMYi27HQdswHMs92zHF/zAYyy5v6DCDTPfZOBTIFyGRH1kQgE4CMBzLWlnzuHhkDZDSQUZ62RgAZDmQYkKHukiFABgMZBOQzR9dAKJ9C+QTKACgDoHwMpT+UflD6AqmtWdNmu6LcHRFDjxh4japVZfChSlUYfqgcQJlKAZQYfrGKABSqAEI+gDzlQMiBkAUhUxkg0iCk2YYUEMlKhJEA4oziQMQqBsYpECcVDeI4iGO24giMwzAOwjhgK/bB2AtjD4xdMHbA2O6Y2gpkC4xNjqqNMDbAWAdjre1YDWOV7VgBZDmQpbZjCZBFtmMhkAVA5gGZC2QOkFlAZnrsnQ5kGpCpQKYAmQRkog2ZAGScLRkH5HPH1hjH1mggoxxbI4GMsCXDoQyDMtQFPwTKYI/Cgxxdn0EZCGUgkE/dJ59AGQDlYyC1vdT0pd1RH3T7IGLoEQOvUbWhV9VV6dtKw69QueGXGX6pSgy/WEUACgEUKB9AHoBc5UDIhpAFIEPpENJsRCqEZBuRBCERQoKNiIcQp1hbEQPiFIgTigZxHMRRW3EExmEYB2EcALHPfbEXxm4Yu2zGThjbYWyzHVtgbHZUbYKxwXasB7IWxmrH1SrbsRLICtuxDMhSx9ViIIscVwuAzAcyD8hcGzIbyCwgM4FMBzINyFQgk4FMBjLRPTIBynjH1jhbMhbK57ZkDJDR7pJRQEbakhFQhtuSYbZkKJQhQAaHoAyC8hmUz6AMBPJp6KUXX9ob5XejRgw8VGPg1aoy8PoqDb5C5QZfZvClKgkZfpHhhwoAFBh+vnIB5ADIVhaETAgZENKV9lKTZikgkiEkQUi0EWdAxEOIsxGxIGJAnAJxAkQ0iOMgjtqKIzAOews/6L44YCv2w9gLYw+IXTZjJ4wdNmMbjK0wNtuMTTA22oz1MNbBWANjNYxVMFbAWG47lsFYAmOx+2MRjAU2ZL77Yx6QuS712UBmAZnpyJoBZDqQqUCmXPjTiyYDmQRkIpAJQMbbknFAxtqSz4GMATLaloyCMgrKSFsyAshwR9cwKMOgDIUyBMpgILU1bdJ0X5TfjRqBEDH4GlUbfqgqZPiVqgBQrjIApSEIJQCKVQShEECB8iHkQchVDoRs25CpDBDpINJApIJIAZEMIvH5p59LgHEGRjyMWBinYcTAOAnjBIxoGMdgHIVxBMYhGAdhHICxD8ZeGHtsxi4gO2HssBnbgGy1GZuBbAKy0VG1Hsg6IGuBrIaxynasBLLCE9YyIEuBLAGyyIYsBLIAyHwg84DMATIbyCwgM90jM2zIdCDTHFtToUxxbE2CMtGWTIAy3paMgzIWyFggn2uMLRkNZRSUUUBGagSUEVCGQxkGZGjoxSYvHojq0qlLxMAjhl2j6pChV9VVafAVKjf8spDhl6oEQLHhF6kQQIHyAeQByAWQo2wIWRAyIWQoHUQahBQIyRCSICRCSIAQrzgIsToNIsYRdRLECUdUNIhjII46oo7AOAzjIIwDMPbbjL0w9sDYBWOX7dgBYzuMrTC2wNgMY6O7Y4PtWA9k3fVXXbcGxmobsspxtRLIciDLbMhSIEuALAayEMgCIPOBzAMy14bMATLbPTITyEwg04FMAzLVlkwBMsWWTIYyyZZMhDLBXTLeloyDMhbK51A+BzImBGS0RkEZCaS2F1948WBUp46dIoYeMfAaVYcMvaquSsOvMPhQucoMv9TwS1QcMvwiFaoAQL7yAOQqB0I2hCwImRAylAYiFUQKhGTbkAQhEcIZCPGKc1fEgjhtK2JgnIJxAkQ0iOMgjoI4YisOwzgI4wCI/SD22Yy9MHbD2OWo2gljO4xtMLbaji1ANtmOjTA2wFhvO9YCWQNjte1YBWSl+2MFkGVeDJcCWQJksXtkEZCFQBYAmedJay6QOUBmO7ZmA5kJZAaQ6UCmAZlqS6YCmWJDJkOZBGUSkAlAJji6xgMZFwIyNgTlcyBjQk2eb3I4yu+xixh8xMBrVB0y+KqQoVeqImQDylVm+KUhW1CiYghFAApVACEfQh6EXOVAyIaQpUwQGSDSQaSBSFUKhCQlOp4SbMUZEPEg4kDE2ooYGKdgnIRxAkY0jGMwjsI4YjMOAzkI5ACM/TD2wdhrO3YD2QVjJ4wdMLbZjq1AtgDZDGQTjA22Yz2QdUDW2o41QFYDWQlkBZDlMJbZkKVAlgBZDGSRDVng2FoAZT6QebZkLpDZjq3ZUGYBmQlkhi2ZDmRaCMpUWzIFymQok6FMAjIxBGRC6Cv/8tXxQMaFoByJ8tu5IoYdqjHsUPWLzzetMvBQpaGHKgy9XGUGHyo1/BIVG35RCECh4RcoH0AegFwAOcoGkKVMG5EBId02pEFIhZACIUmJIBJAnAERDyIORCyI0yBiQJwEcQJENIjjII7ZjCMwDsM4BOMgjAM2Yx+MvTD2wNgNYxeMnTC2w9hmO7YC2QJjM4yNtmMjkPUw1jmu1gJZYztWA1kFZKX7YwWQ5UCWAVkKY4kNWQxkEZCFQBYAmQ9kHpC5mgNkti2ZDWQWkJm2ZAaUGVCmA5mmqUBqAzLFxyuTbcokILW98NwLR6P8dq6I4UcMvqauasMPVRl+ZV0VAMoNP1QGoFQlAELFEIpUCKIAQr7yIORCyAmByLYNWSAyHE3pMNJBpIJIAZEMIkmJMBJgnIERDyMORiyM0zBOwTgJ4wSMaBjHYRyDcRTGYRiHYByEcQDGfhj7YOyBsRvGLhg7YeywHduBbAOyBchm27EJyEYgG4CsB7IOyFoga4CsBrIKyEpH1gogy4EsA7IUyBLH1mIoi4AsdGwtADLflswHMk9zgcwBMhtIaBaUmUBmhIBMBxKaBmUqlKlApoSef+7541Hvtn03YuARw66pq9q31YZeFTL0SlWo3ODLDb5MpSHDLzH8YhUZfmEIQIFNyFcehFwAOcqGkAUhE0KG0iGkQUiFkAIhWUkQEiEk6AyIeBBxIGJBnAYRA+LkbTfdegJEtCPqOIxjMI7COALjMIxDMA56qjoAZB+MvdoDYzeMXTB2wthhO7YD2QZkK4wtjqtNQDYB2QhkgyNrPZC1QNbYkDVAVgFZCWQFkBVAlgNZZkuWQlkCZDGQRbZkEZCFtmQBlPlQ5gOZB2Suo2sOkDmeuGaHgMwKQZkJZSaQGaHnn30+OspvUokYeMTAa+qq9m21oVeFDL5SFSHDLzf4spDhl6rE8Itre+ixIhUCKACQH4KQp1wIORCyIWQpE0QGhHTbkAYiVSkgkkEkgUgEkQDiDIh4EHGKtRWnYcTAOAXjJIxoGNEwjsE4CuMIjMMwDtmOgzAOwNivfTD2wtgDYzeMXTB22o4dQLYD2QZkC4zNMDbbkE1ANgJZb0PWA1kHZC2QNUBWA1kFZCWQlUBW2JLlQJYBWRqCsgTIYiCLtBDKQigLgMwPAZkXAjI3BGSOZgOp7blnnjsZ5TepRAw8YuA1dVX7ttrgq0IGX1nbw40qVA6g3BFUZvildZUAKDb8IsMvrKsAQj6APAC5IQg5ELJCEDIhZEBIVxqIVBApIJKVBCMRRAKIMyDiQcSBiAVxGkQMiFM6CeMEiGgQx0Ec01EYRxxVh2EcgnEQxgEY+2Hsg7EXxh4Yu2HsgrHTduwAsh3INiBbgWwBstmFvgnIRiAbgKwHsg7IOiBrgawBshrIKluyCspKICtsyHIgy0JAlgJZAmSJLVkMZFEIyMIQkAUhIPNDQOaFoJyK8vshIoYeMeyauqp9W+1HfajK4CtDBl+h8hCAMsMvDRl+SV3FEIoAFAIoqCsfQh6EXAg5ALJDELKUCSIDQjqENKWCSAGRDCIJRCKIRBBnFA8jDkQsiFhbcRpGDIxTIE5cc8XVJ0BEgzjumDoG4yiMIzAOwzgE46AOwNgPYx+MvTD2wNgNYxeMnTB2wNjuuNoGZCuQrUC2ANkMZBOQjUA2AFkPY10IyFoga4CsBrIqBGQlkJVAVgBZHoKyDMhSd8lSIEtghBaHgCwKAVkYevbpZ2Oi/H6IiKFHDLumrmrfVht8qMrgK0MGX1FXueGHygCUGn5JXcUAigCECiEUKB9CPoA85ULIgZAdgpAFIRNChtJBpIFIBZGiZBBJIJJAJIJI0BkY8TDiYMTCOG0rYmCcgnESxgkY0ToO5BiQoyCO2IzDMA7BOATjoA4A2Q9kH5C9QPYA2Q1kF5CdMHbC2KHtMLZpK5AtQLYA2WxDNgHZCGQDkA1A1juy1gFZG4KyBspqGKtCQFaGoKyAsgLKchihZe6TZUCWhoAsCUGJjXqz1ZsRQ48YeE1d1b6tzeCrQoZfafAVdZX7thxAWQhAqeGXqDgEoQhAYQhCAYB85UEI5YLIgZANISsEIhNChtJBpIFIBZECIRlCUghEohJgnIERDyMORiyM0zBiQJwCEToJ44TtiAZyHMgxIEeBHIFxGMYhGIdgHIRxAMZ+GPtg7LUde4DshrErZEN2AtkBZDuMbSEgW4FsAbL5R9/54WYgm4BshBHaAGQ9kHW2ZB2QtSEga0JAVgNZFQKyMgRlJZAVISDLQ8889UxcVOs3WkcMPWLQNXVV+7Y2Q68KGXylgYcqQgZfrrKQ4ZcafqjE8IvrKgJQCKAAQCgfQB6AUC6AHGVDyIKQBSFTGSDSIaQpFUIqhBQlg0gCkQgiAUQCiDMg4hUHIhbEaRAxIE6BOKkTME7AiIZxHMYxGEdhHIFxBMZhGId0EMgBIPuB7IexD8ZeGHtg7LYdu2Hs0k4gO4DsALLdhmwDshVIaAuQzUA2A9kEZGMIyAYY60O2ZD2UdUDWhoCsCUFZA2R1CMiqEJT4qFavt4oYesSwa+qqNuz6qnxdZfCVIYOvCBl8eV1lhl8aAlASAlCsIgihQggFAEL5EPIg5IYg5CgbRFYIRCaIDAjpENJCIFJBpCgZRhKMRBAJIRhnYMTDiIMRCyJ0GkYMjFMwTsIInQASDeQ4kGNAjsI4AuOIp6vDQA75efWDQA4AOQBkP5B9QPaGgOwBshvILiC7gOwEsiMEZDuQbSEgW0NAtgDZHAKyKQRkI4wN9QFZH4KyDkhtQNaGnn7y6YSo11u8HjHwiGGHakIGXt2gKl9XGXyloYcqQgZfXleZ4ZeGAJQYfqgYQFEIQKEKABQYfr7yAOQCyAWQo+wQhCxlgsiAkHHV5Vemg0gDkQohBUIKhGQlgUgEkQAhdAZEPIg4ELEQTodAxIA4BeIkiNAJGNEwjoM4ZjNCR2EcgXEExmEdAnIQxkEYB2Dsh7EPRmgvkD0wQruB7IKxy4bshLEjBGQ7jNA227E1BCS0BcjmEIxN9cHYGIKxoT4oiVEtX2sZMfCIQYdqQoZd3aAqX1cZemXI4CtCBl8eMviyukoNP1QCoNjwQ0UAQoUqAJEfgpAHIBdAKAdCNoBQFoRMCKGMKy77XTqMNBCpIEIpMJJBJINIUiKMBBgJIM4oHkYcjFgYodMwYmCcCgE5CeQEjGgY0TCO6xiMYzCOwjgCI3QYyCEgB0NADgDZDyO0D8beEJA9MEK7gYR2AdkZArIjBGR7CMi2EJCt9QHZEgKyub6nGj+VFOXXrkYMuzbDrgkZdnWDqnxdZfCVIUMPVRh8qNzgQ2UqDRl+Scjwiw2/KASgMASgAEB+XXkQQrkgciBkhyBkQQhlQsiAkA4hlAYhVSkgQskwkkCEEmEkwDgDIhQPIw5EHIhYnYYR45iKgXEKxEmdgHECRnQIyHEYx2AcDcE4AiN0GMghGIdsx0EYoQNA9sMI7QsB2Qtjj+NqD4zQbhi76gOyMwRkR31AtoeAbKsPSkqUXyYZMezaDLumPgOvrqvKt7UZemXI0CtCBl8eMviyukoNP1QSglCsIgihQgCFAAqUDyAfQF5duRByQiCylQUjC0SmMkBkQEiHkBaCkAohJQQiWUkgEkEkgkgIgTgDIl5xNiMORqxOwzgNIwbEqRCMkzoB5ASM6BCQ4zCOwTgK4yiMIyEYh0NADoVgHNQBIAeA7AdSG5B92gukNhh7QjB21+c+2QWkNiA763vyiSdTo/yKvIhB12bQNQ2qvu6q6+u6rsrwQ5WGX5uhV9RVbvDlhl4WMvjSukp8WwKgOAShSIUQQgUAQvkA8gCEcgGEciBkh0BkKRNEKANGBoh0pYFIBRFKgZECIllJMEKJMBJgJIA4o3gYoTggcTBidRrGaRgxIE6BCJ2EcQJGKBpI6DiQ4zCOhWAc1REYocMwaoNxSAdh1AbjQF37gdQGYl9de2F8EZA99UFJi/Ir8iKGHTHoUE19Bl7doCpfVxl+qDIEoCJk8OUhgw+VGXyoNGT4JXUVAwgVQQgVQigAEMoHEMoDkGv4oRwAoWwAoSwImSEIGUoHkQ4hTakQQikgUkAkKwlEKBFEIogEnYEQigcRF4IRG4JxGkYoBkboFIyTMEInYISiYYSOwzgWsiHHgByFEToSAnI4BORQCEbooA05CORAfVD21wdkX32NH2+cHuUXf0UMuTZDrmmYYVc3qMrXVQZfWZ/BV4QMvjxk6GX1GXxpyPBLQoZfXFcRgFBhCEQBhPwQhLwQhNwQhJwQhGwIWSEImSEIGSEQ6RDSQhBSIaSEICSHbERSCEYiiIQQiDMhGPEhGHEgQrEwTodgxIRgnArBOBkCcSIEI7o+GMdDMI6FYBytD8iREJTDQGqDcahhQA7WByUzyi/+ihhybQZc0zCDrq7PsKsaVOnrUIXB12bw5XWVGX5thl4aMviSkMEX11Vk+KHCEICCEID8EIS8EIRc5UCoDUK2skBkQcgMgcgIgUhXGohQKohQCowUEMkhEEkhEIkhGAkhGGcUD6M2GHEgYiGETtuK2mDEhGCcquskjNpgnAjBiK4PxvH6YByrD8jRhgE5Uh+UrKimLzaNGHxthlzTMMOurs/Aq86q0vcrDb8iZPihcsMPlYUAhEoNPlRi8KFigw8VhQy/sD4ABXXlQwjlQQjlggjlgMjxFJUNIgtCKBNCbRAyQiDSlQYilAoilAIilAwilAQilAiiNhgJMM6EYMSHYITiYIRiYYROg6gvBkboVAjIyRCM0In6gETXB+R4w4Acq++JRk9kR/nVExHDrc1waxpmyDWqrs+gqxpU6evaDL6iPsMvDxl+WX2GXxoy/JL6DL84ZPBFIYMPFRp8qMDwQ/mGH8oLAcitKwdCKBtCKAtCbRAylQGhNgjpSoNQG4TUEIQUCKFkCKGkEIjEEIiE+mCcCcGIDwGJqw9EbH0wTodAnHZcxdQH41R9ME6eHZAT9UHJifIT9RFDr82Aaxpm0DWqrs+wqxpm6JUNqvB1heGHykMAQmUhAKUhAKGSEITiEIRQEYRQIYBQQQhCfghAKA9AKPcnPwz9JAdAKDsEISsEIZQJIZQBIZQegpEWghFKBRFKARFKDsFICoEIJYZgJIRghM6EYITiQzBCcSEocUBi6wNyuj4gpxXTMCCn6gs/jR7lJ+ojBl2bodacneFWN8yAqxpm0JUNqvB1bYZeXp/Bl4UMvvSLfnJBCYDaDL+4PgBFIQCF9UEoCEHIDwEI5YUg5IYg5IQgZIcAZNUHITMEIaM+EOkhCGn1gUitD0RKfTCSQyCS6gORWB+IhBCMBBBnGgYjvmEw4s4OSGx9jz/2eF6UnxOOGPIXGWjN2Rlu9VlVGfIXGXRlgyp8XWHYofKGGXxZXaUG/0WGXxIy+OIGFQEIFRp+fQUAagOQXx+EvBCE3Pog5NSVDaI2CFl1ZYKoLwNEbRDSG5QGojYQqQ1KgVEbiGQQXwQjqUGJMP4sGAlnB+NMw6AURPnpx4iBf5Fh13xJ1Qb95/3kgioD/yLDrqzPwCvOqtz36ysDUBuA0gaVAKgNQnF9AIrqg1BYVwGE+vJB1JcHor5cELWByKkPRnZdWSDqy4TxRSAy6kqH8UUg0kB8EZDU+mCkNAxIcsNgJH1ZQBIb1ujRRgVRfqYrcuF5F9Rm8BGDrvF085ede361oX+RIVerqmEGXdkwA69omIGXN6jM12WGHyoNGX59Jb4uARAqBlBfEYD6Cn1dCCFUYPj15fs6H0J9eRBCubV9/Tu5MHJCIOrLhlBfFojaIGTWByOjPhDpDYOR1jAYaUptGJCULwtIcsOgFEb5SZWIYX+RIdd8WYZdfXYGXq2qhhl0ZcMMu6I+g65QeX0GXq6yBpUCaFiJ75cYfqi4PghF9QEoUmEIRKigPgj59UHIVx6I+nJB1AYgpz4IOcquD0S2suqDkdkwGBkNA5Gh9LMDknZ2MNKU2jAoxVE+v48Y6p9lqDV/pWp/vtqQG1bl+1UG3bBK36807IZV+H6FIddX7utygw6V1WfYZSqtz7BLVVKfgZeouD5DL1ZRyNBDhfUBKFRBfQAKlF8fiHzlhSDUl+vrXAj15fg6B0TDsn0/G0bDsnw/C0bDMn0/E8aXlQHjL/KLWIqjfFQcMdQ/y0Br/laGW312Blx1dgZdeXaGXXF2Bl5+doZe1jBDL22YwZc0zOCLG2bwRQ0z+MKGGXzB2Rl+/tkZft7ZGX7u2Rl+ztnByP5bQck6u8ceeaw0yqeSEQP+iwy45m9l2NVfloFXfUmVhv4XGXrF2Rl8+VmVGf7ZlQL4swCUnFUxhLMrAvFnQSg8OwgFX1I+iL8IRN6XBSP3bwUj58v6T5THn4wY7pdVY7h/M4Ou/htVff+b36sy9LOrNPSzqzD4L6vc8P8iwy87OwClZweg5EsqhvAXQSj6kgpBfFkFIP5a+TD+ZjDy/lpQyqJ8ABYx/C/NwGv+XoZe/dcy/GpVnR2AKlWeHYBKVZwdgAqVnx2EcpU1DEKZSs8ORKlKzg5EiYrPDkaxis4ORpEK/1pACv5eQPL/Wo8+/Gh5lNf6iKH91Qyu5h/NMKv/VoZa9fcy4Mq/lkFX/LUMu/yvZeBlfy1DL/17ASj5W0Eo/kcCUayivxWUiii/XjhikH83w6z5r2Sw1f9Ihlz19zLsyr+XoVf8vQy//O9l+GX/SBBK/yuBKPlHglIZ5bk4Yth/NwOu+e9k4NX/aAZf9Y9k+JX/SAAq/pEglP+jgSj77wSk9B/pP1H84u5vfOWb+sZ/pRrD+59Ubaj/naoM+b9apYH/d6ow/P9J5RD+y/kdDVVRbvuIAf+3Mtia/40MukbV/5MMvup/EoDK/61gVPx3e+ShR6qjrEvEMP7XM6Caf2YGWv3PysCrVfX/RlBqovyfiOH9UzO8iGr+b+7fo75SUzf8APBP6wsUf9PIP6+v/BP/Xv/Mf67/nb9XWJLa3zT0yIOP/P/9XzKD4PH/ABYzZXBSXEBtAAAAAElFTkSuQmCC)",height:"101px",left:"47px",top:"47px",width:"101px"},ADVWHEEL:{background:xui.browser.ie6?null:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAADDCAYAAAA/f6WqAAAAB3RJTUUH1gcOCDIojJpTggAALYlJREFUeNrtnXmYHUW58H9V1WdmMtlDQtijSSDKorLovRAWAwqyiBJugoCK6CfqRdSLityLkIsiF9SIyqIsRhZBlu+TK0JEQBBFUEAEZQ9LgkCABBPIJJnMdFd9f5wzM2d6qrqr+/SZmUy6nqef06e6z9Ld76/epd6qgrKUpSxlKUtZylKWspSlLGVxF1HeguKLAQmTp0JlOuitQU+BaHJ105NBj4JoDEQKolYwoxAmQtKBxKBYi6ITxWokK1GsQPI6ilcQLEWxjBfpFGDKu13CMBwEXsA2bTB+BzA7Qbgz6B0hmgl6GugxEAG6tkX0va/fr70XBhQgqb72bLb3kgjFy0ieQ/EUiscQPErAo/yNlaL6pWUpYWia8Cv4l21BzwYzG6K9IHo7mBarcPcTfG0BwROGNED67xsUy5E8gOSPBNyD5mH+VGqREoaGhX+/KSD3h+j9EL231uILt+AnaYACYcgCiKADxZ+R3IHgNlp4jFvpKuEoYUgBYL8A2mYB80AfDGZXiCp+gu8CwXY8AYaigHABInkJyW+R3Mga7uBu1pZglDDUAJinIJoOZh5ER0L0LjDSLsjaQ9BThN5VlwZDEUD0hwIkK1DcguQ61vN7cTPrShg2Sef3Q+Nh1GGgPwF6X9CV/K2/zghCThgaAUWmOuXLEPwcxZW8wBJxN2EJw4g3g6btCOLTEM0DPdXd6usMTnAW08hxrB4Gl3AH/YR3YF3Pq+08l3YIYucJulH8HskiWrlJXERHCcOIguC4NmjbB6KTQB8EumWgIOuMwp0Vjoww2IAIKN6UkgM0RP37JUguJeBKfshrI923ECMbghPaITgMzMmg31ONBLkEX3uaP41C4DgnDkMQa8HjMKiCwZBOvwIUKxFcTsAFLOQfI7UfQ4xMCL48GsLDgK+A3qNP2NNMH90kCNLMJgcMPj6ELxg2gQ88YOj/ugrJIgQX0MYL4syRBYUYWRCc1AptBwFngN7dHQnKA4GPo5xUlwJLEgxZBD5wCH1WcylZW6xCcAkB3xdn8koJw7CCYIGEaCcwZ4I+HLRyh0V9Wn2dQ6C1p4lUAAxJgGQxpdIiTK7XvnOXYvgGa7heLGTtxi5HcuMH4VtTQJ4N8o8gjwChqozXb5KBdSQcc21g/245NO2K628Iy99JuwwRuwyfWyh4CwGL2IxbzDnsba5HlTAMkUlk+NZc0PeA+BrIsenSkf50/QBwSdww1Pu+ly499utva/9z9kNwGy/wPfNttihhGDQIEIZzt4dtLgd5PcgdskGQZ8Mi/Hm+owmCPRSbDRbJKARfoMI95gfMNwtoK2Form/QBucdD8EfQH4EpHILv3S85tEOvsJdMBhZv6Z5gu7WEvE2SDEDyTVswU/NhWxbwtAUEH6wDUy+FOSlIKfadLW/VpANCn+jrX9B5lWjFl6WWyQTXgfWKeAjVLjL/ITDzAKCEoZCIJinDD/+AAR3gvgoSJluFskM2sH2HUU1szmBSPu478/JDIKfdgvTbqe0tkkzENzAWznHXMTEEoaGQLi4HQ78Ksj/C2p71x3P1pTZzofGfQhvqTZAN9AJrK1tbwJravvrgK5azNX9dUWYSdIRQUozh4SHU913bhuSLzOGX5irmDXc4w3DFISfbgFiIURHV9MojKW/QJPcsZanL8GzX8C5hRFE6yFcD3otRMsgeh7ClyH8J4SrIHoD9Bro6qyez3qgQkArCoVkDAHjUYwnYBIBUwiYRsAMFJuhaEPRTkCFAJHYv5Clv6K+r0KSrWNOpuz3ZMbC51DcJuZbYC9hsIFwza6gL4NoN7fw+/QupwHQQCdZddMQroNoNURPQPgg6Ceg+3nQS+GZ5YJiH7qZzngqbIdkOhVmongHinejmErAWAIquTvusiT3JeUyJQPSAfw3a7hQHE9nCYM7WiRh54MgvAz0VunCn0cz5Emr6N0MhJ0QrYDoftB3QfgIrH9M8MjqIbtv+xHQxUwUO6PYE8X+KKahGEeAStQasgEgkjTDQK1QX6cRXIThdHEEq0sYBoDwYAWWfRKib4MZlw5AxEDTqdG0bBcA0TqIXoDoFtC/gbV/EdyzatiamPsRUOHtVJhNhblI3oViEgHKy4RKy4LtEe7AA4Iks0lwM4bPig/yUglDLwg3tYM+tbZV0k2jpHyjJCiSxigPgKATwuerAES3QHS/4OaNblikAcFcZqI4AMlcAnZHMYGgFgBNM5V8/Qfbe5noP/TUP4Tgo+JAntjkYTDcNQY6zgZ9YnXscSMQZMlGtYKgQa+E6G4Ir4aOOwU3rWGEFAOSY9iJVo5EMg/FTBQtmf0IHxCUFwg9GmIJAUeJ9/LXTRYGw+3jofs8MJ/oP/CmZzMeplIaCF7aIaqZQdfChqsEVz3BCC/mWMYxhkNRnIDi3QS0o2qRKVfqt8wAhy8Q9ZEmwTHsx31DNaJODB0It04C9SPQ8/3MoiwOs7dmiEA/B9Fl0HWV4JLlbGLFzKOFrZiD4osE7ItktNOx9knz9neibdtyJB9nL347FECIoQHh9vGgLqmCYAoEwXuEmga9DKJFsP4ywUWvsIkXcwIVJvF+JCfXIlLtmUFQHjCkA/EaAUeKPbhnxMNg+NM46Dof9Mft5lBen8ErgmQgehX05dB5keB7/6As/Z/PSbQynkNp4atIdkfV9Vv4hliTzKN0cwkEL6GYL3bj3hELg+E3o2H098CcMBAA4wGAacA8CteCvhHEtwVn/L0U+5Rn9TXGM4GPIjkZyVt7e7obgcEHhD4gliGZK97JQyMOhmo/QvhNMKf0OcvGA4asKRgDHGZd7RXWC6Dzl4Izw1LUMzy3bzMDxQICjkTRnjjnUp6+BjsIPftP08LBYhbPjRgYqj3LH/wcmO+DDuwANAKDE4Q3wFwF684RfP2lUrRzPr+LqbCBuSjOQPE2VK2PwqdHOq926APiHhRzxQ6s2OhhqE7l+JcPgrgazJhk08jk1AoDHGYN0eNVLfT6bwRnlusVFPEsz2crWvgGAcegGOXVz5A9olSVStUPiJ8zhk+LLZs76cAgwPD4bhAthmiqn5/gA0RSx1vYCdENoE8TnFg6yM3QEq18FMkCJNv19k34RpOy+A19GsIgOJdlnC7mNG8OWNFcEJ6dCht+DXpXf7PIBwhnROk10N+AsZcK5neVotvEZ3s576CFHxKwNxLlBUNWEPqbSxsQfIptuUaI5vRBiOaB8GA7jF0E+qg+4faFISsQkQH9GIRfEHzirlJUBwmIq5lMC2ehOA5FW2KOUh4QBg4tXYnkELEVDzTjemRzQDASJn4J5Dz7lamMdyHxPA3yTlAfLkEY3CKOZSUv80UkZyB5I5ew26fHt4OkmIzgJ+bV5kxH06Rhny8cAPK06nhlm1clPO6KV1MSgrwO5NGCo58txXMIgPgiG/grCxGchOTV1MemUh6zcoLQE87dBcV3jaFl2JtJhqVbgrwLzCy3aZSlw81pGnXXcopOEczvKMVyGJhNt3EIkh+j2DZRoPOYSf3NpYiAzzCORUXmMMliQTAVqJwLalZygFmQX59KQG4AdR50fbkEYRhpiQNZjORjSJ5FYgqNLPUXJYXgf1jDTsPYTHrtGFBHu+cOSRsB4nVX1oH4FnScLpi/vhTBYQbE/tyN4WgUj6NiQLh6q33Npv7t6RQCLjCG0cPOTDL8cxroe6tjl02CWZQUUTIpppHeANHZIM4WzCnTKoazyXQ/uyK4DslMJKKBHuiBnXD9X79Che8VEW4VxYBgAlh9OZhj7RAYTxCiBP8h6gJzLrx8Vk8fgjGm7FkeIgXgPCBE7zHzAO8h4OcopjtGuKXHVUTKvmAVitlCND5stCAY3vww6BuAYKDwpznNPs6zCUFfDOu+IpjTO72IMaZrOFz/EP32UH7eCwYA8zD7U+FqJFvk6ltwOdK1VyPACBZLmCsEG4ZUGAxvbAbqPjDb24U/i3awwRLpaup15/GCvfuNRzbGrB3EaxcFnCMG+f8U9d+8/3scBgDzGEehuATFuLpVRf1iKo75XI3oe9WgNRzfKrhyyGAwGAFd3wR9mlsT2LSEC4q4mRSZ6voL+kjBbgOyFo0xqxoQNNEEYRVDCEqzrj9TnRUGEDzDSQjO7ddT7asZ7NogLllLu+A940T+7NYGYejcEeR91XmOkkwjHy1h1Q7PAIcKdnza+vvGrMhwTWIQIRGD9Ps+5zb7+0TMTJL2Z0XAUhYScGJvLpMtUzVhlu8ebaCFs4n9zhj4Wl5nWuQHwQTA9aCPSIYgyTxKNJlWgT5G8LZbnf/BmJcyPsyGH3ZOYRMb0ffn+S6RBgOAWck4urgBwfv7RZg8zCPTZxINkKq6/Y4QZk8S/G1QYejGHCzhJoEJql+SVytY07i7QP8nzDgvqYfRGLM06cEU8XBzfGeW80WD/6VZv5P7s0kwAJgXmEkri1Fs7wVB7dvi2iDBAP/VJDhCiOxz3IqcWqHSBXdK2Lsn3bz6ZYb8TrSp9xOuh67jBDskRgeMMUsyCE8RIOQVHFHQ8WYJtiiqLg0GAPMah1LhWiRjXH5CzEFOBaFOokIFcyaJ7LNr5IKhE3OogZskyP5T9Zve1+waofczS2D9+wQzXki9qcY8nvGBNyqAIid8RQleoYLr8epzLDsMBsEazkVwci21YgAIBn8QLFAsngqHZ9UOIo9WWAt3ippWsK9lUa8pMmmItaCPFWzxS6//YswjOYRBDJJgFfm5Is91fdanEUl69YYBwKxiAi3cgmLPHv/B5SBnAaFWFxrYf2vBH7LIdua1tt6EA4G96gEwdSBU90Vd0pOqQVF/po69CqqhYnE5XPirTK5L9pasaIHJKrB5fyuPgMbPNY738f363zEpdfWf92+FJ7LarOVkJL9GMdFYTKKsENTVBxr+0xj+KAS6KZrBYNQquF3AHJ8lhWXMfErWCtHTEOwnGOM9u50x5r6M2iDPa14zwxe0PN8lMv5n399Nq3Mdr3egMy2MbgxnaTjVgGoEBEtdGMLsGYL7m6IZVsBeAvZ1aYX6OtnvmKgBIeu0RD+tsAHU1wXtWad57M7Q0mcRwqyCluXz3oLlccz3901KnU+jaSz31hQQmfyuhkM07OobezR+YATAfxjDMb79Dt4wLMBIAyebatcIWACoh8JlOonavug7y4BcDC035orwNi6kaQLrC1bS7+eBQWT8ftt7E9tPOm6DxniYTA0VIVjdaTjDwPUaRukcELhMJgMffgpmAU8WaiYtx+xk4CEBLVmWDXavvdnrZP8T5P4C8UhmZ96YW5uh6nEvKisyAiRShDftu/N+n0i5bt/PCs//Vu9Aq+zPEdUB1xo4Uldbx8TwqQcEvceBC94mOKlQzRDCcS4Q4k2MTNAUfa8CAVohFuUBIaYZsgp9ViH0FTAfOLK+9xXGrIIsPZzjNIe5kKxfIYjWGM6MYH8NkzxCp17mUm37yNOG03YQvFkIDC9h2rvhWN81to0HJLXXVzfADxq4j905W/9mtqJ5W9ws/62+Tub8j9oRZRIpPoMrgtQQGGMFj64wXGPgRBPTDnm0Qt02eT0cAVyR9h+8YsKdVQdnqyyrISettRlVNY0O4ZLRiBcbhCFtCxPeh3Vbt2PftnUn1MUuc0Bd5FnnM0OCsfVaWupMhjrXhuUVhzOdq2j4voaVPstP+ixNWXdxn1xg0mU9lWaDEc/AzQIOyboAfXK4lZcE7DYW8Vrem2eM+VmDtrpPnSiotZc5fzvtPJnhs83aeq8tj8/QzwoxLNTwHz3awaYRyKYZalY+79xN8HhDZtKTsKWAA7LecekwnUxfJ+MVExsAoVa6ChTWLALo+9n649rzvKy32uQUXhP7vUb6pgrzH9bDjyvwSQMTsoRUiYFC/+OBgY8AZzRkJkUwV0OrzzKBOkF9xepWGbikgHvXnWNLM3fClM/4mlKhxUxy1UU5N98pyxOTwVLMpbgJFD9WqKk0U7Akgv8XgklamNhncYLYNv96g8qtGQxGPArzohzOsnBrBiPguimIZQXAEGYMS+Zp/X1b86Tv0I46mxbQHorWdcttXUDxvlBivyFjTrUcaMoPiDzFHehCx5ILuEDDRzSMzuEwD6C49vkdtoJdgQdzwfAIvEXAnjQgMZantl7CTwu6b90Z4+CNCr/M4A+k1aWZTtKjnZEOgdcOv0J71NmAMI4IeVNMpbfAI0/CHzUcaHJA4NgEcFRuGCI4TEDFN/aX9LTqDNS/bE1h63R1eQiqLxTS47hO+WzSucIhpGk2vchwjsvfMAxMLtYJmiEOhImBEBd+U6R2EALzqOEKA3M0VBqBIGbXfcgYTnGlZyTAYISBg4yj6ZUWMGwSEXtaoYFFAqEL1AxZW+8iIi8yQ4svE0wXFxw6BRjpMImwdO2kQU0KEMLiI8TrmjHlzk0hvGxgWh4AtCUWbGDGHbA98HQmGB6EURHs49IEJqWu3siseyKvATcWeMO6M9jwPnUyIxB4tPARfhkrLnPIODSCsfgCBnvOpIx1ssXNJCyaAIcTLYrWBLays6DjL4ZrIjiVujBr1s6Q2DGp4f2ZYeiCvYBxcS3gep8ERt3+r3dAvFHgPQubHGOXnsddLbm27MuYA+0j+PH38dBo/HbLmBYwlscU1xRxhU6d7yoHwzyymOk3aviSgVG+ppAjtFoPyYHAhZlgiOB9OLSASdEIWJ4w0CXgfwu+X12DJPhJpk7asA6RAIF2QCUTQLAlBUsGZs9Lh2kUb8fiZpELgDgEJmYuFQ7GUnhoK3gW2NnDH3Bpg/j+fosNrYdYZt8LXP5CBPvkyTwz7qZ6JVD0yjrdBdr5WTSCfbRr8nHtcaxeqHVCJ5kruiMtoU8bFDJmHtnqfGWsaZphviD6g+EXGnbq6ZHGw0ewmUx1x8dreBfwZy8YfgPtGnbzScK33X2Hl7p4d8TaYQCDSGjls9S5nF9bK+8KXwrHvq7TDjZzxWYyxf2GtDoXEMbS2rvqbB1yhZYQfmXgq9TGOvjAQLp22NsbBgF7aGhzAeBrMtVHkTTc0YTGo5viHN1GWn7XexcIwmLX21p9bdEA2qEdbEJvYvuqTm6wdNTVD04nBqgLCNFkLfFwBK8Ab9X+plCaQz0bWBj/IVc6xt6+XeEJ3d/1+QbrgN81CQafbFVbmoUt/SIpJSNL+kVaykZStmpIcpqGLRlYk57x6lp02zXs2KfjtynaoL7MEYQh3OFzM9Lq627WXrYs1sChmt5ta/mT6lL8i0dnI14dIs2Q1fzx0R6S9AF9OsEk0rFzjeO4TQu4Wn1jCY/aepJtDaC0aAzfKGbTp/XX8DsDx9fGNXs50ZCYXLX5DJgGPJ8CgxEadrGZRXFV4vIbLHD8sUn3qSgYpKf5IzPAIRMAS1q+Ly26Y1KO9dQpiwAnJWbGv98XjKZrhxDuN9XIYeDjJJMCRrWTm11SYVgMY7urOUkDhD5tigTHFBKhhD81EYYsznCaRiAmnHgKc2Spiwusy4GWFqfZJuz1Ah73H+LPXaaYwRY3sZ+fEAfL1gs9KCAAHA7P/gKWAzOSWn0PjVD/fhfgpkQYumFHXXcT07SCSIFBQOf6hOSogmDI6+SKlNbbt+X3eXUtyJTU0tvMJOlwklXsNa01t2mGJCjSvqdpUAiBud5wXxyGJMHXjj9WV79zqs/QBbu4Jh8yDhhSzKkXDod/DLKZJGksWlSE8MsEPyIu7PHlOXQCLEmmT1aNYNMOtkiWtsDBYJpLEdwr4JiehjpN8E1CzLd2MekwGNhe4zcHYhIMddri73X9JUMBQ5L5k0X4XX6AzZySHr6By0ewQSBJnxVFZdQEceWuU4AwGeSt8GLgqbAaYWvJoQUG/LkQZi4wyDPrpp8MLM7KdNdIDiyhA+k4Vvu8MSSPOx0EMylJ+NPMpEY1RBoItgVeXVDUH7OdB96ZzE67P2lGwqwTBBStGZ6Oqs/bG4YUWtu2hq2AF50waJhuPIWfBGh07zX4zWaWs3Q5hNRX+Mkh8FkiQ2mtv80kskWNkjrS6h+FItuQTNss0EkAJGmKppaPwUs/gVVQXQTdVz3phJsgYXoiDBFMT1oYIGl+QYs5FZpY+KoJmsFX+H3Mn0Yd4qSl+RTJS3271rGJawRXNoJ0+JQueUlacUg6zCWRYno1rwhMZFgCbJOh9U/09HUVht9bYfgpZoKGcSIh3ECC1rDMQBUKeKGJtygkexKdzOEwZzWFbFBoS51J0BhJGkHG4LBFler3SXhUrnTzeJdRnghV0Z1vzxmYYzyFPUkl1gh/i9OB7obNlaNHsSeYnhGGtR9vTs9zWj9DHi2RxfxpxDeIw5CkGWy+gcrQ+vtGkbAIvw8Ag6ohwioM/Xq9jR0aLxvRwBQnDBo2czUhUcpdtMFgmhdSTfIZfNIlmgmDzFCXpBHix5VFOxiHlqjvc3A5uq7Hlzbm2qSEe5vZ8r0o+oIJia2+cUel6vc3S4Jhiklu6Z130mZKGXi9yTB0F+An5DGRfPyEtDqfTVn6FOJ1PmaRSdEMPhDYhH9Qi4FV2gMGl3awhNDcmiGEKfEBtFlAIBaSYOhgyGMa5QmRpqxl3/BmUuqUBYI0c8k42jkXCPFxGTLFRGvmw14t6uTcpAh82p/SSTAIGOPzJcLjeA2mfzbfjMzkM8iMmsKnTnn6DMpyXFmO+8IQd55VgqaoN5mIWb1xS9g2e0fS4J9BC7GGsEp6wpCmHWplTJJmaBd+Qu7llQ0CDF0ZQqZJHWl5o0eupDtf/yAeMq2HQqXAYNMIqgEHuh4KYemDiHcADnrnWxesrtRk3PeHUhr3dicMUW0xEtedynqlBlYPIzMpr/BnjRjZWvk0bRDV7RuH8yxjEOAAIwkSm0kU1WkL11iMLDO0NLO8GTb4OzEbstUJgwEV75ExBf3wRghDI0BozwhRvIdZxLSFzVwyjqhSHJKefeVW3APg0HVQRHV19Vt8xr1B8xnWgWmluNFEJnZv4tGksUX2kWhYOwxgaDSvKClalOQfiDqhttW5IDEOAJKiS1giTGmCqiymURIIrmGgg1baYW036AK/MtFnKKwIiv3X1t8Q1WkqjTHC0cq6Jgo3jtbYNnAm3hoL0meOiMcZXIm9NoESObp00pa50ikhU+FpGhEDgsEGImrid8d9ho4Cv1tSS6rayMugjPMti5eZNNrkG6vhKmuSzKRQDAXuZSmLR+kEERT0XcISfY3D0FWUM1w7f0L5CMtSYBnXXR3Mn1lVO2zPDUkwrDN+Qp56Tm2bVD6/shQYLZkga2aSaACCumPrUn2GRoCIeYQlDGUprIQwUYIUHoIO9lXfY7La4YQhhBW+wWPjAYOwZMGWpSwNRDImRHUwJAFhG3IQ1xgGVjhhMLAi/gU6Iwyx8aglDGUprGiYSCyaJNyC7mM2rUjyGV7Pkh/uMcRu2/IRlqWo0gXbKA8YpKf/EB9iIGM+w2tR3fq78Vlssy5MHMLoT2Gmlo+xLAVphukhiLwLZlvqVjhh+AFitYY3fRahTlsgvbYFErYrH2NZCnKgp4f5hH7Ae1PdX5qoUSJ4rj4RxWf6b9vc6rX9IIS3lo+xLAV4z6Jngrs0INJAqJua/jmnz0DfCbu6/ACT7DDH/QcFvK18kmVptHwAtg5hou/M8Lb38c465QNDmmOcYWo/AexYPsqyNFoE7BBCRVqE3DXLQdLMkEDnLHg5EYYIluTQAE5IDOwCRjRxvtWybBJWErM0BMYTBkHyFKkCnqmfZ9XlM/zdZmuZDL5DbNvusDLEWpbGI0l7hSDzLGOlLT5DCI/Gf8M28fDjom4kU5oWSBsIq6EtgD1o7sx6ZRnhznMEe9q0QNos8HFtIfrkcgAMAzTD1bBGw1JfLZAUau2JKEXwr+UTLUvesi/MDGHLyDOSpD00h4G/p2oGEEZj/m5is3H7agTHvIezy0dalrwlgncLaPFYO3CABnDUmdACg3T8+AO2tVKT1lpN6X/Yef+yJ7os+WF4r65aGF5ZETZZjdW9djss84KhG+7J28XtOK9dwHvLx1qWHP5CEMH7fHqeM6QN3YsYmINqhWEtPKih00VXGomWLdDwvvLJliVr2RXeFcEWEf5awOXL1smndSlmKwy3w7oIHtIeP5ghxHrIOzCjy8dbliwlhA9G0JY3Mc8GRwj3eMNQdaL5g2/Sk6c3P3k0zCkfb1kymEhKw9zIkqmqM8hkTDu88Qo8nAEGCOGOPFohwZxq0fDh8gmXxbfsALtpmOHrC6TJaO393c+I/hMBpMKwEu4Na+ncOoXKDI7LwbtjxpePuSw+RcMRcRMpTdZ0SuPcDbe5fs8Jw19gvYY/pNlfaZGlWBRg8xCOKB9zWdLKFMOYCI6JEgbzJDXEDi2hu+D2zDCAMBH8JgsAOj36FETwKTCyfNxlSSqtcHgEW2VxmD3k89m/1RJRM8IAGm7W0K09QlgZPP3dZsFu5eMuS4LjLDQcF0El7xBPW8Mcwi8R7klfEmH4AywN4b5GQqqWPzVKw/HlEy+L00SCd4YwO0tOXJK5VNuMgeuSfjfFXBFGww05+hSSHBsRwVFvwUwrH3tZbCWEz2to90nP9oGkduzpR+GvDcAAG+AXEWxw+QRpuUsOWidqOKF87GWJl7GG7Q0cmda3kLUhDuF6RPKM9qkw/BWWR/Bbn8hRBnNKRnDcVMzm5eMvS393gc9GMD7J1HbJXEJiXmjg2rTf9ojqCKPhp0k/6mO3Weq2BP69fPxl6Y0gGWaE8DENIq1T1wWItoNy7zPwZAEwwKuwOISXfbSDT1Jf7ZjUcMIkzDalGJSl5it8ScPkLAN1fML7ISyyZanmgmE5Yp2Gq3WCNvDJUbJc2FQNXyzFoCwYdtaxTra0ccyefWAr18KNPn9B+v9XroigK01FaT8I6n2HT7Zj3llKwyYNggKxwMDEPONmUhroa/8peLNQGJ6AJzQsTnJefHunLZGlBWCCUio21aIOBnUoKEHNntGe1oUmscOtsxsu9P0XGdIihI5gYQRRXtPIEXUSGg5RZc7SpqoVJkDlG6BG1a8KbGpQRBmgsIDxv6/DU02AAZ6D+wz83icnJCkcZoGj1cBZYLYopWNTK2O/AuodVQjiW34oNITdcF5S+kVDMICIumGhri547kWo9gREw0wEXy+T+DYlrTD2X0D9OyhVD8DANePFgImw00x0Dbe/CQ9m+TuZBe8luE3DvQlEeneU9E4PLgCFRPEJWvhgKSWbAgjjJ0Dr90BN6A9B0tYfioSGOOyC//EJpzYEA4juLjgnimmHtE4Q2zFDrCFQjEbxHdpMuabDyPYTBIz6L1D/Ul2izaUVlONV9E536rBEbuuEe7P+rVwmyco67ZBmFrmAQFiuu7rNpMK3wbSWUjNSy9aHgPpcn3kkGQiESgGiCoVF3sKoqhWiQYEBRHcEZ2sIPXNDel+NsFxb/2sXKI5gIp+vnV2WEaUVtpkJwXmgxgzUADIHEH1Q1GRscQj35flruZ3VVXB7BL/yBaFXG7iut399CwGnMYWDSukZSSDMHAejLoRg5sBWUGY0ldQALWGgw8DpebRCQzCACDV8vX4NOBcIA7SBdJpI9dtEAs5nK7NDKUUjwk8IIPgmyAP6/ATpEGwfEGzniB9hmUN1EGCADngihPNdDnSvg5x0HQp3IxEwg4DL2MJMKaVpY3eYdzkR1Akglbt1lwnvU02lpWC+k6VfoVAYQJgNcF4ES5wmkXQArxLuRX//YTaj+RGzzNhSqjbWsut8kN8A1ebWCK79JEHq/R4NagGi/1K2gwwDgHhdwyk9znSiNvABYOB9kUg+BJzDNNNWCtbGphXesz+o70MwLtlOTmo1U0Ott0LndQ1LckFXHACXIzi2F2TXqxwQCPAAH5B0ITmXiLN4XHSVUrYxgPCv7wHxc9DTk3NLezbj2K9/b2L7ehVEsxEdTzT6dwtKfRAhcBqSl1Odf5ViMrn8CEULklNo49Qyw3VjAGHfXaHyM1Bvdbf8MqN2sGkJvgUdTxYixYXegIo5DsllCIIBrb5oSCvUb+tQnMMazi01xHAF4YB3g74czNtBC/dQMJOiHVzaovf1blhxKIK1ww8GTIVWfoLiY06hrzebVAoc7kDDBiQ/IOK/+ZNYX0rfcALhA/uB/gmY6RAJP/PIx1SKgxCtAPZHvPpoUX+9+B7edrMlkruQzLICIHNuAzVlN4pL0XyNu0VHKYXDAYRDDwF+DHpbv6kj8voMOoLoM7B8USOh1Cb5DHVlnViO5CQk65w97Ao/MzKpj0JSQXICLVzCB8p+iKGFAImZ+zGoLAK1rZ8vkGYPi6Rj18Lyq4oEoTmaoXp3JJM4Fck3kUjvaJJKMKHc7zWKu9B8hlvFs6VkDrpZ1ArjvwD6NIjGJw/Vr2/lXT6DTvIRAP13iA5ELHul6EtpYiKcaWdzfoLkI4l+gfBsQJL7JgySxwj4Ar8Qd5USOlggHD0Z1FkQHgemLXlmrSjFUfYymVZCeAji+QeacTnNzQrd3ExF8WsUu2aKIPmAYDefXkPyDeBSbigjTc0F4VPvgOiHoPeGSPkBkAWIATBsAP0peOqaos2jwYEBYEuzGwGLUUzNBYMrf8vdMdmJ4gYqnMbl4h+l1BYNwQkV4KNgFkC0XTV0GnkKvy8QA+oMROfCE6cjCJt1ac0fb7ycvwInIOjI5E8lgZD8mTYkx2JYzPHm4HJMdZEgnLgVVH4E6kKQ06rZp42qea8OqGuhclYzQRgczdDjUM/gc0i+j6x1yCkPLZElodFuOr1BwFUYzuFi8VIpzY1ogzFzITod9NtBS/c8FT7h1DTtUP8+ugfMXMTDK5p9mYM4ksxUmMU3UZyCROTqgfaBYWDqh0bxBJIFPMIvuVuEpXRneWxfmQFqAegjIWpPXrfJd1pqb4f5adAHIx58bjAudXCHVU41o5nMQhSfyeQ7pCU7puVBVffXIrkRwXf4rvhbKeVpEHxtPLR+FPTJEL21rzc5bUFknxU80mDQgFkGG+Yi/vLQYF3y4I8xnmnGMZrzkXy8KTAkgaEwKF5FcgVwId8qHeyBEPygFToOheiroHcHXUmd8N1r33iYT72pFi9CdBTivnsH89KHZsD97mY8cAmS+Q050T6v9jEjmoBlKBbRymWcIl4pIbi4Ah3vh+hkiPasmkQ+k/7oHBoicXsNuo9E/PGewb4FQzf7xI5mEmP4ESoBCIV/eobKAEPfFqF4DsllGH7G18TLmx4EC1pg8hzQXwS9L0Sjk9dj8lkZPC8I0XKIPga/u7NZfQnDE4YeDdHK91Ac3+tUZ8tPyqYVJBBYz4kI+AeKa5FcyYniiZEPwcXjQR4K0Qmg96g5xyLdJEozl9I63FwdbdEyMMcgbrt3qG7J0M9LtJ8Zg+FsJCfWhnjm8x3ShtbWw+AaVBSgkbyO4ncEXI3mTv6PWDOCtICE7XcCcySE80HPgKjFb7W+PP5CUii1X27SEgiPQtz616G8PcNjkq7dTTvjORXJqSgqDadlpDvS/evsgHQS8DyKW2jhFlq5n8PFuo0PAAT8aiZ0HwDhXAh3Bz0BIpm+IJSPv5AlH8m6PQTRsYibnxzqWzV8Zqzb3VSYxCeRfJuAcdbsVd/UjCwgpG8GxToULxBwCxVuw/Agh4lVwxeAuwII3w7de4M+AqJ3gZ4EofJbB8d3xbQsZpJthFt0M2z4LOKWYdEhOsymbzSSgzkIyWUotvLWCD490kEKIGlb0AtGJ4oVVHgAyV0EPIzgcfYZQjjMXQGMnQnrdwG9J0RzQE+DaFwVgKzLimfRCLk62zToi8B8HXHDG8NF+obnXKaHm10RXIZit960DZXDf0gPsbocahsItjpd0xpvEPAEAQ8geBLJc7SzlO1ZjhBRsYL/7HhgO+icDnp7CN8B+t0Qbg7hWIgq/QU1xHsxYnyXFvTRDM76DogWwMsXIe7uHE5iN3wn9j3EbMEoFqI4ul+kKW9vdJpjbRN86YAhSAQmQtFJhXW1Xu9lKJ6nhZeR/JOAVSjeoMIaJJ0ERFRYD90VoLWaDt01ttqqMx7CSRBOgXAaRDMg2gx0G4TtNcEX/YU6JB8MWcOoefoVomXQ/Tnovg1xQzTcRG54z3J9mGlnNCchOR3F6NwzEPoAoRJ8i8BTawQJwFToW5kpIKyFc6PauRFSi5pTK6A7AK2qYEQJQu1zLKtfkBY9ytvrHP2u6h9c/dRwFbfhnd58s1iH5rso/g3BEufEAj4Tl9XXxetdm8859ZuruRH93guggqANwWgEo4FxwFhgNNAOoqWGTsIX2Y75bDLjcdeNTdvvPb8TxELonDucQRj+MADcICJ+Jm5Fsz+CnyHQqc8r6bnLjLLhC4DrOwtX2PEfLwqSLDcnDYLeumdBzoOnTkVcs2q4i9rGM/DlavEihk8j+TSCV1PHhAjPBi1N0PPIkI+si0aAiJ+T96JkxgtMaoX6HYuqM1hEcxAX3oy4e6NIm9+4RoFdITq5lJ8C+yC4FkHopamFBxBpWiSTICfIrMj6wSwfEgVtPjfK2co8A+IYWH084kcbVVbwRjgkUhguFktQfALDUcDTTm2Q10zOoiFkgq8hizCZ6h+Va8ur2ijoJklArgfxQzD7IBZej7iic2OTrI13fPD5YgMXiF8QsTdwLoI1drO1yT7C8G44CtYYTrV7N5gD4ZmTEd/daNPhN/7B8ueLFYzmv4DZtZFsUaYGrSi/YVgIfpKN53uhMov2WArmk9BxKOJb9wzHvoOR08+QtZxkWpnAgQScgWSP1MxWnzEPPkl+efKeBnwuS85QWkeZz3FXz7JXZ9oqiC6B6DzEaa+OFPEZmUvLftmMZhKHIvkqkj1S0zTyJPVlzW+SRcGgyZdg10iaRVQHgV4E0fnQ8Q/EmXokic3IXmd5gWlnFIdR4WQk70HV0jp8YZAFgWFLEvSGIQ0Cn9Zfe9QlQrASwsthwwUjEYJNA4Y+KNqYyD4oTkJyUG0VIP90jaxp4ElawAmUT1pEoxAknWeFYQmYS2HdlfDF1xDCjGQx2TRg6IMiYHN2pMKngXkETE1cilfGWnJJtoFCSblNMg0G3YAfkPZdtvN684i6Qd9dNYc6foX4/Caz9sWmBUNvMYLzGM84DiPgEyj27R1h55vlakv/lp5aIBWGNBB8tUgmv2AZRD8HcSU8uQRx5iY32domCkNdud4oupmOZB6KI1G8C4nM5UNk9SlkVhiS6vOkYEcrILoFzHVQ+T3i8HWbsiiUMNSXu0zASmZR4d+QHFwbXFTJPAVNnjqpG2z5faZ7jAD9IoR3grkR1t4B89aOdF+ghKFhS8pIbmIKo9gfwfuRzEExDYXIPGCoKTB4j0/ugOjPYG6H7ttg1WMwv3so5iUqYRhJ5tQUtqXCbCSzUeyF5O0oWgoBIhEG7esgG9DLQd8P0b1g7oHoYdizs2z9SxiaqTkES2llFbNQ7ETAzkh2RDKzpkHGZAJEag8N0HssAv0yRM+Bfgq6HwPzKISPwo0rR2o/QAnDxmpiLWMqMJ1WtgamoJiMYjKSyQSMQjIGhULQhqINpaPqYHltIFoLUSdEq6sdXtEK0K9D9AqYpRAtQ2xXrn9dlrKUpSxlKUtZylKWwSj/HyHl/ePsagXCAAAAAElFTkSuQmCC)",height:"195px",width:"195px"},"ADVMARK1, ADVMARK2":{background:xui.browser.ie6?null:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAK3RFWHRDcmVhdGlvbiBUaW1lAHZyIDE0IGp1bCAyMDA2IDEzOjMxOjIzICswMTAwHvJDZwAAAAd0SU1FB9YHDgsgJYiZ4bUAAAAJcEhZcwAALiIAAC4iAari3ZIAAAAEZ0FNQQAAsY8L/GEFAAAB5ElEQVR42q2Tz0sqURTH72Qq4mASSAoSIfSDdCEI8qJFLXSjLYSQNoGLINrI8/0ZD9q0KnDlKkIMebmP9xZRCEEiLQLBiMiNJDYq/Zg573vpCkM6CdGBD3Pn3OvXe77nDGPfENKwJBHx/CxYAtNAAVfgXJKk7khVCCyCP6ALVKAJXkEdbINxw5tgM4HHPphSFEUql8usXq8zWZZZKBRiPp+PH3sBx2Br4FbiBg+aplGxWKRgMPiMH1+YTKZDq9V64na7G+l0mprNJo7RG/g94IEoQSsUCuRyue6QToIJYAJWMA/Bo2QySZ1Ohws9gZBeZI570Gq1yO/395BKGJg+ZbFYznK5HAmf9vQiKW5iqVQim832Fyn5E+83Y7EYieAdY2Nig7dRqtVqrNfr3YiWGsVltVrtr2f0IrwEZrfbGeqWhQ9GMeFwOPprRS9SAWo4HGZOp/MH1l4DAS6+HolE+u9Xek9kcK+qKqVSKUL/s0hPDhFY83g8j5VKhcQg7nxs80/w0mg0KB6Pa2az+RTpDbDA3sd/lwvk8/l+Z7iS/FHEAor8H9rtNmWzWYpGo+T1eikQCFAmkyFxAy7AJ255aMHYcIID8d1oNBi8hGuwwkYFDq0CPlG3YsTb4B/4BRwjBb4S/wGzT16tu5THiAAAAABJRU5ErkJggg==)",height:"16px",margin:"-8px 0 0 -8px",overflow:"hidden",width:"16px"},".xui-nodatauri ADVCLR":{background:xui.browser.ie6?null:xui.UI.$oldBg("clrbg.png","no-repeat left top"),_filter:xui.UI.$ieOldBg("clrbg.png"),"-ms-filter":xui.browser.ie8?xui.UI.$ieOldBg("clrbg.png"):null},".xui-nodatauri ADVWHEEL":{background:xui.browser.ie6?null:xui.UI.$oldBg("clr.png","no-repeat left top"),_filter:xui.UI.$ieOldBg("clr.png"),"-ms-filter":xui.browser.ie8?xui.UI.$ieOldBg("clr.png"):null},".xui-nodatauri ADVMARK1, .xui-nodatauri ADVMARK2":{background:xui.browser.ie6?null:xui.UI.$oldBg("picker.png","no-repeat left top"),_filter:xui.UI.$ieOldBg("picker.png"),"-ms-filter":xui.browser.ie8?xui.UI.$ieOldBg("picker.png"):null},"LIST span":{overflow:"hidden",margin:"0",cursor:"pointer",margin:"0 -1px -1px 0",display:xui.$inlineBlock,"font-size":"1.18em"},TRANS:{position:"absolute",top:".25em",left:"0",display:xui.$inlineBlock,cursor:"pointer"},SET:{position:"absolute",display:"none",top:".125em",right:"2.5em"},TOGGLE:{position:"absolute",right:".5em",top:"0.25em",display:xui.$inlineBlock,cursor:"default"}},Behaviors:{HoverEffected:{CLOSE:"CLOSE",SET:"SET",TRANS:"TRANS",TOGGLE:"TOGGLE"},ClickEffected:{CLOSE:"CLOSE",SET:"SET",TRANS:"TRANS",TOGGLE:"TOGGLE"},KEY:{onClick:function(){return false}},SC:{onMouseover:function(f,d,c){f.box._setTempUI(f,f.getSubId(c))},onClick:function(g,f,d){var c=g.getSubId(d);g.boxing()._setCtrlValue(g.$tempValue=c,false);g.box._vC(g);if(!g.properties.advance){g.boxing().setUIValue(c,true,null,"click")}return false},onDblclick:function(g,f,d){var c=g.getSubId(d);g.boxing()._setCtrlValue(g.$tempValue=c,false);g.box._vC(g);g.boxing().setUIValue(c,true,null,"dblclick");return false}},LIST:{onMouseout:function(f,d,c){f.box._updateDftTip(f)}},SET:{onClick:function(d,c,f){d.box._vC(d);d.boxing().setUIValue(d.$tempValue,true,null,"setbtn")}},TRANS:{onClick:function(d,c,f){d.box._vC(d);d.boxing().setUIValue(d.$tempValue="transparent",true,null,"transbtn")}},CANCEL:{onClick:function(d,c,f){d.getSubNode("CLOSE").onClick(true)}},TOGGLE:{onClick:function(d,c,f){d.boxing().setAdvance(!d.properties.advance)}},R:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,0)},onDragstop:function(d,c,f){d.box._dd3(d,c,f,0)}},G:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,1)},onDragstop:function(d,c,f){d.box._dd3(d,c,f,1)}},B:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,2)},onDragstop:function(d,c,f){d.box._dd3(d,c,f,2)}},HH:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f,true)},onDrag:function(d,c,f){d.box._dd2(d,c,f,0,"hsv1")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,0,true,"hsv1")}},S:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f,true)},onDrag:function(d,c,f){d.box._dd2(d,c,f,1,"hsv2")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,1,true,"hsv2")}},V:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f,true)},onDrag:function(d,c,f){d.box._dd2(d,c,f,2,"hsv2")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,2,true,"hsv2")}},H:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,0,"hex")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,0)}},E:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,1,"hex")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,1)}},X:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,2,"hex")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,2)}},CLOSE:{onClick:function(f,g,h){var d=f.properties,c=f.boxing();if(d.disabled||d.readonly){return}if(false===c.beforeClose(f)){return}c.destroy()}},ADVWHEEL:{beforeMousedown:function(f,d,g){var c=f.box;c._prepareAdv(f,d);c._updateClrByPos(f,d,true);f.getSubNode("ADVMARK1").startDrag(d,{dragType:"none"})}},ADVMARK1:{beforeMousedown:function(f,d,g){var c=f.box;c._prepareAdv(f,d);c._updateClrByPos(f,d,true);f.getSubNode("ADVMARK1").startDrag(d,{dragType:"none"})},onDrag:function(f,d,g){var c=f.box;c._updateClrByPos(f,d,true)},onDragstop:function(d,c,f){d.box._updateValueByPos(d,c)},onDblclick:function(d,c,f){d.box._updateValueByPos(d,c);d.box._vC(d);d.boxing().setUIValue(d.$tempValue,true,null,"advdblclick")}},ADVCLR:{beforeMousedown:function(f,d,g){var c=f.box;c._prepareAdv(f,d);c._updateClrByPos(f,d);f.getSubNode("ADVMARK2").startDrag(d,{dragType:"none"});return false}},ADVMARK2:{beforeMousedown:function(f,d,g){var c=f.box;c._prepareAdv(f,d);c._updateClrByPos(f,d);f.getSubNode("ADVMARK2").startDrag(d,{dragType:"none"});return false},onDrag:function(f,d,g){var c=f.box;c._updateClrByPos(f,d)},onDragstop:function(d,c,f){d.box._updateValueByPos(d,c)},onDblclick:function(d,c,f){d.box._updateValueByPos(d,c);d.box._vC(d);d.boxing().setUIValue(d.$tempValue,true,null,"adv2dblclick")}}},_vC:function(e){var g=e.properties,c=g.$UIvalue,f=c==e.$tempValue;e.getSubNode("SET").css("display",f?"none":"block");e.getSubNode("CAPTION").css("color",f?"#000":"#ff0000")},_prepareData:function(d){var e=arguments.callee.upper.call(this,d);var c="display:none";e.classBar=e.barDisplay?"xui-uibar-top":"xui-uibar-top-s";e.closeDisplay=e.closeBtn?"":c;e.advDispay=e.advance?"":"display:none;";e._transparent=xui.getRes("inline.transparent");e._set=xui.wrapRes("inline.set");return e},EventHandlers:{beforeClose:function(c,d){}},RenderTrigger:function(){this.$onValueSet=this.$onUIValueSet=function(d,c){this.box._setClrName(this,c)}},_setClrName:function(e,d){var g=e,c="color.LIST.",f=xui.getRes(c+d);if(f==d){g.$clrN2=g.$clrN=(d=="transparent"?"":"#")+d}else{g.$clrN=f;g.$clrN2=xui.wrapRes(c+d)}},_slist:"FFFFFF,FFFFF0,FFFFE0,FFFF00,FFFAFA,FFFAF0,FFFACD,FFF8DC,FFF5EE,FFF0F5,FFEFD5,FFEBCD,FFE4E1,FFE4C4,FFE4B5,FFDEAD,FFDAB9,FFD700,FFC0CB,FFB6C1,FFA500,FFA07A,FF8C00,FF7F50,FF69B4,FF6347,FF4500,FF1493,FF00FF,FF00FF,FF0000,FDF5E6,FAFAD2,FAF0E6,FAEBD7,FA8072,F8F8FF,F5FFFA,F5F5F5,F5DEB3,F4A460,F0FFFF,F0FFF0,F0F8FF,F0E68C,F08080,EEE8AA,EE82EE,E9967A,E6E6FA,E1FFFF,DEB887,DDA0DD,DCDCDC,DC143C,DB7093,DAA520,DA70D6,D8BFD8,D3D3D3,D2B48C,D2691E,CD853F,CD5C5C,C71585,C0C0C0,BDB76B,BC8F8F,BA55D3,B22222,B0E0E6,B0C4DE,AFEEEE,ADFF2F,ADD8E6,A9A9A9,A52A2A,A0522D,9932CC,98FB98,9400D3,9370DB,90EE90,8FBC8F,8B4513,8B008B,8B0000,8A2BE2,87CEFA,87CEEB,808080,808000,800080,800000,7FFFAA,7FFF00,7CFC00,7B68EE,778899,708090,6B8E23,6A5ACD,696969,6495ED,5F9EA0,556B2F,4B0082,48D1CC,483D8B,4682B4,4169E1,40E0D0,3CB371,32CD32,2F4F4F,2E8B57,228B22,20B2AA,1E90FF,191970,00FFFF,00FFFF,00FF7F,00FF00,00FA9A,00CED1,00BFFF,008B8B,008080,008000,006400,0000FF,0000CD,00008B,000080,000000".split(","),_C16:"0123456789ABCDEF",_dd1:function(g,l,m,d){if(xui.Event.getBtn(l)!="left"){return}var j=g.properties,c=g.box,h=function(){var e=c.hex2rgb(g.$tempValue||j.$UIvalue);return d?c.rgb2hsv(e):e};xui.use(m).css("backgroundColor","red").startDrag(l,{dragType:"blank",targetReposition:false,widthIncrement:2,dragCursor:true});g.$temp=0;g.$start=h();g.$temp2=h()},_dd2:function(h,n,c,j,o){var l,g=xui.DragDrop.getProfile().offset,d=h.properties,f=h.$temp2,r=h.box,m=o=="hsv1"?361:o=="hsv2"?101:256,q;l=(o=="hsv2"?parseInt(h.$start[j]*100,10):parseInt(h.$start[j],10))+parseInt(g.x/2,10);l=(l%m+m)%m;if(h.$temp!=l){f[j]=h.$temp=o=="hsv2"?l/100:l;q=(o=="hsv1"||o=="hsv2")?r.hsv2rgb(f):f;q=r.rgb2hex(q);r._setTempUI(h,q);xui.use(c).text(o=="hex"?r._toFF(l):l)}},_dd3:function(g,l,c,h,j){if(g.$start[h]!==g.$temp){var d=g.properties,n=g.box,f=g.$start,m;f[h]=g.$temp;m=j?n.hsv2rgb(f):f;m=n.rgb2hex(m);if(j){g.$hexinhsv=m}g.boxing()._setCtrlValue(g.$tempValue=m,false);delete g.$hexinhsv;g.box._vC(g)}xui.use(c).css("backgroundColor","");g.$temp=g.$start=0},_setTempUI:function(c,l){var m=this,f=m.hex2rgb(l),g=c.boxing(),e=g.getSubNode("EXAM"),d=m.rgb2hsv(f),j=xui.getRes("color.LIST."+l),h=(l=="transparent"?"":"#")+l;e.css({backgroundColor:h,color:d[2]>0.6?"#000":"#FFF"});e.text(c.show_color=j==l?h:j)},_updateDftTip:function(f){var c=f.box,g=f.properties,e=(f.$tempValue||g.$UIvalue)=="transparent",d=f.boxing().getSubNode("EXAM");d.css({backgroundColor:e?"transparent":"#"+f.$hex.join(""),color:e?"#000":f.$hsv[2]>0.6?"#000":"#FFF"});d.html(f.$clrN2||"",false)},_to3:function(c){if(!c||c=="transparent"){c="FFFFFF"}return[c.substr(0,2),c.substr(2,2),c.substr(4,2)]},_toFF:function(d){var c=this._C16;d=parseInt(d,10)||0;d=(d>255||d<0)?0:d;return c.charAt((d-d%16)/16)+c.charAt(d%16)},_to255:function(e){var d=this._C16,c=e.split("");return d.indexOf(c[0].toUpperCase())*16+d.indexOf(c[1].toUpperCase())},_webSafe:function(h,e,c){var d=arguments.callee,j=d.f||(d.f=function(f){return parseInt(f/51,10)*51});if(typeof h=="object"){e=h[1];c=h[2];h=h[0]}return[j(h),j(e),j(c)]},_updateMarks:function(d,c,j,h){var n=this,g=n.hex2rgb(c),f=n.rgb2hsv(g),e=(f[0]/360)*6.28,o=d.getSubNode("ADVCLR");if(j){var m=d.getSubNode("ADVMARK1"),l=d.getSubNode("ADVMARK2");m.cssPos({left:Math.round(Math.sin(e)*n._radius+n._bigRadius),top:Math.round(-Math.cos(e)*n._radius+n._bigRadius)});l.cssPos({left:Math.round(n._square*(f[1]-0.5)+n._bigRadius),top:Math.round(n._square*(0.5-f[2])+n._bigRadius)})}if(h!==undefined){o.css("backgroundColor","#"+n.rgb2hex(n.hsv2rgb([h,1,1])))}n._setTempUI(d,c)},_updateClrByPos:function(f,n,o){var A=this,j=xui.Event.getPos(n),q=f.$tpos,d=j.left-q.left,r=j.top-q.top,g,x,w,m,B,u,l,p,c;if(o){x=f.getSubNode("ADVMARK1");g=Math.atan2(d,-r);x.cssPos({left:Math.round(Math.sin(g)*A._radius+A._bigRadius),top:Math.round(-Math.cos(g)*A._radius+A._bigRadius)});m=Math.floor((g/Math.PI)*180);if(m<0){m+=360}l=[m,f.$hsv[1],f.$hsv[2]];p=A.hsv2rgb(l);c=A.rgb2hex(p);A._updateMarks(f,f.$t_hex=c,false,m)}else{w=f.getSubNode("ADVMARK2");B=Math.max(0,Math.min(1,(d/A._square)+0.5));u=Math.max(0,Math.min(1,0.5-(r/A._square)));w.cssPos({left:Math.round(A._square*(B-0.5)+A._bigRadius),top:Math.round(A._square*(0.5-u)+A._bigRadius)});l=[f.$hsv[0],B,u];p=A.hsv2rgb(l);c=A.rgb2hex(p);A._updateMarks(f,f.$t_hex=c)}},_updateValueByPos:function(c,d){c.$hexinadv=c.$t_hex;c.boxing()._setCtrlValue(c.$tempValue=c.$t_hex,false);delete c.$hexinadv;c.box._vC(c)},_prepareAdv:function(d,f){var c=this,g=d.getSubNode("ADVWHEEL").offset();d.$tpos={left:g.left+c._bigRadius,top:g.top+c._bigRadius}},_ensureValue:function(e,m){var j=this,h=arguments.callee,c=h.map||(h.map=(function(){var n={};xui.arr.each(j._C16.split(""),function(q,p){n[q]=1});return n}())),d=h._r||(h._r=/rgb\(([^)]*)\)/);if(!m||typeof m!="string"||m=="transparent"){return"transparent"}if(d.test(m)){m=m.replace(d,"$1");m=m.split(",");m[0]=parseInt(m[0],10)||0;m[1]=parseInt(m[1],10)||0;m[2]=parseInt(m[2],10)||0;m=j.rgb2hex(m)}if(m.charAt(0)=="#"){m=m.substr(1,m.length)}var l="",f;for(var g=0;g<6;g++){f=m.charAt(g).toUpperCase();l+=(c[f]?f:"F")}return l},hsv2rgb:function(m,B,x){if(m instanceof Array){B=m[1];x=m[2];m=m[0]}var u=arguments.callee,o=u.f||(u.f=function(f){return Math.min(255,Math.round(f*256))}),c,n,w,l,j,e,d,A;if(B==0){return[x=o(x),x,x]}else{l=Math.floor((m/60)%6);j=(m/60)-l;e=x*(1-B);d=x*(1-j*B);A=x*(1-(1-j)*B);switch(l){case 0:c=x;n=A;w=e;break;case 1:c=d;n=x;w=e;break;case 2:c=e;n=x;w=A;break;case 3:c=e;n=d;w=x;break;case 4:c=A;n=e;w=x;break;case 5:c=x;n=e;w=d;break}return B==0?[x=o(x),x,x]:[o(c),o(n),o(w)]}},rgb2hsv:function(c,f,j){if(c instanceof Array){f=c[1];j=c[2];c=c[0]}c=c/255;f=f/255;j=j/255;var d=Math.min(c,f,j),l=Math.max(c,f,j),m=l-d,o=(l===0)?0:1-(d/l),n=l,e;switch(l){case d:e=0;break;case c:e=60*(f-j)/m;if(f<j){e+=360}break;case f:e=(60*(j-c)/m)+120;break;case j:e=(60*(c-f)/m)+240;break}return[Math.round(e),o,n]},rgb2hex:function(f,e,c){var d=this;if(f instanceof Array){e=f[1];c=f[2];f=f[0]}return d._toFF(f)+d._toFF(e)+d._toFF(c)},hex2rgb:function(d){var c=this;if(!d||d=="transparent"){d="FFFFFF"}if(d.charAt(0)=="#"){d=d.slice(1)}return[c._to255(d.substr(0,2)),c._to255(d.substr(2,2)),c._to255(d.substr(4,2))]},getTextColor:function(d){var c=this;d=c._ensureValue(0,d);if(d&&d.toLowerCase()=="transparent"){return"#000000"}d=c.hex2rgb(d);d=c.rgb2hsv(d);return(d&&d[2])>0.6?"#000000":"#FFFFFF"},_onresize:function(){}}});Class("xui.UI.DatePicker",["xui.UI","xui.absValue"],{Dependencies:["xui.Date"],Instance:{activate:function(){this.getSubNode("PRE").focus();return this},_setCtrlValue:function(c){return this.each(function(e){if(!e.renderId){return}var d=e.box,f=e.properties;d._to(e,c,true);if(e.keys.CAPTION){e.getSubNode("CAPTION").html(xui.Date.getText(c,"ymd",f.firstDayOfWeek),false)}})},getDateFrom:function(){return this.get(0)._realstart}},Initialize:function(){var o=this,p=xui.UI.$ID,F=xui.UI.$tag_special,c=xui.UI.$CLS,G=o.KEY;o.addTemplateKeys(["H","COL","W","TBODY","THEADER","TD"]);var m='<colgroup id="'+G+"-COL:"+p+':"  class="'+F+"COL_CS"+F+' xui-custom {comcls}"  style="'+F+"COL_CS"+F+'"><col width="1px"/><col width=""/><col width=""/><col width=""/><col width=""/><col width=""/><col width=""/><col width=""/></colgroup>',e='<thead ID="'+G+"-THEADER:"+p+':" class="'+F+"THEADER_CS"+F+' xui-custom {comcls}"  style="'+F+"THEADER_CS"+F+'" ><tr height="1px"><th id="'+G+"-H:"+p+':7" class="xui-node  xui-node-th xui-uiborder-b xui-uiborder-r '+c+"-h "+c+"-w "+F+"H_CC"+F+' xui-custom {comcls}" style="'+F+"H_CS"+F+'"></th>',d="</tr></thead>",h='<th id="'+G+"-H:"+p+':@" class="xui-node xui-node-th xui-uiborder-b xui-uiborder-r '+c+"-h "+F+"H_CC"+F+' xui-custom {comcls}"  style="'+F+"H_CS"+F+'">@</th>',w='<tbody id="'+G+"-TBODY:"+p+':"  class="'+F+"TBODY_CS"+F+' xui-custom {comcls}"  style="'+F+"TBODY_CS"+F+'" >',r="</tbody>",E="<tr>",C="</tr>",g='<th id="'+G+"-W:"+p+':@"  class="xui-node xui-node-th xui-uiborder-b xui-uiborder-r '+c+"-w "+F+"W_CC"+F+' xui-custom {comcls}"  style="'+F+"W_CS"+F+'">@</th>',f='<td id="'+G+"-TD:"+p+':@" class="xui-node xui-uicell  xui-node-td xui-uiborder-b xui-uiborder-r '+c+"-td "+F+"TD_CC"+F+' xui-custom {comcls}"  style="'+F+"TD_CS"+F+'" '+xui.$IEUNSELECTABLE()+" ></td>",n,A,x,u,q,D=[],B=[];for(A=0;A<7;A++){B[B.length]=h.replace(/@/g,A)}u=q=0;for(A=0;A<48;A++){x=A%8;D[D.length]=(x==0?E:"")+(x==0?g:f).replace(/@/g,x==0?q:u)+(x==7?C:"");if(x!==0){u++}else{q++}}n=m+e+B.join("")+d+w+D.join("")+r;o.setTemplate({tagName:"div",style:"{_style};height:auto;",onselectstart:"return false",BORDER:{tagName:"div",className:"xui-uiborder-outset xui-uiborder-box xui-uiborder-radius-big",BAR:{tagName:"div",className:"xui-uibar-top",style:"{barDisplay};",BARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-tl",BARTDLT:{className:"xui-uibar-tdlt"}},BARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar",BARTDMT:{className:"xui-uibar-tdmt"}},BARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-tr",BARTDRT:{className:"xui-uibar-tdrt"}},BARCMDL:{$order:3,tagName:"div",className:"xui-uibar-cmdl",PRE2:{$order:0,className:"xuifont",$fonticon:"xui-icon-doubleleft",tabindex:"{tabindex}"},PRE:{$order:1,className:"xuifont",$fonticon:"xui-icon-singleleft",tabindex:"{tabindex}"},YEAR:{$order:2,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},YTXT:{$order:3,text:"-"},MONTH:{$order:4,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},MTXT:{$order:5,text:"-"},DAY:{$order:6,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},NEXT:{$order:7,className:"xuifont",$fonticon:"xui-icon-singleright",tabindex:"{tabindex}"},NEXT2:{$order:8,className:"xuifont",$fonticon:"xui-icon-doubleright",tabindex:"{tabindex}"}},BARCMDR:{$order:4,tagName:"div",className:"xui-uibar-cmdr",CLOSE:{className:"xuifont",$fonticon:"xui-uicmd-close",style:"{closeDisplay}"}},TBARTDB:{$order:5,tagName:"div",className:"xui-uibar-tdb xui-uiborder-inset xui-uiborder-radius"}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main xui-uibar",MAINI:{tagName:"div",className:"xui-uicon-maini xui-uicon-maini xui-uibar",CON:{tagName:"div",className:"xui-uiborder-inset",BODY:{tagName:"table",cellpadding:"0",cellspacing:"0",text:n}}}},TAIL:{$order:3,tagName:"div",className:"xui-uicon-main xui-uibar",TAILI:{tagName:"div",className:"xui-uicon-maini xui-uibar",CAPTION:{tagName:"div",style:"{_nocap}",text:"{caption}",$order:0},TIME:{style:"{_timectrl}",tagName:"div",TPRE2:{$order:0,className:"xuifont",$fonticon:"xui-icon-doubleleft",tabindex:"{tabindex}"},TPRE:{$order:1,className:"xuifont",$fonticon:"xui-icon-singleleft",tabindex:"{tabindex}"},HOUR:{$order:2,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},MTXT:{$order:3,text:":"},MINUTE:{$order:4,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},TNEXT:{$order:6,className:"xuifont",$fonticon:"xui-icon-singleright",tabindex:"{tabindex}"},TNEXT2:{$order:7,className:"xuifont",$fonticon:"xui-icon-doubleright",tabindex:"{tabindex}"}},TODAY:{tabindex:"{tabindex}",className:"xuifont",$fonticon:"xui-icon-date",title:"{_todaytitle}"},SET:{tagName:"button",className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tabindex:"{tabindex}",text:"{_set}"}}},BBAR:{$order:4,tagName:"div",className:"xui-uibar-bottom-s",BBARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-bl"},BBARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar"},BBARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-br"}}}})},Static:{Appearances:{KEY:{},"TBART, BBART":{"border-spacing":0,"border-collapse":"separate"},BORDER:{},BODY:{position:"relative"},BARCMDL:{top:".125em"},TAILI:{position:"relative",padding:".5em 0 0 0"},TIME:{padding:".25em 1.5em"},SET:{position:"absolute",display:"none",top:".125em",right:".5em"},TODAY:{position:"absolute",top:".25em",left:".125em",display:xui.$inlineBlock,cursor:"default"},"PRE,PRE2,NEXT,NEXT2,TPRE,TPRE2,TNEXT,TNEXT2":{$order:0,display:xui.$inlineBlock,position:"relative",margin:"0 .25em","vertical-align":"middle",cursor:"default"},"YEAR,MONTH,DAY,HOUR,MINUTE":{$order:4,"font-weight":"bold","vertical-align":"middle",cursor:"e-resize",margin:"0 .25em",padding:"0 .25em"},YEAR:{},"MONTH, DAY,HOUR, MINUTE":{},CAPTION:{"text-align":"center","vertical-align":xui.browser.ie6?"baseline":"middle","font-size":"1em"},MAINI:{padding:".5em .3333em .3333em 0"},BODY:{overflow:"visible"},TD:{$order:1,"text-align":"center"},"TD-checked":{$order:4,"font-weight":"bold"},"W,H":{$order:3,"vertical-align":"middle","text-align":"center",padding:".25em"},W:{$order:4,padding:".125em"},H:{$order:4,padding:".25em 0.6666667em"}},Behaviors:{HoverEffected:{CLOSE:"CLOSE",TD:"TD",PRE:"PRE",PRE2:"PRE2",NEXT:"NEXT",NEXT2:"NEXT2",TPRE:"TPRE",TPRE2:"TPRE2",TNEXT:"TNEXT",TNEXT2:"TNEXT2",SET:"SET",TODAY:"TODAY"},ClickEffected:{CLOSE:"CLOSE",TD:"TD",PRE:"PRE",PRE2:"PRE2",NEXT:"NEXT",NEXT2:"NEXT2",TPRE:"TPRE",TPRE2:"TPRE2",TNEXT:"TNEXT",TNEXT2:"TNEXT2",SET:"SET",TODAY:"TODAY"},KEY:{onClick:function(){return false}},TD:{onClick:function(d,h,j){var g=d.properties,l=d.getSubId(j),f=d.$daymap,c=f[l];if(g.disabled||g.readonly){return false}xui.use(j).onMouseout(true,{$force:true});c=xui.Date.add(d.$tempValue,"d",xui.Date.diff(d.$tempValue,c,"d",g.firstDayOfWeek));d.box._to(d,c);if(!g.timeInput){d.boxing().setUIValue(c,null,null,"click")}},onDblclick:function(c,f,g){var d=c.properties;if(d.timeInput){xui.use(g).onMouseout(true,{$force:true});c.boxing().setUIValue(c.$tempValue,true,null,"dblclick")}}},TODAY:{onClick:function(c,d,f){xui.use(f).onMouseout(true,{$force:true});c.boxing().setUIValue(c.properties.timeInput?new Date:xui.Date.getTimSpanStart(new Date,"d",1),true,null,"today")}},SET:{onClick:function(c,d,f){xui.use(f).onMouseout(true,{$force:true});c.boxing().setUIValue(c.$tempValue,true,null,"set")}},CLOSE:{onClick:function(d,g,h){var f=d.properties,c=d.boxing();if(f.disabled||f.readonly){return}if(false===c.beforeClose(d,h)){return}c.destroy(true)}},PRE:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"m",-1))}},NEXT:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"m",1))}},PRE2:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"y",-1))}},NEXT2:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"y",1))}},TPRE:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"n",-1))}},TNEXT:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"n",1))}},TPRE2:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"h",-1))}},TNEXT2:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"h",1))}},YEAR:{beforeMousedown:function(c,d,f){return c.box._ondown(c,d,f,10)},onDrag:function(c,f,h){var d,g=xui.DragDrop.getProfile().offset;d=parseInt(c.$year,10)+parseInt(g.x/10,10);if(c.$temp!=d){c.$temp2=parseInt(g.x/10,10);c.getSubNode("YEAR").html(d,false)}},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"y")}},MONTH:{beforeMousedown:function(c,d,f){return c.box._ondown(c,d,f,20)},onDrag:function(c,f,h){var d,g=xui.DragDrop.getProfile().offset;d=parseInt(c.$month,10)+(parseInt(g.x/20,10)%12);d=(d%12+12)%12;if(c.$temp!=d){c.$temp=d;c.$temp2=d-c.$month+1;c.getSubNode("MONTH").html(((d+1)<=9?"0":"")+(d+1),false)}},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"m")}},DAY:{beforeMousedown:function(c,d,f){return c.box._ondown(c,d,f,10)},onDrag:function(d,h,l){var c=new Date(d.$year,d.$month,0),m=c.getDate();var g=d.properties,f,j=xui.DragDrop.getProfile().offset;f=parseInt(d.$day,10)+(parseInt(j.x/10,10)%m);f=(f%m+m)%m+1;if(d.$temp!=f){d.$temp=f;d.$temp2=f-d.$day;d.getSubNode("DAY").html((f<=9?"0":"")+f,false)}},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"d")}},HOUR:{beforeMousedown:function(c,d,f){return c.box._ondown(c,d,f,20)},onDrag:function(c,d,f){return c.box._ondrag(c,20,24,"HOUR",c.$hour)},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"h")}},MINUTE:{beforeMousedown:function(c,d,f){return c.box._ondown(c,d,f,10)},onDrag:function(c,d,f){return c.box._ondrag(c,10,60,"MINUTE",c.$minute)},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"n")}}},DataModel:{timeInput:{ini:false,action:function(c){this.getSubNode("CAPTION").css("display",c?"none":"block");this.getSubNode("SET").css("display",c?"block":"none");this.getSubNode("TIME").css("display",c?"block":"none");this.getSubNode("TODAY").attr("title",xui.getRes(c?"inline.now":"inline.today"))}},height:{$spaceunit:1,ini:"auto",readonly:true},width:{$spaceunit:1,ini:"auto",readonly:true},value:{ini:new Date,format:"date"},closeBtn:{ini:true,action:function(c){this.getSubNode("CLOSE").css("display",c?"":"none")}},firstDayOfWeek:{ini:0,action:function(){this.boxing().refresh()}},offDays:{ini:"60",action:function(){this.boxing().refresh()}},hideWeekLabels:{ini:false,action:function(){this.boxing().refresh()}},dateInputFormat:{ini:"yyyy-mm-dd",listbox:["yyyy-mm-dd","mm-dd-yyyy","dd-mm-yyyy"],action:function(){this.boxing().refresh()}}},EventHandlers:{beforeClose:function(c,d){}},_prepareData:function(e){var f=arguments.callee.upper.call(this,e);var c="display:none";f.closeDisplay=f.closeBtn?"":c;var d="display:none;";if(e.properties.timeInput){f._todaytitle=xui.getRes("inline.now");f._nocap=d}else{f._todaytitle=xui.getRes("inline.today");f._timectrl=d}f._set=xui.wrapRes("inline.set");return f},_ensureValue:function(c,e){var f;if(e){if(xui.isDate(e)){f=e}else{if(xui.isFinite(e)){f=new Date(parseInt(e,10))}}}f=f||new Date;if(!c.properties.timeInput){f=xui.Date.getTimSpanStart(f,"d")}return f},RenderTrigger:function(){var e=this,g=e.properties,h=e.boxing(),d=e.box;d._setWeekLabel(e);var f={yyyy:"YEAR",mm:"MONTH",dd:"DAY"},c=g.dateInputFormat.split("-");if(f[c[0]]&&f[c[1]]&&f[c[2]]){e.getSubNode("YTXT").addPrev(e.getSubNode(f[c[0]]));e.getSubNode("MTXT").addPrev(e.getSubNode(f[c[1]]));e.getSubNode("MTXT").addNext(e.getSubNode(f[c[2]]))}},_getWeekNodes:function(c){return c.$weeks||(c.$weeks=c.getSubNode("W",true))},_getTDNodes:function(c){return c.$tds||(c.$tds=c.getSubNode("TD",true))},_getLabelNodes:function(c){return c.$days||(c.$days=c.getSubNode("TD",true))},_getHeaderNodes:function(c){return c.$header||(c.$header=c.getSubNode("H",true))},_setWeekLabel:function(e){var j=e.properties;var h=j.firstDayOfWeek,g=function(f){f=e.getSubId(f);if(f=="7"){return f}f=(parseInt(f,10)+h);return f<7?f:(f-7)};e.box._getHeaderNodes(e).each(function(l,f){l.innerHTML=xui.wrapRes("date.WEEKS."+g(l.id))});if(j.hideWeekLabels){e.getSubNode("BODY").query("TR").first().remove();e.getSubNode("COL").first().remove()}var c="xui-uicell-alt",d={};if(j.offDays){xui.arr.each(j.offDays.split(""),function(f){f=parseInt(f,10);if(f>=0&&f<=6){d[f]=1}});e.box._getTDNodes(e).each(function(l,f){f=((f+h)-7*parseInt((f+h)/7,10));if(d[f]){l.className=l.className+" "+c}else{l.className=l.className.replace(c,"")}})}},_setBGV:function(g,d,c){var e=xui.Date,j=g.properties,h=g.$daymap||(g.$daymap=[]),f,l;g.box._getLabelNodes(g).each(function(n,m){l=e.add(d,"d",m);h[m]=l;f=e.get(l,"m")==c?"#":'<p class="xui-node xui-node-p xui-ui-readonly xui-custom {comcls}">#</p>';l=e.get(l,"d");n.innerHTML=f.replace("#",l)});if(!j.hideWeekLabels){g.box._getWeekNodes(g).each(function(n,m){n.innerHTML=e.get(e.add(d,"ww",m),"ww",j.firstDayOfWeek)})}},_to:function(h,g,d){var c=h.properties,l=c.firstDayOfWeek,j=xui.Date,r=h.keys,o=c.$UIvalue,n=-1,f,q,u=j.getTimSpanStart(j.getTimSpanStart(g,"m"),"ww",1,l),e=j.get(g,"m",l);h.$tempValue=g;this._setBGV(h,h._realstart=u,e);if(h.$selnode){h.$selnode.tagClass("-checked",false)}xui.arr.each(h.$daymap,function(p,m){if(j.get(p,"m",l)+"-"+j.get(p,"d",l)==j.get(g,"m",l)+"-"+j.get(g,"d",l)){n=m;return false}});f=this._getTDNodes(h).get()[n];(h.$selnode=xui([f]).tagClass("-checked"));h.getSubNode("SET").css("display",(d||o.getTime()==g.getTime())?"none":"block");h.getSubNode("CAPTION").css("color",(d||o.getTime()==g.getTime())?"":"#ff0000");q=j.get(g,"y",l);if(h.$year!=q){h.$year=q;h.getSubNode("YEAR").html(q,false)}q=j.get(g,"m",l)+1;if(h.$month!=q){h.$month=q;h.getSubNode("MONTH").html((q<=9?"0":"")+q,false)}q=j.get(g||g,"d",l);if(h.$day!=q){h.$day=q;h.getSubNode("DAY").html((q<=9?"0":"")+q,false)}q=j.get(g,"h",l);if(h.$hour!=q){h.$hour=q;h.getSubNode("HOUR").html((q<=9?"0":"")+q,false)}q=j.get(g,"n",l);if(h.$minute!=q){h.$minute=q;h.getSubNode("MINUTE").html((q<=9?"0":"")+q,false)}},_ondown:function(d,f,g,c){if(xui.Event.getBtn(f)!="left"){return}xui.use(g).startDrag(f,{dragType:"blank",targetReposition:false,widthIncrement:c,dragCursor:true});d.$temp=d.$temp2=0},_ondrag:function(f,d,c,e,h){var j=f.properties,g,l=xui.DragDrop.getProfile().offset;g=parseInt(h,10)+(parseInt(l.x/d,10)%c);g=(g%c+c)%c;if(f.$temp!=g){f.$temp=g;f.$temp2=g-h;f.getSubNode(e).html((g<=9?"0":"")+g,false)}},_onds:function(f,h,j,d){if(f.$temp2){var g=f.properties,c=xui.Date.add(f.$tempValue,d,f.$temp2);f.box._to(f,c)}f.$temp=f.$temp2=0},_onresize:function(){}}});Class("xui.UI.TimePicker",["xui.UI","xui.absValue"],{Dependencies:["xui.Date"],Instance:{activate:function(){this.getSubNode("PRE").focus();return this},_setCtrlValue:function(c){return this.each(function(f){if(!f.renderId){return}var d=f.box,e=d._v2a(c);f.$hour=e[0];f.$minute=e[1];f.getSubNode("HI",true).removeClass(d._excls_c3).removeClass(d._excls_mo3);f.getSubNode("HI",e[0]).addClass(d._excls_c3);f.getSubNode("MI",true).removeClass(d._excls_c).removeClass(d._excls_mo);f.getSubNode("MI",e[1]).addClass(d._excls_c);f.getSubNode("HOUR").html(e[0],false);f.getSubNode("MINUTE").html(e[1],false);f.getSubNode("CAPTION").html(f.box._showV(f,f.box._v2a(e)),false)})}},Initialize:function(){this.addTemplateKeys(["HI","MI"]);var f,j,l,d,e,c,n,g;e=this._excls3;c=this._excls4;n=xui.UI.$ID;g='<span id="'+this.KEY+"-HI:"+n+':@" class="xui-node xui-node-span '+e+' !" '+xui.$IEUNSELECTABLE()+" >@</span>";f=[];for(j=0;j<24;j++){f[f.length]=g.replace(/@/g,j<10?("0"+j):j).replace("!",((j%6===0)?c:"")+" xui-custom {comcls}");if(j+1==12){f[f.length]="<br />"}}l=f.join("");f.length=0;e=this._excls;c=this._excls2;n=xui.UI.$ID;g='<span id="'+this.KEY+"-MI:"+n+':@" class="xui-node xui-node-span '+e+' !" '+xui.$IEUNSELECTABLE()+" >@</span>";f=[];for(j=0;j<60;j++){f[f.length]=g.replace(/@/g,j<10?("0"+j):j).replace("!",((j%5===0)?c:"")+" xui-custom {comcls}");if((j+1)%10===0&&j!=59){f[f.length]="<br />"}}d=f.join("");f.length=0;this.setTemplate({tagName:"div",onselectstart:"return false",style:"{_style};height:auto;",BORDER:{tagName:"div",className:"xui-uiborder-outset xui-uiborder-box xui-uiborder-radius-big",BART:{tagName:"div",className:"xui-uibar-top",style:"{barDisplay};",BARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-tl",BARTDLT:{className:"xui-uibar-tdlt"}},BARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar",BARTDMT:{className:"xui-uibar-tdmt"}},BARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-tr",BARTDRT:{className:"xui-uibar-tdrt"}},BARCMDL:{$order:3,tagName:"div",className:"xui-uibar-cmdl",PRE2:{$order:0,className:"xuifont",$fonticon:"xui-icon-doubleleft",tabindex:"{tabindex}"},PRE:{$order:1,className:"xuifont",$fonticon:"xui-icon-singleleft",tabindex:"{tabindex}"},HOUR:{$order:2,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},MTXT:{$order:3,text:":"},MINUTE:{$order:4,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},NEXT:{$order:6,className:"xuifont",$fonticon:"xui-icon-singleright",tabindex:"{tabindex}"},NEXT2:{$order:7,className:"xuifont",$fonticon:"xui-icon-doubleright",tabindex:"{tabindex}"}},BARCMDR:{$order:4,tagName:"div",className:"xui-uibar-cmdr",CLOSE:{className:"xuifont",$fonticon:"xui-uicmd-close",style:"{closeDisplay}"}},TBARTDB:{$order:5,tagName:"div",className:"xui-uibar-tdb xui-uiborder-inset xui-uiborder-radius"}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main xui-uibar",MAINI:{tagName:"div",className:"xui-uibar xui-uicon-maini xui-uibar",CONH:{tagName:"div",className:"xui-uibase xui-uiborder-flat",text:l},CONM:{$order:2,tagName:"div",className:"xui-uibase xui-uiborder-flat",text:d}}},TAIL:{$order:3,tagName:"div",className:"xui-uicon-main xui-uibar",TAILI:{tagName:"div",className:"xui-uibar xui-uicon-maini",CAPTION:{text:"{caption}"},SET:{tagName:"button",className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tabindex:"{tabindex}",text:"{_set}"}}},BBAR:{$order:4,tagName:"div",className:"xui-uibar-bottom-s",BBARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-bl"},BBARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar"},BBARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-br"}}}})},Static:{_excls:"xuiex-timepicker xui-uicell",_excls2:"xuiex-timepicker xui-uicell xui-uicell-alt ",_excls3:"xuiex-timepicker3 xui-uicell",_excls4:"xuiex-timepicker xui-uicell xui-uicell-alt",_excls_mo:"xui-uicell-hover",_excls_c:"xui-uicell-checked",_excls_mo3:"xui-uicell-hover",_excls_c3:"xui-uicell-checked",_mover:function(e,d){var c=this,f=e.className;if(d==2){if(f.indexOf(c._excls_mo3)==-1){e.className=f+" "+c._excls_mo3}}else{if(f.indexOf(c._excls_mo)==-1){e.className=f+" "+c._excls_mo}}e=null},_mout:function(e,d){var c=this,f=e.className;if(d==2){if(f.indexOf(c._excls_mo3)!=-1){e.className=f.replace(c._excls_mo3,"")}}else{if(f.indexOf(c._excls_mo)!=-1){e.className=f.replace(c._excls_mo,"")}}e=null},Appearances:{KEY:{},"TBART, BBART":{"border-spacing":0,"border-collapse":"separate"},MAINI:{padding:".5em .3333em .3333em 0"},CONH:{"white-space":"nowrap","text-align":"center"},CONM:{"margin-top":".5em","white-space":"nowrap","text-align":"center"},BARCMDL:{top:".125em"},"PRE,PRE2,NEXT,NEXT2":{position:"relative",margin:"0 .25em","vertical-align":"middle",cursor:"default"},"HOUR, MINUTE":{$order:3,"font-weight":"bold","vertical-align":"middle",cursor:"e-resize",margin:"0 .25em",padding:"0 .25em"},SET:{position:"absolute",display:"none",top:".125em",right:".5em"},TAILI:{position:"relative",padding:".5em 0 0 0","text-align":"center"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","font-size":"1em"},".xuiex-timepicker":{width:"2em","text-align":"center",padding:".25em 0",margin:0},".xuiex-timepicker3":{width:"1.6666em","text-align":"center","font-weight":"bold",padding:".25em 0",margin:0}},Behaviors:{HoverEffected:{CLOSE:"CLOSE",PRE:"PRE",NEXT:"NEXT",PRE2:"PRE2",NEXT2:"NEXT2",SET:"SET"},ClickEffected:{CLOSE:"CLOSE",PRE:"PRE",NEXT:"NEXT",PRE2:"PRE2",NEXT2:"NEXT2",SET:"SET"},KEY:{onClick:function(){return false}},HOUR:{beforeMousedown:function(c,d,f){if(xui.Event.getBtn(d)!="left"){return}xui(f).startDrag(d,{dragType:"blank",targetReposition:false,widthIncrement:5,dragCursor:true});c.$temp2=0},onDrag:function(f,h,l){var g,j=xui.DragDrop.getProfile().offset,d=f.properties.$UIvalue,c=d.split(":");c[0]=Math.round((parseFloat(c[0])||0)+parseInt(j.x/10));c[0]=(c[0]%24+24)%24;f.$temp2=(c[0]<=9?"0":"")+c[0];if(d[0]!=f.$temp2){f.getSubNode("HOUR").html(f.$temp2,false)}},onDragstop:function(c,d,f){if(c.$temp2){c.$hour=c.$temp2;c.boxing()._setCtrlValue(c.$hour+":"+c.$minute)}c.$temp2=0;c.box._hourC(c)}},MINUTE:{beforeMousedown:function(c,d,f){if(xui.Event.getBtn(d)!="left"){return}xui(f).startDrag(d,{dragType:"blank",targetReposition:false,widthIncrement:5,dragCursor:true});c.$temp2=0},onDrag:function(f,h,l){var g,j=xui.DragDrop.getProfile().offset,d=f.properties.$UIvalue,c=d.split(":");c[0]=Math.round((parseFloat(c[0])||0)+parseFloat(j.x/20));c[0]=(c[0]%60+60)%60;f.$temp2=(c[0]<=9?"0":"")+c[0];if(d[0]!=f.$temp2){f.getSubNode("MINUTE").html(f.$temp2,false)}},onDragstop:function(c,d,f){if(c.$temp2){c.$minute=c.$temp2;c.boxing()._setCtrlValue(c.$hour+":"+c.$minute)}c.$temp2=0;c.box._hourC(c)}},SET:{onClick:function(e){var f=e.properties,d=f.$UIvalue,c=d.split(":");c[0]=e.$hour;c[1]=e.$minute;e.boxing().setUIValue(c.join(":"),true,null,"click");if(e.box){e.box._hourC(e)}}},HI:{onMouseover:function(c,d,f){if(c.properties.disableHoverEffect){return}c.box._mover(xui.use(f).get(0),2)},onMouseout:function(c,d,f){if(c.properties.disableHoverEffect){return}c.box._mout(xui.use(f).get(0),2)},onClick:function(c,d,f){c.$hour=c.getSubId(f);c.boxing()._setCtrlValue(c.$hour+":"+c.$minute);if(c.box){c.box._hourC(c)}},onDblclick:function(c,d,f){c.$hour=c.getSubId(f);c.boxing().setUIValue(c.$hour+":"+c.$minute,true,null,"dblclick");if(c.box){c.box._hourC(c)}}},MI:{onMouseover:function(c,d,f){if(c.properties.disableHoverEffect){return}c.box._mover(xui.use(f).get(0))},onMouseout:function(c,d,f){if(c.properties.disableHoverEffect){return}c.box._mout(xui.use(f).get(0))},onClick:function(c,d,f){c.$minute=c.getSubId(f);c.boxing().setUIValue(c.$hour+":"+c.$minute,true,null,"click2");if(c.box){c.box._hourC(c)}}},PRE:{onClick:function(d,g,h){var f=d.properties;if(f.disabled||f.readonly){return}var c=d.$minute;c=(parseFloat(c)||0)-1;c=(c%60+60)%60;d.$minute=c=(c<=9?"0":"")+c;d.boxing()._setCtrlValue(d.$hour+":"+d.$minute);if(d.box){d.box._hourC(d)}}},NEXT:{onClick:function(d,g,h){var f=d.properties;if(f.disabled||f.readonly){return}var c=d.$minute;c=(parseFloat(c)||0)+1;c=(c%60+60)%60;d.$minute=c=(c<=9?"0":"")+c;d.boxing()._setCtrlValue(d.$hour+":"+d.$minute);if(d.box){d.box._hourC(d)}}},PRE2:{onClick:function(d,g,h){var f=d.properties;if(f.disabled||f.readonly){return}var c=d.$hour;c=(parseFloat(c)||0)-1;c=(c%24+24)%24;d.$hour=c=(c<=9?"0":"")+c;d.boxing()._setCtrlValue(d.$hour+":"+d.$minute);if(d.box){d.box._hourC(d)}}},NEXT2:{onClick:function(d,g,h){var f=d.properties;if(f.disabled||f.readonly){return}var c=d.$hour;c=(parseFloat(c)||0)+1;c=(c%24+24)%24;d.$hour=c=(c<=9?"0":"")+c;d.boxing()._setCtrlValue(d.$hour+":"+d.$minute);if(d.box){d.box._hourC(d)}}},CLOSE:{onClick:function(f,g,h){var d=f.properties,c=f.boxing();if(d.disabled||d.readonly){return}if(false===c.beforeClose(f,h)){return}c.destroy(true)}}},DataModel:{height:{ini:"auto",readonly:true},width:{ini:"auto",readonly:true},value:{ini:"00:00",format:"time"},closeBtn:{ini:true,action:function(c){this.getSubNode("CLOSE").css("display",c?"":"none")}}},EventHandlers:{beforeClose:function(c,d){}},_hourC:function(f){var h=f.properties,e=h.$UIvalue,c=e.split(":"),g=(c[0]+"")==(f.$hour+"")&&(c[1]+"")==(f.$minute+"");f.getSubNode("SET").css("display",g?"none":"block");f.getSubNode("CAPTION").css("color",g?"":"#ff0000")},_prepareData:function(d){var e=arguments.callee.upper.call(this,d);var c="display:none";e.closeDisplay=e.closeBtn?"":c;e._set=xui.wrapRes("inline.set");return e},_ensureValue:function(e,f){var d,c=[];if(f&&typeof f=="string"){d=f.split(":")}else{if(f&&typeof f=="object"&&xui.isArr(f)){d=f}else{d=[]}}c[0]=parseFloat(d[0])||0;c[1]=parseFloat(d[1])||0;if(c[0]<0){c[0]=0}if(c[0]>23){c[0]=23}if(c[1]<0){c[1]=0}if(c[1]>59){c[1]=59}c[0]=(c[0]<=9?"0":"")+c[0];c[1]=(c[1]<=9?"0":"")+c[1];return c.join(":")},formatValue:function(c){return c.join(":")},_v2a:function(c){return typeof c=="string"?c.split(":"):c},_showV:function(d,c){var e=d.CF;if(typeof e.formatCaption=="function"){return e.formatCaption(c)}else{return c.join(":")}},_onresize:function(){}}});Class("xui.UI.List",["xui.UI","xui.absList","xui.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(f){if(!f.renderId){return}var j=f.box,D=f.boxing().getUIValue(),r=f.properties,B=j._ITEMKEY||"ITEM",x=j._DIRTYKEY||"ITEM",A="MARK",d=function(o,p){return f.getSubNode(o,p)},e=function(o){return f.getSubIdByItemId(o)};if(r.selMode=="single"){var l=e(D);if(D!==null&&l){d(B,l).tagClass("-checked",false).tagClass("-hover",false);d(A,l).tagClass("-checked",false)}l=e(c);if(l){d(B,l).tagClass("-checked");d(A,l).tagClass("-checked")}if(l){var u=d(B,l);if(u){var q=f.getSubNode("ITEMS"),h=u.offset(null,q),m=h?h.top:0,n=u.offsetHeight(),C=q.scrollHeight(),w=q.scrollTop(),g=q.height();if(C>g){if(m<w||(m+n)>(w+g)){q.scrollTop(m)}}}}}else{if(r.selMode=="multi"||r.selMode=="multibycheckbox"){D=D?D.split(r.valueSeparator):[];c=c?c.split(r.valueSeparator):[];xui.arr.each(D,function(p){d(B,e(p)).tagClass("-checked",false).tagClass("-hover",false);d(A,e(p)).tagClass("-checked",false)});xui.arr.each(c,function(p){d(B,e(p)).tagClass("-checked");d(A,e(p)).tagClass("-checked")})}}})},_clearMouseOver:function(){var d=this.constructor,c=d._ITEMKEY||"ITEM";this.getSubNode(c,true).tagClass("-hover",false)},adjustSize:function(){return this.each(function(m){var e=m.getRoot(),f=m.getSubNode("ITEMS"),d=m.properties,g=d.maxHeight,l=m.$isEm(d.height),j,c;if(m.$isEm(g)){g=m.$em2px(g,f,true)}if(e.css("display")=="none"){c=1;e.css("visibility","hidden")}f.height("auto");if(m.properties.height!="auto"){j=Math.min(g,f.offsetHeight());if(l){j=m.$px2em(j,f)+"em"}f.height(d.height=j)}else{j=f.offsetHeight();if(j>g){f.height(d.maxHeight);m.getRoot().height(d.maxHeight)}}if(c){e.css("visibility","");e.css("display","none")}m.getRoot().height("auto")})},activate:function(){return xui.absList.prototype.activate.call(this)},getShowValue:function(f){var e=this.get(0),g=e.properties,c,d;if(!xui.isDefined(f)){f=g.$UIvalue}if((c=xui.arr.subIndexOf(g.items,"id",f))!=-1){c=g.items[c].caption;c=c.charAt(0)=="$"?xui.getRes(c.slice(1)):c}else{c=""}return c},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["ITEMS"])}},Static:{_DIRTYKEY:"ITEM",Templates:{tagName:"div",style:"{_style}",className:"{_className}",LABEL:{className:"{_required} xui-ui-ellipsis",style:"{labelShow};width:{_labelSize};{labelHAlign}",text:"{labelCaption}"},ITEMS:{$order:10,tagName:"div",className:"xui-uibase {_bordertype}",text:"{items}"},$submap:{items:{ITEM:{className:"xui-uitembg xui-uiborder-radius xui-showfocus {_itemRow} {_split} {itemClass} {disabled} {readonly}",style:"{itemStyle}{_itemDisplay}",tabindex:"{_tabindex}",LTAGCMDS:{$order:2,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},MARK:{$order:5,className:"xuifont",$fonticon:"xui-uicmd-check",style:"{_cbDisplay}"},ICON:{$order:10,className:"xuicon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}",text:"{iconFontCode}"},CAPTION:{style:"{_capDisplay}",text:"{caption}",$order:20},EXTRA:{style:"{_extraDisplay}",text:"{ext}",$order:30},RTAGCMDS:{$order:40,tagName:"span",style:"{_rtagDisplay}",text:"{rtagCmds}"},OPT:{$order:50,style:"{_optDisplay}",className:"xuifont",$fonticon:"xui-uicmd-opt"}}},"items.ltagCmds":function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"items.tagCmds"+(j[e.type]||".button"),c)},"items.rtagCmds":function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"items.tagCmds"+(j[e.type]||".button"),c)},"items.tagCmds.text":xui.UI.$getTagCmdsTpl("text"),"items.tagCmds.button":xui.UI.$getTagCmdsTpl("button"),"items.tagCmds.image":xui.UI.$getTagCmdsTpl("image")}},Appearances:{KEY:{},LABEL:{"z-index":1,top:0,left:0,position:"absolute","padding-top":".333em"},EXTRA:{display:"none"},ITEMS:{position:"relative",overflow:"auto","overflow-x":"hidden"},ITEM:{display:"block",zoom:xui.browser.ie?1:null,cursor:"pointer",position:"relative"},MARK:{$order:1,cursor:"pointer","vertical-align":"middle"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle",padding:".167em","font-size":"1em"},OPT:{$order:10,position:"absolute",left:"auto",top:"auto",right:".167em",top:".167em",display:"none"}},Behaviors:{HoverEffected:{ITEM:"ITEM",OPT:"OPT",CMD:"CMD",ICON:"ICON"},ClickEffected:{ITEM:"ITEM",OPT:"OPT",CMD:"CMD"},DraggableKeys:["ITEM"],DroppableKeys:["ITEM","ITEMS"],onSize:xui.UI.$onSize,ITEM:{onDblclick:function(d,g,h){var c=d.properties,f=d.getItemByDom(h);d.boxing().onDblclick(d,f,g,h)},onClick:function(d,m,c){var o=d.properties,w=d.getItemByDom(c),p=d.getSubId(c),l=d.boxing(),r=xui.Event.getKey(m);if(d.beforeClick&&false===l.beforeClick(d,w,m,c)){return false}if(o.disabled||w.disabled||w.type=="split"){return false}if(d.onClick){l.onClick(d,w,m,c)}xui.use(c).focus();switch(o.selMode){case"none":l.onItemSelected(d,w,m,c,0);break;case"multibycheckbox":if(o.readonly||w.readonly){return false}if(d.keys.MARK){if(d.getKey(xui.Event.getSrc(m).id||"")!=d.keys.MARK){l.onItemSelected(d,w,m,c,0);break}}case"multi":if(o.readonly||w.readonly){return false}var u=l.getUIValue(),j=u?u.split(o.valueSeparator):[],q=1;if(j.length&&(r.ctrlKey||r.shiftKey||o.noCtrlKey||o.$checkbox)){if(r.shiftKey){var n=o.items,g=xui.arr.subIndexOf(n,"id",d.$firstV.id),f=xui.arr.subIndexOf(n,"id",w.id),h;j.length=0;for(h=Math.min(g,f);h<=Math.max(g,f);h++){j.push(n[h].id)}}else{if(xui.arr.indexOf(j,w.id)!=-1){xui.arr.removeValue(j,w.id);q=-1}else{j.push(w.id)}}j.sort();u=j.join(o.valueSeparator);if(l.getUIValue()!==u){l.setUIValue(u,null,null,"click");if(l.get(0)&&l.getUIValue()==u){l.onItemSelected(d,w,m,c,q)}}break}case"single":if(o.readonly||w.readonly){return false}if(l.getUIValue()!==w.id){d.$firstV=w;l.setUIValue(w.id,null,null,"click");if(l.get(0)&&l.getUIValue()==w.id){l.onItemSelected(d,w,m,c,1)}}break}if(d.afterClick){l.afterClick(d,w,m,c)}},onKeydown:function(f,j,c){var o=xui.Event.getKey(j),n=o[0],d=o[2],m=xui(c),h=f.getRoot().nextFocus(true,true,false),l=f.getRoot().nextFocus(false,true,false);switch(xui.Event.getKey(j)[0]){case"tab":if(d){if(m.get(0)!=h.get(0)){h.focus();return false}}else{if(m.get(0)!=l.get(0)){l.focus();return false}}break;case"left":case"up":var g=m.nextFocus(false,true,false);if(m.get(0)==h.get(0)){l.focus()}else{m.nextFocus(false)}return false;break;case"right":case"down":var g=m.nextFocus(true,false,false);if(m.get(0)==l.get(0)){h.focus()}else{m.nextFocus()}return false;break;case"enter":m.onClick(true);break}},onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f,c.getItemByDom(f))!==false}},onMouseover:function(c,f,g){var d=c.getItemByDom(g);if(!d){return}if(!c.properties.optBtn&&!d.optBtn){return}c.getSubNode("OPT",c.getSubId(g)).setInlineBlock()},onMouseout:function(c,f,g){var d=c.getItemByDom(g);if(!d){return}if(!c.properties.optBtn&&!d.optBtn){return}c.getSubNode("OPT",c.getSubId(g)).css("display","none")}},OPT:{onClick:function(c,f,g){if(c.onShowOptions){var d=c.getItemByDom(g);if(!d){return}if(!c.properties.optBtn&&!d.optBtn){return}c.boxing().onShowOptions(c,d,f,g)}return false},onDblclick:function(c,d,f){return false}},CMD:{onClick:function(c,f,g){var h=c.properties,d=c.getItemByDom(xui.use(g).parent().get(0));if(!d){return false}if(h.disabled||d.disabled||d.type=="split"){return false}if(c.onCmd){c.boxing().onCmd(c,d,xui.use(g).id().split("_")[1],f,g)}return false}},LABEL:{onClick:function(c,d,f){if(c.properties.disabled){return false}if(c.onLabelClick){c.boxing().onLabelClick(c,d,f)}},onDblClick:function(c,d,f){if(c.properties.disabled){return false}if(c.onLabelDblClick){c.boxing().onLabelDblClick(c,d,f)}},onMousedown:function(c,d,f){if(xui.Event.getBtn(d)!="left"){return}if(c.properties.disabled){return false}if(c.onLabelActive){c.boxing().onLabelActive(c,d,f)}}}},DataModel:{selMode:{ini:"single",listbox:["single","none","multi","multibycheckbox"],action:function(c){if(!this.box._ITEMMARKED){this.getSubNode("MARK",true).css("display",(c=="multi"||c=="multibycheckbox")?"":"none")}}},borderType:{ini:"flat",listbox:["none","flat","inset","outset"],action:function(d){var f=this,j=f.properties,g=f.getSubNode("ITEMS"),e=/^xui-uiborder-/,h="xui-uiborder-",c=f.getRoot();g.removeClass(e);g.addClass(h+d);xui.UI.$tryResize(f,c.get(0).style.width,c.get(0).style.height,true)}},noCtrlKey:true,width:{$spaceunit:1,ini:"10em"},height:{$spaceunit:1,ini:"15em"},maxHeight:420,itemRow:{ini:false,action:function(c){var d=this.getSubNode("ITEM",true);if(c){d.addClass("xui-item-row")}else{d.removeClass("xui-item-row")}}},optBtn:false,tagCmds:{ini:[],action:function(){this.boxing().refresh()}},labelSize:{$spaceunit:2,ini:0,action:function(c){this.getSubNode("LABEL").css({display:c?"":"none"});xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelPos:{ini:"left",listbox:["none","left","top","right","bottom"],action:function(c){xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelGap:{$spaceunit:2,ini:4,action:function(c){xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelCaption:{ini:"",action:function(c){c=(xui.isSet(c)?c:"")+"";this.getSubNode("LABEL").html(xui.adjustRes(c,true))}},labelHAlign:{ini:"right",listbox:["","left","center","right"],action:function(c){this.getSubNode("LABEL").css("textAlign",c)}}},EventHandlers:{onClick:function(c,d,f,g){},onCmd:function(c,d,g,f,h){},beforeClick:function(c,d,f,g){},afterClick:function(c,d,f,g){},onDblclick:function(c,d,f,g){},onShowOptions:function(c,d,f,g){},onItemSelected:function(d,f,g,h,c){},onLabelClick:function(c,d,f){},onLabelDblClick:function(c,d,f){},onLabelActive:function(c,d,f){}},_onStartDrag:function(c,d,f,g){var g=xui.Event.getPos(d);xui.use(f).startDrag(d,{dragSource:c.$xid,dragType:"icon",shadowFrom:f,targetLeft:g.left+12,targetTop:g.top+12,dragCursor:"pointer",dragDefer:2,dragKey:c.box.getDragKey(c,f),dragData:c.box.getDragData(c,d,f)});return false},_onDropTest:function(d,j,m,c,g,f){var l=g&&g.domId,h=xui.use(m).id();if(l){if(l==h){return false}if(xui.get(xui.use(m).get(0),["previousSibling","id"])==l){return false}}},_onDrop:function(g,m,d,o,l,q){xui.DragDrop.setDragIcon("none");var j=g.getKey(xui.use(d).id()),f=l.profile,c=l.domId,h,p=xui.absObj.$specialChars,n=g.properties.$UIvalue;h=xui.clone(f.getItemByDom(c),function(r,e){return !p[(e+"").charAt(0)]});f.boxing().removeItems([h.id]);if(j==g.keys.ITEM){g.boxing().insertItems([h],q.id,true)}else{g.boxing().insertItems([h])}if(h.id==n){g.boxing().setUIValue(h.id,true,null,"drop")}l._new=h;return false},_prepareData:function(e){var f=arguments.callee.upper.call(this,e),c;f._bordertype="xui-uiborder-"+f.borderType;f.labelHAlign=f.labelHAlign?("text-align:"+f.labelHAlign):"";f.labelShow=f.labelPos!="none"&&f.labelSize&&f.labelSize!="auto"?"":"display:none";f._labelSize=f.labelSize?"":0+e.$picku();if(f.labelCaption){f.labelCaption=xui.adjustRes(f.labelCaption,true)}return f},_prepareItem:function(d,e){var c=d.properties.selMode;e._cbDisplay=(c=="multi"||c=="multibycheckbox")?"":"display:none;";e._itemRow=d.properties.itemRow?"xui-item-row":"";if(e.type=="split"){e._split="xui-uitem-split";e._ltagDisplay=e._rtagDisplay=e.imageDisplay=e._cbDisplay=e._capDisplay=e._extraDisplay=e._optDisplay="display:none;"}this._prepareCmds(d,e)},RenderTrigger:function(){if(this.key!="xui.UI.List"){return}var c=this.properties;xui.UI.$doResize(this,c.width,c.height)},_onresize:function(e,u,p){var d=e.properties,n=xui.$us(d),F=function(f,H){return e.$forceu(f,n>0?"em":"px",H)},w=e.getRoot(),D=function(f){return e.getSubNode(f)},q=D("ITEMS"),m=D("LABEL"),B=e.getEmSize()/w._getEmSize(),j=q._getEmSize(B),h=m._getEmSize(B),x=d.borderType!="none"?q._borderW():0,A=d.dock,C=d.maxHeight,r=d.labelPos,l=(r=="none"||!r)?0:e.$px(d.labelSize,h)||0,E=(r=="none"||!r)?0:e.$px(d.labelGap)||0,o,c,G,g;if(u&&u!="auto"){u=e.$px(u)}if(p&&p!="auto"){p=e.$px(p)}q.cssRegion({left:F(o=r=="left"?l:0,j),top:F(c=r=="top"?l:0,j),width:F(G=u===null?null:u=="auto"?u:Math.max(0,(u-q._paddingW("both")-((r=="left"||r=="right")?l:0)-x)),j),height:F(g=p===null?null:p=="auto"?p:Math.max(0,(p-q._paddingH("both")-((r=="top"||r=="bottom")?l:0)-x)),j)});if(p=="auto"){if(A!="fill"&&A!="cover"&&A!="height"&&A!="left"&&A!="right"){if(q.height()>C){q.height(F(C,j));w.height("auto")}}}if(l){if(u=="auto"){G=q.offsetWidth()}if(p=="auto"){g=q.offsetHeight()}m.cssRegion({left:F(u===null?null:Math.max(0,r=="right"?((u=="auto"?G:(u-l))+E):0),h),top:F(p===null?null:Math.max(0,r=="bottom"?((p=="auto"?g:(p-l))+E):0),h),width:F(u===null?null:Math.max(0,((r=="left"||r=="right")?(l-E):(u=="auto"?G:u))),h),height:F(p===null?null:Math.max(0,((r=="top"||r=="bottom")?(l-E):(p=="auto"?g:p))),h)})}}}});Class("xui.UI.Gallery","xui.UI.List",{Instance:{getStatus:function(d){var c=this.get(0).getItemByItemId(d);return(c&&c._status)||"ini"},_afterInsertItems:function(c){c.getSubNodes("IMAGE").each(function(d){if(d.src==xui.ini.img_bg){d.src=d.title;d.title=""}})}},Initialize:function(){var d=this.getTemplate();d.$submap={items:{ITEM:{tabindex:"{_tabindex}",className:"xui-uitembg xui-uiborder-radius xui-showfocus {itemClass} {disabled} {readonly}",style:"padding:{itemPadding};margin:{itemMargin};{itemStyle}",ITEMFRAME:{style:"{_itemSize};",CAPTION:{tagName:"div",className:"xui-ui-ellipsis",style:"{capDisplay}",text:"{caption}",$order:0},CONTENT:{tagName:"div",$order:1,style:"{_loadbg}",ICON:{className:"xuifont {_imageClass}",style:"{_fontSize}",text:"{iconFontCode}"},IMAGE:{tagName:"img",src:xui.ini.img_bg,title:"{image}",style:"{imgStyle}"}},COMMENT:{tagName:"div",className:"xui-ui-ellipsis",text:"{comment}",style:"{commentDisplay}",$order:2}},FLAG:{$order:20,className:"xui-display-none {flagClass}",style:"{_flagStyle};{flagStyle}",text:"{flagText}"},EXTRA:{text:"{ext}",$order:30}}}};this.setTemplate(d);xui.UI.IconList=xui.UI.Gallery;var c="xui.UI.IconList";xui.absBox.$type[c.replace("xui.UI.","")]=xui.absBox.$type[c]=c},Static:{IMGNODE:1,Appearances:{EXTRA:{display:"none"},KEY:{overflow:"visible"},ITEMS:{position:"relative",overflow:"auto","overflow-x":"hidden",zoom:xui.browser.ie6?1:null},ITEM:{display:xui.$inlineBlock,zoom:xui.browser.ie67?1:null,position:"relative",cursor:"pointer","vertical-align":"top",margin:0},ITEMFRAME:{display:xui.browser.ie67?xui.$inlineBlock:"block",zoom:xui.browser.ie67?1:null,position:"relative",overflow:"hidden",border:0,padding:0,margin:0,width:"100%",height:"100%","-moz-box-flex":"1"},IBWRAP:{},IMAGE:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,visibility:"hidden","vertical-align":"middle"},CAPTION:{"text-align":"center",overflow:"hidden","white-space":"nowrap","font-weight":"bold","font-size":"1em"},CONTENT:{"text-align":"center","white-space":"nowrap","background-repeat":"no-repeat","background-position":"center center","font-size":"1em"},COMMENT:{display:"block",margin:".25em","text-align":"center","font-size":"1em"},FLAG:{top:"-.5em",right:"-.5em",position:"absolute","z-index":10}},Behaviors:{IMAGE:{onLoad:function(g,j,c){var h=xui.use(c).get(0),o=h.src;if(o!=xui.ini.img_bg){var d=g.properties,n=xui.use(c),f=n.get(0),m=g.getItemByDom(c);if(!m){return}var l=g.getSubNodeByItemId("ICON",m.id);if(f.currentSrc&&f.currentSrc!=o&&o!=xui.ini.img_blank){l.removeClass("xui-icon-loading xui-display-none").addClass("xui-load-error");n.onLoad(null).onError(null).$removeEventHandler("load").$removeEventHandler("error");f.style.visibility="hidden";f.style.display="none";m._status="error";return}if(m.autoImgSize||d.autoImgSize){n.attr("width","");n.attr("height","")}else{n.attr("width",m.imgWidth);n.attr("height",m.imgWidth)}l.removeClass("xui-icon-loading");if(!m.iconFontCode&&!m.imageClass){l.addClass("xui-display-none")}n.onLoad(null).onError(null).$removeEventHandler("load").$removeEventHandler("error");m._status="loaded";if(xui.ini.img_blank==o){f.style.visibility="hidden";f.style.display="none"}else{f.style.visibility="visible";f.style.display=""}}},onError:function(d,j,l){var g=d.getItemByDom(l);if(g._status=="error"){return}var h=d.properties,m=xui.use(l),f=m.get(0),c=d.getSubNodeByItemId("ICON",g.id);c.removeClass("xui-icon-loading xui-display-none").addClass("xui-load-error");m.onLoad(null).onError(null).$removeEventHandler("load").$removeEventHandler("error");f.style.visibility="hidden";f.style.display="none";g._status="error"}}},DataModel:({tagCmds:null,autoImgSize:{ini:false,action:function(){this.boxing().refresh()}},autoItemSize:{ini:true,action:function(){this.boxing().refresh()}},iconOnly:{ini:false,action:function(){this.boxing().refresh()}},iconFontSize:{ini:"",action:function(c){this.getSubNode("ICON",true).css("font-size",c)}},itemMargin:{ini:6,action:function(c){this.getSubNode("ITEM",true).css("margin",c)}},itemPadding:{ini:2,action:function(c){this.getSubNode("ITEM",true).css("padding",c)}},itemWidth:{$spaceunit:1,ini:32,action:function(c){this.getSubNode("ITEMFRAME",true).width(c)}},itemHeight:{$spaceunit:1,ini:32,action:function(c){this.getSubNode("ITEMFRAME",true).height(c)}},imgWidth:{ini:16,action:function(c){this.getSubNode("IMAGE",true).width(c)}},imgHeight:{ini:16,action:function(c){this.getSubNode("IMAGE",true).height(c)}},width:{$spaceunit:1,ini:"16rem"},height:{$spaceunit:1,ini:"16rem"}}),EventHandlers:{onCmd:null},_prepareItem:function(d,e){var f=d.properties,c;xui.arr.each(xui.toArr("itemWidth,itemHeight,imgWidth,imgHeight,itemPadding,itemMargin,iconFontSize,autoItemSize"),function(g){e[g]=xui.isSet(e[g])?e[g]:f[g]});if(c=e.itemWidth){e.itemWidth=d.$forceu(c)}if(c=e.itemHeight){e.itemHeight=d.$forceu(c)}if(c=e.itemMargin){e.itemMargin=d.$forceu(c)}if(c=e.itemPadding){e.itemPadding=d.$forceu(c)}e._tabindex=f.tabindex;if(c=e.iconFontSize){e._fontSize="font-size:"+c+";"}e._imageClass="";if(!e.iconFontCode&&!e.imageClass){e._imageClass+="xui-icon-loading"}if(e.imageClass){e._imageClass+=" "+e.imageClass}if(e.flagText||e.flagClass){e._flagStyle="display:block"}if(!e.flagClass){e.flagClass="xui-uiflag-1"}if(f.iconOnly){delete e.caption;delete e.comment}if((e.caption=e.caption||"")===""){e.capDisplay="display:none;"}if((e.comment=e.comment||"")===""){e.commentDisplay="display:none;"}if(e.autoItemSize||f.autoItemSize){e._itemSize=""}else{e._itemSize="width:"+d.$forceu(e.itemWidth)+";height:"+d.$forceu(e.itemHeight)}},RenderTrigger:function(){this.boxing()._afterInsertItems(this)}}});Class("xui.UI.Panel","xui.UI.Div",{Instance:{activate:function(){var c=this.get(0);c.getSubNode("CAPTION").focus();return this},resetPanelView:function(d,e){if(!xui.isSet(d)){d=true}if(!xui.isSet(e)){e=true}var c;return this.each(function(f){if(f.renderId){delete f.$ini;if(d){c=f.boxing();c.removeChildren(true,e)}if(f.properties.toggle){c.setToggle(false)}}})},iniPanelView:function(){return this.each(function(c){if(!c.$ini){c.$ini=true;var d=c.properties;if(c.onIniPanelView){c.boxing().onIniPanelView(c)}if(d.iframeAutoLoad||d.ajaxAutoLoad){xui.UI.Div._applyAutoLoad(c)}}})}},Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className}",BORDER:{tagName:"div",className:"xui-uiborder-outset xui-uiborder-box xui-uiborder-radius-big",TBAR:{tagName:"div",className:"xui-uibar-top",BARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-tl",BARTDLT:{className:"xui-uibar-tdlt"}},BARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar",BARTDMT:{className:"xui-uibar-tdmt"}},BARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-tr",BARTDRT:{className:"xui-uibar-tdrt"}},BARCMDL:{$order:3,tagName:"div",className:"xui-uibar-cmdl",style:"{_align}",LTAGCMDS:{tagName:"span",className:"xui-ltag-cmds",style:"{_ltagDisplay}",text:"{ltagCmds}"},TOGGLE:{$order:1,className:"xuifont",$fonticon:"{_fi_toggleCls2}",style:"{toggleDisplay}",$order:0},ICON:{$order:2,className:"xuicon {imageClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{imageDisplay}",text:"{iconFontCode}"},CAPTION:{tabindex:"{tabindex}",className:"xui-title-node",text:"{caption}",$order:3}},BARCMDR:{$order:4,tagName:"div",className:"xui-uibar-cmdr",RTAGCMDS:{$order:0,tagName:"span",className:"xui-rtag-cmds",style:"{_rtagDisplay}",text:"{rtagCmds}"},INFO:{className:"xuicon",$fonticon:"xui-uicmd-info",style:"{infoDisplay}",$order:1},OPT:{className:"xuicon",$fonticon:"xui-uicmd-opt",style:"{optDisplay}",$order:2},POP:{className:"xuicon",$fonticon:"xui-uicmd-pop",style:"{popDisplay}",$order:3},REFRESH:{className:"xuicon",$fonticon:"xui-uicmd-refresh",style:"{refreshDisplay}",$order:4},CLOSE:{className:"xuicon",$fonticon:"xui-uicmd-close",style:"{closeDisplay}",$order:5}}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main xui-uibar",style:"{_leftp}",MAINI:{tagName:"div",className:"xui-uicon-maini xui-uibar",style:"{_rightp}",PANEL:{tagName:"div",className:"xui-uibase xui-uicontainer {_bordertype}",style:"{panelDisplay};{_panelstyle};{_overflow};",text:"{html}"+xui.UI.$childTag}}},BBAR:{$order:3,tagName:"div",className:"xui-uibar-bottom-s",style:"{_bbarDisplay}",BBARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-bl"},BBARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar"},BBARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-br"}}},$submap:xui.UI.$getTagCmdsTpl()},Appearances:{KEY:{background:"transparent"},"KEY BORDER":{zoom:xui.browser.ie6?1:null},"TBART, BBART":{"border-spacing":0,"border-collapse":"separate"},PANEL:{position:"relative",left:0,top:0,overflow:"auto","line-height":"auto",zoom:xui.browser.ie6?1:null},CAPTION:{display:"inline",padding:".25em","vertical-align":xui.browser.ie6?"baseline":"middle"}},Behaviors:{DroppableKeys:["PANEL"],PanelKeys:["PANEL"],DraggableKeys:["TBAR"],NavKeys:{CAPTION:1},NoDraggableKeys:["INFO","OPT","CLOSE","POP","REFRESH","TOGGLE","CMD","TOGGLE"],HoverEffected:{INFO:"INFO",OPT:"OPT",CLOSE:"CLOSE",POP:"POP",REFRESH:"REFRESH",CMD:"CMD",TOGGLE:"TOGGLE",ICON:"ICON"},ClickEffected:{INFO:"INFO",OPT:"OPT",CLOSE:"CLOSE",POP:"POP",REFRESH:"REFRESH",CMD:"CMD",TOGGLE:"TOGGLE"},onSize:xui.UI.$onSize,TOGGLE:{onClick:function(c,d,f){if(c.properties.toggleBtn){c.box._toggle(c,!c.properties.toggle);return false}}},CAPTION:{onClick:function(c,d,f){if(!c.onClickBar||false===c.boxing().onClickBar(c,f)){return xui.Event.getKey(d).shiftKey}}},PANEL:{onClick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onClickPanel){return c.boxing().onClickPanel(c,f,g)}}},INFO:{onClick:function(c,d,f){c.boxing().onShowInfo(c,d,f)}},OPT:{onClick:function(c,d,f){c.boxing().onShowOptions(c,d,f)}},REFRESH:{onClick:function(c,d,f){c.boxing().onRefresh(c)}},CLOSE:{onClick:function(f,g,h){var d=f.properties;if(d.disabled){return}var c=f.boxing();if(false===c.beforeClose(f)){return}c.destroy()}},POP:{onClick:function(d,g,c){var j=d.properties;if(j.disabled){return}var l=d.getRoot().offset(),o=d.getRoot().cssSize(),p={parent:null,host:null,properties:null,events:null,CS:null,CC:null,CB:null,CF:null,init:null};if(d.beforePop&&false==d.boxing().beforePop(d,p,g,c)){return false}var m=xui.copy(xui.UI.Dialog.$DataStruct),n={};xui.merge(m,j,"with");xui.merge(m,{dock:"none",width:Math.max(o.width,200),height:Math.max(o.height,100),left:l.left,top:l.top,landBtn:true},"all");if(p.properties){xui.merge(m,p.properties,"with")}if(p.events){xui.merge(n,p.events,"all")}var h=new xui.UI.Dialog(m,n,p.host||d.host,p.CS||null,p.CC||null,p.CB||null,p.CF||null);if(xui.isFun(p.init)&&false===p.init(h,d,p)){}else{h.show(p.parent||xui("body"));var f=[];xui.arr.each(d.children,function(e){f.push(e[0])});if(f.length){h.append(xui.UI.pack(f,false))}d.boxing().removeChildren().destroy(true)}}},CMD:{onClick:function(c,d,f){var g=c.properties;if(g.disabled){return false}if(c.onCmd){c.boxing().onCmd(c,xui.use(f).id().split("_")[1],d,f)}return false}}},DataModel:{rotate:null,selectable:true,dock:"fill",caption:{ini:undefined,action:function(c){c=(xui.isSet(c)?c:"")+"";this.getSubNode("CAPTION").html(xui.adjustRes(c,true))}},html:{action:function(c,d,e){this.getSubNode("PANEL").html(xui.adjustRes(c,0,1),null,null,e)}},toggle:{ini:true,action:function(c){this.box._toggle(this,c)}},image:{format:"image",action:function(c){xui.UI.$iconAction(this)}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c||"center")}},imageBgSize:{action:function(c){this.getSubNode("ICON").css("backgroundSize",c||"")}},imageClass:{ini:"",action:function(c,d){xui.UI.$iconAction(this,"ICON",d)}},iconFontCode:{action:function(c){xui.UI.$iconAction(this)}},borderType:{ini:"inset",listbox:["none","flat","inset","outset"],action:function(d){var f=this,j=f.properties,g=f.getSubNode("PANEL"),e=/^xui-uiborder-/,h="xui-uiborder-",c=f.getRoot();g.removeClass(e);g.addClass(h+d);xui.UI.$tryResize(f,c.get(0).style.width,c.get(0).style.height,true)}},noFrame:{ini:false,action:function(d){var e=this,c=e.getRoot();e.getSubNode("BBAR").css("display",d?"none":"");e.getSubNode("MAIN").css("paddingLeft",d?"0":"");e.getSubNode("MAINI").css("paddingRight",d?"0":"").css("backgroundImage",d?"none":"");xui.UI.$tryResize(e,c.get(0).style.width,c.get(0).style.height,true)}},hAlign:{ini:"left",listbox:["left","center","right"],action:function(c){this.getSubNode("BARCMDL").css("textAlign",c)}},toggleIcon:{listbox:["xui-uicmd-toggle","xui-uicmd-check"],ini:"xui-uicmd-toggle",action:function(c,d){this.getSubNode("TOGGLE").replaceClass(new RegExp("\\b"+d,"img"),c)}},infoBtn:{ini:false,action:function(c){this.getSubNode("INFO").css("display",c?"":"none")}},optBtn:{ini:false,action:function(c){this.getSubNode("OPT").css("display",c?"":"none")}},toggleBtn:{ini:false,action:function(c){this.getSubNode("TOGGLE").css("display",c?"":"none")}},closeBtn:{ini:false,action:function(c){this.getSubNode("CLOSE").css("display",c?"":"none")}},refreshBtn:{ini:false,action:function(c){this.getSubNode("REFRESH").css("display",c?"":"none")}},popBtn:{ini:false,action:function(c){this.getSubNode("POP").css("display",c?"":"none")}},tagCmds:{ini:[],action:function(){this.boxing().refresh()}}},LayoutTrigger:function(){var c=this,d=c.properties;if(!d.toggle){c.box._toggle(c,false,true)}else{c.boxing().iniPanelView()}},EventHandlers:{onIniPanelView:function(c){},beforeFold:function(c){},beforeExpand:function(c){},afterFold:function(c){},afterExpand:function(c){},onClickBar:function(c,d){},onClickPanel:function(c,d,f){},beforePop:function(d,c,f,g){},beforeClose:function(c){},onShowInfo:function(c,d,f){},onShowOptions:function(c,d,f){},onRefresh:function(c){},onCmd:function(c,f,d,g){}},_prepareData:function(d){var e=arguments.callee.upper.call(this,d),c="display:none";e._bordertype="xui-uiborder-"+e.borderType;e._bbarDisplay=e.noFrame?c:"";e._leftp=e.noFrame?"padding-left:0;":"";e._rightp=e.noFrame?"padding-right:0;background-image:none;":"";e.toggleDisplay=e.toggleBtn?"":c;e.panelDisplay=e.toggleBtn&&!e.toggle?c:"";e._fi_toggleCls2=e.toggleIcon+(e.toggleBtn&&e.toggle?" xuifont-checked "+e.toggleIcon+"-checked":"");d._toggle=!!e.toggle;e.infoDisplay=e.infoBtn?"":c;e.optDisplay=e.optBtn?"":c;e.closeDisplay=e.closeBtn?"":c;e.popDisplay=e.popBtn?"":c;e.refreshDisplay=e.refreshBtn?"":c;e._align="text-align:"+e.hAlign+";";if(!xui.isEmpty(e.tagCmds)){this._prepareCmds(d,e)}return e},_toggle:function(e,f,c){var g=e.properties,d=e.boxing();if(f){d.iniPanelView()}if(c||e._toggle!==!!f){e._toggle=g.toggle=!!f;if(!c){if(f){if(d.beforeExpand&&false===d.beforeExpand(e)){return}}else{if(d.beforeFold&&false===d.beforeFold(e)){return}}}if(g.toggleBtn){e.getSubNode("TOGGLE").tagClass("-checked",!!f)}e.adjustSize();if(!c){if(f){if(d.afterExpand){d.afterExpand(e)}}else{if(d.afterFold){d.afterFold(e)}}}if(g.dock&&g.dock!="none"){d.adjustDock(true)}}},_onresize:function(j,A,x){var h=j.properties,r=xui.$us(h),E=function(F,G){return j.$forceu(F,r>0?"em":"px",G)},B=j.getRoot();var q={},D=h.noFrame,l=j.getSubNode("BORDER"),g=j.getSubNode("TBAR"),f=j.getSubNode("PANEL"),e=j.getSubNode("BBAR"),d=j.getSubNode("MAIN"),c=j.getSubNode("MAINI"),C=j.getEmSize()/B._getEmSize(),u=f._getEmSize(C),m=j.properties.borderType!="none"?f._borderW():0,p=l._borderH(),o,n,w;if(A&&A!="auto"){A=j.$px(A,null,true)}if(x&&x!="auto"){x=j.$px(x,null,true)}if(x){if(x=="auto"){q.height=x}else{if(j._toggle){f.css("display","");o=g.offsetHeight(true);n=D?0:e.offsetHeight(true);if((w=x-p-o-n)>0){q.height=E(w-m,u)}}else{f.css("display","none");o=l.height();o=o?E(o):null;j.getRoot().height(o||"auto")}}}if(A){q.width=E(A-(D?0:(Math.round(parseFloat(c.css("paddingRight")))||0))-(D?0:(Math.round(parseFloat(d.css("paddingLeft")))||0))-p-m-d._borderW()-c._borderW(),u)}if(j._toggle){f.cssSize(q,true);if(A){xui.UI._adjustConW(j,f,q.width)}}}}});Class("xui.UI.Group","xui.UI.Panel",{Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className}",BORDER:{tagName:"fieldset",className:"{_fieldCls} xui-uibar-top2",TBAR:{tagName:"legend",style:"{_align}",BARCMDL:{LTAGCMDS:{tagName:"span",className:"xui-ltag-cmds",style:"{_ltagDisplay}",text:"{ltagCmds}"},TOGGLE:{$order:1,className:"xuifont",$fonticon:"{_fi_toggleCls2}",style:"{toggleDisplay}",$order:0},ICON:{$order:2,className:"xuicon {imageClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{imageDisplay}",text:"{iconFontCode}"},CAPTION:{tabindex:"{tabindex}",className:"xui-title-node",text:"{caption}",$order:3}},BARCMDR:{$order:4,tagName:"div",className:"xui-uibar-cmdr xui-uibase",RTAGCMDS:{$order:0,tagName:"span",className:"xui-rtag-cmds",style:"{_rtagDisplay}",text:"{rtagCmds}"},INFO:{className:"xuicon",$fonticon:"xui-uicmd-info",style:"{infoDisplay}",$order:1},OPT:{className:"xuicon",$fonticon:"xui-uicmd-opt",style:"{optDisplay}",$order:2},POP:{className:"xuicon",$fonticon:"xui-uicmd-pop",style:"{popDisplay}",$order:3},REFRESH:{className:"xuicon",$fonticon:"xui-uicmd-refresh",style:"{refreshDisplay}",$order:4},CLOSE:{className:"xuicon",$fonticon:"xui-uicmd-close",style:"{closeDisplay}",$order:5}}},PANEL:{$order:1,tagName:"div",style:"{panelDisplay};{_panelstyle};{_overflow};",className:"xui-uicontainer",text:"{html}"+xui.UI.$childTag}},$submap:xui.UI.$getTagCmdsTpl()},Appearances:{KEY:{zoom:xui.browser.ie6?"1":null},BORDER:{position:"relative",overflow:"visible",zoom:xui.browser.ie6?"1":null},TBAR:{"margin-left":".5em","padding-bottom":".1666667em"},"BORDER-checked TBAR":{"margin-left":"-.5em"},"BORDER-checked BARCMDL":{"padding-left":"1em"},BARCMDL:{cursor:"default","padding-right":".25em",display:xui.$inlineBlock},PANEL:{position:"relative",overflow:"auto","line-height":"auto",background:xui.browser.ie?"url("+xui.ini.img_bg+") no-repeat left top":null},CAPTION:{display:"inline","vertical-align":xui.browser.ie6?"baseline":"middle"},TOGGLE:{padding:"0 .334em 0 .1667em"}},DataModel:{dock:"none",noFrame:null,borderType:null},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);if(!c.properties.toggle){d.height="auto"}d._fieldCls=d.toggleBtn&&!d.toggle?" xui-uiborder-t":" xui-uiborder-flat xui-uiborder-radius";return d},_toggle:function(f,g,c){var h=f.properties,e=f.boxing();if(g){e.iniPanelView()}if(c||f._toggle!==!!g){f._toggle=h.toggle=!!g;if(!c){if(g){if(e.beforeExpand&&false===e.beforeExpand(f)){return}}else{if(e.beforeFold&&false===e.beforeFold(f)){return}}}if(h.toggleBtn){f.getSubNode("TOGGLE").tagClass("-checked",!!g)}var d=f.getSubNode("BORDER");if(g){d.removeClass("xui-uiborder-t").addClass("xui-uiborder-flat xui-uiborder-radius")}else{d.removeClass("xui-uiborder-flat xui-uiborder-radius").addClass("xui-uiborder-t")}f.adjustSize();if(!c){if(g){if(e.afterExpand){e.afterExpand(f)}}else{if(e.afterFold){e.afterFold(f)}}}if(h.dock&&h.dock!="none"){e.adjustDock(true)}}},_onresize:function(f,e,n){var d=f.properties,h=xui.$us(d),m=function(o,p){return f.$forceu(o,h>0?"em":"px",p)},j=f.getSubNode("BORDER"),c=f.getSubNode("PANEL"),l=e?f.$px(e):null,g=n?f.$px(n):null;if(f._toggle){c.css("display","");if(n&&n!="auto"){j.height(m(g,j));g-=f.getSubNode("TBAR").height()||18;c.height(m(g,c))}}else{c.css("display","none");n=f.getSubNode("TBAR").height();n=n?m(n):null;f.getRoot().height(n||"auto");if(n&&n!="auto"){j.height(n)}}if(e&&e!="auto"&&l>=2&&f._toggle){c.width(l=m(l-2));xui.UI._adjustConW(f,c,l)}}}});Class("xui.UI.PageBar",["xui.UI","xui.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(g){if(!g.renderId){return}var m,e=g.properties,d=g.box._v2a(c),u=d[0],f=d[1],A=d[2],n=g.keys,B=function(D,C){return D.getSubNode(C)},h=B(g,"FIRST"),p=B(g,"PREV"),o=B(g,"PREM"),r=B(g,"CUR"),q=B(g,"NEXT"),w=B(g,"NEXTM"),j=B(g,"LAST"),l=function(F,E,D,C){if(E){F.attr("href",e.uriTpl.replace("*",E))}if(xui.isSet(D)){F.html(e.textTpl.replace("*",D),false)}if(xui.isSet(C)){F.get(0)._real_page=C}},x=function(D,C){D.css("display",C?"":"none")};l(h,u,u);l(o,"",".."+xui.str.repeat(".",String(f-1-u).length),1);l(p,f-1,e.prevMark||(f-1));l(r,f,f);l(q,f+1,e.nextMark||(f+1));l(w,"",".."+xui.str.repeat(".",String(A-f-1).length),1);l(j,A,A);if((m=f-u)<=0){x(h,0);x(o,0);x(p,0)}else{if(m==1){x(h,1);x(o,0);x(p,0)}else{if(m==2){x(h,1);x(o,0);x(p,1);l(p,f-1,f-1)}else{x(h,1);x(o,1);x(p,1);if(m==3){l(p,f-1,f-1);l(o,f-2,f-2,0)}}}}if((m=A-f)<=0){x(j,0);x(w,0);x(q,0)}else{if(m==1){x(j,1);x(w,0);x(q,0)}else{if(m==2){x(j,1);x(w,0);x(q,1);l(q,f+1,f+1)}else{x(j,1);x(w,1);x(q,1);if(m==3){l(q,f+1,f+1);l(w,f+2,f+2,0)}}}}})},setPage:function(c){return this.each(function(g){var f=(g.properties.$UIvalue||""),e=f.split(":"),d=e[1]||e[0];e[1]=parseInt(c,10)||d;g.boxing().setUIValue(e.join(":"),false,false,"page");if(g.onPageSet){g.boxing().onPageSet(g,e[1],d)}})}},Static:{Templates:{style:"{_style}",className:"{_className}",POOL:{style:"position:absolute;display:none;",POP:{tagName:"div",className:"xui-uibase xui-ui-reset"}},LABEL:{text:"{caption}"},FIRST:{$order:1,tagName:"a",className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",href:"#",tabindex:"{tabindex}"},PREM:{$order:2,className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tagName:"a",href:"#",tabindex:"{tabindex}"},PREV:{$order:3,className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tagName:"a",href:"#",tabindex:"{tabindex}",text:"{prevMark}"},CUR:{$order:4,className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius xui-ui-btn-checked xui-ui-btn xui-uibar xui-uigradient-checked",tagName:"a",href:"#",tabindex:"{tabindex}"},NEXT:{$order:5,className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tagName:"a",href:"#",tabindex:"{tabindex}",text:"{nextMark}"},NEXTM:{$order:6,className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tagName:"a",href:"#",tabindex:"{tabindex}"},LAST:{$order:7,className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tagName:"a",href:"#",tabindex:"{tabindex}"}},Appearances:{LABEL:{padding:".25em .5em 0 .5em","vertical-align":"top","white-space":"nowrap"},KEY:{display:"inline",overflow:"visible"},"KEY a:focus, POP a:focus":{"outline-offset":"","-moz-outline-offset":(xui.browser.gek&&xui.browser.ver<3)?"":null},"KEY .xui-ui-btn, POP .xui-ui-btn":{"margin-right":".25em"},"KEY .xui-ui-btn a, POP .xui-ui-btn a":{padding:"0 .25em 0 .25em"},"PREV,CUR,NEXT":{"font-weight":"bold"},POP:{border:"dotted 1px gray",position:"absolute",padding:".25em","line-height":"2.25em"}},Behaviors:{HoverEffected:{FIRST:"FIRST",PREM:"PREM",PREV:"PREV",NEXT:"NEXT",NEXTM:"NEXTM",LAST:"LAST",POPI:"POPI",CUR:"CUR"},ClickEffected:{FIRST:"FIRST",PREM:"PREM",PREV:"PREV",NEXT:"NEXT",NEXTM:"NEXTM",LAST:"LAST",POPI:"POPI",CUR:"CUR"},POP:{onClick:function(c,f,h){var g=xui(h),d=xui.Event.getSrc(f);g.setBlurTrigger(c.key+":"+c.$xid,null);c.getSubNode("POOL").append(g);if(d.tagName.toLowerCase()=="a"||((d=d.firstChild)&&(d.tagName.toLowerCase()=="a"))||((d=d.firstChild)&&(d.tagName.toLowerCase()=="a"))||((d=d.firstChild)&&(d.tagName.toLowerCase()=="a"))){return c.box._click(c,d)}}},FIRST:{onClick:function(c,d,f){return c.box._click(c,f)}},PREM:{onClick:function(c,d,f){if(xui.use(f).get(0)._real_page){c.box._show(c,d,f,0);return false}else{return c.box._click(c,f)}}},PREV:{onClick:function(c,d,f){return c.box._click(c,f)}},CUR:{onClick:function(c,d,f){return c.box._click(c,f)}},NEXT:{onClick:function(c,d,f){return c.box._click(c,f)}},NEXTM:{onClick:function(c,d,f){if(xui.use(f).get(0)._real_page){c.box._show(c,d,f,1);return false}else{return c.box._click(c,f)}}},LAST:{onClick:function(c,d,f){return c.box._click(c,f)}}},DataModel:{dataField:null,dataBinder:null,readonly:null,autoTips:false,dirtyMark:false,showDirtyMark:false,parentID:"",caption:{ini:" Page: ",action:function(c){c=(xui.isSet(c)?c:"")+"";this.getSubNode("LABEL").html(xui.adjustRes(c,true))}},value:"1:1:1",uriTpl:"#*",textTpl:"*",prevMark:"&lt;",nextMark:"&gt;",_moreStep:30},EventHandlers:{onClick:function(c,d){},onPageSet:function(d,e,c){}},_ensureValue:function(f,g){g=g+"";var e=g.split(":"),c=[],d=function(h){return parseInt(h,10)||1};if(e.length<3){c=f.properties.$UIvalue.split(":");e[1]=e[0];e[0]=c[0];e[2]=c[2]}c[0]=d(e[0]);c[1]=d(e[1]);c[2]=d(e[2]);c[0]=Math.max(c[0],1);c[0]=Math.min(c[0],c[1]);c[2]=Math.max(c[1],c[2]);return c.join(":")},_v2a:function(c){c=typeof c=="string"?c.split(":"):c;c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10);c[2]=parseInt(c[2],10);return c},_click:function(f,h){if(f.properties.disabled){return false}var c=f.boxing(),d=(f.properties.$UIvalue||"").split(":"),e=parseInt(xui(h).attr("href").split("#")[1],10)||d[1]||d[0];var g=c.onClick(e);d=(f.$UIvalue||"").split(":");if(!d.length||(e+"")!==(d[1]+"")){c.setPage(e)}return typeof g=="boolean"?g:false},_show:function(j,F,o,E){if(j.properties.disabled){return false}var f=j.properties,c=j.box._v2a(f.value),B=c[0],h=c[1],D=c[2],r=j.keys,G=function(l,e){return l.getSubNode(e)},u=G(j,"POOL"),p=G(j,"POP"),d=function(e){return Math.ceil((e+1)/10)*10},H=[],q,x,w,C,A;if(E){if((q=D-1-h)<=0){return}w=h+1;A=D}else{if((q=h-1-B)<=0){return}w=1;A=h-1}x=Math.ceil(q/f._moreStep);if(x>10){w=d(w);A=d(A)-1;x=d(x)}else{w=w+x}var g=j.keys.POPI+":"+j.serialId+":";while(w<A){H.push('<a style="margin-top:.25em;" id="'+g+w+'" class="xui-node xui-node-span xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius" href="'+f.uriTpl.replace("*",w)+'">'+f.textTpl.replace("*",w)+"</a>");w=w+x}p.width("auto");p.html(H.join(" "));xui("body").append(p);if(p.width()>300){p.width(300)}p.popToTop(o,null,f.parentID?xui(f.parentID):null);p.setBlurTrigger(j.key+":"+j.$xid,function(){u.append(p)})}},Initialize:function(){this.addTemplateKeys(["POPI"])}});Class("xui.UI.Tabs",["xui.UI","xui.absList","xui.absValue"],{Instance:{_setCtrlValue:function(c){this.each(function(g){var e=g.domId,j=g.boxing(),q=j.getUIValue(),d=g.properties,l=g.box.$DataModel,h=g.getSubNode("MENUCAPTION"),m=g.getSubNode("MENUCLOSE"),n=function(B,u){var x=g.getSubIdByItemId(B),A=g.getItemByItemId(B);if(x){u.push(x);if(!l.hasOwnProperty("noPanel")||!d.noPanel){var w=j.getPanel(B).get(0);if(w&&(A._scrollTop=w.scrollTop||0)){w.scrollTop=0}j.getPanel(B).css("display","none")}}},r=function(B,u){var w=g.getSubIdByItemId(B),A=g.getItemByItemId(B);if(w){u.push(w);h.html(A.caption);m.css("display",A.closeBtn?"":"none");g._menuId=A.id;if(!l.hasOwnProperty("noPanel")||!d.noPanel){j.getPanel(B).css("display","block");if(A._scrollTop){j.getPanel(B).get(0).scrollTop=A._scrollTop}var x=g.getRootNode().style;xui.UI.$tryResize(g,x.width,x.height,true,c);x=null;g.box._forLazyAppend(g,A,c);g.box._forIniPanelView(g,A)}}};var p=[],o=[];if(l.hasOwnProperty("selMode")&&l.hasOwnProperty("noPanel")&&d.noPanel&&d.selMode=="multi"){q=q?q.split(d.valueSeparator):[];xui.arr.each(q,function(u){n(u,p)});c=c?c.split(d.valueSeparator):[];var f="";xui.arr.each(c,function(w){var u=o.length;r(w,o);if(u<o.length){f=w}})}else{n(q,p);r(c,o)}if(p.length){g.getSubNodes(["ITEM","TOGGLE"],p).tagClass("-checked",false);g.getSubNodes("ITEM",p).tagClass("-checked",false)}if(o.length){g.getSubNodes(["ITEM","TOGGLE"],o).tagClass("-checked");g.getSubNodes("ITEM",o).tagClass("-checked")}})},append:function(g,c,f,d){var e=this.get(0).properties;if(c=c||e.$UIvalue||e.value){arguments.callee.upper.call(this,g,c+"",f,d)}return this},getCurPanel:function(){var e=this.get(0),d=e.box.$DataModel,c=e.properties.$UIvalue;if(d.hasOwnProperty("noPanel")&&d.hasOwnProperty("selMode")&&e.properties.selMode=="multi"){c=c.split(prop.valueSeparator);c=c[0]||null}return c?this.getPanel(c):null},getPanel:function(c){var d=this.get(0);return d.getSubNodeByItemId("PANEL",c+"")},addPanel:function(m,d,l){var h=this,e={},f=[],c=l&&l.id,g=h.getItems(),j=m.id||m.tag;if(g.length){if(-1!=xui.arr.subIndexOf(g,"id",j)){return false}}xui.merge(e,{caption:m.caption,image:m.image,closeBtn:m.closeBtn||false,popBtn:m.popBtn||false,optBtn:m.optBtn||false,imagePos:m.imagePos,imageBgSize:m.imageBgSize,dragKey:m.dragKey,dropKeys:m.dropKeys,id:m.id||m.tag||xui.id()});if(c){h.insertItems([e],c,true)}else{h.insertItems([e])}xui.arr.each(d,function(n){f.push(n[0])});h.append(xui.UI.pack(f,false),e.id);return h},removePanel:function(e){var c=this,d=c.getItemByDom(e);return c.removeItems([d.id])},getPanelPara:function(g){var e=this.get(0),c=e.properties,f=e.getItemByDom(g),d=xui.clone(f,false);if(!d.dragKey){d.dragKey=c.dragKey}if(!d.dropKeys){d.dropKeys=c.dropKeys}return d},getPanelChildren:function(e){var d=this.get(0),f=d.getItemIdByDom(e),c=[];if(f){xui.arr.each(d.children,function(g){if(g[1]==f){c.push(g)}})}return c},resetPanelView:function(d,e,g){if(!xui.isSet(e)){e=true}if(!xui.isSet(g)){g=true}var c,f;return this.each(function(h){if(h.renderId){xui.arr.each(h.properties.items,function(j){if(d===true||(d+"")===j.id){delete j._$ini}});if(e){h.boxing().removeChildren(d,g)}}})},iniPanelView:function(c){return this.each(function(d){if(c){if(c=d.getItemByItemId(c+"")){d.box._forIniPanelView(d,c)}}else{xui.arr.each(d.properties.items,function(e){d.box._forIniPanelView(d,e)})}})},fireItemClickEvent:function(c){var e=this.getSubNodeByItemId("ITEM",c+""),d=xui.Event;e.onClick(true);return this},_afterInsertItems:function(f,h){if(!f.renderId){return}var g=f.box,j,d,c=f.properties;if(j=f.getSubNode(f.keys.BOX||f.keys.KEY)){j.append(f._buildItems("panels",h));if(!f.box.$DataModel.hasOwnProperty("noPanel")){if(!(d=this.getUIValue())){this.fireItemClickEvent((d=c.items[0])&&d.id)}}var e=f.getRootNode().style;xui.UI.$tryResize(f,e.width,e.height,true);e=null}},removeItems:function(c,f){var d=this,h,g,e;d.each(function(j){var l=j.properties;c=xui.isSet(c)?xui.isArr(c)?c:(c+"").split(l.valueSeparator):null;if(!c){c=((l.$UIvalue||l.value)+"").split(l.valueSeparator)}if(!j.box.$DataModel.hasOwnProperty("noPanel")||!j.properties.noPanel){xui.arr.each(c,function(m){e=j.getSubIdByItemId(m+"");if(e&&!(g=j.getSubNode("PANEL",e)).isEmpty()){g.remove(true,f)}})}});arguments.callee.upper.apply(d,arguments);d.each(function(l){if(!l.boxing().getUIValue()){xui.asyRun(function(){if(!l||!l.renderId||!l.properties||!l.properties.items.length){return}var m;l.boxing().fireItemClickEvent((m=l.properties.items[0])&&m.id)})}var j=l.getRootNode().style;xui.UI.$tryResize(l,j.width,j.height,true);j=null});return d},clearItems:function(d){var c=this;c.each(function(e){if(!e.box.$DataModel.hasOwnProperty("noPanel")||!e.properties.noPanel){e.getSubNode("PANEL",true).remove(true,d)}});c.setValue(null,true,"clear");arguments.callee.upper.apply(c,arguments);return c},markItemCaption:function(c,h,e,n,m){var g=this.get(0);c=g.getItemByItemId(c+"");if((c._dirty!=h)||e){var d=c.id,l=g.getItemByItemId(d),j=l.caption,f=g.getSubNodeByItemId("CAPTION",d);if(n){if(xui.isFun(n)){l.caption=n(g,l,h);f.html(l.caption)}else{f.html(l.caption=h?n+j:j.replace(new RegExp("^"+n),""))}}else{f.html(l.caption=h?"*"+j:j.replace(/^\*/,""))}if(m){if(h){f.addCalss(m)}else{f.removeCalss(m)}}else{f.css({"font-weight":h?"bold":"","font-style":h?"italic":""})}c._dirty=h}return this}},Static:{Templates:{tagName:"div",style:"{_style};",className:"{_className}",LIST:{$order:1,tagName:"div",style:"{_liststyle}",LISTBG:{$order:0,className:"xui-uiborder-t xui-uiborder-b xui-uiborder-dark xui-uibar-checked"},MENU:{className:"xui-ui-unselectable xui-uiborder-hidden xui-uiborder-radius",MENUICON:{className:"xuicon",$fonticon:"xui-icon-menu"},MENUCAPTION:{},MENUCLOSE:{className:"xuifont",$fonticon:"xui-uicmd-close",$order:2}},MENU2:{tagName:"div",className:"xui-ui-unselectable",MENUICON2:{className:"xui-uiborder-hidden xui-uiborder-radius xuicon {_iconChecked}",$fonticon:"xui-icon-menu"}},ITEMS:{tagName:"div",className:"xui-ui-unselectable {_specialIconCls}",text:"{items}",style:"{HAlign}"}},PNAELS:{$order:2,tagName:"text",text:"{panels}"},$submap:{items:{ITEM:{className:"xui-uiborder-flat xui-uiborder-nob xui-uiborder-box xui-uiborder-radius-big-tl xui-uiborder-radius-big-tr xui-uibar {itemClass} {disabled} {readonly}",style:"{_itemDisplay} {itemStyle}",ITEMI:{ITEMC:{HANDLE:{tabindex:"{_tabindex}",className:"xui-showfocus",IBWRAP:{tagName:"div",style:"white-space:nowrap;",RULER:{},LTAGCMDS:{$order:1,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},ICON:{$order:2,className:"xuicon {imageClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{imageDisplay}",text:"{iconFontCode}"},CAPTION:{$order:3,text:"{caption}",className:"xui-title-node",style:"{itemWidth};{itemAlign}"},CMDS:{$order:4,RTAGCMDS:{$order:0,tagName:"span",style:"{_rtagDisplay}",text:"{rtagCmds}"},OPT:{$order:1,className:"xuifont",$fonticon:"xui-uicmd-opt",style:"{_opt}"},POP:{className:"xuifont",$fonticon:"xui-uicmd-pop",style:"{popDisplay}",$order:1},CLOSE:{className:"xuifont",$fonticon:"xui-uicmd-close",style:"{closeDisplay}",$order:2}}}}}}}},panels:{PANEL:{tagName:"div",className:"xui-uibase xui-uicontainer",style:"{_overflow};{_bginfo}",text:"{html}"+xui.UI.$childTag}},"items.ltagCmds":function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"items.tagCmds"+(j[e.type]||".button"),c)},"items.rtagCmds":function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"items.tagCmds"+(j[e.type]||".button"),c)},"items.tagCmds.text":xui.UI.$getTagCmdsTpl("text"),"items.tagCmds.button":xui.UI.$getTagCmdsTpl("button"),"items.tagCmds.image":xui.UI.$getTagCmdsTpl("image")}},Appearances:{KEY:{position:"absolute",overflow:"hidden"},LIST:{position:"relative",overflow:"hidden",left:0,width:"100%",padding:".25em .25em 0 .25em ","white-space":"nowrap"},LISTBG:{position:"absolute",overflow:"hidden",left:0,bottom:0,height:"3px",width:"100%"},MENU:{display:"none",margin:".25em",padding:".16667em",cursor:"pointer"},MENU2:{display:"none"},MENUICON:{"vertical-align":xui.browser.ie6?"baseline":"middle"},MENUCAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle",margin:"0 4px","font-size":"1em"},ITEMS:{padding:"0 0 4px 0",position:"relative",left:0,top:0,"white-space":"nowrap"},"ITEMS-icon CAPTION, ITEMS-icon OPT, ITEMS-icon POP, ITEMS-icon2 CAPTION, ITEMS-icon2 OPT, ITEMS-icon2 POP":{display:"none"},"ITEMS-menu ITEM":{display:"none"},ITEM:{$order:0,cursor:"pointer",padding:"0 .5em 0 0","vertical-align":"top",margin:"0 .25em","border-bottom":0,"border-radius":"6px 6px 0 0","-moz-border-radius":"6px 6px 0 0","-webkit-border-radius":"6px 6px 0 0","-o-border-radius":"6px 6px 0 0","-ms-border-radius":"6px 6px 0 0","-khtml-border-radius":"6px 6px 0 0"},ITEMI:{$order:0,"padding-left":".5em","vertical-align":"top"},ITEMC:{$order:0,padding:".5em 0 .25em 0","vertical-align":"top","text-align":"center"},HANDLE:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,cursor:"pointer","vertical-align":"middle",padding:0},"ITEM-checked HANDLE":{"padding-bottom":"1px"},RULER:{height:"1.5em",width:"0","vertical-align":"middle"},PANEL:{position:"relative",display:"none",width:"100%",overflow:"auto"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle",margin:"0 4px",overflow:"hidden"},CMDS:{"vertical-align":"middle"},"LTAGCMDS, RTAGCMDS":{padding:0,margin:0},CMD:{padding:0,margin:0}},Behaviors:{NOTIPS:["GROUP","HANDLER"],DroppableKeys:["PANEL","LIST","ITEM"],PanelKeys:["PANEL"],DraggableKeys:["ITEM"],HoverEffected:{ITEM:"ITEM",MENU:"MENU",MENU2:"MENU2",MENUICON2:"MENUICON2",OPT:"OPT",CLOSE:"CLOSE",MENUCLOSE:"MENUCLOSE",POP:"POP",ICON:"ICON",CMD:"CMD"},ClickEffected:{ITEM:"ITEM",MENU:"MENU",MENU2:"MENU2",MENUICON2:"MENUICON2",OPT:"OPT",CLOSE:"CLOSE",MENUCLOSE:"MENUCLOSE",POP:"POP",CMD:"CMD"},onSize:xui.UI.$onSize,CAPTION:{onMousedown:function(d,h,j){if(xui.Event.getBtn(h)!="left"){return}var c=d.properties,g=d.getItemByDom(j),f=d.boxing();if(c.disabled||g.disabled){return false}if(c.readonly||g.readonly){return false}if(f.getUIValue()==g.id){if(d.onCaptionActive){d.boxing().onCaptionActive(d,d.getItemByDom(j),h,j)}}}},ITEM:{onClick:function(g,n,c){if(xui.Event.getBtn(n)!="left"){return false}var u;if((u=xui.Event.getSrc(n).parentNode)&&u.id&&(g.getKey(u.id))==g.keys.CMDS){return false}var d=g.properties,m=g.box.$DataModel,o=g.getSubId(c),r=g.getItemByDom(c),l=g.boxing();if(d.disabled||r.disabled){return false}if(d.readonly||r.readonly){return false}if(m.hasOwnProperty("selMode")&&m.hasOwnProperty("noPanel")&&d.noPanel&&d.selMode=="multi"){var q=l.getUIValue(),j=q?q.split(d.valueSeparator):[],p=1,h=false,f=false;if(j.length){if(xui.arr.indexOf(j,r.id)!=-1){xui.arr.removeValue(j,r.id);p=-1}else{j.push(r.id)}j.sort();q=j.join(d.valueSeparator);if(l.getUIValue()==q){h=false}else{l.setUIValue(q,null,null,"md");if(l.get(0)&&l.getUIValue()==q){h=l.onItemSelected(g,r,n,c,p)||f}}return h}}if(l.getUIValue()!=r.id){l.setUIValue(r.id,null,null,"md");if(l.getUIValue()==r.id){h=l.onItemSelected(g,r,n,c)||f;return h}}}},HANDLE:{onKeydown:function(f,j,c){var p=xui.Event.getKey(j),o=p.key,d=p.shiftKey;if(o==" "||o=="enter"){f.getSubNode("ITEM",f.getSubId(c)).onClick();return false}var n=xui(c),l=f.getSubNode("ITEMS"),h=l.nextFocus(true,true,false),m=l.nextFocus(false,true,false);switch(o){case"tab":if(d){if(n.get(0)!=h.get(0)){h.focus();return false}}else{if(n.get(0)!=m.get(0)){m.focus();return false}}break;case"left":case"up":var g=n.nextFocus(false,true,false);if(n.get(0)==h.get(0)){m.focus()}else{n.nextFocus(false)}return false;break;case"right":case"down":var g=n.nextFocus(true,false,false);if(n.get(0)==m.get(0)){h.focus()}else{n.nextFocus()}return false;break}}},CMD:{onClick:function(c,f,g){var h=c.properties,d=c.getItemByDom(xui.use(g).parent().get(0));if(!d){return false}if(h.disabled||d.disabled||d.type=="split"){return false}if(c.onCmd){c.boxing().onCmd(c,d,xui.use(g).id().split("_")[1],f,g)}return false}},OPT:{onClick:function(c,d,f){c.boxing().onShowOptions(c,c.getItemByDom(f),d,f);return false}},CLOSE:{onClick:function(f,h,c){var l=f.properties,q=f.getItemByDom(c),m=l.$UIvalue,o;if(l.disabled||q.disabled){return}if(l.readonly||q.readonly){return false}var n=f.boxing();if(false===n.beforePageClose(f,q,c)){return}o=xui.copy(q);if(m&&m==q.id){var j=l.items,g=xui.arr.subIndexOf(j,"id",q.id),p,d=(p=j[g+1])?p.id:(p=j[g-1])?p.id:(p=j[0])?p.id:null;if(d&&d!=m){f.boxing().fireItemClickEvent(d)}}n.removeItems(q.id);n.afterPageClose(f,o);var p=f.getRootNode().style;xui.UI.$tryResize(f,p.width,p.height,true);p=null;return false}},MENUCLOSE:{onClick:function(c,d,f){c.getSubNodeByItemId("CLOSE",c._menuId).onClick(true)}},POP:{onClick:function(g,j,c){var m=g.properties,q=g.getItemByDom(c),u={parent:null,host:null,properties:null,events:null,CS:null,CC:null,CB:null,CF:null,init:null},f=q.id;if(m.disabled||q.disabled){return false}if(m.readonly||q.readonly){return false}if(g.beforePagePop&&false==g.boxing().beforePagePop(g,q,u,j,c)){return false}var d=g.boxing().getPanel(f),n=g.getRoot().offset(),r=g.getRoot().cssSize(),o=xui.copy(xui.UI.Dialog.$DataStruct),p={};xui.merge(o,q,"with");xui.merge(o,{dragKey:q.dragkey||m.dragKey,dock:"none",tag:q.tag||q.id,width:Math.max(r.width,200),height:Math.max(r.height,100),left:n.left,top:n.top,landBtn:true},"all");if(u.properties){xui.merge(o,u.properties,"with")}if(u.events){xui.merge(p,u.events,"all")}var l=new xui.UI.Dialog(o,p,u.host||g.host,u.CS||null,u.CC||null,u.CB||null,u.CF||null);if(xui.isFun(u.init)&&false===u.init(l,g,u)){}else{l.show(u.parent||xui("body"));var h=[];xui.arr.each(g.children,function(e){if(e[1]==f){h.push(e[0])}});if(h.length){l.append(xui.UI.pack(h,false))}g.boxing().removeChildren(f).removeItems(f)}return false}},MENU:{onMouseover:function(f,n,c){var d=f._droppopmenu;if(d){return}var m=f.boxing(),o=f.properties.items,h=[],g=o.length,p;if(o.length>10){p=Math.ceil(g/10);for(var j=0;j<p;j++){h.push({caption:(j*10+1)+" - "+Math.min(g,((j+1)*10+1)),sub:[]})}xui.arr.each(o,function(l,e){h[parseInt(e/10)].sub.push(xui.clone(l,false,1))})}else{h=xui.clone(o,false,2)}d=f._droppopmenu=new xui.UI.PopMenu({items:h,autoHide:true},{onMenuSelected:function(e,l){m.fireItemClickEvent(l.id)},beforeHide:function(x,w){if(w){var q=xui(c),A=xui.Event.getPos(w),l=q.cssSize(),u=3,r=q.offset();if(A.left>r.left&&A.top>r.top-u&&A.left<r.left+l.width&&A.top<r.top+l.height){return false}}},onHide:function(){f._droppopmenu.destroy(true);delete f._droppopmenu}});d.pop(c)},onMouseout:function(f,g,c){var j;if(j=f._droppopmenu){var d=j.get(0).getRoot(),l=xui.Event.getPos(g),n=d.cssSize(),m=3,h=d.offset();if(l.left>h.left&&l.top>h.top-m&&l.left<h.left+n.width&&l.top<h.top+n.height){}else{j.hide()}}},onClick:function(d,c,f){xui(f).onMouseover(true)}},PANEL:{onClick:function(c,g,h){var f=c.properties,d=c.getItemByDom(h);if(f.disabled||d.disabled){return false}if(c.onClickPanel){return c.boxing().onClickPanel(c,d,g,h)}}}},DataModel:{rotate:null,selectable:true,dirtyMark:false,lazyAppend:true,dock:"fill",width:{$spaceunit:1,ini:"18em"},height:{$spaceunit:1,ini:"18em"},position:"absolute",itemWidth:{ini:0,action:function(c){this.getSubNode("CAPTION",true).width(c)}},itemAlign:{ini:"",listbox:["","left","center","right"],action:function(c){this.getSubNode("CAPTION",true).css("text-align",c)}},HAlign:{ini:"left",listbox:["left","center","right"],action:function(c){this.getSubNode("ITEMS").css("textAlign",c)}},dropKeysPanel:"",value:{ini:""},selMode:{ini:"single",listbox:["single","multi"]},noPanel:{ini:false,action:function(c){this.getSubNode("PANEL",true).css("display",c?"none":"block");this.adjustSize(null,true)}},noHandler:{ini:false,action:function(c){this.getSubNode("LIST").css("display",c?"none":"block");this.adjustSize(null,true)}},tagCmds:{ini:[],action:function(){this.boxing().refresh()}}},EventHandlers:{onCmd:function(c,d,g,f,h){},onIniPanelView:function(c,d){},beforePagePop:function(d,f,c,g,h){},beforePageClose:function(c,d,e){},afterPageClose:function(c,d){},onShowOptions:function(c,d,f,g){},onItemSelected:function(d,f,g,h,c){},onCaptionActive:function(c,d,f,g){},onClickPanel:function(c,d,f,g){}},RenderTrigger:function(){var d=this,c,f,e;if(c=d.properties.value){(e=d.boxing()).setUIValue(c,null,null,"render");if(f=d.getItemByItemId(c)){e.onItemSelected(d,f)}}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.panels=d.items;if(d.HAlign){d.HAlign="text-align:"+d.HAlign+";"}d._liststyle=d.noHandler?"display:none":"";if(d.sideBarStatus=="fold"){d._specialIconCls=c.getClass("ITEMS")+"-icon2";d._iconChecked=" xui-uiborder-hidden-checked xui-icon-menu-checked "}return d},_prepareItem:function(d,e){var g="display:none",f=d.properties,c;e.closeDisplay=e.closeBtn?"":g;e.popDisplay=e.popBtn?"":g;e._opt=e.optBtn?"":g;e._itemDisplay=e.hidden?g:"";if(c=e.itemWidth||f.itemWidth){e.itemWidth="width:"+c+(xui.isFinite(c)?"px":"")}if(c=e.itemAlign||f.itemAlign){e.itemAlign="text-align:"+c}e._bginfo="";if(c=e.panelBgClr||f.panelBgClr){e._bginfo+="background-color:"+c+";"}if(c=e.panelBgImg||f.panelBgImg){e._bginfo+="background-image:url("+xui.adjustRes(c)+");"}if(c=e.panelBgImgPos||f.panelBgImgPos){e._bginfo+="background-position:"+c+";"}if(c=e.panelBgImgRepeat||f.panelBgImgRepeat){e._bginfo+="background-repeat:"+c+";"}if(c=e.panelBgImgAttachment||f.panelBgImgAttachment){e._bginfo+="background-attachment:"+c+";"}if(xui.isStr(e.overflow)){e._overflow=e.overflow.indexOf(":")!=-1?(e.overflow):(data.overflow?("overflow:"+data.overflow):"")}else{if(xui.isStr(f.overflow)){e._overflow=f.overflow.indexOf(":")!=-1?(f.overflow):(f.overflow?("overflow:"+f.overflow):"")}}this._prepareCmds(d,e)},getDropKeys:function(c,e){var f=c.properties,d=c.getItemByDom(e);return c.getKey(xui.use(e).id())==c.keys.PANEL?((d&&d.dropKeysPanel)||f.dropKeysPanel):((d&&d.dropKeys)||f.dropKeys)},_forLazyAppend:function(d,o,m){var c=d.properties,h=d.boxing(),g={},e=d.moduleClass+"["+d.moduleXid+"]";if(c.lazyAppend){var j=d.children,l=[];xui.arr.each(j,function(p){if(p[1]==m&&(!p[0].renderId||xui.UIProfile.getFromDom(xui(p[0].renderId).parent().id())!=d)){l.push(p[0])}});if(l.length){xui.arr.each(l,function(q,r,p){if(q.moduleClass&&q.moduleXid&&(r=xui.SC.get(q.moduleClass))&&(r=r.getInstance(q.moduleXid))&&r["xui.Module"]){p=q.moduleClass+"["+q.moduleXid+"]";if(e!=p&&!g[p]){g[p]=r}}h.append(xui(q),m)})}if(d.$attached){for(var f=0,n;n=d.$attached[f++];){if(n._render){n._render(true)}}delete d.$attached}j=d.exchildren;if(j&&j.length){l=[];xui.filter(j,function(p){if(p[1]==m){l.push(p[0]);return false}});if(l.length){xui.arr.each(l,function(p){if(p.moduleClass&&p.moduleXid&&(y=xui.SC.get(p.moduleClass))&&(y=y.getInstance(p.moduleXid))&&y["xui.Module"]){z=p.moduleClass+"["+p.moduleXid+"]";if(e!=z&&!g[z]){g[z]=y}}h.append(xui(p),m)})}}j=d.excoms;if(j&&j.length){l=[];xui.filter(j,function(p){if(p[1]==m){l.push(p[0]);return false}});if(l.length){xui.arr.each(l,function(p){p.show(null,h,m,false)})}}xui.each(g,function(p){p.render()})}},_forIniPanelView:function(g,o){if(!o){return}var c=g.properties,j=g.boxing();if(!o._$ini){o._$ini=true;if(g.onIniPanelView){j.onIniPanelView(g,o)}if(o.iframeAutoLoad){j.getPanel(o.id).css("overflow","hidden");var n=typeof o.iframeAutoLoad=="string"?{url:o.iframeAutoLoad}:xui.clone(o.iframeAutoLoad,true),d="diframe_"+xui.rand(),m=xui.browser.ie&&xui.browser.ver<9,h=document.createElement(m?"<iframe name='"+d+"'>":"iframe");n.url=xui.adjustRes(n.url,false,true);h.id=h.name=d;if(xui.isHash(o.iframeAutoLoad)){o.iframeAutoLoad.frameName=d}o._frameName=d;if(!n.query){n.query={}}n.query._rand=xui.rand();h.frameBorder="0";h.marginWidth="0";h.marginHeight="0";h.vspace="0";h.hspace="0";h.allowTransparency="true";h.width="100%";h.height="100%";j.getPanel(o.id).html("").append(h);if((n.method||"").toLowerCase()=="post"){xui.Dom.submit(n.url,n.query,"post",d,n.enctype)}else{h.src=n.url}}else{if(o.ajaxAutoLoad){var l=typeof o.ajaxAutoLoad=="string"?{url:o.ajaxAutoLoad}:xui.clone(o.ajaxAutoLoad,true),p={rspType:"text"};xui.merge(p,l.options);if(!l.query){l.query={}}l.query._rand=xui.rand();j.busy(false,null,"PANEL",g.getSubIdByItemId(o.id));var f=j.getPanel(o.id);xui.Ajax(xui.adjustRes(l.url,false,true),l.query,function(e){f.html(e,true,true);j.free()},function(e){f.html("<div>"+e+"</div>",true,false);j.free()},null,p).start()}}}},_showTips:function(f,e,j){if(f.properties.disableTips){return}if(f.onShowTips){return f.boxing().onShowTips(f,e,j)}if(!xui.Tips){return}var c=e.id,g,d,l=f.keys;g=xui.get(e,["parentNode","id"])||"";d=xui.get(e,["parentNode","parentNode","id"])||"";if(c.indexOf(l.ITEM)===0||g.indexOf(l.ITEM)===0||d.indexOf(l.ITEM)===0||c.indexOf(l.HANDLE)===0||g.indexOf(l.HANDLE)===0||d.indexOf(l.HANDLE)===0||c.indexOf(l.CMDS)===0||g.indexOf(l.CMDS)===0||d.indexOf(l.CMDS)===0){var m=arguments.callee.upper,h=m.apply(this,xui.toArr(arguments));m=null;return h}},_onDrop:xui.UI.List._onDrop,_onresize:function(e,o,n,c,A){var d=e.properties,w=e.getItemByItemId(A);if(!w){A=d.$UIvalue||d.value;w=e.getItemByItemId(A)}if(!w){w=d.items[0];A=w&&w.id}if(!w){return}var m=e.boxing().getPanel(A),g=xui.$us(d),x=function(B,C){return e.$forceu(B,g>0?"em":"px",C)},p=e.getRoot(),u=e.getSubNode("LIST"),q=e.getEmSize()/p._getEmSize(),j=m._getEmSize(q),l=u._getEmSize(q),h=null,f=null,r;if(o&&o!="auto"){o=e.$px(o,null,true)}if(n&&n!="auto"){n=e.$px(n,null,true)}if(!m||m.isEmpty()){return}if(!d.noHandler){r=u.offsetHeight(true);if(e._listH!=r){e._listH=r;c=true}}if(c){w._w=w._h=null}if(n&&w._h!=n){w._h=n;if(n=="auto"){f="auto"}else{if(!d.noHandler){n=n-r}if(n>0){f=n}}}else{f=n}if(o&&w._w!=o){u.width(h=x(w._w=o,l));if(!d.noHandler){this._adjustHScroll(e)}}if(!d.noPanel&&(f||h)){m.height(x(f,j)).onSize()}if(h){xui.UI._adjustConW(e,m,h)}},_adjustHScroll:function(f){var o=f.getSubNode("ITEMS"),l=o.width(),n=f.getSubNode("LIST"),d=f.getSubNode("MENU"),h=f.getSubNode("CAPTION",true),p=0,g=function(){var q=0;o.children().each(function(r){if(r.offsetWidth==0){return}if(!q){q=r.offsetLeft+r.offsetWidth;return false}},true);return q},e=function(){var q=0;h.each(function(r){if(r.clientWidth==0){return}q+=r.clientWidth});return q},j;o.tagClass("-icon",false);o.tagClass("-icon2",false);o.tagClass("-menu",false);d.css("display","none");h.css("width","");f._mode="normal";p=g();if(p>l){var c=e();if((p-l)<c*0.75){var m=1-(p-l)/c;h.each(function(q){xui(q).width(Math.floor(q.clientWidth*m)+"px")});f._mode="narrow"}else{j=1}if(j||g()>l){o.tagClass("-icon",true);f._mode="icon";if(g()>l){o.tagClass("-menu",true);d.setInlineBlock();f._mode="menu"}}}}}});Class("xui.UI.Stacks","xui.UI.Tabs",{Initialize:function(){var c=this.getTemplate(),d=this.$Keys;c.BOX={tagName:"div",LIST:c.LIST,PNAELS:c.PNAELS};delete c.LIST.LEFT;delete c.LIST.RIGHT;delete c.LIST.DROP;delete c.LIST;delete c.PNAELS;c.$submap.items.ITEM.className="xui-uibar xui-uiborder-t xui-uiborder-b";c.$submap.items.ITEM.ITEMI.ITEMC.HANDLE.IBWRAP.TOGGLE={$order:1,className:"xuifont {_tlgchecked}",$fonticon:"xui-uicmd-toggle"};this.setTemplate(c);delete d.LEFT;delete d.RIGHT;delete d.DROP},Static:{Behaviors:{DroppableKeys:["PANEL","KEY","ITEM"]},Appearances:{BOX:{position:"absolute",overflow:"hidden",left:0,top:0},LIST:{position:"static"},ITEMS:{position:"static"},ITEM:{$order:0,display:"block",position:"absolute",cursor:"pointer",width:"100%",left:0},ITEMC:{display:"block"},ITEMI:{display:"block"},"ITEM-hover":{$order:1},"ITEM-active ITEMC, ITEM-checked ITEMC":{$order:2},"ITEM-active ITEMI, ITEM-checked ITEMI":{$order:2},"ITEM-active, ITEM-checked":{$order:3},HANDLE:{cursor:"pointer",display:"block",padding:".5em .75em","white-space":"nowrap"},"ITEM-checked HANDLE":{},PANEL:{position:"absolute",display:"none",overflow:"auto"},CMDS:{position:"absolute",top:".5em",right:".75em","text-align":"right","vertical-align":"middle"}},DataModel:{noPanel:null,noHandler:null,selMode:null,borderType:{ini:"flat",listbox:["none","flat","inset","outset"],action:function(m){var l=this,d=l.properties,h=l.getSubNode("BOX"),f=/^xui-uiborder-/,c="xui-uiborder-flat  xui-uiborder-radius",g="xui-uiborder-inset  xui-uiborder-radius",e="xui-uiborder-outset  xui-uiborder-radius",j=l.getRoot();h.removeClass(f);switch(m){case"flat":h.addClass(c);break;case"inset":h.addClass(g);break;case"outset":h.addClass(e);break}xui.UI.$tryResize(l,j.get(0).style.width,j.get(0).style.height,true)}}},LayoutTrigger:function(){var c=this.properties.borderType;if(c&&c!="none"){this.boxing().setBorderType(c,true)}},_onresize:function(e,x,w,c,J){var d=e.properties,C=d.noPanel,G=e.getItemByItemId(J);if(!G){J=d.$UIvalue||d.value;G=e.getItemByItemId(J)}if(!G){G=d.items[0];J=G&&G.id}if(!G){return}var q=e.boxing().getPanel(J),h=xui.$us(d),H=function(K,L){return e.$forceu(K,h>0?"em":"px",L)},A=e.getRoot(),o=e.getSubNode("BOX"),E=e.getSubNode("LIST"),B=e.getEmSize()/A._getEmSize(),l=q._getEmSize(B),p=E._getEmSize(B),f=d.borderType,D=(f=="flat"||f=="inset"||f=="outset")?o._borderW():0,j=null,g=null,I,F,n,m,r,u;if(!q||q.isEmpty()){return}x=x?e.$px(x,null,true):x;w=w?e.$px(w,null,true):w;if(w){w-=D;m=n=0;xui.arr.each(d.items,function(K){r=e.getSubNodeByItemId("ITEM",K.id);r.cssRegion({bottom:"auto",top:H(n,r)});I=r.offsetHeight(true);n+=I;if(K.id==J){return false}});xui.arr.each(d.items,function(K){if(K.id==J){return false}r=e.getSubNodeByItemId("ITEM",K.id);r.cssRegion({top:"auto",bottom:H(m,r)});I=r.offsetHeight(true);m+=I},null,true);F=w-n-m;if(F>0){u=n;g=F}o.height(H(w))}if(x){x-=D;j=x;o.width(H(x))}q.cssRegion({width:j?H(j,l):null,height:g?H(g,l):null,top:H(u,l),left:0+e.$picku()},true);if(j){E.width(j=H(j,p));xui.UI._adjustConW(e,q,j)}},_adjustScroll:null}});Class("xui.UI.ButtonViews","xui.UI.Tabs",{Initialize:function(){var c=this.getTemplate(),d=this.$Keys;c.LIST.className="xui-uibar";this.setTemplate(c);c.$submap.items.ITEM.className="xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius {itemClass} {disabled} {readonly} {itemPosCls}";delete d.LEFT;delete d.RIGHT;delete d.DROP},Static:{Appearances:{LIST:{"z-index":"2",position:"absolute","white-space":"nowrap",overflow:"hidden"},"LIST-attop, LIST-atbottom":{$order:2,position:"relative"},LISTBG:{display:"none"},MENU:{display:"none",margin:".25em",padding:".25em",cursor:"pointer"},MENU2:{display:"none","text-align":"center"},MENUICON2:{position:"relative",margin:".09375em",padding:".1875em",cursor:"pointer"},ITEMS:{"z-index":"2",position:"relative",left:0,top:0,width:"100%",height:"100%","white-space":"nowrap","overflow-x":"hidden","overflow-y":"scroll"},"ITEMS-left, ITEMS-left ITEMC":{$order:1,height:"auto","text-align":"left"},"ITEMS-center, ITEMS-center ITEMC":{$order:1,height:"auto","text-align":"center"},"ITEMS-right, ITEMS-right ITEMC":{$order:1,height:"auto","text-align":"right"},"ITEMS-left HANDLE, ITEMS-right HANDLE":{$order:2,display:"block"},ITEM:{$order:0,margin:".166667em",position:"relative",cursor:"pointer",padding:"0 .125em 0 0","vertical-align":"top"},ITEMI:{$order:0,"padding-left":".125em","vertical-align":"top"},"ITEMS-block ITEM, ITEMS-block ITEMI, ITEMS-block ITEMC":{$order:2,display:"block"},ITEMC:{$order:0,padding:".15em 0 .125em 0","vertical-align":"top","text-align":"center"},HANDLE:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,cursor:"pointer","vertical-align":"middle",margin:".125em"},"ITEM-checked HANDLE":{}},DataModel:{HAlign:null,barLocation:{ini:"top",listbox:["top","bottom","left","right"],action:function(d){var c=this,e=c.getSubNode("LIST"),f=c.getSubNode("ITEMS"),g=0+c.$picku();switch(d){case"left":e.cssRegion({left:g,top:g,right:"auto",bottom:g});break;case"top":e.cssRegion({left:g,top:g,right:g,bottom:"auto"});break;case"right":e.cssRegion({left:"auto",top:g,right:g,bottom:g});break;case"bottom":e.cssRegion({left:g,top:"auto",right:g,bottom:g});break}switch(d){case"left":case"right":f.tagClass("-block",true);break;case"top":case"bottom":f.tagClass("-block",false);e.height("auto");break}e.tagClass("(-attop|-atbottom|-atleft|-atright)",false).tagClass("-at"+d,true);this.adjustSize()}},barHAlign:{ini:"left",listbox:["left","center","right"],action:function(d){var c=this.getSubNode("ITEMS");c.tagClass("(-left|-right|-center)",false).tagClass("-"+d,true)}},barVAlign:{ini:"top",listbox:["top","bottom"],action:function(d){var c=this.getSubNode("ITEMS"),e=0+this.$picku();if(d=="top"){c.cssRegion({top:e,bottom:"auto"})}else{c.cssRegion({bottom:e,top:"auto"})}this.adjustSize()}},barSize:{$spaceunit:1,ini:"2em",action:function(c){this.adjustSize()}},borderType:{ini:"none",listbox:["none","flat","inset","outset"],action:function(m){var l=this,d=l.properties,h=l.getSubNode("LIST"),f=/^xui-uiborder-/,c="xui-uiborder-flat xui-uiborder-radius",g="xui-uiborder-inset xui-uiborder-radius",e="xui-uiborder-outset xui-uiborder-radius",j=l.getRoot();h.removeClass(f);switch(m){case"flat":h.addClass(c);break;case"inset":h.addClass(g);break;case"outset":h.addClass(e);break}this.adjustSize()}},sideBarStatus:{ini:"expand",listbox:["expand","fold"],action:function(e){var d=this,f=d.properties,h=xui.$us(f),j=function(l,m){return d.$forceu(l,h>0?"em":"px",m)},c=d.getSubNode("ITEMS"),g=d.getSubNode("MENUICON2");if(f.sideBarStatus=="fold"){c.tagClass("-icon2",true);g.tagClass("-checked",true)}else{c.tagClass("-icon2",false);g.tagClass("-checked",false)}this.adjustSize()}},sideBarSize:{ini:"3em",action:function(c){this.adjustSize()}}},Behaviors:{MENU2:{onClick:function(c,d,f){c.boxing().setSideBarStatus(c.properties.sideBarStatus=="fold"?"expand":"fold",true)}}},LayoutTrigger:function(){var c=this.properties;this.boxing().setBarLocation(c.barLocation,true).setBarHAlign(c.barHAlign,true).setBarVAlign(c.barVAlign,true);if(c.barLocation=="top"||c.barLocation=="bottom"){this.getSubNode("ITEMS").addClass("xui-css-noscroll")}if(c.borderType&&c.borderType!="none"){this.boxing().setBorderType(c.borderType,true)}},_onresize:function(f,C,A,c,N){var e=f.properties,F=e.noPanel,O=e.noHandler,H=f.getItemByItemId(N);if(!H){N=e.$UIvalue||e.value;H=f.getItemByItemId(N)}if(!H){H=e.items[0];N=H&&H.id}if(!H){return}var u=f.boxing().getPanel(N),o=xui.$us(e),J=function(P,Q){return f.$forceu(P,o>0?"em":"px",Q)},M=C?f.$px(C,null,true):C,h=(A&&A!="auto")?f.$px(A,null,true):A,D=f.getRootNode(),K=f.getSubNode("LIST"),d=f.getSubNode("ITEMS"),I=f.getSubNode("MENU2"),E=f.getEmSize()/f.getRoot()._getEmSize(),q=u._getEmSize(E),l=K._getEmSize(E),n=d._getEmSize(E),g=e.borderType,G=(g=="flat"||g=="inset"||g=="outset")?K._borderW():0,p=null,m=null,x,j,L;I.css("display","none");if(O){p=M;m=h}else{if(e.barLocation=="top"||e.barLocation=="bottom"){d.css("overflow-y","hidden");L=K.height(e.barSize||"auto").offsetHeight(true);d.css("position","relative");if(C){K.width(J(M-G,l));d.width(J(M-G,n));if(F&&A!="auto"){K.height(J(h-G,l));d.height(J(h-G,l))}if(!O){f.box._adjustHScroll(f)}j=0;p=M}if(h!="auto"){if(h-L>0){m=h-L-G}}else{m=h}var w;if(e.barLocation=="top"){if((w=D.firstElementChild||D.firstChild)!=K.get(0)){if(w){D.insertBefore(K.get(0),w)}else{D.appendChild(K.get(0))}}}else{if(e.barLocation=="bottom"){if((D.lastElementChild||D.lastChild)!=K.get(0)){D.appendChild(K.get(0))}}}}else{d.css("overflow-y","scroll");I.css("display",e.sideBarSize?"block":"none");if(!O){f.getSubNode("CAPTION",true).css("width","")}if(h=="auto"){h=300}if(A){if(F){d.css("overflow-y","hidden");K.width(J(M-G,l));d.width(J(M-G,l))}K.height(J(h-G,l));d.height("auto");if(d.height()>=K.height()){d.height(J(h-G-(e.sideBarSize?I.offsetHeight():0),n))}d.css("position",e.barVAlign=="bottom"?"absolute":"relative");m=h}if(A||C){var r=f.$px(e.sideBarStatus=="fold"?e.sideBarSize:e.barSize,n);var B=d._paddingW()+d._marginW();j=e.barLocation=="left"?G+f.$px(r+B,l):0;p=M-f.$px(r+B,l)-G;d.width("auto");if(!F){K.width(J(r+B,l));d.width(J(r+xui.Dom.getScrollBarSize(),n))}}}}if(!F){u.cssRegion({width:(p=p?J(p,q):null),height:m?J(m,q):null,left:O?0:J(j,q)},true);if(p){xui.UI._adjustConW(f,u,p)}}}}});Class("xui.UI.RadioBox","xui.UI.List",{Initialize:function(){var c=this.getTemplate();c.className="{_className}";c.ITEMS.className="{_bordertype}";c.$submap={items:{ITEM:{className:"xui-showfocus {_itemRow} {itemClass} {disabled} {readonly}",style:"{itemStyle}{_itemDisplay}",tabindex:"{_tabindex}",MARK:{$order:0,className:"xuifont",$fonticon:"{_fi_markcls}"},ICON:{$order:1,className:"xuicon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}",text:"{iconFontCode}"},CAPTION:{text:"{caption}",$order:2}}}};this.setTemplate(c)},Static:{_DIRTYKEY:"MARK",_ITEMMARKED:true,Appearances:{ITEM:{display:xui.$inlineBlock,border:0,padding:".5em",position:"relative",zoom:xui.browser.ie?1:null,cursor:"pointer",overflow:"hidden","vertical-align":"middle"},"ITEM-checked":{padding:".5em"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","font-size":"1em"},ITEMS:{overflow:"auto","overflow-x":"hidden",position:"relative","line-height":"1.25em"},MARK:{$order:1,cursor:"pointer",margin:"0 .5em 0 .25em","vertical-align":"middle"}},DataModel:{tagCmds:null,borderType:{ini:"none"},checkBox:{ini:false,action:function(c){this.getSubNode("MARK",true).replaceClass(c?/(uicmd-radio)|(\s+uicmd-radio)/g:/(^uicmd-check)|(\s+uicmd-check)/g,c?" xui-uicmd-check":" xui-uicmd-radio")}}},Behaviors:{HoverEffected:{ITEM:null,MARK:"MARK"},ClickEffected:{ITEM:null,MARK:"MARK"}},EventHandlers:{onCmd:null},_prepareItem:function(c,d){d._fi_markcls=c.properties.checkBox?"xui-uicmd-check":"xui-uicmd-radio";d._itemRow=c.properties.itemRow?"xui-item-row":""}}});Class("xui.UI.StatusButtons",["xui.UI.List"],{Initialize:function(){var c=this.getTemplate();c.className="{_className}";c.ITEMS.className="{_bordertype}";c.$submap={items:{ITEM:{className:"{_itemClass} {itemClass} {disabled} {readonly}",style:"{itemPadding};{itemMargin};{itemWidth};{itemAlign};{itemStyle}",tabindex:"{_tabindex}",ICON:{$order:10,className:"xuicon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}",text:"{iconFontCode}"},CAPTION:{$order:11,text:"{caption}"},DROP:{$order:12,className:"xuifont",$fonticon:"xui-uicmd-arrowdrop",style:"{_dropDisplay}"},FLAG:{$order:13,className:"xui-display-none {flagClass}",style:"{_flagStyle};{flagStyle}",text:"{flagText}"}}}};this.setTemplate(c)},Static:{Appearances:{ITEMS:{position:"relative",overflow:"visible"},ITEM:{"vertical-align":"middle",position:"relative",padding:".5em",margin:".166667em",cursor:"pointer","white-space":"nowrap"},"ITEM-hover, ITEM-active, ITEM-checked":{},"ITEM-hover":{},"ITEM-active":{},"ITEM-checked":{},CAPTION:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,"vertical-align":"middle","font-size":"1em"},DROP:{"vertical-align":"middle"},FLAG:{top:"-.5em",right:"-.5em",position:"absolute","z-index":10}},DataModel:({maxHeight:null,tagCmds:null,height:"auto",itemMargin:{ini:"",action:function(c){this.getSubNode("ITEM",true).css("margin",v)}},itemPadding:{ini:"",action:function(c){this.getSubNode("ITEM",true).css("padding",c)}},itemWidth:{$spaceunit:1,ini:"auto",action:function(c){this.getSubNode("ITEM",true).width(c||"auto")}},itemAlign:{ini:"",listbox:["","left","center","right"],action:function(c){this.getSubNode("ITEM",true).css("text-align",c)}},itemType:{ini:"button",listbox:["text","button","dropButton"],action:function(c){this.boxing().refresh()}},connected:{ini:false,action:function(){this.boxing().refresh()}}}),Behaviors:{DroppableKeys:["ITEMS"]},EventHandlers:{onCmd:null},_prepareItem:function(d,m,j,h,f,e){var c=d.properties,n,g=m.type||c.itemType;m._tabindex=c.tabindex;if(c.connected){m.itemMargin="margin:"+(f===0?"0":"0 0 0 -1px")}else{if(n=m.itemMargin||c.itemMargin){m.itemMargin="margin:"+n}}if(n=m.itemPadding||c.itemPadding){m.itemPadding="padding:"+n}if(n=m.itemWidth||c.itemWidth){m.itemWidth="width:"+d.$forceu(n||"auto")}if(n=m.itemAlign||c.itemAlign){m.itemAlign="text-align:"+n}if(m.flagText||m.flagClass){m._flagStyle="display:block"}if(!m.flagClass){m.flagClass="xui-uiflag-1"}m._itemClass=g=="text"?"xui-node-a":("xui-ui-btn xui-uibar xui-uigradient "+(c.connected?(f==0?"xui-uiborder-radius-tl xui-uiborder-radius-bl xui-uiborder-noradius-r":f===e-1?"xui-uiborder-radius-tr xui-uiborder-radius-br xui-uiborder-noradius-l":"xui-uiborder-noradius"):"xui-uiborder-radius"));m._dropDisplay=g=="dropButton"?"":"display:none"}}});Class("xui.UI.TreeBar",["xui.UI","xui.absList","xui.absValue"],{$Start:function(c){if(c=this.Static.RenderTrigger){c.$order=-1}},Instance:{_setCtrlValue:function(d,c){return this.each(function(f){if(!f.renderId){return}var m=f.boxing(),w=m.getUIValue(),p=f.properties,q=function(C,D,B){f.getSubNodeByItemId(C,D).tagClass("-checked",B)},j=p.selMode;if(j=="single"){var u=f.getSubIdByItemId(w);if(w&&u){q("BAR",w,false)}u=f.getSubIdByItemId(d);if(u){q("BAR",d,true);if(!f._noScroll){var e=f.getSubNode("ITEM",u);if(e){var n=f.getSubNode("BOX"),h=e.offset(null,n),r=h?h.top:0,x=e.offsetHeight(),l=n.scrollHeight(),A=n.scrollTop(),g=n.height();if(l>g){if(r<A||(r+x)>(A+g)){n.scrollTop(r)}}}}}}else{if(j=="multi"||j=="multibycheckbox"){w=w?w.split(p.valueSeparator):[];d=d?d.split(p.valueSeparator):[];if(c){xui.arr.each(d,function(B){q("BAR",B);q("MARK",B)})}else{xui.arr.each(w,function(B){q("BAR",B,false);q("MARK",B,false)});xui.arr.each(d,function(B){q("BAR",B);q("MARK",B)})}}}})},insertItems:function(e,f,l,j,d){var g,h,c=this._afterInsertItems;return this.each(function(q){var m,u,n,p,w=q.properties;h=q.box._adjustItems(e);if(f===true){v=w.$UIvalue||w.value;if(v){v=(v+"").split(w.valueSeparator)}n=q.getItemByItemId(v[0]);f=n?n.id:null}if(f){n=q.getItemByItemId(f);m=xui.isArr(n.sub)?n.sub:(p=true,n.sub=[])}else{n=w;m=n.items||(n.items=[])}if(q.renderId){if(l===true){v=w.$UIvalue||w.value;if(v){v=(v+"").split(w.valueSeparator)}n=q.getItemByItemId(v[0]);l=n?n.id:null}if(l){g=q.getSubNodeByItemId("ITEM",l);if(g){u=q._buildItems("items",q.box._prepareItems(q,h,f));if(j){g.addPrev(u)}else{g.addNext(u)}}}else{if(!f){g=q.getSubNode("ITEMS")}else{if(f){if(p){q.getSubNodeByItemId("TOGGLE",f).removeClass("xui-icon-placeholder xui-uicmd-none").addClass("xui-uicmd-toggle")}if(n._inited){g=q.getSubNodeByItemId("SUB",f)}}}if(g){u=q._buildItems("items",q.box._prepareItems(q,h,f));if(j){g.prepend(u)}else{g.append(u)}}}}if(!l){xui.arr.insertAny(m,h,j?0:-1)}else{var o=xui.arr.subIndexOf(m,"id",l);xui.arr.insertAny(m,h,j?o:(o+1))}if(q.renderId&&d!==false){if(!f){q.boxing()._toggleNodes(h,true,true,true)}else{if(q.getItemByItemId(f)._inited){if(!(("iniFold" in n)?n.iniFold:q.properties.iniFold)){q.boxing()._toggleNodes(h,true,true,true)}}}}if(c&&q.renderId){q.boxing()._afterInsertItems(q,h,f,l,j)}if(q.renderId&&f){q.box._tofold(q,n,f)}})},_toggleNodes:function(d,g,e,m){var c=this,j=c.get(0),l=j.properties,h=function(f,o,n,p){if(xui.isArr(f)){xui.arr.each(f,function(q){if(p&&(xui.isBool(q.iniFold)?q.iniFold:l.iniFold)){return}c.toggleNode(q.id,o,false,n);if(n&&q.sub&&xui.isArr(q.sub)&&q.sub.length){h(q.sub,o,true,p)}})}};h(d,g,e,m);return c},toggleNode:function(c,h,f,j,l){var e=this.get(0),g=this,m=arguments.callee;if(c){var d=e.getItemByItemId(c);if(d&&d.sub){e.box._setSub(e,d,typeof h=="boolean"?h:!d._checked,f,j||f,l)}}else{xui.arr.each(e.properties.items,function(n){m.call(g,n.id,h,f)})}return this},openToNode:function(d,c){return this.each(function(h){var g=false,f=[],e=function(j,m,l){l=l||0;var n=arguments.callee;xui.arr.each(j,function(p){if(p.id==m){f.push(p);g=true;return false}if(p.sub&&xui.isArr(p.sub)){g=n.call(n,p.sub,m,++l);if(g){f.push(p);return false}}});return g};e(h.properties.items,d);if(g){f.reverse();xui.arr.each(f,function(l,j){if(l.sub){h.boxing().toggleNode(l.id,true);if(c!==false&&j==f.length-1&&!(l.hasOwnProperty("group")?l.group:h.properties.group)){h.boxing().fireItemClickEvent(l.id)}}else{if(c!==false){h.boxing().fireItemClickEvent(l.id)}}})}})}},Static:{_focusNodeKey:"BAR",Templates:{tagName:"div",style:"{_style}",className:"{_className}",ondrag:"return false",onselectstart:"return false",BORDER:{tagName:"div",className:"xui-uibase",BOX:{tagName:"div",onselectstart:"return false",ITEMS:{tagName:"div",text:"{items}"}}},$submap:{items:{ITEM:{className:"",style:"{_itemDisplay}",tagName:"div",BAR:{$order:0,tabindex:"{_tabindex}",className:"xui-uitembg  xui-showfocus  {itemClass} {cls_group} {cls_fold} {_split} {disabled} {readonly}",style:"{itemStyle}",RULER:{$order:2,style:"{_ruleDisplay}{rulerStyle}",text:"{innerIcons}"},TOGGLE:{$order:3,style:"{_tglDisplay}",className:"xuifont",$fonticon:"{_fi_togglemark}"},LTAGCMDS:{$order:4,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},MARK:{$order:5,className:"xuifont",$fonticon:"xui-uicmd-check",style:"{mark2Display}"},ITEMICON:{$order:6,className:"xuicon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}",text:"{iconFontCode}"},ITEMCAPTION:{text:"{caption}",style:"{_capDisplay}",className:"{disabled}  {readonly}",$order:7},EXTRA:{style:"{_extraDisplay}",text:"{ext}",$order:8},OPT:{$order:9,style:"{_optDisplay}",className:"xuifont",$fonticon:"xui-uicmd-opt"},RTAGCMDS:{$order:10,tagName:"span",style:"{_rtagDisplay}",text:"{rtagCmds}"}},SUB:{$order:1,tagName:"div",text:xui.UI.$childTag}}},"items.ltagCmds":function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"items.tagCmds"+(j[e.type]||".button"),c)},"items.rtagCmds":function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"items.tagCmds"+(j[e.type]||".button"),c)},"items.tagCmds.text":xui.UI.$getTagCmdsTpl("text"),"items.tagCmds.button":xui.UI.$getTagCmdsTpl("button"),"items.tagCmds.image":xui.UI.$getTagCmdsTpl("image")}},Appearances:{KEY:{border:0},EXTRA:{display:"none"},BOX:{left:0,overflow:"auto","overflow-x":"hidden",position:"relative",clear:"both"},ITEMS:{overflow:"hidden"},ITEM:{"white-space":"nowrap",position:"relative",overflow:"hidden"},BAR:{cursor:"pointer",zoom:xui.browser.ie?1:null,position:"relative",display:"block",overflow:"hidden",padding:".25em .5em","border-radius":".3px 0 0 3px","-moz-border-radius":"3px 0 0 3px","-webkit-border-radius":"3px 0 0 3px","-o-border-radius":"3px 0 0 3px","-ms-border-radius":"3px 0 0 3px","-khtml-border-radius":"3px 0 0 3px","outline-offset":"-1px","-moz-outline-offset":(xui.browser.gek&&xui.browser.ver<3)?"-1px !important":null},SUB:{overflow:"hidden",zoom:xui.browser.ie?1:null,height:0,"font-size":xui.browser.ie68?"1px":null,"line-height":xui.browser.ie68?"1px":null,position:"relative","margin-left":"1.75em"},MARK:{cursor:"pointer","vertical-align":"middle"},"BAR-group":{$order:4,border:"none"},ITEMCAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle",padding:".167em"},OPT:{$order:10,position:"absolute",left:"auto",top:"auto",right:".167em",top:".167em",display:"none"},"BOX-tagcmdleft RTAGCMDS":{"padding-right":".333em","float":"left"}},Behaviors:{HoverEffected:{TOGGLE:"TOGGLE",BAR:"BAR",OPT:"OPT",CMD:"CMD"},ClickEffected:{TOGGLE:"TOGGLE",BAR:"BAR",OPT:"OPT",CMD:"CMD"},DraggableKeys:["BAR"],NoDraggableKeys:["TOGGLE"],DroppableKeys:["BAR","TOGGLE","BOX"],onSize:xui.UI.$onSize,TOGGLE:{onClick:function(d,h,j){var c=d.properties,g=xui.use(j).id(),f=d.getItemByDom(g);if(c.disabled||f.disabled){return false}if(!("sub" in f)){return false}d.box._setSub(d,f,!f._checked);return false}},BAR:{onDblclick:function(d,h,j){var c=d.properties,g=d.getItemByDom(j),f=d.onDblclick&&d.boxing().onDblclick(d,g,h,j);if(g.sub&&f!==false){d.getSubNode("TOGGLE",d.getSubId(j)).onClick()}},onClick:function(c,d,f){return c.box._onclickbar(c,d,f)},onKeydown:function(c,d,f){return c.box._onkeydownbar(c,d,f)},onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f,c.getItemByDom(f))!==false}},onMouseover:function(c,f,g){var d=c.getItemByDom(g);if(!d){return}if(!c.properties.optBtn&&!d.optBtn){return}c.getSubNode("OPT",c.getSubId(g)).setInlineBlock()},onMouseout:function(c,f,g){var d=c.getItemByDom(g);if(!d){return}if(!c.properties.optBtn&&!d.optBtn){return}c.getSubNode("OPT",c.getSubId(g)).css("display","none")}},OPT:{onClick:function(c,f,g){if(c.onShowOptions){var d=c.getItemByDom(g);if(!d){return}if(!c.properties.optBtn&&!d.optBtn){return}c.boxing().onShowOptions(c,d,f,g)}return false},onDblclick:function(c,d,f){return false}},CMD:{onClick:function(c,f,g){var h=c.properties,d=c.getItemByDom(xui.use(g).parent().get(0));if(!d){return false}if(h.disabled||d.disabled||d.type=="split"){return false}if(c.onCmd){c.boxing().onCmd(c,d,xui.use(g).id().split("_")[1],f,g)}return false}},BOX:{onScroll:function(c,d,f){if((d=xui.use(f)).scrollLeft()!==0){d.scrollLeft(0)}}}},EventHandlers:{onShowOptions:function(c,d,f,g){},beforeClick:function(c,d,f,g){},onClick:function(c,d,f,g){},afterClick:function(c,d,f,g){},onCmd:function(c,d,g,f,h){},onDblclick:function(c,d,f,g){},onGetContent:function(c,d,e){},onItemSelected:function(d,f,g,h,c){},beforeFold:function(c,d){},beforeExpand:function(c,d){},afterFold:function(c,d){},afterExpand:function(c,d){}},DataModel:{listKey:null,width:{$spaceunit:1,ini:"18em"},height:{$spaceunit:1,ini:"18em"},iniFold:true,animCollapse:true,dock:"fill",group:{ini:false,action:function(f){var e=this,d=e.properties.items,g=e.queryItems(d,function(h){return h.sub&&h.group===undefined}),c=xui();xui.arr.each(g,function(h){c.merge(e.getSubNodeByItemId("BAR",h.id))});if(f){c.addClass("xui-uigradient xui-uibar "+e.getClass("BAR","-group"))}else{c.removeClass("xui-uigradient xui-uibar "+e.getClass("BAR","-group"))}}},selMode:{ini:"single",listbox:["single","none","multi","multibycheckbox"],action:function(e){var d=this,f=this.properties,c=[];xui.each(this.SubSerialIdMapItem,function(g){if(!(g.sub&&(g.hasOwnProperty("group")?g.group:f.group))){c.push(d.getSubNodeByItemId("MARK",g.id).get(0))}});xui(c).css("display",(e=="multi"||e=="multibycheckbox")?"":"none")}},noCtrlKey:true,singleOpen:false,dynDestory:false,position:"absolute",optBtn:false,togglePlaceholder:false,tagCmds:{ini:[],action:function(){this.boxing().refresh()}},tagCmdsAlign:{ini:"right",listbox:["left","right"],action:function(c){var d=this;if(c=="left"){d.getSubNode("BOX").addClass(d.getClass("BOX","-tagcmdleft"))}else{d.getSubNode("BOX").removeClass(d.getClass("BOX","-tagcmdleft"))}}}},RenderTrigger:function(){this.boxing()._toggleNodes(this.properties.items,true,true,true)},_onclickbar:function(f,w,j){var l=f.properties,g=xui.use(j).id(),x=f.getItemByDom(g),n=f.getSubId(g),m=f.boxing(),B=xui.Event.getKey(w),A=f.getKey(xui.Event.getSrc(w).id||""),d=A==f.keys.TOGGLE||A==f.keys.MARK;if(!d&&f.beforeClick&&false===m.beforeClick(f,x,w,j)){return false}if(l.disabled||x.disabled||x.type=="split"){return false}if(!d&&f.onClick){m.onClick(f,x,w,j)}if(x.sub&&(x.hasOwnProperty("group")?x.group:l.group)){f.getSubNode("TOGGLE",n).onClick();return}f.getSubNode(f.box._focusNodeKey,n).focus();switch(l.selMode){case"none":m.onItemSelected(f,x,w,j,0);break;case"multibycheckbox":if(l.readonly||x.readonly){return false}if(f.keys.MARK){if(A!=f.keys.MARK){m.onItemSelected(f,x,w,j,0);break}}case"multi":if(l.readonly||x.readonly){return false}var q=m.getUIValue(),c=q?q.split(l.valueSeparator):[],h=1;if(c.length&&(B.ctrlKey||B.shiftKey||l.noCtrlKey)){if(B.shiftKey){if(f.$firstV._pid!=x._pid){return}var o=l.items;if(x._pid){var C=f.getItemByItemId(x._pid);if(C){o=C.sub}}var r=xui.arr.subIndexOf(o,"id",f.$firstV.id),p=xui.arr.subIndexOf(o,"id",x.id),u;c.length=0;for(u=Math.min(r,p);u<=Math.max(r,p);u++){c.push(o[u].id)}}else{if(xui.arr.indexOf(c,x.id)!=-1){xui.arr.removeValue(c,x.id);h=-1}else{c.push(x.id)}}c.sort();q=c.join(l.valueSeparator);if(m.getUIValue()!=q){f._noScroll=1;m.setUIValue(q,null,null,"click");delete f._noScroll;if(m.get(0)&&m.getUIValue()==q){m.onItemSelected(f,x,w,j,h)}}break}case"single":if(m.getUIValue()!=x.id){f.$firstV=x;f._noScroll=1;m.setUIValue(x.id,null,null,"click");delete f._noScroll;if(m.get(0)&&m.getUIValue()==x.id){m.onItemSelected(f,x,w,j,1)}}break}if(!d&&f.afterClick){m.afterClick(f,x,w,j)}return !d},_onkeydownbar:function(g,j,c){var p=xui.Event.getKey(j),o=p.key,f=p.shiftKey,d=p.ctrlKey,n=g.getSubNode(g.box._focusNodeKey,g.getSubId(c)),l=g.getRoot(),h=l.nextFocus(true,true,false),m=l.nextFocus(false,true,false);switch(o){case"enter":n.onClick();break;case"tab":if(f){if(n.get(0)!=h.get(0)){h.focus();return false}}else{if(n.get(0)!=m.get(0)){m.focus();return false}}break;case"up":if(d){g.getSubNode("TOGGLE",g.getSubId(c)).onClick();return false}if(n.get(0)==h.get(0)){m.focus()}else{n.nextFocus(false,true,false).focus()}return false;break;case"down":if(d){g.getSubNode("TOGGLE",g.getSubId(c)).onClick();return false}if(n.get(0)==m.get(0)){h.focus()}else{n.nextFocus(true,false,false).focus()}return false;break;case"right":case"left":g.getSubNode("TOGGLE",g.getSubId(c)).onClick();return false}},_onStartDrag:function(c,d,f,g){var g=xui.Event.getPos(d);xui.use(f).startDrag(d,{dragSource:c.$xid,dragType:"icon",shadowFrom:f,targetLeft:g.left+12,targetTop:g.top+12,dragCursor:"pointer",dragDefer:2,dragKey:c.box.getDragKey(c,f),dragData:c.box.getDragData(c,d,f)});return false},_onDropTest:function(f,n,c,o,l,q){var h=l&&l.domId;if(h){var j=xui.use(c).id();if(h==j){return false}if(xui.get(xui.use(c).get(0),["parentNode","previousSibling","firstChild","id"])==h){return false}var g=f.getItemByDom(h);if(g&&q&&g._pid==q.id){return false}var d=xui.use(c).get(0),m=f.getRootNode();while((d=d.parentNode)){if(f.getSubId(d.id)==f.getSubId(h)){return false}if(d.id==xui.get(m,["parentNode","id"])){break}}}},_onDrop:function(g,n,d,q,l,u){xui.DragDrop.setDragIcon("none");var j=g.getKey(xui.use(d).id()),f=l.profile,c=l.domId,h,p=g.keys,r=xui.absObj.$specialChars,o=g.boxing(),m=xui.copy(o.getUIValue(true));h=xui.clone(f.getItemByDom(c),function(w,e){return !r[(e+"").charAt(0)]});f.boxing().removeItems([h.id]);if(j==p.BOX){o.insertItems([h],null,null,false)}else{if(j==p.BAR){o.insertItems([h],u._pid,u.id,true)}else{if(j==p.TOGGLE){o.insertItems([h],u.id,null,false)}}}if(m&&m.length){if(xui.arr.indexOf(m,h.id)!=-1){g._noScroll=1;o.setUIValue(m,true,null,"drop");delete g._noScroll}}l._new=h;return false},_prepareItem:function(e,n,f,g,l,m){var c=e.properties,j=e.ItemIdMapSubSerialId,h=e.SubSerialIdMapItem,d;if(g){f._pid=g}n._fi_togglemark=n.sub?("xui-uicmd-toggle"+(n._checked?" xuifont-checked xui-uicmd-toggle-checked":"")):(c.togglePlaceholder?"xui-icon-placeholder":"xui-uicmd-none");n.disabled=n.disabled?"xui-ui-disabled":"";n.mark2Display=("showMark" in n)?(n.showMark?"":"display:none;"):(c.selMode=="multi"||c.selMode=="multibycheckbox")?"":"display:none;";n._tabindex=c.tabindex;if(n.sub&&(n.hasOwnProperty("group")?n.group:c.group)){n.cls_group="xui-uigradient xui-uibar "+e.getClass("BAR","-group");n.mark2Display="display:none"}this._prepareCmds(e,n);if(n.type=="split"){n._split="xui-uitem-split";n._ruleDisplay=n._ltagDisplay=n._tglDisplay=n._rtagDisplay=n.imageDisplay=n.mark2Display=n._capDisplay=n._extraDisplay=n._optDisplay="display:none;"}},_setSub:function(g,C,w,A,l,p){var q=g.domId,d=g.boxing(),f=g.properties,m=g.getSubIdByItemId(C.id),e=g.getSubNode("TOGGLE",m),u=g.getSubNode("SUB",m),x=g.getSubNode("BAR",m),B=g.getSubNode("ITEMICON",m);if(xui.Thread.isAlive(g.key+g.id)){return}if(!w){if(C._checked){if(d.beforeFold&&false===d.beforeFold(g,C)){return}var c=function(){u.css({display:"none",height:0});e.tagClass("-checked",false);x.tagClass("-expand",false).tagClass("-fold");B.tagClass("-expand",false).tagClass("-fold");C._checked=false;if(f.dynDestory||C.dynDestory){var G=C.sub,r=[];for(var F=0,E=G.length;F<E;F++){r.push(G[F].id)}g.boxing().removeItems(r);C.sub=true;delete C._inited}if(d.afterFold){d.afterFold(g,C)}xui.resetRun(q,function(H){if(H){xui.tryF(H,[g,C],d)}},0,[p])};if(!l){if(f.animCollapse){u.animate({height:[u.height(),0]},null,c,200,null,"expoOut",g.key+g.id).start()}else{c()}}else{c()}}if(A&&C.sub&&!f.dynDestory&&!C.dynDestory){xui.arr.each(C.sub,function(r){if(r.sub&&r.sub.length){g.box._setSub(g,r,w,A,true,p)}})}}else{if(!C._checked){if(d.beforeExpand&&false===d.beforeExpand(g,C)){return}var c=function(r){u.css({display:"",height:"auto"});if(xui.browser.ie&&xui.browser.ver<=8){e.css({backgroundImage:"",backgroundRepeat:"",backgroundPositionX:"",backgroundPositionY:"",backgroundColor:"",backgroundAttachment:""})}else{e.removeClass("xui-icon-loading")}if(!r){C._checked=true;if(d.afterExpand){d.afterExpand(g,C)}}xui.resetRun(q,function(E){if(E){xui.tryF(E,[g,C],d)}},0,[p])},D=function(G,P,F,H,M,L,O,r){var N=G.boxing(),E=G.properties,K=r===false;if(!K&&!P._inited){delete P.sub;P._inited=true;if(r){if(typeof r=="string"){M.html(P.sub=r,false)}else{if(r["xui.Template"]||r["xui.UI"]){M.append(P.sub=r.render(true))}else{if(xui.isArr(r)){N.insertItems(r,P.id);if(!P.sub){P.sub=r}}}}var Q=0,J=N.getUIValue(true);if(J&&J.length){xui.arr.each(r,function(R){if(xui.arr.indexOf(J,R.id||R)!=-1){Q=1;return false}});if(Q){G._noScroll=1;N._setCtrlValue(N.getUIValue());delete G._noScroll}}}}if(E.singleOpen){N._toggleNodes(P._pid?G.getItemByItemId(P._pid).sub:E.items,false)}if(!K){H.tagClass("-checked");L.tagClass("-expand").tagClass("-fold",false);O.tagClass("-fold",false).tagClass("-expand")}if(!l){M.css("height","0px").css("display","");if(E.animCollapse){var I=0;M.children().each(function(R){I+=R.offsetHeight});M.animate({height:[0,I]},null,function(){c(K)},200,null,"expoIn",G.key+G.id).start()}else{c(K)}}else{c(K)}},j=C.sub,h=function(r){D(g,C,q,e,u,x,B,r)},n;if((n=typeof j)=="string"||n=="object"){h(j)}else{if(g.onGetContent){if(xui.browser.ie&&xui.browser.ver<=8){e.css("background","url("+xui.ini.img_busy+") no-repeat")}else{e.addClass("xui-icon-loading")}var o=g.boxing().onGetContent(g,C,h);if(o||o===false){if(o===true){C._inited=true}h(o)}}}}if(A&&C.sub){xui.arr.each(C.sub,function(r){if(r.sub&&r.sub.length&&!r._checked){g.box._setSub(g,r,w,A,true,p)}})}}},_tofold:function(d,e,c){d.getSubNodeByItemId("BAR",c).addClass(d.getClass("BAR","-fold"));d.getSubNodeByItemId("TOGGLE",c).replaceClass(new RegExp("\\buicmd-(none|empty)\\b"),"xui-uicmd-toggle")},_onresize:function(e,d,c){e.getSubNode("BORDER").cssSize({width:d?d:null,height:c?c:null});e.getSubNode("BOX").cssSize({width:d?d:null,height:c?c:null})}}});Class("xui.UI.TreeView","xui.UI.TreeBar",{Initialize:function(){this.addTemplateKeys(["IMAGE"]);var c=this.getTemplate();c.$submap.items.ITEM.BAR.className="xui-uitembg xui-uiborder-radius xui-showfocus {cls_group} {cls_fold} {_split} {disabled} {readonly}";var d=c.$submap.items.ITEM.BAR.ITEMICON;d.$fonticon="{_fi_cls_file}";this.setTemplate(c)},Static:{Appearances:{ITEMS:{padding:".25em"},ITEM:{"white-space":"nowrap",position:"relative",overflow:"hidden"},BAR:{zoom:xui.browser.ie?1:null,position:"relative",display:"block","outline-offset":"-1px","-moz-outline-offset":(xui.browser.gek&&xui.browser.ver<3)?"-1px !important":null},SUB:{zoom:xui.browser.ie?1:null,height:0,"font-size":xui.browser.ie68?"1px":null,"line-height":xui.browser.ie68?"1px":null,position:"relative",overflow:"hidden"},BOX:{left:0,overflow:"auto",position:"relative"}},Behaviors:{MARK:{onClick:function(c,d,f){c.box._onclickbar(c,d,xui.use(f).parent().xid());return false}},ITEMICON:{onClick:function(c,d,f){c.box._onclickbar(c,d,xui.use(f).parent().xid());return false}}},DataModel:{$subMargin:1.8,group:null,noIcon:{ini:false,action:function(c){this.getSubNode("ITEMICON",true).css("display",c?"none":"")}}},_prepareItem:function(e,n,f,g,l,m){var c=e.properties,j=e.ItemIdMapSubSerialId,h=e.SubSerialIdMapItem,d;if(g){f._pid=g;if(d=h[j[g]]){f._deep=d._deep+1;n.rulerStyle="width:"+(f._deep*c.$subMargin)+"em;";n._fi_togglemark=n.sub?("xui-uicmd-toggle"+(n._checked?"-checked":"")):(c.togglePlaceholder?"xui-uicmd-empty":"xui-uicmd-none")}}else{f._deep=0;n.rulerStyle="";n.innerIcons="";n._fi_togglemark=n.sub?("xui-uicmd-toggle"+(n._checked?"-checked":"")):(c.togglePlaceholder?"xui-uicmd-empty":"xui-uicmd-none")}n.imageDisplay=(n.noIcon||c.noIcon)?"display:none;":"";n.cls_fold=n.sub?e.getClass("BAR","-fold"):"";if(!(n.imageClass||n.image||n.iconFontCode)){n._fi_cls_file="xui-icon-file"+(n.sub?" xui-icon-file-fold":"")}n.disabled=n.disabled?"xui-ui-disabled":"";n._itemDisplay=n.hidden?"display:none;":"";n.mark2Display=("showMark" in n)?(n.showMark?"":"display:none;"):(c.selMode=="multi"||c.selMode=="multibycheckbox")?"":"display:none;";n._tabindex=c.tabindex;this._prepareCmds(e,n);if(n.type=="split"){n._split="xui-uitem-split";n._ruleDisplay=n._ltagDisplay=n._tglDisplay=n._rtagDisplay=n.imageDisplay=n.mark2Display=n._capDisplay=n._extraDisplay=n._optDisplay="display:none;"}},_tofold:function(e,f,d){var c=e.getClass("IMAGE");e.getSubNodeByItemId("BAR",d).addClass(e.getClass("BAR","-fold"));e.getSubNodeByItemId("TOGGLE",d).replaceClass(new RegExp("\\b"+c+"-path([-\\w]+)\\b"),c+"-fold$1")}}});Class("xui.UI.PopMenu",["xui.UI.Widget","xui.absList"],{Instance:{adjustSize:function(){this.each(function(e){if(e.renderId){var r=e.getRoot();var j=e.getSubNode("BORDER"),p=e.getSubNode("BOX"),m=e.getSubNode("BOXBGBAR"),q=e.getSubNode("ITEMS"),d=e.getSubNode("ITEM",true),c=e.properties,g=xui.$us(c),o=function(h,w){return e.$forceu(h,g>0?"em":"px",w)},l=0,f=0;q.cssSize({width:"auto",height:"auto"});f=q.height();if(xui.browser.ie67&&f%2==1){f+=1}q.addClass(e.getClass("ITEMS","-inline"));d.each(function(h){l=Math.max(l,h.offsetWidth)});if(l%2==1){l+=1}q.removeClass(e.getClass("ITEMS","-inline"));q.cssSize({width:o(l),height:o(f)});m.height(o(f));var n=o(Math.min(c._maxHeight,f)),u=o(Math.min(c._maxWidth,l)),x={width:u,height:n};c.width=u;c.height=n;r.cssSize(x);j.cssSize(x);p.cssSize({width:o(Math.min(c._maxWidth,l)+xui.Dom.getScrollBarSize()),height:x.height})}});return this._setScroll()},_setScroll:function(){return this.each(function(g){if(g.renderId){var j=g.getSubNode("BOX"),e=j.scrollTop(),f=j.scrollHeight(),c=g.getRoot(),d=c.offsetHeight();g.getSubNode("TOP").css("display",e===0?"none":"block");g.getSubNode("BOTTOM").css("display",(d>=f-e)?"none":"block")}})},_scrollToBottom:function(){return this.each(function(g){var l=g.getSubNode("BOX"),e=g.getSubNode("BORDER"),m=l.scrollTop(),j,f=l.scrollHeight(),c=false,d=e.height();if(d<f-m){if(!g.$scrollStep){g.$scrollStep=1}if(g.$scrollStep<5){g.$scrollStep=g.$scrollStep*1.01}m+=g.$scrollStep;if(d>=f-m){m=f-d;c=true}l.scrollTop(m);if(c){g.getSubNode("BOTTOM").css("display","none");g.$scrollTobottom=false;g.$scrollStep=null}else{g.getSubNode("TOP").css("display","block");if(g.$scrollTobottom){xui.asyRun(arguments.callee,0,[g],this)}}}})},_scrollToTop:function(){return this.each(function(d){var e=d.getSubNode("BOX"),f=e.scrollTop(),c=false;if(f>0){if(!d.$scrollStep){d.$scrollStep=1}if(d.$scrollStep<5){d.$scrollStep=d.$scrollStep*1.01}f-=d.$scrollStep;if(f<0){f=0;c=true}e.scrollTop(f);if(c){d.getSubNode("TOP").css("display","none");d.$scrollToTop=false;d.$scrollStep=null}else{d.getSubNode("BOTTOM").css("display","block");if(d.$scrollToTop){xui.asyRun(arguments.callee,0,[d],this)}}}})},pop:function(l,n,u,j){var h=this.get(0),d=h.properties,c="$subPopMenuShowed",e="$highLight",r="$childPopMenu";if(!h.renderId){var g=h.boxing().render(true);xui.Dom.getEmptyDiv().append(g)}var q=h.getRoot();if(h.$highLight){xui([h.$highLight]).tagClass("-hover",false)}h._conainer=d.parentID?xui(d.parentID):u||null;q.popToTop(l,n,h._conainer);this._setScroll();h.boxing().adjustSize();var m=function(){var f=arguments.callee.profile;if(f.box){f.boxing().hide();if(f.$popGrp){f.$popGrp.length=0}}};m.profile=h;if(!h.$popGrp||!h.$popGrp.length){h.$popGrp=[q._get(0)];q.setBlurTrigger(h.$xid,null);q.setBlurTrigger(h.$xid,m,h.$popGrp)}h[r]=h[c]=h[e]=null;return this},hide:function(n,h,j){var q,g=this.get(0),f=g.properties,m=g.getRoot(),c="$subPopMenuShowed",d="$highLight",o="$childPopMenu",l=function(){if(false!==n){if(false===g.boxing().beforeHide(g,h,j)){return this}}if(!m||m.css("display")=="none"){return}m.setBlurTrigger(g.$xid,null);if(g.$hideMenuPool){g.$hideMenuPool.append(m)}else{m.css("display","none")}if(q=g[d]){xui([q]).tagClass("-hover",false)}var r=g[o],e;if(q=g[c]){q.hide(n,h)}while(r){r.boxing().hide(n,h);r=(e=r)[o];e[o]=e[c]=e[d]=null}g[o]=g[c]=g[d]=null;if(q=g.$parentPopMenu){q[c]=null}if(g.$popGrp){xui.arr.removeValue(g.$popGrp,m._get(0))}if(false!==n){g.boxing().onHide(g)}};m.hide(l,null,h);return this},_afterInsertItems:function(c){if(!c.renderId){return}c.boxing().adjustSize()},_afterRemoveItems:function(c){if(!c.renderId){return}c.boxing().adjustSize()}},Initialize:function(){var c=this.getTemplate();xui.merge(c.FRAME.BORDER,{className:"xui-uiborder-outset xui-uiborder-radius",TOP:{className:"xuifont xui-uibar xui-uiborder-b",$fonticon:"xui-icon-circleup"},BOTTOM:{className:"xuifont xui-uibar xui-uiborder-t",$fonticon:"xui-icon-circledown"},BOX:{tagName:"div",className:"xui-uibase",BOXBGBAR:{tabName:"div",className:"xui-uibar",style:"{_iconDisplay}"},ITEMS:{tagName:"div",text:"{items}"}},POOL:{}},"all");c.$submap={items:function(j,h,f,e,d){var g;e=e+"."+f.type;if(g=f.object){d[d.length]=g.build(f)}else{if(h[e]){xui.UI.$doTemplate(j,h,f,e,d)}}},"items.split":{ITEMSPLIT:{style:"{_itemDisplay}",className:"xui-uiborder-b"}},"items.button":{ITEM:{tabindex:-1,className:" xui-uimenu {itemClass} {disabled}",style:"{itemStyle}{_itemDisplay}",ICON:{$order:0,className:"xuicon xui-icon-placeholder {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {_iconDisplay}",text:"{iconFontCode}"},CAPTION:{text:"{caption}",$order:1},RULER:{style:"{displayAdd}",$order:2},ADD:{tagName:"div",style:"{displayAdd}",text:"{add}",$order:2},SUB:{className:"xuifont",$fonticon:"xui-icon-singleright",style:"{displaySub}"}}},"items.checkbox":{ITEM:{tabindex:-1,className:"  xui-uimenu {itemClass} {disabled}",style:"{itemStyle}{_itemDisplay}",CHECKBOX:{$order:0,className:"xuifont",$fonticon:"{_fi_checkboxCls1} {_fi_checkboxCls2}  {_iconDisplay}"},CAPTION:{text:"{caption}",$order:1},RULER:{style:"{displayAdd}",$order:2},ADD:{tagName:"div",style:"{displayAdd}",text:"{add}",$order:2}}},"items.radiobox":{ITEM:{tabindex:-1,className:"  xui-uimenu {itemClass} {disabled}",style:"{itemStyle}{_itemDisplay}",RADIOBOX:{$order:0,className:"xuifont",$fonticon:"{_fi_radioboxCls1} {_fi_radioboxCls2}  {_iconDisplay}"},CAPTION:{text:"{caption}",$order:1},RULER:{style:"{displayAdd}",$order:2},ADD:{tagName:"div",style:"{displayAdd}",text:"{add}",$order:2}}}};this.setTemplate(c)},Static:{$initRootHidden:true,Appearances:{KEY:{visibility:"hidden"},POOL:{position:"absolute",display:"none"},BOX:{overflow:"hidden",position:"relative",overflow:"hidden","overflow-y":"auto","z-index":"3"},BORDER:{position:"relative",overflow:"hidden"},ITEMS:{position:"relative",top:0,left:0,overflow:"hidden","white-space":"nowrap"},BOXBGBAR:{"z-index":-1,position:"absolute",left:0,top:0,width:"2em",height:"100%"},"ITEMS-inline ITEM":{$order:5,display:xui.$inlineBlock},ITEM:{display:"block",position:"relative",overflow:"visible","white-space":"nowrap",cursor:"pointer",padding:".25em 1.75em .25em .25em",outline:0},ITEMSPLIT:{display:"block",position:"relative",overflow:"visible","white-space":"nowrap",margin:".25em .25em .25em 2em"},ICON:{margin:0},TOP:{cursor:"pointer",display:"none",position:"absolute","z-index":"10",top:0,"text-align":"center",width:"100%"},BOTTOM:{cursor:"pointer",display:"none",position:"absolute",bottom:0,"z-index":"10","text-align":"center",width:"100%"},"RADIOBOX, CHECKBOX, RADIOBOX-checked, CHECKBOX-checked":{cursor:"pointer","vertical-align":"middle"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","padding-left":".75em","font-size":"1em"},RULER:{width:"8em"},ADD:{position:"absolute",top:".25em",right:0,width:"7em","padding-right":"1.75em","text-align":"right","z-index":"10",zoom:xui.browser.ie?1:null},SUB:{position:"absolute",top:".15em",right:".15em"}},Behaviors:{HoverEffected:{TOP:"TOP",BOTTOM:"BOTTOM"},BOX:{onScroll:function(c,d,f){c.boxing()._setScroll()}},ITEM:{onMouseover:function(j,m,d){var g="$subPopMenuShowed",q="$allPops",h="$highLight",p="$showpops",l="$popGrp";if(j[h]==d){return}var n=j.properties,B=j.getItemByDom(d),o=B.id,A=false,w,f,x;if(x=j[g]){if(x==xui.get(j,[q,o])){A=true}else{x.hide();j[g]=null}}if(!A){if(x=j[h]){xui([x]).tagClass("-hover",false)}j[h]=d;xui.use(d).tagClass("-hover");try{xui.use(d).get(0).focus()}catch(m){}}if(!A&&B.sub){if(!(xui.isArr(B.sub)&&B.sub.length)){if(j.onShowSubMenu){var c=j["$sub:"+B.id];if(c&&c["xui.UI"]&&!c.isEmpty()){}else{c=j.boxing().onShowSubMenu(j,B,d)}if(c&&c["xui.UI"]&&!c.isEmpty()){j[g]=c;c=c.reBoxing();c.onMouseout(function(C,r,D){j.box._mouseout(j,r,D)},null,-1);j[l].push(c._get(0));c.popToTop(d,2,j._conainer);return}else{if(c&&xui.isArr(c)&&c.length){B.sub=c}}}}if(xui.isArr(B.sub)&&B.sub.length){j[q]=j[q]||{};if(!(w=j[q][o])){var u=j.properties;w=(new xui.UI.PopMenu({position:"absolute",items:B.sub,autoHide:u.autoHide,showEffects:u.showEffects,hideEffects:u.hideEffects})).render(true);w.onShowSubMenu(function(C,e,r){return j.boxing().onShowSubMenu(j,e,r)});w.onMenuSelected(function(C,e,r){return j.boxing().onMenuSelected(j,e,r)});f=w.get(0);f.$hideMenuPool=j.$hideMenuPool||j.getSubNode("POOL");j[q][o]=w;j[p]=j[p]||[j];f[p]=j[p];j[p].push(f)}else{f=w.get(0)}j[l].push(f.getRoot()._get(0));f[l]=j[l];f.$parentPopMenu=j;j.$childPopMenu=f;w.pop(d,2,j._conainer);j[g]=w}}},onMouseout:function(g,l,c){var m=g.properties,q=g.getItemByDom(c),n=q.id,h=true,d="$highLight",p;if(g[d]==c){return}if(p=g.$subPopMenuShowed){var f=l.toElement||l.relatedTarget,j=p.get(0).getRootNode();try{do{if(f==j){return}}while((f&&(f=f.parentNode)))}catch(o){}}xui.use(c).tagClass("-hover",false);g[d]=null},onClick:function(c,f,h){var j=c.properties,d=c.getItemByDom(h),g=d.id;if(j.disabled||d.disabled){return false}if(!d.group){if(d.type=="checkbox"){c.getSubNodeByItemId("CHECKBOX",d.id).tagClass("-checked",d.value=!d.value)}else{if(d.type=="radiobox"){c.getSubNode("RADIOBOX",true).tagClass("-checked",false);xui.arr.each(j.items,function(e){if(e.type=="radiobox"){e.value=false}});c.getSubNodeByItemId("RADIOBOX",d.id).tagClass("-checked",d.value=true)}}if(c.onMenuSelected){c.boxing().onMenuSelected(c,d,h)}if(j.hideAfterClick){xui.use(h).tagClass("-hover",false);xui.asyRun(function(){var l=c,e;if(!l.renderId){return}while(l){l.boxing().hide();l=(e=l).$parentPopMenu;e.$parentPopMenu=e.$subPopMenuShowed=null}c.$subPopMenuShowed=null;if(c.$popGrp){c.$popGrp.length=0}},100)}}},onFocus:function(d,j,l){var f=d.getSubNode("BOX"),g=f.scrollTop(),c=f.scrollHeight(),m=xui.use(l).offsetTop();if(m<g||m>g+c){xui.use(l).offsetTop(g)}xui.use(l).onMouseover()},onKeydown:function(g,j,d){var q=g.getItemByDom(d),l=g.properties.items,o=xui.Event.getKey(j).key,n=q.id,m,c,h,f,p;switch(o){case"enter":xui(d).onClick();break;case"up":c=true;m=false;xui.arr.each(l,function(r,e){if(r.type=="split"){return}if(m){h=r.id;return c=false}if(r.id==n){m=true}},null,true);if(c){h=l[l.length-1].id}f=g.getSubNodeByItemId("ITEM",h).get(0);break;case"down":c=true;m=false;xui.arr.each(l,function(r,e){if(r.type=="split"){return}if(m){h=r.id;return c=false}if(r.id==n){m=true}});if(c){h=l[0].id}f=g.getSubNodeByItemId("ITEM",h).get(0);break;case"left":if(p=g.$parentPopMenu){if(p=g.$parentPopMenu.$highLight){f=p}}break;case"right":if((p=g.$subPopMenuShowed)&&p==g.$allPops[n]){p.activate()}break}if(f&&f.tagName){try{f.focus()}catch(j){}}}},TOP:{onMouseover:function(c){c.$scrollToTop=true;c.boxing()._scrollToTop()},onMouseout:function(c){c.$scrollToTop=false;c.$scrollStep=null},onClick:function(c){c.$scrollStep*=2}},BOTTOM:{onMouseover:function(c){c.$scrollTobottom=true;c.boxing()._scrollToBottom()},onMouseout:function(c){c.$scrollTobottom=false;c.$scrollStep=null},onClick:function(c){c.$scrollStep*=2}},ITEMS:{afterKeydown:function(d,f){var c=xui.Event.getKey(f).key;if(c=="tab"||c=="enter"){return true}else{if(c=="esc"){do{d.boxing().hide()}while(d=d.$parentPopMenu);return false}else{return false}}}},BORDER:{onMouseout:function(c,d,f){c.box._mouseout(c,d,f)}}},DataModel:({dock:null,tabindex:null,tips:null,border:null,resizer:null,showEffects:"Blur",hideEffects:"",autoTips:false,shadow:true,_maxHeight:260,_maxWidth:300,left:-10000,parentID:"",hideAfterClick:true,autoHide:false,height:{$spaceunit:1,ini:"auto"},width:{$spaceunit:1,ini:"auto"},position:"absolute",noIcon:{ini:false,action:function(){this.boxing().refresh()}},$hborder:0,$vborder:0}),EventHandlers:{onShowSubMenu:function(c,d,e){},beforeHide:function(c,d){},onHide:function(c){},onMenuSelected:function(c,d,e){}},RenderTrigger:function(){this.boxing().adjustSize()},_beforeSerialized:function(c){var d=arguments.callee.upper.call(this,c),e=d.properties;delete e.left;delete e.top;delete e.right;delete e.bottom;delete e.width;delete e.height;return d},_mouseout:function(f,h){if(f.properties.autoHide){var j=xui.Event.getPos(h),d,g,c;xui.arr.each(f.$popGrp,function(e){e=xui([e]);g=e.offset();d=e.cssSize();if(j.left>=g.left&&j.top>=g.top&&j.left<=g.left+d.width&&j.top<=g.top+d.height){c=1;return false}});if(!c){while(c=f.$parentPopMenu){f=c}f.boxing().hide(true,null,h);if(f.$popGrp){f.$popGrp.length=0}}}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c),e="display:none",f=c.properties;if(f.noIcon){d._iconDisplay=e}return d},_prepareItem:function(c,d){var e="display:none;",f=c.properties;d.add=d.add||"";d.displayAdd=d.add?"":e;d.displaySub=d.sub?"":e;d._itemDisplay=d.hidden?e:"";d._iconDisplay=f.noIcon?e:"";d.type=d.type||"button";if(d.type=="checkbox"){d._fi_checkboxCls1="xui-uicmd-check";d._fi_checkboxCls2=d.value?"xuicon-checked xui-uicmd-check-checked":""}else{if(d.type=="radiobox"){d._fi_radioboxCls1="xui-uicmd-radio";d._fi_radioboxCls2=d.value?"xuicon-checked xui-uicmd-radio-checked":""}}},_onresize:null}});Class("xui.UI.MenuBar",["xui.UI","xui.absList"],{Instance:{updateItem:function(f,e){var d=this,h=d.get(0),c=h.properties.items;if(xui.arr.subIndexOf(c,"id",f)!=-1){arguments.callee.upper.call(d,f,e)}else{var g=0;xui.each(h.$allPops,function(j){j.updateItem(f,e);g=1});if(!g){arguments.callee.upper.call(d,f,e)}}return d},_pop:function(m,d){var n=this,g=n.get(0);if(g.$curPop){n.hide()}if(!m.sub){return}if(g.beforePopMenu&&false==g.boxing().beforePopMenu(g,m,d)){return}else{xui.use(d).tagClass("-active");var f,e=m.id,j=g.properties,h="$allPops";g.$curPop=e;g.$curElem=d;g.$menuPop=e;g[h]=g[h]||{};if(!g[h][e]){var l=function(o){var p={position:"absolute",items:o,autoHide:!!j.autoShowTime};if(j.showEffects){p.showEffects=j.showEffects}if(j.hideEffects){p.hideEffects=j.hideEffects}var q=xui.create("PopMenu",p);g.getSubNode("POOL").append(q);q.onHide(function(r){n.hide(false)}).onMenuSelected(function(w,r,u){return g.boxing().onMenuSelected(g,w,r,u)}).onShowSubMenu(function(w,r,u){return g.boxing().onShowSubMenu(g,w,r,u)});q.get(0).$hideMenuPool=g.getSubNode("POOL");q.get(0)[h]=g[h];g[h][e]=q};if(xui.isArr(m.sub)&&m.sub.length){l(m.sub)}else{if(g.onGetPopMenu){var c=g.boxing().onGetPopMenu(g,m,l);if(xui.isArr(c)&&c.length){l(m.sub=c)}}}}if(g[h][e]){g[h][e].pop(xui(d),1,xui(j.parentID))}return false}},_afterInsertItems:function(){this.clearPopCache()},hide:function(c){var d=this.get(0),f,g=d.$curPop,e=d.$curElem;if(f=d.$allPops[g]){if(false!==arguments[0]){f.hide(false,c)}d.getSubNode("POOL").append(f.reBoxing());xui([e]).tagClass("-active",false)}d.$menuPop=d.$curPop=d.$curElem=null},clearPopCache:function(){var c=this.get(0);if(c.renderId){c.getSubNode("POOL").empty();c.$allPops=c.$curPop=c.$curElem=null}}},Initialize:function(){xui.SC("xui.UI.PopMenu")},Static:{_nocap2tip:true,Templates:{tagName:"div",className:"{_className}",style:"{_style}",POOL:{tagName:"div"},BORDER:{className:"xui-uibar xui-uiborder-outset xui-uiborder-radius",tagName:"div",LIST:{tagName:"div",HANDLER:{className:"xuifont",$fonticon:"xui-icon-placeholder",style:"{handler}"},ITEMS:{$order:1,text:"{items}"}}},$submap:{items:{ITEM:{style:"{itemStyle}{_itemDisplay}",className:"xui-uimenu",ITEMI:{ITEMC:{ITEMA:{tabindex:"{_tabindex}",className:" {typeCls} {disabled}",ICON:{$order:1,className:"xuicon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}",text:"{iconFontCode}"},CAPTION:{$order:2,text:"{caption}",style:"{captionDisplay}"}}}}}}}},Appearances:{KEY:{position:"absolute",left:0,top:0},POOL:{width:0,height:0,visibility:"hidden",position:"absolute",left:"-10000px",top:"-10000px"},BORDER:{left:0,top:0},HANDLER:{height:"100%",width:"0.5em",background:"url("+xui.ini.img_handler+") repeat-y left top",cursor:"move","vertical-align":"middle"},LIST:{padding:".125em"},ITEMS:{"vertical-align":"middle"},ITEM:{"white-space":"nowrap","vertical-align":"top",overflow:"hidden",margin:"0 .25em 0 .25em","padding-right":".5em"},"ITEM *":{cursor:"pointer"},ITEMI:{padding:"0 .25em","vertical-align":"top"},ITEMC:{padding:".25em 0","vertical-align":"top"},ITEMA:{display:xui.$inlineBlock},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","font-size":"1em"}},Behaviors:{ITEM:{onMouseover:function(d,h,l){var g=d.properties,c=l;if(g.disabled){return}var f=d.getItemByDom(l),j=f.id;if(f.disabled){return}xui.use(c).tagClass("-hover");if(d.$menuPop){if(d.$menuPop!=j){d.boxing()._pop(f,c)}}else{if(g.autoShowTime){xui.resetRun(d.$xid+":autoShowTime",function(){d.boxing()._pop(f,c)},g.autoShowTime)}}},onMouseout:function(g,h,c){var d=g.properties;if(d.disabled){return}var o=g.getItemByDom(c);if(o.disabled){return}xui.use(c).tagClass("-hover",false);if(d.autoShowTime){var l=g.$allPops;if(l=l&&l[g.$curPop]){var f=l.get(0).getRoot(),m=xui.Event.getPos(h),q=f.cssSize(),n=3,j=f.offset();if(m.left>j.left&&m.top>j.top-n&&m.left<j.left+q.width&&m.top<j.top+q.height){}else{l.hide()}}xui.resetRun(g.$xid+":autoShowTime",null)}},onMousedown:function(c,g,j){var f=c.properties;if(f.disabled){return}var d=c.getItemByDom(j),h=d.id;if(d.disabled){return}xui.use(j).tagClass("-active");return c.boxing()._pop(d,j)},onMouseup:function(c,f,g){var d=c.getItemByDom(g);if(c.$menuPop!=d.id){xui.use(g).tagClass("-active",false)}},onKeydown:function(f,j,c){var o=xui.Event.getKey(j),n=o.key,d=o.shiftKey,m=xui(c),h=f.getRoot().nextFocus(true,true,false),l=f.getRoot().nextFocus(false,true,false);switch(xui.Event.getKey(j).key){case"tab":if(d){if(m.get(0)!=h.get(0)){h.focus();return false}}else{if(m.get(0)!=l.get(0)){l.focus();return false}}break;case"left":case"up":var g=m.nextFocus(false,true,false);if(m.get(0)==h.get(0)){l.focus()}else{m.nextFocus(false)}return false;break;case"right":case"down":var g=m.nextFocus(true,false,false);if(m.get(0)==l.get(0)){h.focus()}else{m.nextFocus()}return false;break;case"enter":m.onMousedown();break}},onClick:function(c,f,g){var d=c.getItemByDom(g);if(c.$menuPop!=d.id){if(c.onMenuBtnClick){c.boxing().onMenuBtnClick(c,d,g)}}}}},DataModel:{listKey:null,autoTips:false,height:{$spaceunit:1,ini:"auto",readonly:true},width:{$spaceunit:1,ini:"auto"},parentID:"",$hborder:1,$vborder:1,left:0,top:0,autoShowTime:200,handler:{ini:true,action:function(c){this.getSubNode("HANDLER").css("display",c?"":"none")}},position:"absolute",dock:{ini:"top",listbox:["top","bottom"]}},LayoutTrigger:function(){var c=this.properties,d=this.getSubNode("BORDER");c.$hborder=c.$vborder=d._borderW("left")},EventHandlers:{onGetPopMenu:function(c,d,e){},onMenuBtnClick:function(c,d,e){},beforePopMenu:function(c,d,e){},onShowSubMenu:function(c,f,d,e){},onMenuSelected:function(c,f,d,e){}},RenderTrigger:function(){if(this.properties.disabled){this.boxing().setDisabled(true,true)}},_prepareData:function(d){var c="display:none;";var e=arguments.callee.upper.call(this,d);e.handler=e.handler?"":c;e._itemDisplay=e.hidden?c:"";return e}}});Class("xui.UI.ToolBar",["xui.UI","xui.absList"],{Instance:{updateItem:function(g,e){if(e.type){return arguments.callee.upper.call(this,g,e)}else{var r=this,d=r.get(0),n=d.box,u=d.properties.items,w=d.queryItems(u,function(B){return typeof B=="object"?B.id===g:B==g},true,true,true),o,x,m,l,j,h,f,q;if(xui.isStr(e)){e={caption:e}}if(w.length){w=w[0];if(x=w[0]){if(xui.isSet(e.id)){e.id+=""}if(e.id&&g!==e.id){o=e.id;var c=d.ItemIdMapSubSerialId,p;if(!c[o]){if(p=c[g]){c[o]=p;delete c[g];d.SubSerialIdMapItem[p].id=o}else{x.id=o}}}delete e.id;if(xui.isEmpty(e)){return r}m=d.getSubNodeByItemId("ICON",o||g);l=d.getSubNodeByItemId("CAPTION",o||g);j=d.getSubNodeByItemId("ITEM",o||g);h=d.getSubNodeByItemId("LABEL",o||g);f=d.getSubNodeByItemId("BTN",o||g);if("value" in e&&e.value!==x.value){d.getSubNodeByItemId("BTN",o||g).tagClass("-checked",!!e.value)}if("caption" in e&&e.caption!==x.caption){l.html(e.caption);if(e.caption&&!x.caption){l.css("display","")}if(!e.caption&&x.caption){l.css("display","none")}}if("label" in e&&e.label!==x.label){h.html(e.label);if(e.label&&!x.label){h.css("display","")}if(!e.label&&x.label){h.css("display","none")}}if("disabled" in e&&e.disabled!==x.disabled){if(e.disabled){j.addClass("xui-ui-itemdisabled")}else{j.removeClass("xui-ui-itemdisabled")}f.onMouseout(true,{$force:true})}if("image" in e&&e.image!==x.image){m.css("background-image",e.image)}if("imagePos" in e&&e.imagePos!==x.imagePos){m.css("background-position",e.imagePos)}if("imageClass" in e&&e.imageClass!==x.imageClass){if(x.imageClass){m.removeClass(x.imageClass)}if(e.imageClass){m.addClass(e.imageClass)}}if("hidden" in e){var A=!!e.hidden;if(A){if(x.hidden!==true){j.css("display","none")}}else{if(x.hidden===true){j.css("display","")}}}xui.merge(x,e,"all")}}return r}},showItem:function(d,c){return this.each(function(e){var f=e.getItemByItemId(d);if(f){f.hidden=c===false;e.getSubNodeByItemId("ITEM",d).css("display",c===false?"none":"")}})},showGroup:function(c,d){return this.each(function(e){xui.arr.each(e.properties.items,function(g){if(g.id==c){g.hidden=d===false;return false}});var f=e.getSubNodeByItemId("GROUP",c);f.css("display",d===false?"none":"");xui.resetRun(e.$xid+":showgrp",function(){if(e.renderId&&e.getRootNode().offsetWidth){xui.UI.$dock(e,true,true)}})})}},Static:{_focusNodeKey:"BTN",_ITEMKEY:"GROUP",Templates:{tagName:"div",className:"{_className}",style:"{_style}",ITEMS:{className:"xui-uibar xui-uiborder-outset xui-uiborder-radius",tagName:"div",style:"{mode}",text:"{items}"},$submap:{items:{GROUP:{className:"{groupClass}",style:"{grpDisplay} {groupStyle}",HANDLER:{className:"xuifont",$fonticon:"xui-icon-placeholder",style:"{mode2}"},LIST:{$order:1,tagName:"text",text:"{sub}"}}},"items.sub":{ITEM:{style:"{_itemDisplay}",className:" {disabled}",IBWRAP:{tagName:"div",SPLIT:{style:"{splitDisplay}",className:"xui-uiborder-l xui-uiborder-r",text:"&nbsp;"},LABEL:{style:"{labelDisplay}",text:"{label}"},BTN:{tagName:"button",className:"xui-uiborder-hidden xui-uiborder-radius xui-showfocus {itemcls} {itemClass}",style:"{itemStyle} {_boxDisplay}",tabindex:"{_tabindex}",BOXWRAP:{tagName:"div",RULER:{},ICON:{$order:1,className:"xuicon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat}  {imageDisplay}",text:"{iconFontCode}"},CAPTION:{$order:2,text:"{caption}",style:"{captionDisplay}"},DROP:{$order:3,className:"xuifont",$fonticon:"xui-uicmd-arrowdrop",style:"{_dropDisplay}"}}}}}}}},Appearances:{KEY:{position:"absolute",overflow:"hidden",left:0,top:0},RULER:{padding:"0",margin:"0",width:"0"},ICON:{margin:0,"vertical-align":"middle"},ITEMS:{display:"block","padding-bottom":".125em"},HANDLER:{height:"100%",width:".75em",background:"url("+xui.ini.img_handler+") repeat-y left top",cursor:"move","vertical-align":"middle"},GROUP:{position:"static",padding:".125em .25em 0 .125em","vertical-align":"middle"},ITEM:{"vertical-align":"middle",padding:"0 .125em",margin:"0"},SPLIT:{$order:1,width:"0","vertical-align":"middle",margin:"0 .25em"},BTN:{padding:".25em",cursor:"pointer","*width":"auto","*overflow":"visible"},BOX:{height:"auto"},"LABEL, CAPTION":{"vertical-align":"middle","margin-left":".25em","margin-right":".25em","font-size":"1em"},LABEL:{cursor:"default",padding:".25em"},DROP:{"vertical-align":"middle"}},Behaviors:{NoTips:["GROUP","HANDLER"],HoverEffected:{BTN:["BTN"]},ClickEffected:{BTN:["BTN"]},BTN:{onClick:function(f,h,j){if(f.properties.disabled){return false}var d=xui.use(j).parent(3).id(),c=f.getItemByDom(d);if(c.disabled){return false}var g=f.getItemByDom(j);if(g.disabled){return false}xui.use(j).focus();if(g.type=="statusButton"){xui.use(j).tagClass("-checked",g.value=!g.value)}f.boxing().onClick(f,g,c,h,j);return false}}},DataModel:{listKey:null,height:{ini:"auto",readonly:true},width:{$spaceunit:1,ini:"auto"},left:{$spaceunit:1,ini:0},top:{$spaceunit:1,ini:0},handler:{ini:true,action:function(c){this.getSubNode("HANDLER",true).css("display",c?"":"none")}},position:"absolute",hAlign:{ini:"left",listbox:["left","center","right"],action:function(c){this.getSubNode("ITEMS",true).css("textAlign",c)}},dock:{ini:"top",listbox:["top","bottom"]}},EventHandlers:{onClick:function(c,d,g,f,h){}},_adjustItems:function(d){if(!d){d=[xui.stamp()+""]}if(xui.isStr(d)){d=[d]}var e=xui.copy(d),c;xui.arr.each(e,function(g,f){if(xui.isArr(g)){g={id:xui.id(),sub:g}}if(xui.isHash(g)){e[f]=xui.copy(g);e[f].sub=[];if(g.sub){xui.arr.each(g.sub,function(h){e[f].sub.push(xui.isHash(h)?xui.copy(h):{id:h+""})})}}});return e},_prepareData:function(c){var f=arguments.callee.upper.call(this,c);var e=c.properties;f.mode=e.hAlign!="left"?("text-align:"+e.hAlign+";"):"";return f},_prepareItem:function(d,e,u,m,n,o,f,h){var q=this,j="display:none",g=d.properties.tabindex,p=function(A,w,H,D,E,F,B,C){var x=w[xui.UI.$tag_subId]=typeof C=="string"?C:("a_"+A.pickSubId("aitem")),G;if(typeof H=="string"){H={caption:H}}if(false!==B){A.ItemIdMapSubSerialId[H.id]=x;A.SubSerialIdMapItem[x]=H}if(H.object){w.object=q._prepareInlineObj(A,H,g)}else{if(H.statusButton){H.type="statusButton";delete H.statusButton}else{if(H.dropButton){H.type="dropButton";delete H.dropButton}else{if(H.split){H.type="split";delete H.split}}}if(H.type!=="split"&&!H.caption){H.caption=""}xui.UI.adjustData(A,H,w);if(H.type=="statusButton"&&!!H.value){w.itemcls=" xui-uiborder-hidden-checked "+A.getClass("BTN","-checked",!!H.value)}w._tabindex=g;w.splitDisplay=w.type=="split"?"":j;w.labelDisplay=w.label?"":j;w.captionDisplay=w.caption?"":j;w._dropDisplay=H.type=="dropButton"?"":j;w._boxDisplay=(w.type!=="split"&&(w.caption||w.image||w.imageClass))?"":j}w._itemDisplay=H.hidden?j:"";H._pid=D};if(m){p(d,e,u,m,n,o,f,h)}else{var l=[],c,r=u.sub||[];m=u.id;e.mode2=("handler" in u)?(u.handler?"":j):(d.properties.handler?"":j);e.grpDisplay=u.hidden?j:"";e.sub=l;xui.arr.each(r,function(w){c={id:w.id};p(d,c,w,m,n,o,f,h);l.push(c)})}}}});Class("xui.UI.Layout",["xui.UI","xui.absList"],{Instance:{getPanel:function(c){return this.get(0).getSubNodeByItemId("PANEL",c)},append:function(f,c,e,d){var g=this.get(0);return arguments.callee.upper.call(this,f,c||"main",e,d)},insertItems:function(c,e,d){return this._insertItems(c,e,d)},_insertItems:function(h,d,p,q){var e,l,m,j,c,f,g,o="before",n=this._afterInsertItems;return this.each(function(u){g=u.box;m=u.properties.items;if(!q){j=xui.arr.subIndexOf(m,"id",d);if(j==-1){o=p?"before":"after"}else{if(m[j].id=="main"){o=p?"before":"after"}else{o=m[j].pos}}l=g._adjustItems2(h,o)}else{l=h}if(j==-1){xui.arr.insertAny(m,l,p?0:-1)}else{xui.arr.insertAny(m,l,p?j:j+1)}if(u.renderId){f=g._prepareItems(u,l,d);c=u._buildItems("items",f);u.getRoot().prepend(c);var r=u.getRootNode().style;xui.UI.$tryResize(u,r.width,r.height,true);r=null}if(n){u.boxing()._afterInsertItems(u,f,d,p)}})},_afterRemoveItems:function(d){if(d.renderId){var c=d.getRootNode().style;xui.UI.$tryResize(d,c.width,c.height,true);c=null}},updateItem:function(h,g){var q=this,f=q.get(0),e=f.properties.type=="vertical",l=f.box,r=f.properties.items,x=f.queryItems(r,function(B){return typeof B=="object"?B.id===h:B==h},true,true,true),m,A,u,w,j,o;if(typeof g!="object"){return}if(x.length){x=x[0];if(typeof x[0]!="object"){A=x[2][x[1]]={id:x[0]}}else{A=x[0]}if(xui.isSet(g.id)){g.id+=""}if(g.id&&h!==g.id){m=g.id;var c=f.ItemIdMapSubSerialId,n;if(!c[m]){if(n=c[h]){c[m]=n;delete c[h];f.SubSerialIdMapItem[n].id=m}else{A.id=m}}}delete g.id;if(xui.isEmpty(g)){return q}var p=false;w=f.getSubNodeByItemId("ITEM",h);if(!w.isEmpty()){if(g.hasOwnProperty("size")){g.size=Math.round(parseFloat(""+g.size));if(g.size!=A._size){A._size=g.size;if(e){w.height(g.size)}else{w.width(g.size)}p=true}}if(g.hasOwnProperty("hidden")){g.hidden=!!g.hidden;if(g.hidden!==A.hidden){f.getSubNodeByItemId("ITEM",h).css("display",g.hidden?"none":"");p=true}}if(g.hasOwnProperty("locked")){g.locked=!!g.locked;if(g.locked!==A.locked){f.getSubNodeByItemId("MOVE",h).css("cursor",g.locked?"default":e?"n-resize":"w-resize");p=true}}if(g.hasOwnProperty("folded")){g.folded=!!g.folded;if(g.folded!==A.folded){f.boxing().fireCmdClickEvent(h)}}if(g.hasOwnProperty("cmd")){g.cmd=!!g.cmd;if(g.cmd!==A.cmd){f.getSubNodeByItemId("CMD",h).css("display",g.cmd?"":"none")}}var d={};if(g.hasOwnProperty("panelBgClr")){d["background-color"]=g.panelBgClr}if(g.hasOwnProperty("panelBgImg")){d["background-image"]=g.panelBgImg?("url("+xui.adjustRes(g.panelBgImg)+")"):""}if(g.hasOwnProperty("panelBgImgPos")){d["position-color"]=g.panelBgImgPos}if(g.hasOwnProperty("panelBgImgRepeat")){d["background-repeat"]=g.panelBgImgRepeat}if(g.hasOwnProperty("panelBgImgAttachment")){d["background-attachment"]=g.panelBgImgAttachment}if(g.hasOwnProperty("overflow")){var n=g.overflow;if(n){if(n.indexOf(":")!=-1){xui.arr.each(n.split(/\s*;\s*/g),function(C){var B=C.split(/\s*:\s*/g);if(B.length>1){d[xui.str.trim(B[0])]=xui.str.trim(B[1]||"")}})}}d.overflow=n||""}if(!xui.isEmpty(d)){f.getSubNodeByItemId("PANEL",h).css(d)}}xui.merge(A,g,"all");if(p){var o=f.getRootNode().style;xui.UI.$tryResize(f,o.width,o.height,true);o=null}}return q},fireCmdClickEvent:function(c){this.getSubNodeByItemId("CMD",c).onMousedown();return this}},Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className}",text:"{items}",$submap:{items:{ITEM:{tagName:"div",className:"{cls1} {itemClass}",style:"{itemStyle};{display}",MOVE:{$order:0,tagName:"div",className:"xui-ui-unselectable xui-uibar xuifont {clsmovebg} {cls2} ",style:"cursor:{_cursor}"},CMD:{$order:1,tagName:"span",style:"{cmdDisplay}",className:"xui-node xui-ui-unselectable xuifont {cls3}",$fonticon:"{_fi_cls3} "},PANEL:{tagName:"div",className:"xui-uibase xui-uicontainer",style:"position:absolute;{_bginfo};{_overflow};",text:xui.UI.$childTag}}}}},Appearances:{KEY:{position:"absolute",overflow:"hidden",left:0,top:0},MOVE:{$order:0,position:"absolute","z-index":"10"},CMD:{position:"absolute",cursor:"pointer","z-index":"20"},ITEM:{position:"absolute","z-index":1,overflow:"hidden","border-width":xui.browser.opr?"0":null},PANEL:{position:"absolute",overflow:"auto",left:0,top:0,"border-width":xui.browser.opr?"0":null},"ITEM-MAIN":{left:0,right:0,top:0,bottom:0},"ITEM-TOP, ITEM-BOTTOM":{left:0,right:0},"ITEM-LEFT, ITEM-RIGHT":{top:0,bottom:0},"MOVE-TOP, MOVE-BOTTOM":{width:"100%",height:".5em",cursor:"n-resize"},"MOVE-LEFT, MOVE-RIGHT":{height:"100%",width:".5em",cursor:"w-resize"},"MOVE-TOP":{bottom:0},"MOVE-BOTTOM":{top:0},"MOVE-LEFT":{right:"0"},"MOVE-RIGHT":{left:0},"CMD-TOP, CMD-BOTTOM, CMD-LEFT, CMD-RIGHT":{padding:0,"border-radius":"0","-moz-border-radius":"0","-webkit-border-radius":"0","-o-border-radius":"0","-ms-border-radius":"0","-khtml-border-radius":"0"},"CMD-TOP":{$order:1,left:"50%","margin-left":"-1em",bottom:0,width:"2em",height:".5em","text-align":"center"},"CMD-BOTTOM":{$order:1,left:"50%","margin-left":"-1em",top:0,width:"2em",height:".5em","text-align":"center"},"CMD-LEFT":{$order:1,top:"50%","margin-top":"-1em",right:0,height:"2em",width:".5em","line-height":"2em"},"CMD-RIGHT":{$order:1,top:"50%","margin-top":"-1em",left:0,height:"2em",width:".5em","line-height":"2em"},"MOVE-MAIN":{$order:5,display:"none"},"CMD-MAIN":{$order:5,display:"none"}},Behaviors:{DroppableKeys:["PANEL"],PanelKeys:["PANEL"],HoverEffected:{MOVE:"MOVE",CMD:["MOVE","CMD"]},ClickEffected:{CMD:"CMD"},onSize:xui.UI.$onSize,MOVE:{beforeMousedown:function(j,r,c){if(xui.Event.getBtn(r)!="left"){return}var u=j.getSubId(c),D=j.getItemByDom(c);if(D.folded){return}if(D.locked){return}var n=j.getItemByItemId("main"),g=j.getSubNode("ITEM",u),l=j.getSubNodeByItemId("ITEM","main"),B=xui.use(c).css("cursor"),C=j.properties,p,x,q,A,f,d;j.pos=D.pos;if(C.type=="vertical"){p=j._cur=g.height();q=l.height();if(D.pos=="before"){f=p-D.min;d=Math.round(D.max?Math.min(parseFloat(D.max)-p,(q-n.min)):(q-n.min))}else{f=Math.round(D.max?Math.min(parseFloat(D.max)-p,(q-n.min)):(q-n.min));d=p-D.min}xui.use(c).startDrag(r,{dragType:"copy",targetReposition:false,verticalOnly:true,maxTopOffset:f,maxBottomOffset:d,dragCursor:B,targetWidth:xui.browser.ie?xui.use(c).offsetWidth():null,targetHeight:xui.browser.ie?xui.use(c).offsetHeight():null,targetCallback:xui.browser.ie?function(e){e.tagClass("-(top|bottom)",false)}:null})}else{x=j._cur=g.width();A=l.width();if(D.pos=="before"){f=x-D.min;d=Math.round(D.max?Math.min(parseFloat(D.max)-x,(A-n.min)):(A-n.min))}else{f=Math.round(D.max?Math.min(parseFloat(D.max)-x,(A-n.min)):(A-n.min));d=x-D.min}xui.use(c).startDrag(r,{dragType:"copy",targetReposition:false,horizontalOnly:true,maxLeftOffset:f,maxRightOffset:d,dragCursor:B,targetWidth:xui.browser.ie?xui.use(c).offsetWidth():null,targetHeight:xui.browser.ie?xui.use(c).offsetHeight():null,targetCallback:xui.browser.ie?function(e){e.tagClass("-(left|right)",false)}:null})}j._limited=0},onDrag:function(g,j,m){var f=g.properties,l=xui.DragDrop,h=xui.DragDrop._profile,c=0;if(f.type=="vertical"){if((h.y<=h.restrictedTop)||(h.y>=h.restrictedBottom)){c=true}}else{if(h.x<=h.restrictedLeft||h.x>=h.restrictedRight){c=true}}if(c){if(!g._limited){h.proxyNode.addClass("xui-alert");g._limited=true}}else{if(g._limited){h.proxyNode.removeClass("xui-alert");g._limited=0}}},onDragstop:function(j,u,c){var C=j.properties,A=C.height,g=C.width,h=xui.use(c).parent(),d=j.getRoot(),B=j.getItemByDom(c),q=0,x,p=null,f=null,w;for(var n=0,m=C.items.length;n<m;n++){q+=C.items[n].size||80;if(C.items[n].id=="main"){w=C.items[n]}}if(C.type=="vertical"){f=d.height();B._size=j._cur+(j.pos=="before"?1:-1)*xui.DragDrop.getProfile().offset.y;h.height(j.$isEm(A)?j.$px2em(B._size,h)+"em":B._size);x=q*B._size/f}else{p=d.width();B._size=j._cur+(j.pos=="before"?1:-1)*xui.DragDrop.getProfile().offset.x;h.width(j.$isEm(g)?j.$px2em(B._size,h)+"em":B._size);x=q*B._size/p}w.size-=x-B.size;B.size=x;xui.UI.$tryResize(j,p,f,true);j._limited=0}},CMD:{onMousedown:function(l,q,d){if(xui.Event.getBtn(q)!="left"){return}var x=l.properties,u=l.getSubId(d),w=l.getItemByDom(d),f=l.getRoot(),n=l.getItemByItemId("main"),j=l.getSubNodeByItemId("ITEM","main"),g=l.getSubNode("ITEM",u),c=l.getSubNode("PANEL",u),h=l.getSubNode("MOVE",u),p=(x.type=="vertical"?h.offsetHeight():h.offsetWidth());if(x.type=="vertical"){if(w.folded){g.height(w._size);c.show();w.folded=false;if(w.pos=="before"){xui.use(d).replaceClass(/bottom/g,"top")}else{xui.use(d).replaceClass(/top/g,"bottom")}if(!w.locked){h.css("cursor","n-resize")}l.getSubNode("MOVE").tagClass("-checked",false)}else{g.height(p);c.hide();w.folded=true;if(w.pos=="before"){xui.use(d).replaceClass(/top/g,"bottom")}else{xui.use(d).replaceClass(/bottom/g,"top")}if(!w.locked){h.css("cursor","default")}l.getSubNode("MOVE").tagClass("-checked")}xui.UI.$tryResize(l,null,f.height(),true)}else{if(w.folded){g.width(w._size);c.show();w.folded=false;if(w.pos=="before"){xui.use(d).replaceClass(/right/g,"left")}else{xui.use(d).replaceClass(/left/g,"right")}if(!w.locked){h.css("cursor","w-resize")}l.getSubNode("MOVE").tagClass("-checked",false)}else{g.width(p);c.hide();w.folded=true;if(w.pos=="before"){xui.use(d).replaceClass(/left/g,"right")}else{xui.use(d).replaceClass(/right/g,"left")}if(!w.locked){h.css("cursor","default")}l.getSubNode("MOVE").tagClass("-checked")}xui.UI.$tryResize(l,f.width(),null,true)}return false}},PANEL:{onClick:function(c,g,h){var f=c.properties,d=c.getItemByDom(h);if(f.disabled||d.disabled){return false}if(c.onClickPanel){return c.boxing().onClickPanel(c,d,g,h)}}}},DataModel:{rotate:null,selectable:true,disabled:null,position:"absolute",type:{listbox:["vertical","horizontal"],ini:"vertical",action:function(g,h){if(g!=h){var e=this,l="auto",c=e.getSubNode("ITEM",true),d=e.getSubNode("MOVE",true),j=e.getSubNode("CMD",true);d.merge(c).merge(j);if(g=="vertical"){d.replaceClass(/(-left)(\b)/ig,"-top$2");d.replaceClass(/(-right)(\b)/ig,"-bottom$2");c.each(function(m){xui(m).height(xui(m).width())}).css({left:0,top:l,right:l,bottom:l})}else{d.replaceClass(/(-top)(\b)/ig,"-left$2");d.replaceClass(/(-bottom)(\b)/ig,"-right$2");c.each(function(m){xui(m).width(xui(m).height())}).css({left:l,top:0,right:l,bottom:l})}var f=e.getRoot().cssSize();xui.UI.$tryResize(e,f.width,f.height,true)}}},dock:"fill",listKey:null,width:{$spaceunit:1,ini:"18em"},height:{$spaceunit:1,ini:"18em"},flexSize:{ini:false,action:function(){var d=this,c=d.getRoot();xui.UI.$tryResize(d,c.width(),c.height(),true)}},items:{ini:[],set:function(h){var l=this;if(l.renderId){var f=l.boxing(),c=xui.$getGhostDiv(),e=xui.copy(l.children),j,g;l.children.length=0;xui.arr.each(e,function(m){delete m[0].$dockParent;c.appendChild(m[0].getRootNode())});f.clearItems();g=l.box._adjustItems(h);f._insertItems(g,null,null,true);xui.arr.each(e,function(m){f.append.apply(f,m)});c.innerHTML="";var d=l.getRoot().cssSize();xui.UI.$tryResize(l,d.width,d.height,true)}else{l.properties.items=xui.copy(h)}}}},EventHandlers:{onClickPanel:function(c,d,f,g){}},_adjustItems2:function(d,e){var c=[];xui.arr.each(d,function(f){if(f.id!="main"){c.push(f=xui.isHash(f)?f:{id:""+f});f.pos=e}});xui.arr.each(c,function(f){f.id=xui.isStr(f.id)?f.id:xui.id();f.min=f.min||10;f._size=f.size=Math.round(parseFloat(f.size))||80;f.locked=typeof f.locked=="boolean"?f.locked:false;f.folded=typeof f.folded=="boolean"?f.folded:false;f.hidden=typeof f.hidden=="boolean"?f.hidden:false;f.cmd=typeof f.cmd=="boolean"?f.cmd:true});return c},_adjustItems:function(d){var c,e=[],f=[];xui.arr.each(d,function(g){g=xui.copy(g);if(g.id=="main"){c=g}else{if(g.pos=="before"){e.push(g)}else{g.pos="after";f.push(g)}}});c=c||{};c.id="main";c.min=c.min||10;c.size=Math.round(parseFloat(c.size))||80;d.length=0;xui.arr.insertAny(d,this._adjustItems2(e,"before"));xui.arr.insertAny(d,c);xui.arr.insertAny(d,this._adjustItems2(f,"after"));return d},_prepareData:function(c){var d=c.properties;if(!d.items||!xui.isArr(d.items)){d.items=xui.clone([{id:"before",pos:"before",locked:false,size:60,min:50,max:200},{id:"after",pos:"after",locked:false,size:60,min:50,max:200}])}d.items=this._adjustItems(d.items);return arguments.callee.upper.call(this,c)},_prepareItems:function(d,c){var e=arguments.callee.upper.apply(this,arguments);xui.arr.each(c,function(f){delete f.caption});return e},_prepareItem:function(f,h,g){var j=f.properties,e=j.width,c=j.height,d;if(h.id=="main"){h.cls1=f.getClass("ITEM","-main");h.cls2=f.getClass("MOVE","-main");h.cls3=f.getClass("CMD","-main")}else{var l;if(j.type=="vertical"){h.clsmovebg="xui-uiborder-t xui-uiborder-b";if(h.pos=="before"){l="top"}else{l="bottom"}}else{h.clsmovebg="xui-uiborder-l xui-uiborder-r";if(h.pos=="before"){l="left"}else{l="right"}}h.cls1=f.getClass("ITEM","-"+l);h.cls2=f.getClass("MOVE","-"+l);h.cls3=f.getClass("CMD","-"+l);h._fi_cls3="xui-icon-arrow"+l;h.display=h.hidden?"display:none":"";h._cursor=h.locked?"default":(j.type=="vertical")?"n-resize":"w-resize";h.cmdDisplay=h.cmd?"":"display:none"}h._bginfo="";if(d=h.panelBgClr||j.panelBgClr){h._bginfo+="background-color:"+d+";"}if(d=h.panelBgImg||j.panelBgImg){h._bginfo+="background-image:url("+xui.adjustRes(d)+");"}if(d=h.panelBgImgPos||j.panelBgImgPos){h._bginfo+="background-position:"+d+";"}if(d=h.panelBgImgRepeat||j.panelBgImgRepeat){h._bginfo+="background-repeat:"+d+";"}if(d=h.panelBgImgAttachment||j.panelBgImgAttachment){h._bginfo+="background-attachment:"+d+";"}if(xui.isStr(h.overflow)){h._overflow=h.overflow.indexOf(":")!=-1?(h.overflow):(h.overflow?("overflow:"+h.overflow):"")}else{if(xui.isStr(j.overflow)){h._overflow=j.overflow.indexOf(":")!=-1?(j.overflow):(j.overflow?("overflow:"+j.overflow):"")}}},RenderTrigger:function(){var c,d=this;xui.arr.each(d.properties.items,function(e){if(e.id!="main"){if(e.folded&&(c=d.getSubIdByItemId(e.id))){e.folded=false;d.getSubNode("CMD",c).onMousedown()}}})},_onresize:function(e,u,q){var p=e.properties,m,D=e.keys.ITEM,n=e.keys.PANEL,g=e.getItemByItemId("main"),d=g.min||10,f=p.flexSize,c=0,r,l,h=xui.$us(p),C=function(E,F){return e.$forceu(E,h>0?"em":"px",F)},w=e.getEmSize()/e.getRoot()._getEmSize();if(u){u=e.$px(u)}if(q){q=e.$px(q)}var o={},A={};xui.arr.each(p.items,function(E){m=e.getSubIdByItemId(E.id);o[m]={};A[m]={};if(f){c+=E.size||80}});var B=function(E,P,G,J,R,L,O){var T,I,U,N,H=0,F=0,S=0,Q=0,K=L;xui.arr.each(E.items,function(V){if(V.id=="main"){return}if(V.pos=="before"){N=e.getSubIdByItemId(V.id);r=e.getSubNode("MOVE",N),l=(p.type=="vertical"?r.offsetHeight():r.offsetWidth());if(V.hidden){I=0;A[N][G]=Math.round(f?parseFloat(P*Math.min(1,(V.size/c))):V._size)}else{if(V.folded){I=A[N][G]=l}else{Q++;I=U=Math.round(f?parseFloat(P*Math.min(1,(V.size/c))):V._size);if(I>L+V.min){I-=L}else{L=I-V.min;I=V.min}I-=O;I=Math.max(I,l)}}A[N][J]=H;H+=I;o[N][J]=0;o[N][G]=I-l;A[N][R]=o[N][R]="auto";A[N][G]=I;d+=l}});xui.arr.each(E.items,function(V){if(V.id=="main"){return}if(V.pos=="after"){N=e.getSubIdByItemId(V.id);r=e.getSubNode("MOVE",N),l=(p.type=="vertical"?r.offsetHeight():r.offsetWidth());if(V.hidden){I=0;A[N][G]=Math.round(f?parseFloat(P*Math.min(1,(V.size/c))):V._size)}else{if(V.folded){I=A[N][G]=l}else{Q++;I=U=Math.round(f?parseFloat(P*Math.min(1,(V.size/c))):V._size);if(I>L+V.min){I-=L}else{L=I-V.min;I=V.min}I-=O;I=Math.max(I,l)}}A[N][R]=F;F+=I;o[N][R]=0;o[N][G]=I-l;A[N][J]=o[N][J]="auto";A[N][G]=I;d+=l}},null,true);S=H+F;if(P-S>=d||O){T=e.getSubIdByItemId("main");A[T][G]=o[T][G]=P-S;A[T][J]=H}else{var M=xui.toArr(arguments);if(!K){M[M.length-2]=(d-(P-S))/Q}else{M[M.length-2]=K;M[M.length-1]=(d-(P-S))/Q}B.apply(null,M)}};if(p.type!="vertical"){if(!xui.isNull(u)){B(p,u,"width","left","right",0,0)}if(!xui.isNull(q)){xui.each(o,function(E,F){A[F].height=E.height=q})}}else{if(!xui.isNull(q)){B(p,q,"height","top","bottom",0,0)}if(!xui.isNull(u)){xui.each(o,function(E,F){A[F].width=E.width=u})}}var j=function(F,E){xui.arr.each("left,width,right".split(","),function(G){if(G in F){F[G]=e.$forceu(F[G],"em",E)}})},x=function(F,E){xui.arr.each("top,height,bottom".split(","),function(G){if(G in F){F[G]=e.$forceu(F[G],"em",E)}})};xui.each(A,function(I,J){var H=e.getSubNode("PANEL",J),F=e.getSubNode("ITEM",J);if(h>0){var G=h>0?H._getEmSize(w):null,E=h>0?F._getEmSize(w):null;j(o[J],E);j(A[J],E);x(o[J],G);x(A[J],G)}H.cssRegion(o[J],true);if(o[J].width){xui.UI._adjustConW(e,H,o[J].width)}F.cssRegion(A[J])})}}});Class("xui.UI.TreeGrid",["xui.UI","xui.absValue"],{Instance:{activate:function(){var d=this.get(0),c;if(!d.renderId){return}d.getSubNode("ROWS22").nextFocus(true,true,true);return this},_setCtrlValue:function(c){return this.each(function(e){if(!e.renderId){return}if(e.properties.activeMode=="none"){return}var j=e.boxing(),n=j.getUIValue(),d=e.properties,h=e.rowMap,f=d.activeMode=="row"?["CELLS1","CELLS2","MARK"]:"CELL",g=function(o,p){return e.getSubNodes(o,p)},l=function(o){var q=e.rowMap2;if(d.activeMode=="row"){return q[o]}else{if(!o){return}var p=(""+o).split("|");return xui.get(e.rowMap,[q[p[0]],"_cells",p[1]])}};if(d.selMode=="single"){var m=l(n);if(n&&m){g(f,m).tagClass("-checked",false)}m=l(c);if(m){g(f,m).tagClass("-checked")}}else{if(d.selMode=="multi"||d.selMode=="multibycheckbox"){n=n?(""+n).split(d.valueSeparator):[];c=c?(""+c).split(d.valueSeparator):[];xui.arr.each(n,function(q,p){if(q=l(q)){if(p=h[q]){delete p._selected}g(f,q).tagClass("-checked",false)}});xui.arr.each(c,function(p){if(p=l(p)){if(i=h[p]){i._selected=1}g(f,p).tagClass("-checked")}});if(c.length===0){g("HFMARK").tagClass("-checked",false);delete e._$checkAll}}}})},_insertRowsToDom:function(e,c,q,f,p,B){if(q){var j=e.rowMap[q];if(j&&!j._inited){return}}if(!c){c=[]}var w,r,C,m=e.box,d=e.properties,C=e.getSubNode("FHCELL").width();if(C){C=e.$forceu(C)}xui.arr.each(c,function(l){l._row0DfW=C?("width:"+C):"";xui.arr.each(l.cells,function(E,F){E.width=E._col._colWidth})});if(e.properties.freezedRow){var o=e.getSubNode("ROWS12");if(!o.isEmpty()&&o.query("div","id",/-ROWS12\:/).isEmpty()){delete e._passFreezedRow}}var h=e._buildItems("rows21",c),g=e._buildItems("rows22",c);if(B&&B.length){var n=[],A=[];xui.arr.each(B,function(l){if(m.getCellOption(e,l,"editable")&&(m.getCellOption(e,l,"editMode")=="inline"||m.getCellOption(e,l,"type")=="dropbutton")){n.push(l)}});B.length=0;if(n.length){for(var x=0,u=n.length,o;x<u;x++){o=parseInt(x/25,10);if(!A[o]){A[o]=[]}A[o].push(n[x])}n.length=0;var D=function(){if(A.length){var F=A.shift();if(F&&F.length){for(var G=0,E=F.length;G<E;G++){if(e&&e.box&&!e.destroyed&&F[G]&&F[G]._row){e.box._editCell(e,F[G])}}xui.asyRun(D)}}else{A=null}};xui.asyRun(D)}}if(!f){if(q){w=e.getSubNode("SUB1",q);r=e.getSubNode("SUB2",q)}else{w=e.getSubNode("ROWS21");r=e.getSubNode("ROWS22")}if(p){w.prepend(h);r.prepend(g)}else{w.append(h);r.append(g)}}else{w=e.getSubNode("ROW1",f);r=e.getSubNode("ROW2",f);if(p){w.addPrev(h);r.addPrev(g)}else{w.addNext(h);r.addNext(g)}}xui.arr.each(c,function(l){l.open=false;if(false===m.getCellOption(e,l,"iniFold")){e.boxing()._toggleRows([l],true)}});delete e.$allrowscache1;delete e.$allrowscache2;e.box._adjustBody(e,"addrow")},_refreshHeader:function(e){var d=this.get(0),c=d.properties,f=d.box,n=xui.clone(c.grpCols,false,2),g,h,o=this.getRows("data");xui.breakO(d.colMap,2);e=f._adjustHeader(e||[]);g=f._prepareHeader(d,e);c.header=e;this.removeAllRows();d.getSubNodes(["HCELL","HSCELL"],true).remove();var m,l;if(g.length){m=d._buildItems("header1",g);d.getSubNode("HCELLS1").append(m);l=d._buildItems("header2",g);d.getSubNode("LHCELL").addPrev(l)}if(n&&xui.isArr(n)&&n.length>0){n=f._adjustGrpColsData(d,n);c.grpCols=n;h=f._prepareGrpCols(d,n,g);if(h&&h.length){m=d._buildItems("grpCols1",h);d.getSubNode("GRPCELLBOX1").append(m);l=d._buildItems("grpCols2",h);d.getSubNode("GRPCELLBOX2").append(l)}f._adjustColsWidth(d);f._adjustColsHeight(d);xui.UI.$tryResize(d,d.getRoot().width(),d.getRoot().height(),true)}if(o&&o.length){this.setRows(o)}f._adjustBody(d,"refreshheader");var j=d.properties.colOptions;xui.arr.each(g,function(p){if(xui.isFun(p.colRenderer||j.colRenderer)){(p.colRenderer||j.colRenderer).call(null,d,p)}});if(c.treeMode=="infirstcell"){d.getSubNode("HCELLA",g[0]._serialId).prepend(d.getSubNode("LTAGCMDS")).prepend(d.getSubNode("HFMARK"))}if(d.$col_pop){d.$col_pop.destroy(true);delete d.$col_pop}xui.each(d.$cache_editor,function(p){if(!p.destroyed){p.destroy(true)}});d.$cache_editor={}},_toggleRows:function(e,d){var c=this;if(e&&e.length){xui.arr.each(e,function(f){c.toggleRow(f.id,d)})}},autoRowHeight:function(c){return this.each(function(e){if(e.renderId){var d=xui.Event;if(d.__realtouch){d.__simulatedMousedown=1}if(c&&e.rowMap2[c]){e.getSubNode("FHANDLER",e.rowMap2[c]).onDblclick(true)}else{xui.each(e.rowMap,function(g,f){e.getSubNode("FHANDLER",f).onDblclick(true)})}if(d.__realtouch){d.__simulatedMousedown=0}}})},autoColWidth:function(c){return this.each(function(e){if(e.renderId){var d=xui.Event;if(d.__realtouch){d.__simulatedMousedown=1}if(c&&e.colMap2[c]){e.getSubNode("HHANDLER",e.colMap2[c]).onDblclick(true)}else{xui.each(e.colMap,function(g,f){e.getSubNode("HHANDLER",f).onDblclick(true)})}if(d.__realtouch){d.__simulatedMousedown=0}}})},autoColHeight:function(){return this.each(function(d){if(d.renderId){var c=xui.Event;if(c.__realtouch){c.__simulatedMousedown=1}d.getSubNode("FHANDLER").onDblclick(true);if(c.__realtouch){c.__simulatedMousedown=0}}})},addHotRow:function(c){var d=this.get(0);if(d.renderId){d.box._addTempRow(d,c||null)}return this},removeHotRow:function(){var c=this.get(0);c.box._sethotrowoutterblur(c,true);delete c.__hastmpRow;this.removeRows([c.box._temprowid],false);return this},isDirtied:function(){var c=false;xui.each(this.get(0).cellMap,function(d){if(d._oValue!==d.value||(("unit" in d)&&d._oUnit!==d.unit)){c=true;return false}});xui.each(this.get(0).rowMap,function(d){if(d._oValue!==d.value||(("unit" in d)&&d._oUnit!==d.unit)){c=true;return false}});return c},_getObjByDom:function(f,d){var e=this.get(0),c=e.getSubId(typeof f=="string"?f.charAt(0)=="!"?((f=xui.use(f).get(0))&&f.id):f:f.id);return e[d=="row"?"rowMap":d=="col"?"colMap":"cellMap"][c]},getRowByDom:function(d,c){return this.get(0).box._getRow(this.get(0),this._getObjByDom(d,"row"),c)},getHeaderByDom:function(c){return this._getObjByDom(c,"col")},getCellByDom:function(c){return this._getObjByDom(c,"cell")},getRows:function(f){var e=this.get(0).properties.rows,d,c;if(!xui.isArr(e)){return[]}if(f=="data"||f=="min"||f=="map"){d=xui.clone(e,true);if(d&&d.length&&d[d.length-1]&&d[d.length-1].id==this.constructor._temprowid){d.pop()}if(f=="min"){xui.arr.each(d,function(h,g){if(d[g].cells){xui.each(c=d[g]=(d[g].cells||d[g]),function(l,m){c[m]=l.value})}})}return d}else{return e}},getRowbyRowId:function(g,f){var e=this.get(0),c=e.rowMap2,d;if(xui.isNumb(g)){g=xui.get(e.properties.rows,[g,"id"])}if(c&&c[g]){return e.box._getRow(e,e.rowMap[c[g]],f)}if((c=e.queryItems(e.properties.rows,function(j,h){return j.id==g},1,1))&&c.length){return e.box._getRow(e,c[0],f)}},getRowbyCell:function(c,d){return this.constructor._getRow(this.get(0),c._row,d)},toggleRow:function(c,g,e,h,j){var d=this.get(0),f=this,l=arguments.callee;if(c){var m=d.rowMap[d.rowMap2[c]];if(m&&m.sub){d.box._setSub(d,m,typeof g=="boolean"?g:!m._checked,e,h||e,j)}}else{xui.arr.each(d.properties.rows,function(n){l.call(f,n.id,g,e,true,j)})}return this},doFilter:function(c){var f=this,e=f.get(0);if(e){if(!c){delete e.$rowFilter;c=function(){return false}}else{if(xui.isFun(c)){e.$rowFilter=c}else{if(c===true){c=e.$rowFilter}}}var d=function(){var m=e.properties,l=m.rows,j=[],g=[],h=function(q,o,n){var p=0;xui.arr.each(q,function(r){if(r.sub){if(!r._checked){f.toggleRow(r.id,true,true,true)}if(h(r.sub,o,n)){p++;if(r.hidden){o.push(r.id)}}else{if(!r.hidden){n.push(r.id)}}}else{if(c(r,e)){if(!r.hidden){n.push(r.id)}}else{p++;if(r.hidden){o.push(r.id)}}}});return p};h(l,j,g);if(j.length){f.showRows(j)}if(g.length){f.showRows(g,false)}f.reLayout(true)};xui.resetRun(e.$xid+":rowfilter",d)}return this},showRows:function(h,d){var g=this,f=g.get(0),c=xui(),e=xui(),j=f.properties;h=xui.isHash(h)?h.id:xui.isArr(h)?h:h===0?[0]:h?(h+"").split(j.valueSeparator):null;if(!h){h=((j.$UIvalue||j.value)+"").split(j.valueSeparator)}if(h&&h.length){xui.arr.each(h,function(l,m){if(m=g.getRowbyRowId(l)){if(d===false){if(!m.hidden){e.merge(g.getSubNodes(["ROW1","ROW2"],m._serialId))}}else{if(m.hidden){c.merge(g.getSubNodes(["ROW1","ROW2"],m._serialId))}}m.hidden=d===false}})}if(!c.isEmpty()){c.css("display","")}if(!e.isEmpty()){e.css("display","none")}return this},updateRow:function(q,n,o,j){var K=this,m=K.get(0),r=m.box,l=m.properties,B;if(!q&&q!==0){q=((l.$UIvalue||l.value)+"").split(l.valueSeparator)[0]}orow=K.getRowbyRowId(q);if(!orow){return K}var F=l.dirtyMark,d=F&&l.showDirtyMark,H=orow.id==r._temprowid,g=xui.absObj.$specialChars,p;if(!xui.isHash(n)){n={value:n}}n=xui.filter(n,function(N,L,M){M=!g[L.charAt(0)]||L=="_$caption";if(!M){p=p||{};p[L]=N}return M});if(j){if(m.beforeRowUpdated&&false===m.boxing().beforeRowUpdated(m,orow,n,H,p)){return}}if(!xui.isEmpty(n)){if(orow){var E=orow._serialId,x,c,u;if(xui.isSet(n.id)){n.id+=""}if(n.id&&n.id!==q){u=n.id;var f=m.rowMap2,w;if(!f[u]){if(w=f[q]){f[u]=w;delete f[q];m.rowMap[w].id=u;xui.each(m.colMap,function(L){if(L=L._cells){L[u]=L[q];delete L[q]}})}}}else{n.id=q}if(xui.isEmpty(n)){return K}if(("group" in n&&n.group!=orow.group)||"cells" in n||("sub" in n&&!((n.sub===true&&!orow.sub)||(!n.sub&&orow.sub===true)))){var C="__special",A=orow._pid?m.rowMap[orow._pid].id:null;orow.id=C;m.rowMap2[C]=m.rowMap2[u||q];delete m.rowMap2[u||q];xui.each(m.colMap,function(L){if(L=L._cells){delete L[u||q]}});orow=xui.clone(orow,true);xui.merge(orow,n,"all");if("sub" in n&&!n.sub){delete orow.sub}K.insertRows([orow],A,C,true);K.removeRows([C]);if(m.properties.activeMode=="row"){var J=m.properties.$UIvalue||"",e=(""+J).split(m.properties.valueSeparator);if(e.length&&xui.arr.indexOf(e,q)!=-1){if(u){xui.arr.removeValue(e,q)}K.setUIValue(e.join(m.properties.valueSeparator),true,null,"sub")}}}else{if("sub" in n){x=r._getToggleNode(m,E);if(n.sub){x.addClass("xui-uicmd-toggle");if(orow._layer){x.removeClass("xui-uicmd-empty")}}else{x.removeClass("xui-uicmd-toggle");if(orow._layer){x.addClass("xui-uicmd-empty")}}}c=K.getSubNodes(["CELLS1","CELLS2"],E);if(x=m.$px(n.height)){m.box._adjusteditorH(m,c.height(orow._rowHeight=m.$forceu(x)),x)}if(x=n.rowStyle){c.attr("style",c.attr("style")+";"+x)}if(x=n.rowClass){c.addClass(x)}if(n.hasOwnProperty("disabled")){var h="xui-uicell-disabled";if(n.disabled){c.addClass(h)}else{c.removeClass(h)}}if(n.hasOwnProperty("readonly")){var h="xui-ui-readonly";if(n.readonly){c.addClass(h)}else{c.removeClass(h)}}if(x=n.firstCellStyle){(c=K.getSubNode("FCELL",E)).first().attr("style",c.attr("style")+";"+x)}if(x=n.firstCellClass){K.getSubNode("FCELL",E).first().addClass(x)}if(n.hasOwnProperty("value")&&!n.hasOwnProperty("caption")){n.caption=n.value+""}if(n.hasOwnProperty("caption")){K.getSubNode("FCELLCAPTION",E).get(0).innerHTML=n.caption}if(n.hasOwnProperty("rowResizer")){x=!!n.rowResizer;K.getSubNode("FHANDLER",E).css("display",(n.rowResizer=x)?"block":"none")}if(n.hasOwnProperty("hidden")){var I=!!n.hidden;if(I){if(orow.hidden!==true){K.getSubNodes(["ROW1","ROW2"],E).css("display","none")}}else{if(orow.hidden===true){K.getSubNodes(["ROW1","ROW2"],E).css("display","")}}}xui.merge(orow,n,"all");if(n.hasOwnProperty("value")){var D=m.getSubNode("CELLA",E);if(!F||o===false){orow._oValue=orow.value}else{if(orow.value===orow._oValue){if(d){D.removeClass("xui-ui-dirty")}delete orow.dirty}else{if(d){D.addClass("xui-ui-dirty")}orow.dirty=true}}if(orow._editor){orow._editor.setValue(n.value,true,"editorini")}}}}else{var G=K.get(0).queryItems(K.getRows(),function(L){return typeof L=="object"?L.id===q:L==q},true,true,true);if(G.length){xui.merge(orow=G[0][0],n,"all")}}}if(j){if(m.afterRowUpdated){m.boxing().afterRowUpdated(m,orow,n,H,p)}}return K},insertRows:function(m,l,e,u){var f=arguments[4],q=this.constructor,h=this.get(0);if(xui.isHash(m)){m=[m]}if(m&&xui.isArr(m)&&m.length>0){var d=h.properties,g=h.rowMap2,o=d.rowOptions,r=h.rowMap,w,n,x,j;if(l===true){v=d.$UIvalue||d.value;if(v){v=(v+"").split(d.valueSeparator)}l=v[0]}l=g&&g[l];if(e===true){v=d.$UIvalue||d.value;if(v){v=(v+"").split(d.valueSeparator)}e=v[0]}e=g&&g[e];if(e){x=h.rowMap[e];if(x){l=x._pid}}m=q._adjustRows(h,m);if(!l){n=xui.isArr(d.rows)?d.rows:(d.rows=[])}else{j=r&&r[l];n=xui.isArr(j.sub)?j.sub:(j.sub=[])}var A;if(h.renderId){if(!l||j._inited){w=[];A=q._prepareItems(h,m,l,w);this._insertRowsToDom(h,A,l,e,u,w);xui.arr.each(m,function(c){if(xui.isFun(c.rowRenderer||o.rowRenderer)){(c.rowRenderer||o.rowRenderer).call(null,h,c)}})}else{if(l&&!j.inited){h.box._getToggleNode(h,l).removeClass("xui-icon-placeholder xui-uicmd-none").addClass("xui-uicmd-toggle")}}}if(!e){xui.arr.insertAny(n,m,u?0:-1)}else{var p=xui.arr.subIndexOf(n,"_serialId",e);xui.arr.insertAny(n,m,u?p:(p+1))}if(h.renderId){h.box._asy(h)}if(A&&A.length){xui.breakO(A,2);A.length=0}}if(f!==false&&h.renderId&&h.__hastmpRow){h.box.__ensurehotrow(h,null)}if(h.$rowFilter){this.doFilter(true)}return this},removeRows:function(c){var f=arguments[1],m=this,g=m.get(0),e=g.properties,l=g.cellMap,d=[],j,h=0;c=xui.isHash(c)?c.id:xui.isArr(c)?c:c===0?[0]:c?(c+"").split(e.valueSeparator):null;if(!c){c=((e.$UIvalue||e.value)+"").split(e.valueSeparator)}if(!c||!c.length){return m}xui.arr.each(c,function(p,n){if(xui.isNumb(p)){p=e.rows[p]&&e.rows[p].id}c[n]=""+p});xui.arr.each(c,function(w){if(w=g.rowMap2[w]){h++;var u;if(u=g.rowMap[w]){var p=u._cells,q=u.id,o;if(u.sub&&xui.isArr(u.sub)){var n=[];xui.arr.each(u.sub,function(x){n.push(x.id)});m.removeRows(n)}xui.each(p,function(A,x){delete l[A]._col._cells[q];xui.breakO(l[A]);delete l[A];g.reclaimSubId(A.slice(3),"cell")});if(o=u._pid?(o=g.rowMap[u._pid])?o.sub:null:g.properties.rows){if(xui.isArr(o)){xui.filter(o,function(x){return x._serialId!=w})}}delete g.rowMap2[q];xui.breakO(g.rowMap[w]);delete g.rowMap[w];d.push(g.getSubNode("ROW1",w).get(0));d.push(g.getSubNode("ROW2",w).get(0))}g.reclaimSubId(w.slice(3),"row")}else{var r=function(A){var x=xui.arr.subIndexOf(A,"id",w);if(x!==-1){h++;xui.arr.removeFrom(A,x)}xui.arr.each(A,function(B){if(B.sub){r(B.sub)}})};r(e.rows)}});if(h>0){if(j=e.$UIvalue){if((j=(""+j).split(e.valueSeparator)).length>1){xui.filter(j,function(n){return xui.arr.indexOf(c,n)==-1});e.$UIvalue=j.join(e.valueSeparator)}else{if(xui.arr.indexOf(c,e.$UIvalue)!=-1){e.$UIvalue=null}}}xui(d).remove();if(g.$activeCell&&!xui.Dom.byId(g.$activeCell)){delete g.$activeCell}if(g.$activeRow&&!xui.Dom.byId(g.$activeRow)){delete g.$activeRow}delete g.$allrowscache1;delete g.$allrowscache2;g.box._asy(g);g.box._adjustBody(g,"delrow")}if(f!==false&&g.renderId&&g.__hastmpRow){g.box.__ensurehotrow(g,null)}return m},insertCol:function(l,h,o){var g=this.get(0),f=g.properties,w=g.box,u=f.rows,d,n,D,C;o=xui.isNumb(o)?o:-1;if(o===-1||f.header.length<o){o=f.header.length}if(o<0){o=0}if(f.treeMode=="infirstcell"&&o===0){return false}var q=o<=f.freezedColumn-1;var c=f.grpCols;if(c&&xui.isArr(c)&&c.length){for(var B=0,x=c.length,r;B<x;B++){r=c[B];if(r.from>o){r.from++;r.to++}else{if(o>=r.from&&o<=r.to){r.to++}}}}if(g.renderId){D=w._parepareCol(g,l,f.header);l=D[0];xui.arr.insertAny(f.header,l,o);n=g.getSubNode(q?"HCELLS1":"HCELLS2").children().get(o-1);if(n){xui(n).addNext(g._buildItems(q?"header1":"header2",[D[1]]))}var p=g.properties.colOptions;if(xui.isFun(l.colRenderer||p.colRenderer)){(l.colRenderer||p.colRenderer).call(null,g,l)}f.grpCols=w._adjustGrpColsData(g,c);w._adjustColsWidth(g);w._adjustColsHeight(g);w._adjustBody(g,"addcol")}else{xui.arr.insertAny(f.header,l,o)}h=xui.isArr(h)?h:[];var A=0,e=function(m){var j=[];xui.arr.each(m,function(F,E){if(F.group){e(F.sub)}else{d=h[A];n=g.getSubNode(q?"CELLS1":"CELLS2",F._serialId).children().get(o-1);if(n){C=w._parepareCell(g,d,F,l,j);xui.arr.insertAny(F.cells,C[0],o);xui(n).addNext(g._buildItems(q?"rows1.cells":"rows2.cells",[C[1]]))}else{xui.arr.insertAny(F.cells,d||{},o)}}A++});if(j.length){xui.arr.each(j,function(E){if(w.getCellOption(g,E,"editable")&&(w.getCellOption(g,E,"editMode")=="inline"||w.getCellOption(g,E,"type")=="dropbutton")){w._editCell(g,E)}});j.length=0}};if(u&&xui.isArr(u)){e(u)}},removeCols:function(c){var f=arguments[1],o=this,h=o.get(0),l=h.box,e=h.properties,n=h.cellMap,g=xui.UI.$tag_subId,d=[],m=0;c=xui.isArr(c)?c:(c+"").split(e.valueSeparator);xui.arr.each(c,function(q,p){c[p]=""+q});if(c&&c.length>1){c.sort(function(p,u){var q=xui.arr.indexOf(e.header,p);if(q==-1){q=xui.arr.subIndexOf(e.header,"id",p)}var r=xui.arr.indexOf(e.header,u);if(r==-1){r=xui.arr.subIndexOf(e.header,"id",u)}return q>r?1:q===r?0:-1})}var j=e.grpCols;if(j&&xui.isArr(j)&&j.length){xui.arr.each(c,function(w){var u=xui.arr.indexOf(e.header,w);if(u==-1){u=xui.arr.subIndexOf(e.header,"id",w)}if(u==-1){return}for(var r=0,q=j.length,p;r<q;r++){p=j[r];if(p.from>u){p.from--;p.to--}else{if(u>=p.from&&u<=p.to){p.to--}}}},null,true);xui.filter(j,function(q){var p=q.to>=q.from;if(!p&&h.renderId){h.getSubNode(["HCELL","HSCELL"],q[g]).remove();delete h.colMap[q[g]];delete h.colMap2[q.id]}return p})}xui.arr.each(c,function(A){var q=xui.arr.indexOf(e.header,A);if(q==-1){q=xui.arr.subIndexOf(e.header,"id",A)}if(q==-1){return}if(h.colMap2&&(A=h.colMap2[A])){m++;var p;if(p=h.colMap[A]){var x=p._cells,u=p.id;xui.each(x,function(C,B){d.push(h.getSubNode("CELL",C).get(0));delete n[C]._row._cells[u];xui.breakO(n[C]);delete n[C];h.reclaimSubId(C.slice(3),"cell")});delete h.colMap2[u];xui.breakO(h.colMap[A]);delete h.colMap[A];var r;r=h.getSubNode("HCELL",A).get(0);if(r){d.push(r)}r=h.getSubNode("HSCELL",A).get(0);if(r){d.push(r)}}h.reclaimSubId(A.slice(3),"header")}var w=function(B){xui.arr.each(B,function(C){if(C.cells){xui.arr.removeFrom(C.cells,q)}if(C.sub){w(C.sub)}})};w(e.rows);xui.arr.removeFrom(e.header,q)},null,true);if(m>0){xui(d).remove();if(h.$activeCell&&!xui.Dom.byId(h.$activeCell)){delete h.$activeCell}e.grpCols=l._adjustGrpColsData(h,j);l._adjustColsWidth(h);l._adjustColsHeight(h);l._adjustBody(h,"delcol")}return o},removeAllRows:function(){var e=arguments[0],d=this.get(0),f=d.box,g=d.properties;if(!g.rows||g.rows.length<0){return this}for(var c in d.cellMap){d.reclaimSubId(c.slice(3),"cell")}for(var c in d.rowMap){d.reclaimSubId(c.slice(3),"row")}xui.each(d.colMap,function(h){h._cells={}});xui.breakO([d.rowMap,d.cellMap],3);d.rowMap={};d.cellMap={};d.rowMap2={};delete d.$activeCell;delete d.$activeRow;d.properties.rows.length=0;if(d.renderId){if(d.$sl!=0){d.getSubNode("HEADER2").get(0).scrollLeft=d.$sl=0}d.getSubNodes(["SCROLL21","SCROLL22"]).scrollTop(0).scrollLeft(0);d.getSubNodes(["ROWS21","ROWS22"]).empty()}delete d.$allrowscache1;delete d.$allrowscache2;d.properties.$UIvalue=null;if(e!==false&&d.renderId&&d.__hastmpRow){f.__ensurehotrow(d,null)}f._adjustBody(d,"delrow");return this},resetRowValue:function(e){var d=this.get(0),f=this.getRowbyRowId(e),c=[],g=d.properties;xui.arr.each(f.cells,function(h){if(h._oValue!==h.value||(("unit" in h)&&h._oUnit!==h.unit)){h._oValue=h.value;if("unit" in h){h._oUnit=h.unit}delete h.dirty;if(g.dirtyMark){c.push(d.getSubNode("CELLA",h._serialId).get(0))}}});f._oValue=f.value;delete f.dirty;if(g.dirtyMark){c.push(d.getSubNode("CELLA",f._serialId).get(0))}if(g.dirtyMark&&g.showDirtyMark){xui(c).removeClass("xui-ui-dirty")}},resetColValue:function(f){var e=this.get(0),d=this.getHeaderByColId(f),c=[],g=e.properties;xui.arr.each(d.cells,function(h){if(h._oValue!==h.value||(("unit" in h)&&h._oUnit!==h.unit)){h._oValue=h.value;if("unit" in h){h._oUnit=h.unit}delete h.dirty;if(g.dirtyMark){c.push(e.getSubNode("CELLA",h._serialId).get(0))}}});if(g.dirtyMark&&g.showDirtyMark){xui(c).removeClass("xui-ui-dirty")}},getActiveRow:function(e){var c,d=this.get(0);if(d.properties.activeMode!="row"){return}if(!(c=d.$activeRow)){return}c=d.rowMap[d.getSubId(c)];if(c&&c.id&&c.id==d.box._temprowid){c=null}return d.box._getRow(d,c,e)},setActiveRow:function(e){var d,f,c=this.get(0);if(c.properties.activeMode!="row"){return}c.box._activeRow(c,false);if(!(f=this.getRowbyRowId(e))){return}if(!(d=c.getSubNodes(["CELLS1","CELLS2"],f._serialId)).isEmpty()){c.box._activeRow(c,d.get(0).id);d.scrollIntoView()}return this},getRowMap:function(h){var e=this.get(0),c=e.boxing(),g=e.properties,d,f;if(!xui.isSet(h)&&e.renderId&&!e.destroyed){if(g.activeMode="row"){if(d=c.getActiveRow()){h=d.id}}else{if(g.activeMode="cell"){if(d=c.getActiveCell()){h=d._row.id}}}}return c.getRowbyRowId(h,"map")},setRowMap:function(f,e,d,c){return this.each(function(j){var g=j.boxing(),m=j.properties,h;if(!xui.isSet(l)&&j.renderId&&!j.destroyed){if(m.activeMode="row"){if(h=g.getActiveRow()){l=h.id}}else{if(m.activeMode="cell"){if(h=g.getActiveCell()){l=h._row.id}}}}if(l){var n=g.getRowbyRowId(l),l=n.id,o=g.getHeader("min");xui.arr.each(n.cells,function(q,p){g.updateCellByRowCol(l,o[p],f[o[p]],d,c)})}m.rowMap=f})},getHeader:function(f){var e=this.get(0).properties.header;if(!xui.isArr(e)){return[]}if(f=="data"){return xui.clone(e,true)}else{if(f=="min"){var d=xui.clone(e,true),c;xui.arr.each(d,function(h,g){d[g]=h.id});return d}else{return e}}},getHeaderByColId:function(f,e){var c=this.get(0).properties.header,d;if(xui.isNumb(f)){f=xui.get(profile.properties.header,[f,"id"])}d=xui.arr.subIndexOf(c,"id",f);return d==-1?null:e=="data"?xui.clone(c[d],true):e=="min"?c[d].id:c[d]},getHeaderByCell:function(c,e){var d=c._col;return !d?null:e=="data"?xui.clone(d,true):e=="min"?d.id:d},updateHeader:function(d,w){var q=this,g=q.get(0),c=g.properties,f=q.getHeaderByColId(d),r;if(!f){var h=c.grpCols,l=xui.arr.subIndexOf(h,"id",d);f=h[l];r=true}if(f){if(typeof w!="object"){w={caption:w+""}}else{xui.filter(w,true)}delete w.id;if(g.renderId){var p=f._serialId,u,m,j;if(!r){if(u=w.width){u=g.$px(u);var e=[];j=q.getSubNode("HCELL",p).get(0);if(j){e.push(j)}j=q.getSubNode("HSCELL",p).get(0);if(j){e.push(j)}xui.each(f._cells,function(n){e.push(q.getSubNode("CELL",n).get(0))});g.box._adjusteditorW(g,xui(e).width(f._colWidth=g.$forceu(u)),u);q.getSubNode("SCROLL22").onScroll();q.constructor._adjustColsWidth(q.get(0));q.constructor._adjustBody(q.get(0),"setcol")}if(w.hasOwnProperty("visibility")&&!w.hasOwnProperty("hidden")){w.hidden=!w.visibility}if(w.hasOwnProperty("hidden")){var o=!!w.hidden;if(o){if(f.hidden!==true){q.showColumn(d,false)}}else{if(f.hidden===true){q.showColumn(d,true)}}}if("type" in w){delete f.editorCacheKey}}if(u=w.headerStyle||w.colStyle){(m=q.getSubNodes(["HCELLA","HSCELLA"],p)).attr("style",m.attr("style")+";"+u)}if(u=w.headerClass){q.getSubNodes(["HCELLA","HSCELLA"],p).addClass(u)}if(w.hasOwnProperty("caption")){q.getSubNodes(["HCELLCAPTION","HSCELLCAPTION"],p).get(0).innerHTML=w.caption}if("colResizer" in w){u=!!w.colResizer;q.getSubNode("HHANDLER",p).css("display",(w.colResizer=u)?"block":"none")}}xui.merge(f,w,"all");if("flexSize" in w){xui.UI.$tryResize(g,g.getRoot().width(),g.getRoot().height(),true)}}},showColumn:function(e,l){var h=this.get(0),c=h.colMap2,m=h.colMap,g,d,o,j,f=[];if(g=m[d=c[e]]){if(h.beforeColShowHide&&false===h.boxing().beforeColShowHide(h,e,l)){return false}j=h.getSubNode("HCELL",d).get(0);if(j){f.push(j)}j=h.getSubNode("HSCELL",d).get(0);if(j){f.push(j)}xui.each(g._cells,function(n){f.push(h.getSubNode("CELL",n).get(0))});xui(f).css("display",(g.hidden=(l===false?true:false))?"none":"");if(h.afterColShowHide){h.boxing().afterColShowHide(h,e,l)}}h.box._adjustColsWidth(h);h.box._adjustBody(h,"setcol");return true},sortColumn:function(e,h,g){var f=this.get(0),d=f.colMap2[e],c=f.colMap[d];if(d&&c){if(xui.isBool(h)){c._order=!h}if(xui.isFun(g)){c.sortby=g}f.getSubNode("HCELLA",d).onClick()}return this},getCell:function(h,g){var e=this,f=this.get(0),d,c;xui.each(f.cellMap,function(j){if(j.id&&j.id===h){h=j._serialId;return false}});d=f.cellMap[h];return !d?null:g=="data"?xui.merge({rowId:d._row.id,colId:d._col.id},xui.clone(d,true)):g=="min"?d.value:g=="map"?((c={})&&((c[d._col.id]=d.value)||1)&&c):d},getCellbyRowCol:function(e,c,j){var n=this,f=n.get(0),l,g;if(xui.isNumb(e)){e=xui.get(f.properties.rows,[e,"id"])}if(xui.isNumb(c)){c=xui.get(f.properties.header,[c,"id"])}l=xui.get(f.rowMap,[f.rowMap2[e],"_cells",c]);l=l&&f.cellMap[l];if(!l){var o=n.getRowbyRowId(e),h=n.getHeader("min"),d;if(o&&o.cells){d=xui.arr.indexOf(h,c);if(d!=-1){l=o.cells[d]}}}return !l?null:j=="data"?xui.merge({rowId:e,colId:c},xui.clone(l,true)):j=="min"?l.value:j=="map"?((g={})&&((g[c]=l.value)||1)&&g):l},getCells:function(f,d,c){var e={};xui.each(this.get(0).cellMap,function(g){if((f?(f==g._row.id):1)&&(d?(d==g._col.id):1)){e[g.id]=c=="data"?xui.merge({rowId:g._row.id,colId:g._col.id},xui.clone(g,true)):c=="min"?g.value:g}});return e},updateCellByRowCol:function(f,d,o,j,h){var l,m=this,c=m.constructor;if(l=c._getCellId(m.get(0),f,d)){c._updCell(m.get(0),l,o,j,h)}else{var n=m.getRowbyRowId(f),g=m.getHeader("min"),e;if(n&&n.cells){e=xui.arr.indexOf(g,d);if(e!=-1){if(!xui.isHash(n.cells[e])){n.cells[e]={value:n.cells[e]}}xui.merge(n.cells[e],o)}}}return m},updateCellByRowCol2:function(f,e,h,g){var c=f.split(":"),j=parseInt(c[0],10),d=parseInt(c[1],10);return this.updateCellByRowCol(j,d,e,h,g)},updateCell:function(f,d,h,g){var c=this,e=this.get(0);xui.each(e.cellMap,function(j){if(j.id&&j.id===f){f=j._serialId;return false}});c.constructor._updCell(e,f,d,h,g);return c},editCellbyRowCol:function(f,e){var d=this.get(0),c=d.box;c._editCell(d,c._getCellId(d,f,e));return this},editCell:function(c){if(c=c?c:this.get(0).getSubId(this.get(0).$activeCell+"")){this.constructor._editCell(this.get(0),c)}return this},editFirstCell:function(f){var g=this.get(0),j=function(q){return g.box.getCellOption(g,p,q)},p=typeof f=="string"?(g.rowMap[g.rowMap2[f]]):f,l;if(!g.properties.firstCellEditable||!p){return}if(j(g,p,"disabled")||j(g,p,"readonly")){return}if(!(g&&g.renderId)||g.destroyed){return}var h=g.getSubNode("FCELLCAPTION",p._serialId);if(!h.isEmpty()){if(g.beforeIniEditor){l=g.boxing().beforeIniEditor(g,p,h,d,"row");if(l===false){return}}var d=h.parent(),o=d.cssSize(),e=g.getSubNode("BORDER"),c=h.offset(null,d),n=d.offset(null,e);if(n.left>o.width-8){return}l=g.$cache_editor.firstCellEditor;if(!l||!l["xui.UI"]||l.isDestroyed()){l=new xui.UI.ComboInput({type:"input",zIndex:100});g.$cache_editor.firstCellEditor=l}l.setWidth(o.width-c.left+2).setHeight(o.height+2).setValue(p.value||p.value||"");if(g.onBeginEdit){g.boxing().onBeginEdit(g,p,l,"row")}l.undo=function(){var q=this,r=q.get(0)&&q.get(0).$row;q.undo=null;if(g.box){if(r&&r._oValue!==r.value&&r.id!=g.box._temprowid&&g.onRowDirtied){g.boxing().onRowDirtied(g,r)}}if(q.get(0)&&q.get(0).box){q.getSubNode("INPUT").onBlur(true);q.getRoot().setBlurTrigger("tg_editor_blur:"+g.$xid);if(g.properties){q.beforeUnitUpdated(null).afterUIValueSet(null).beforeNextFocus(null).onCancel(null).onFileDlgOpen(null);q.setValue("",true,"editorreset")}delete q.get(0).$row;delete q.get(0)._smartnav;delete q.get(0).$editMode;q.hide()}if(r){delete r._editor}g.$curEditor=null;if(g.onEndEdit){g.boxing().onEndEdit(g,r,q,"row")}if(q.get(0)){q.destroy(true)}q=null};l.afterUIValueSet(function(B,x,r,A,q){var u={value:r},w;if(B.properties.hasOwnProperty("tagVar")&&!xui.isEmpty(w=B.properties.tagVar)){u.tagVar=w}if(false!==(g.beforeEditApply&&g.boxing().beforeEditApply(g,p,u,l,q,"row"))){g.boxing().updateRow(p.id,{value:r,caption:r+""});xui.tryF(l.undo,[],l)}}).beforeNextFocus(function(u,r){xui.tryF(l.undo,[true],l);var q=xui.Event.getEventPara(r);if(q.key=="enter"){q.$key="right"}g.getSubNode("CELLA",p._serialId).onKeydown(true,q);return false}).onCancel(function(){xui.tryF(l.undo,[],l)});e.append(l);l.reBoxing().show((c.left+n.left-1)+"px",(n.top-1)+"px");var m=l.getRoot();m.setBlurTrigger("tg_editor_blur:"+g.$xid,function(){xui.tryF(l.undo,[],l);return false});l.get(0).$row=p;l.get(0)._smartnav=true;p._editor=l;g.$curEditor=l;l.activate()}return this},focusCellbyRowCol:function(h,f){var d=this.get(0),c=d.box,g=c._getCellId(d,h,f),e=d.getSubNode("CELLA",g);if(e&&e.get(0)){e.focus(true)}return this},focusCell:function(c){var d=c._serialId;this.get(0).getSubNode("CELLA",d).focus(true);return this},scrollIntoView:function(){},getActiveCell:function(g){var e,f=this.get(0),c,d;if(f.properties.activeMode!="cell"){return}if(!(e=f.$activeCell)){return}d=f.cellMap[f.getSubId(e)];return !d?null:g=="data"?xui.merge({rowId:d._row.id,colId:d._col.id},xui.clone(d,true)):g=="min"?d.value:g=="map"?((c={})&&((c[d._col.id]=d.value)||1)&&c):d},setActiveCell:function(g,e){var f,c,d=this.get(0);if(d.properties.activeMode!="cell"){return}d.box._activeCell(d,false);if(typeof g=="object"){c=g}else{c=this.getCellbyRowCol(g,e)}if(!c){return}if(!(f=d.getSubNode("CELL",c._serialId)).isEmpty()){d.box._activeCell(d,f.get(0).id)}return this},resetGridValue:function(){return this.each(function(c){var d=c.properties;xui.each(c.cellMap,function(e){e._oValue=e.value;if("unit" in e){e._oUnit=e.unit}delete e.dirty});xui.each(c.rowMap,function(e){e._oValue=e.value;if("unit" in e){e._oUnit=e.unit}delete e.dirty});if(d.dirtyMark&&d.showDirtyMark){c.getSubNode("CELLA",true).removeClass("xui-ui-dirty")}})},getDirtied:function(e,c){var d={};xui.each(this.get(0).cellMap,function(f){if((f._oValue!==f.value||(("unit" in f)&&f._oUnit!==f.unit))&&(e?(e==f._row.id):1)&&(c?(c==f._col.id):1)){d[f.id]={rowId:f._row.id,colId:f._col.id,value:f.value,_oValue:f._oValue};if("unit" in f){d[f.id]._oUnit=f._oUnit}}});return d},getSubNodeInGrid:function(d,g,f){var e=this,c=(xui.isSet(g)&&xui.isSet(f))?e.getCellbyRowCol(g,f):f?e.getHeaderByColId(f):g?e.getRowbyRowId(g):null;return e.getSubNode(d,(c&&c._serialId)||true)},getEditor:function(){return xui.get(this.get(0),["$curEditor"])},getEditCell:function(){return xui.get(this.get(0),["$cellInEditor"])},offEditor:function(){var d=this.get(0),c;if(d&&d.$curEditor){c=d.$curEditor;xui.tryF(c.undo,[],c)}},adjustEditor:function(f){var j=this,l=this.get(0);if(l&&l.$curEditor){var h=l.$curEditor,d=l.$cellInEditor;if(typeof f=="function"){f.apply(j,[h,d])}else{if(h.KEY=="xui.UI.ComboInput"){var e=l.getSubNode("CELL",d.id),c=e.offset(null,l.getSubNode("SCROLL22")),g=e.cssSize();h.setLeft(c.left-1).setTop(c.top-1).setWidth(g.width+3).setHeight(g.height+2).reLayout(true)}}}return j}},Before:function(d,c,e){this.Behaviors.CELLS1=this.Behaviors.CELLS2;this.Behaviors.GCELLA=this.Behaviors.CELLA;return arguments.callee.upper.apply(this,arguments)},Initialize:function(){this.addTemplateKeys(["ALT","PROGRESS"]);this.getCellPro=this.getCellOption;var c=this.prototype;c.getColumn=c.getHeader;c.updateColumn=c.updateHeader;c.getColByDom=c.getHeaderByDom;c.getColByColId=c.getHeaderByColId;c.getColByCell=c.getHeaderByCell},Static:{DIRYMARKICON:"DIRTYMARK",Templates:{tagName:"div",style:"{_style}",className:"{_className}",BORDER:{tagName:"div",BOX:{tagName:"table",cellspacing:"0",cellpadding:"0",className:"xui-uibase",TBODY:{tagName:"tbody",TRHEADER:{tagName:"tr",TDHEADER1:{tagName:"td",HEADER1:{tagName:"div",style:"{showHeader}",HI1:{tagName:"div",HCELLS1:{tagName:"div",style:"{headerHeight}",FHCELL:{$order:0,style:"{rowHandlerDisplay};{_row0DfW};height:{_hcellheight};",className:"xui-uiborder-noradius xui-uibar xui-uiborder-outset {cellCls}",tabindex:"{_tabindex}",HCELLA:{style:"{firstCellStyle};",className:"xui-v-wrapper xui-showfocus {firstCellClass}",HHANDLER:{tagName:"div",style:"{colDDDisplay}"},FHANDLER:{tagName:"div",style:"{rowDDDisplay}"},HFMARK:{$order:1,className:"xuifont",$fonticon:"xui-uicmd-check",style:"{_rowMarkDisplay}"},LTAGCMDS:{$order:2,tagName:"span",text:"{ltagCmds}"},GRIDCAPTION:{$order:5,text:"{gridHandlerCaption}"},SORT:{className:"xuifont",$fonticon:"xui-icon-sort",style:"{sortDisplay}"}}},OTHERHCELLS:{$order:1,tagName:"text",text:"{header1}"}},GRPCELLBOX1:{tagName:"div",style:"{headerHeight};",GRPCELLS:{$order:3,tagName:"text",text:"{grpCols1}"}}}}},TDHEADER2:{tagName:"td",HEADER2:{$order:0,tagName:"div",style:"{showHeader}",HI2:{tagName:"div",HCELLS2:{tagName:"div",style:"{headerHeight};",OTHERHCELLS:{$order:1,tagName:"text",text:"{header2}"},LHCELL:{$order:2,className:"xui-v-wrapper",LHCELLINNER:{$order:1,text:"{headerTail}"},RTAGCMDS:{$order:1,tagName:"span",text:"{rtagCmds}"}}},GRPCELLBOX2:{tagName:"div",style:"{headerHeight};",GRPCELLS:{$order:3,tagName:"text",text:"{grpCols2}"}}}}}},TRLOCKED:{tagName:"tr",TDBODY11:{tagName:"td",SCROLL11:{$order:1,tagName:"div",className:"",BODY11:{tagName:"div",ROWS11:{$order:1,tagName:"div",text:"{rows11}"}}}},TDBODY12:{tagName:"td",SCROLL12:{$order:1,tagName:"div",className:"{_rowfreezed}",BODY12:{tagName:"div",ROWS12:{$order:1,tagName:"div",text:"{rows12}"}}}}},TRBODY:{tagName:"tr",TDBODY21:{tagName:"td",SCROLL21:{$order:1,tagName:"div",className:"{_columnfreezed}",BODY21:{tagName:"div",ROWS21:{$order:1,tagName:"div",text:"{rows21}"}}}},TDBODY22:{tagName:"td",SCROLL22:{$order:1,tagName:"div",BODY22:{tagName:"div",ROWS22:{$order:1,tagName:"div",text:"{rows22}"}}}}},TRTAIL:{tagName:"tr",TDTAIL1:{tagName:"td"},TDTAIL2:{tagName:"td",FOOTER:{$order:2}}}}},COLLIST:{tagName:"div",COLLISTDROP:{className:"xuifont xui-special-icon",$fonticon:"xui-icon-triangle-down"}},ARROW:{className:"xuifont xui-special-icon",$fonticon:"xui-icon-bigup",text:"&nbsp;"}},DIRTYMARK:{},$submap:{header1:function(h,g,e,d,c,f){if(f>h.properties.freezedColumn){return}h.colMap[e._serialId]._region=1;d="header";xui.UI.$doTemplate(h,g,e,d,c);return d},header2:function(h,g,e,d,c,f){if(f>h.properties.freezedColumn){h.colMap[e._serialId]._region=2;d="header";xui.UI.$doTemplate(h,g,e,d,c);return d}},header:{HCELL:{style:"width:{_cellWidth};height:{_hcellheight};{colDisplay};",className:"xui-uiborder-noradius xui-uibar xui-uiborder-outset {cellCls}",HCELLA:{className:"xui-v-wrapper xui-showfocus {headerClass}",style:"{headerStyle};{colStyle}",tabindex:"{_tabindex}",HCELLCAPTION:{$order:5,className:"xui-v-node",text:"{caption}"},SORT:{className:"xuifont",$fonticon:"xui-icon-sort",style:"{sortDisplay}"},HHANDLER:{$order:2,tagName:"div",style:"{colDDDisplay}"}}}},grpCols1:function(h,g,e,d,c,f){var f=h.properties.freezedColumn-1,j=h.colMap;if(e.from>f){return}if(e.to>f){j[e._serialId]._region=2;j[e._serialId]._shadow=1;d="grpColsShadow";xui.UI.$doTemplate(h,g,e,d,c)}else{j[e._serialId]._region=1;d="grpCols";xui.UI.$doTemplate(h,g,e,d,c)}return d},grpCols2:function(h,g,e,d,c,f){var f=h.properties.freezedColumn-1;if(e.to>f){h.colMap[e._serialId]._region=2;d="grpCols";xui.UI.$doTemplate(h,g,e,d,c);return d}},grpCols:{HCELL:{style:"position:absolute;width:{_cellWidth};height:{_hcellheight};top:{_hcelltop};left:{_hcellleft};",className:"xui-uiborder-noradius xui-uibar xui-uiborder-outset {cellCls}",HCELLA:{className:"xui-v-wrapper xui-showfocus {headerClass}",style:"{headerStyle};{colStyle}",tabindex:"{_tabindex}",HCELLCAPTION:{$order:5,className:"xui-v-node",text:"{caption}"},HHANDLER:{$order:2,tagName:"div",style:"{colDDDisplay}"}}}},grpColsShadow:{HSCELL:{style:"position:absolute;width:{_cellWidth};height:{_hcellheight};top:{_hcelltop};left:{_hcellleft};",className:"xui-uiborder-noradius xui-uibar xui-uiborder-outset {cellCls}",HSCELLA:{className:"xui-v-wrapper xui-showfocus {headerClass}",style:"{headerStyle};{colStyle}",tabindex:"{_tabindex}",HSCELLCAPTION:{className:"xui-v-node",text:"{caption}"}}}},grpCols:{HCELL:{style:"position:absolute;width:{_cellWidth};height:{_hcellheight};top:{_hcelltop};left:{_hcellleft};",className:"xui-uiborder-noradius xui-uibar xui-uiborder-outset {cellCls}",HCELLA:{className:"xui-v-wrapper xui-showfocus {headerClass}",style:"{headerStyle};{colStyle}",tabindex:"{_tabindex}",HCELLCAPTION:{$order:5,className:"xui-v-node",text:"{caption}"},HHANDLER:{$order:2,tagName:"div",style:"{colDDDisplay}"}}}},rows11:function(h,g,e,d,c,f){if(h._passFreezedRow){return false}if(f>h.properties.freezedRow){return false}h.rowMap[e._serialId]._region=1;xui.UI.$doTemplate(h,g,e,"row1",c,f,"rows1")},rows12:function(h,g,e,d,c,f){if(h._passFreezedRow){return false}if(f>h.properties.freezedRow){return false}h.rowMap[e._serialId]._region=1;xui.UI.$doTemplate(h,g,e,"row2",c,f,"rows2")},rows21:function(h,g,e,d,c,f){if(!h._passFreezedRow&&f<=h.properties.freezedRow){return}h.rowMap[e._serialId]._region=2;xui.UI.$doTemplate(h,g,e,"row1",c,f,"rows1")},rows22:function(h,g,e,d,c,f){if(!h._passFreezedRow&&f<=h.properties.freezedRow){return}h._passFreezedRow=1;h.rowMap[e._serialId]._region=2;xui.UI.$doTemplate(h,g,e,"row2",c,f,"rows2")},row1:{ROW1:{tagName:"div",style:"{rowDisplay}",CELLS1:{$order:2,tagName:"div",className:"xui-uirowbg xui-uiborder-b xui-uiborder-light {rowCls} {rowClass}",style:"{_rowHeight};{rowStyle}",CELLHANDLER:{tagName:"text",text:"{_handler_cell}"},GRPCELL2:{tagName:"text",text:"{_firstcell_grp}"},OTHERCELLS:{tagName:"text",$order:2,text:"{cells}"}},SUB1:{$order:3,tagName:"div"}}},row2:{ROW2:{tagName:"div",style:"{rowDisplay}",CELLS2:{$order:2,tagName:"div",className:"xui-uirowbg xui-uiborder-b xui-uiborder-light {rowCls} {rowClass}",style:"{_rowHeight};{rowStyle}",GRPCELL2:{tagName:"text",text:"{_firstcell_grp}"},OTHERCELLS:{tagName:"text",$order:2,text:"{cells}"},LCELL:{$order:3,className:"xui-v-wrapper",LCELLINNER:{$order:1,text:"{rowTail}"},RTAGCMDS:{$order:2,tagName:"span",text:"{rtagCmds}"}}},SUB2:{$order:3,tagName:"div"}}},"rows1._handler_cell":function(h,g,e,d,c,f){xui.UI.$doTemplate(h,g,e,h.properties.treeMode=="infirstcell"?"rows1._handler_cell2":"rows1._handler_cell1",c)},"rows1._handler_cell1":{FCELL:{$order:0,style:"{rowHandlerDisplay};{_row0DfW};",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{tabindex:"{_tabindex}",style:"{cellStyle}{firstCellStyle}",className:"xui-v-wrapper xui-showfocus {cellClass}{firstCellClass}",MARK:{$order:1,className:"xuifont",$fonticon:"xui-uicmd-check",style:"{_rowMarkDisplay}"},ROWLRULER:{$order:2,style:"{_treeMode};{_rulerW}"},ROWNUM:{$order:3,className:"xui-ui-readonly",style:"{_rowNumbDisplay}"},ROWTOGGLE:{$order:4,style:"{_treeMode};",className:"xuifont",$fonticon:"{_fi_togglemark}"},LTAGCMDS:{$order:1,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},FCELLCAPTION:{$order:5,className:"xui-v-node",text:"{caption}"},FHANDLER:{$order:0,tagName:"div",style:"{rowDDDisplay}"}}}},"rows1._handler_cell2":{FCELL:{$order:0,style:"{rowHandlerDisplay};{_row0DfW};",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{tabindex:"{_tabindex}",style:"{cellStyle}{firstCellStyle}",className:"xui-v-wrapper xui-showfocus {cellClass}{firstCellClass}",FHANDLER:{$order:6,tagName:"div",style:"{rowDDDisplay}"}}}},"rows1._firstcell_grp":function(h,g,e,d,c,f){if(h.properties.treeMode!="infirstcell"){return}if(!h.properties.freezedColumn){return}xui.UI.$doTemplate(h,g,e,"rows._firstcell_grp",c)},"rows2._firstcell_grp":function(h,g,e,d,c,f){if(h.properties.treeMode!="infirstcell"){return}if(h.properties.freezedColumn){return}xui.UI.$doTemplate(h,g,e,"rows._firstcell_grp",c)},"rows._firstcell_grp":{GCELL:{$order:0,className:"{cellCls}",GCELLA:{tabindex:"{_tabindex}",style:"{cellStyle}{firstCellStyle}",className:"xui-v-wrapper xui-showfocus {cellClass}{firstCellClass}",MARK:{$order:1,$customId:1,className:"xuifont",$fonticon:"xui-uicmd-check",style:"{_rowMarkDisplay}"},ROWLRULER:{$order:2,$customId:1,style:"{_treeMode};{_rulerW}"},ROWNUM:{$order:3,$customId:1,className:"xui-ui-readonly",style:"{_rowNumbDisplay}"},ROWTOGGLE:{$order:4,$customId:1,style:"{_treeMode};",className:"xuifont",$fonticon:"{_fi_togglemark}"},LTAGCMDS:{$order:1,$customId:1,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},FCELLCAPTION:{$order:5,$customId:1,className:"xui-v-node",text:"{caption}"}}}},"rows1.cells":function(d,g,h,l,m,e){if(e>d.properties.freezedColumn){return}l="rows.cells";var f=arguments.callee,c=f._m||(f._m={textarea:".textarea",checkbox:".checkbox",button:".button",progress:".progress"}),j=c[h.type]||".input";if(d.properties.treeMode=="infirstcell"&&e==1&&j==".input"){j="._first_cell"}xui.UI.$doTemplate(d,g,h,l+j,m);return l},"rows2.cells":function(d,g,h,l,m,e){if(e<=d.properties.freezedColumn){return}l="rows.cells";var f=arguments.callee,c=f._m||(f._m={textarea:".textarea",checkbox:".checkbox",button:".button",progress:".progress"}),j=c[h.type]||".input";if(d.properties.treeMode=="infirstcell"&&e==1&&j==".input"){j="._first_cell"}xui.UI.$doTemplate(d,g,h,l+j,m);return l},"rows.cells._first_cell":{CELL:{style:"width:{_cellWidth};{cellDisplay};",className:"xui-uiborder-r xui-uiborder-light xui-treegrid-fcell {cellCls}",CELLA:{className:"xui-v-wrapper xui-showfocus {cellClass}",style:"{bgcolor};{cellStyle}",tabindex:"{_tabindex}",MARK:{$order:1,$customId:1,className:"xuifont",$fonticon:"xui-uicmd-check",style:"{_rowMarkDisplay}"},ROWLRULER:{$order:2,$customId:1,style:"{_treeMode};{_rulerW}"},ROWNUM:{$order:3,$customId:1,className:"xui-ui-readonly",style:"{_rowNumbDisplay}"},ROWTOGGLE:{$order:4,$customId:1,style:"{_treeMode};",className:"xuifont",$fonticon:"{_fi_togglemark}"},LTAGCMDS:{$order:1,$customId:1,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},CELLCAPTION:{$order:5,style:"{color}",className:"xui-v-node xui-treegrid-fcellcaption",text:"{caption}"}}}},"rows.cells.input":{CELL:{style:"width:{_cellWidth};{cellDisplay};",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{className:"xui-v-wrapper xui-showfocus {cellClass}",style:"{bgcolor};{cellStyle}",tabindex:"{_tabindex}",CELLCAPTION:{className:"xui-v-node",style:"{color}",text:"{caption}"}}}},"rows.cells.textarea":{CELL:{style:"width:{_cellWidth};{cellDisplay};",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{className:"xui-v-wrapper xui-showfocus xui-cls-wordwrap {cellClass}",style:"{bgcolor};{cellStyle}",tabindex:"{_tabindex}",CELLCAPTION:{className:"xui-v-node",style:"{color}",text:"{caption}"}}}},"rows.cells.button":{CELL:{style:"width:{_cellWidth};{cellDisplay};",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{tagName:"button",className:"xui-node xui-showfocus xui-wrapper xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius xui-treegrid-tgbtn {cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",text:"{caption}"}}},"rows.cells.checkbox":{CELL:{style:"width:{_cellWidth};{cellDisplay}",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{className:"xui-v-wrapper xui-showfocus {cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",CHECKBOX:{className:"xuifont xui-uicmd-check",$fonticon:"{_fi_checkboxCls}"}}}},"rows.cells.progress":{CELL:{style:"width:{_cellWidth};{cellDisplay}",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{className:"xui-showfocus {cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",PROGRESS:{$order:2,tagName:"div",className:"xui-v-wrapper xui-uibar",style:"width:{progress};",CELLCAPTION:{className:"xui-v-node",text:"{caption}"}}}}},"rows1._handler_cell1.ltagCmds":function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});if(e.id==g.box._temprowid){return}xui.UI.$doTemplate(g,f,e,"rows.tagCmds"+(j[e.type]||".button"),c)},"rows._firstcell_grp.ltagCmds":function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"rows.tagCmds"+(j[e.type]||".button"),c)},"rows.cells._first_cell.ltagCmds":function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"rows.tagCmds"+(j[e.type]||".button"),c)},"rows2.rtagCmds":function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"rows.tagCmds"+(j[e.type]||".button"),c)},ltagCmds:function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"rows.tagCmds"+(j[e.type]||".button"),c)},rtagCmds:function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"rows.tagCmds"+(j[e.type]||".button"),c)},"rows.tagCmds.text":xui.UI.$getTagCmdsTpl("text"),"rows.tagCmds.button":xui.UI.$getTagCmdsTpl("button"),"rows.tagCmds.image":xui.UI.$getTagCmdsTpl("image")}},Appearances:{KEY:{display:"block",position:"absolute",overflow:"hidden"},"HFMARK, MARK":{"margin-left":".5em"},DIRTYMARK:{position:"absolute",width:"1em",height:"1em",left:"1px",top:"1px","z-index":10},BOX:{"border-collapse":"collapse",height:"100%",width:"100%"},"HEADER1, HEADER2":{"background-color":"EDEDED",position:"relative",overflow:"hidden","text-align":"left"},"HI1, HI2":{position:"relative"},"GRPCELLBOX1, GRPCELLBOX2":{position:"absolute",overflow:"visible",left:0,top:0,width:0,height:0},"SCROLL11, SCROLL12, SCROLL21, SCROLL22":{position:"relative","text-align":"left"},"SCROLL11, SCROLL12, SCROLL21":{overflow:"hidden"},SCROLL22:{overflow:"auto"},ARROW:{position:"absolute","z-index":"20",left:0,top:0,display:"none",width:"auto",height:"auto","font-weight":"bold","text-align":"center","font-size":"2em"},"ARROW:before":{"margin-left":"-50%"},COLLIST:{position:"absolute","z-index":"10",left:0,top:0,cursor:"pointer",visibility:"hidden"},COLLISTDROP:{position:"absolute",left:0,bottom:0,cursor:"pointer"},"BODY11, BODY12, BODY21, BODY22":{overflow:"visible",position:"absolute",left:0,top:0},SORT:{position:"absolute",right:".25em",bottom:".25em"},HHANDLER:{position:"absolute",background:xui.browser.ie?"url("+xui.ini.img_bg+")":null,width:".5em",top:"0",right:"0",height:"100%",cursor:"e-resize"},"HCELLS1, HCELLS2, CELLS1, CELLS2":{"overflow-y":xui.browser.ie?"hidden":"",position:"relative",background:"transparent","white-space":"nowrap"},"HCELLS1, HCELLS2, GRPCELLBOX1, GRPCELLBOX2":{overflow:"visible"},"CELLS1, CELLS2":{overflow:"visible"},"CELLS1-group FCELL, CELLS2-group FCELL":{"border-right":0,"padding-right":"1px",overflow:"visible"},"CELLS1-group FCELLCAPTION, CELLS1-group CELLA,  CELLS1-group GCELLA, CELLS1-group ROWNUM, CELLS2-group FCELLCAPTION, CELLS2-group CELLA, CELLS2-group GCELLA":{"font-weight":"bold",overflow:"visible"},"CELLS1-active, CELLS2-active, CELL-active, CELL-active CELLA":{$order:5,"background-color":"#DDDDDD"},"CELLS1-hot, CELLS2-hot":{$order:6,"background-color":"#FFE97F"},"CELLS2-hot LTAGCMDS, CELLS2-hot RTAGCMDS":{$order:6,display:"none"},"CELLS1-checked, CELLS2-checked, CELLS1-checked .xui-node, CELLS2-checked .xui-node, CELL-checked, CELL-checked .xui-node":{$order:6,"background-color":"#ABABAB",color:"#fff"},"FCELL CELLA, GCELL GCELLA":{"text-align":"left"},"FHCELL HCELLA, HSCELLA":{"text-align":"center"},"CELLCAPTION,HCELLCAPTION,HSCELLCAPTION,SORT,HHANDLER":{"vertical-align":"middle"},"CELLCAPTION,HCELLCAPTION,HSCELLCAPTION,FCELLCAPTION,GRIDCAPTION":{"max-width":"100%","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden","font-size":"1em"},"FCELL FCELLCAPTION, FHCELL GRIDCAPTION":{display:"inline"},"CELL-textarea CELLCAPTION":{$order:10,"white-space":"normal"},FHANDLER:{position:"absolute",height:".5em",left:"0",width:"100%",bottom:"0",cursor:"n-resize","z-index":10},"FCELLCAPTION, ROWNUM":{"vertical-align":"middle",overflow:"hidden"},"FHCELL, HCELL, HSCELL":{padding:0,"vertical-align":"bottom"},"ROW1, ROW2":{position:"relative",zoom:xui.browser.ie?1:null,width:xui.browser.ie?"100%":null},ROWNUM:{"padding-right":".5em"},"FCELL, CELL":{height:"100%","padding-left":"1px",position:"relative",overflow:xui.browser.ie6?"hidden":"","vertical-align":"top",display:xui.$inlineBlock},GCELL:{height:"100%",width:"100%","padding-left":"1px",position:"relative",overflow:xui.browser.ie6?"hidden":"","vertical-align":"top",display:xui.$inlineBlock},"LHCELL, LCELL":{height:"100%",position:"relative","vertical-align":"top"},"CELLS1-alt, CELLS2-alt":{$order:1,"background-color":"#EFF8FF"},"CELL-input":{},"CELL-number, CELL-spin, CELL-currency":{"text-align":"right"},"CELL-counter":{"text-align":"center"},"CELL-checkbox":{"text-align":"center"},"KEY-tgbtn":{$order:100,width:"100%",padding:0,"vertical-align":"text-bottom","line-height":"100%",height:"100%"},"CELLS1-hover, CELLS2-hover":{$order:4,"background-color":"#F6F6F6"},'CELL-hover, CELL-hover .xui-node[class*="xui-treegrid-"]':{$order:5,"background-color":"#C5C5C5 !important"},"FCELL CELLA, GCELL GCELLA, HCELLA, HSCELLA":{position:"relative","text-overflow":"ellipsis"},"HCELLA, HSCELLA":{$order:3,"text-align":"center","vertical-align":"middle","line-height":"inherit"},"HCELLA, HSCELLA, CELLA, GCELLA":{display:"block",overflow:"hidden","-moz-box-flex":"1","outline-offset":"-1px","-moz-outline-offset":(xui.browser.gek&&xui.browser.ver<3)?"-1px !important":null,height:"100%",width:xui.browser.ie?"100%":"","line-height":"inherit"},"CELLA-inline":{$order:5,display:xui.$inlineBlock,width:"auto","-moz-box-flex":0},PROGRESS:{border:"none",height:"100%","line-height":"1.83333em",overflow:"visible",opacity:0.7,"*filter":"alpha(opacity=70)"},"CHECKBOX, MARK":{cursor:"pointer","vertical-align":"middle"},"SUB1, SUM22":{zoom:xui.browser.ie?1:null,height:0,position:"relative",overflow:"visible"}},_objectProp:{rowOptions:1,colOptions:1},Behaviors:{HoverEffected:{ROWTOGGLE:"ROWTOGGLE",GCELL:"GCELL",CELL:"CELL",HCELL:["HCELL","HSCELL"],HSCELL:["HCELL","HSCELL"],FHCELL:"FHCELL",FCELL:"FHCELL",CMD:"CMD",SCROLL22:"SCROLL22",BODY11:"BODY11",BODY12:"BODY12",BODY21:"BODY22",BODY11:"BODY22",HEADER1:"HEADER1",HEADER2:"HEADER2"},ClickEffected:{ROWTOGGLE:"ROWTOGGLE",GCELL:"GCELL",CELL:"CELL",HCELL:["HCELL","HSCELL"],HSCELL:["HCELL","HSCELL"],CMD:"CMD"},DroppableKeys:["SCROLL22","CELLS1","CELLS2","FCELL"],DraggableKeys:["FCELL"],onSize:xui.UI.$onSize,HFMARK:{onClick:function(c,f,g){if(c.properties.selMode!="multi"&&c.properties.selMode!="multibycheckbox"){return}var d=[];xui.each(c.rowMap,function(e){d.push(e.id)});if(c._$checkAll){delete c._$checkAll;c.boxing().setUIValue("",null,null,"checkbox");xui.use(g).tagClass("-checked",false);c.boxing().onRowSelected(c,"allrows",f,g,-1)}else{c._$checkAll=true;xui.use(g).tagClass("-checked");c.boxing().setUIValue(d.join(c.properties.valueSeparator),null,null,"click");c.boxing().onRowSelected(c,"allrows",f,g,1)}return false}},TRLOCKED:{onMouseover:function(c,d,f){c.box.$cancelHoverEditor(c)}},TRTAIL:{onMouseover:function(c,d,f){c.box.$cancelHoverEditor(c)}},TDBODY21:{onMouseover:function(c,d,f){c.box.$cancelHoverEditor(c)}},TRHEADER:{onMouseover:function(c,d,f){c.box.$cancelHoverEditor(c)}},SCROLL22:{onScroll:function(f,h,j){var g=xui.use(j).get(0),c=g.scrollLeft||0,d=g.scrollTop||0;if(f.$sl!=c){f.getSubNodes(["HEADER2","SCROLL12"]).scrollLeft(f.$sl=c)}if(f.$st!=d){f.getSubNode("SCROLL21").get(0).scrollTop=f.$st=d;if((d=f.getSubNode("SCROLL21").get(0).scrollTop)&&d!=f.$st){g.scrollTop=f.$st=d}}}},SCROLL21:{onScroll:function(d,g,h){var f=xui.use(h).get(0),c=f.scrollTop||0;if(d.$st!=c){d.getSubNode("SCROLL22").get(0).scrollTop=d.$st=c}}},HEADER2:{onScroll:function(d,g,h){var f=xui.use(h).get(0),c=f.scrollLeft||0;if(d.$sl!=c){d.getSubNodes(["SCROLL12","SCROLL22"]).scrollLeft(d.$sl=c)}}},SCROLL12:{onScroll:function(d,g,h){var f=xui.use(h).get(0),c=f.scrollLeft||0;if(d.$sl!=c){d.getSubNodes(["HEADER2","SCROLL22"]).scrollLeft(d.$sl=c)}}},HHANDLER:{beforeMousedown:function(l,n,c){if(xui.Event.getBtn(n)!="left"){return}var g=l.properties,f=l.getSubId(c),j=l.colMap[f],h;if(j&&j.flexSize){return}if(j&&j._isgroup){h=l.getSubNode("HHANDLER",l.properties.header[j.to]._serialId)}else{h=xui(c)}var m=h.parent(2).width()-l.$px(g._minColW),q=l.getSubNode("SCROLL22"),d=q.offset().left+q.width()-xui.Event.getPos(n).left-4;if(g.disabled){return false}if(j&&j.disabled){return false}h.startDrag(n,{horizontalOnly:true,dragType:"blank",dragDefer:2,maxLeftOffset:m,maxRightOffset:d,targetReposition:false});xui.use(c).parent(2).onMouseout(true,{$force:true}).onMouseup(true)},onDragbegin:function(c,d,f){xui.DragDrop.getProfile().proxyNode.css({height:c.getRoot().height()+"px",width:"4px",backgroundColor:"#DDDDDD",cursor:"e-resize"})},onDrag:function(f,h,l){var j=xui.DragDrop,g=j.getProfile(),c=0;if(g.x<=g.restrictedLeft||g.x>=g.restrictedRight){c=true}if(c){if(!f._limited){g.proxyNode.css("backgroundColor","#ff6600");f._limited=true}}else{if(f._limited){g.proxyNode.css("backgroundColor","#DDDDDD");f._limited=0}}},onDragstop:function(j,m,d){var f=j.properties,g=xui(d).parent(2),n=j.keys,h=j.colMap[j.getSubId(d)],q=g.width()+xui.DragDrop.getProfile().offset.x,r;if(h){if(h&&h._isgroup){h=j.properties.header[h.to];g=j.getSubNode("HCELL",h._serialId)}if(h.hasOwnProperty("maxWidth")){q=Math.min(j.$px(h.maxWidth),q)}if(h.hasOwnProperty("minWidth")){q=Math.max(j.$px(h.minWidth),q)}}if(j.beforeColResized&&false===j.boxing().beforeColResized(j,h?h.id:null,q)){j._limited=0;return}r=j.$forceu(q);g.width(r);if(h){h._colWidth=h.width=r}var c=[],l=[];if(j.getKey(xui.use(d).parent(2).id())==n.FHCELL){j.box._setRowHanderW(j,q)}else{var x=h._cells,u;xui.each(x,function(e){if(!(u=j.getSubNode(n.CELL,e)).isEmpty()){c.push(u.id())}});j.box._adjusteditorW(j,xui(c).width(r),q)}if(j.afterColResized){j.boxing().afterColResized(j,h?h.id:null,q)}j.getSubNode("SCROLL22").onScroll();j.box._adjustColsWidth(j);j.box._adjustBody(j,"setcol");j._limited=0},onClick:function(){return false},onDblclick:function(l,q,c){var g=l.properties,h=xui.use(c).parent(2),f=l.getSubId(c);col=l.colMap[f];if(col&&col._isgroup){col=l.properties.header[col.to];h=l.getSubNode("HCELL",col._serialId)}if(col&&col.flexSize){return}if(l.getRootNode().clientHeight<=0){return}if(l.getKey(xui.use(c).parent(2).id())==l.keys.FHCELL){l.box._setRowHanderW(l,true);return}var x=col._cells,A=l.getClass("CELLA","-inline"),j,d=[],m=[],r,u;xui.each(x,function(e){j=l.getSubNode("CELLA",e);if(j._nodes.length){d.push(j.get(0));m.push(j.addClass(A).width())}});if(g.treeMode=="infirstcell"&&g.header[0]==col){l.getSubNode("GCELLA",true).each(function(e){m.push(xui(e).addClass(A).width());xui(e).removeClass(A)})}m.push(l.$px(g._minColW));r=parseFloat(Math.max.apply(null,m));if(r>l.$px(g._maxColW)){r=l.$px(g._maxColW)}if(l.beforeColResized&&false===l.boxing().beforeColResized(l,col?col.id:null,r)){return}if(col){if(col.hasOwnProperty("maxWidth")){r=Math.min(l.$px(col.maxWidth),r)}if(col.hasOwnProperty("minWidth")){r=Math.max(l.$px(col.minWidth),r)}}r+=2;u=l.$forceu(r);l.box._adjusteditorW(l,xui(d).parent().width(u),r);h.width(col.width=col._colWidth=u);xui(d).removeClass(A);if(l.afterColResized){l.boxing().afterColResized(l,col.id,r)}l.box._adjustColsWidth(l);l.box._adjustBody(l,"setcol");return false}},FHANDLER:{beforeMousedown:function(g,h,c){if(xui.Event.getBtn(h)!="left"){return}var d=g.properties,m=g.rowMap[g.getSubId(c)],f=xui(c),n=f.parent(3).height()-g.$px(d._minRowH),l=g.getSubNode("SCROLL21"),j=l.offset().top+l.height()-xui.Event.getPos(h).top-4;if(d.disabled||(m&&m.disabled)){return false}f.startDrag(h,{verticalOnly:true,dragType:"blank",dragDefer:2,maxTopOffset:n,maxBottomOffset:j,targetReposition:false});xui.use(c).parent(2).onMouseout(true,{$force:true}).onMouseup(true);if(!m){g.getSubNode("COLLIST").css("visibility","hidden")}},onDragbegin:function(c,d,f){xui.DragDrop.getProfile().proxyNode.css({width:c.getRoot().width()+"px",height:"4px",backgroundColor:"#DDDDDD",cursor:"n-resize"})},onDrag:function(f,h,l){var j=xui.DragDrop,g=j.getProfile(),c=0;if(g.y<=g.restrictedTop||g.y>=g.restrictedBottom){c=true}if(c){if(!f._limited){g.proxyNode.css("backgroundColor","#ff6600");f._limited=true}}else{if(f._limited){g.proxyNode.css("backgroundColor","#DDDDDD");f._limited=0}}},onDragstop:function(j,p,c){var d=j.getSubId(c),g=xui(c).parent(3),n=g.height()+xui.DragDrop.getProfile().offset.y,q=j.rowMap[j.getSubId(c)],f=j.properties,m=f.header,l=f.headerHeight;if(xui.browser.ie&&xui.browser.ver<=8&&n%2==1){n+=1}if(j.beforeRowResized&&false===j.boxing().beforeRowResized(j,q?q.id:null,n)){j._limited=0;return}if(j.getKey(xui.use(c).parent(2).id())==j.keys.FHCELL){f.headerHeight=j.$forceu(n);j.box._adjustColsHeight(j);xui.UI.$tryResize(j,j.getRoot().width(),j.getRoot().height(),true)}else{q.height=j.$forceu(n);j.getSubNode("CELLS2",d).height(q.height);g.height(q._rowHeight=q.height);j.box._adjusteditorH(j,g,q._rowHeight)}if(j.afterRowResized){j.boxing().afterRowResized(j,q?q.id:null,n)}j.box._adjustBody(j,"setrow");j._limited=0},onDblclick:function(g,j,m){var n=g.properties,c=g.getSubId(m),l,d;if(g.getRootNode().clientHeight<=0){return}if(c){l=g.rowMap[c];d=g.getSubNodes(["CELLS2","CELLS1"],c);var f=d.height("auto").height();if(g.beforeRowResized&&false===g.boxing().beforeRowResized(g,l.id,f)){return}d.height(l.height=l._rowHeight=g.$forceu(f));g.box._adjusteditorH(g,d,f)}else{var f=(g._headerLayers||0+1)*g.$px(g.box.$DataStruct.headerHeight);if(g.beforeRowResized&&false===g.boxing().beforeRowResized(g,null,f)){return}g.box._adjustColsHeight(g,true);n.headerHeight=g.$forceu(f,g.$picku(n.headerHeight));xui.UI.$tryResize(g,g.getRoot().width(),g.getRoot().height(),true)}if(g.afterRowResized){g.boxing().afterRowResized(g,l?l.id:null,f)}g.box._adjustBody(g,"setrow");return false},onClick:function(){return false}},ROWTOGGLE:{onClick:function(d,g,j){var f=d.properties,c,h=d.rowMap[d.getSubId(j)];if(!h){c=d.cellMap[d.getSubId(j)];if(c){h=c._row}}if(!h){return}if(f.disabled||h.disabled){return false}if(!h.sub){return}d.box._setSub(d,h,!h._checked);return false},beforeMousedown:function(){return false}},HSCELLA:{onClick:function(c,d,f){c.getSubNode("HCELLA",c.getSubId(f)).onClick(true)}},HCELLA:{onClick:function(j,n,c){var f=j.properties,d=j.getSubId(c),g=j.colMap[d];if(!g){if(j.onClickGridHandler){j.boxing().onClickGridHandler(j,n,c)}if(f.disabled){return false}if(!f.colSortable){return}}else{if(j.onClickHeader){j.boxing().onClickHeader(j,g,n,c)}if(f.disabled||g.disabled){return false}if(!(g.hasOwnProperty("colSortable")?g.colSortable:f.colSortable)){return}}if(g&&g._isgroup){g=j.properties.header[g.from]}if(j.beforeColSorted&&false===j.boxing().beforeColSorted(j,g)){return false}var l=(g?g._order:j._order)||false,r=(g?g.type:null)||"input",u=g?g.sortby:null,m=g?xui.arr.indexOf(f.header,g):-1,q=arguments.callee,o=q.fun||(q.fun=function(e,G,F,p,N,Q,M,L){var J,E,C,P=arguments.callee;if(G){J=G.sub;E=e.getSubNode("SUB1",G._serialId).get(0);C=e.getSubNode("SUB2",G._serialId).get(0)}else{G={_inited:true};J=e.properties.rows;E=e.getSubNode("ROWS21").get(0);C=e.getSubNode("ROWS22").get(0)}var aa=[],Y=[],V=[],K,O;var D=[],B=[],Z=[],X=[];xui.arr.each(J,function(ab){if(ab._region==1){return}if(ab.sub&&ab.sub.length>1){P(e,ab,F,p,N,Q,null)}aa[aa.length]=F==-1?ab.caption:(K=ab.cells)?(K=K[F])?K.value:"":ab[F];V[V.length]=F==-1?ab:(K=ab.cells)?K[F]:ab[F];Y[Y.length]=Y.length});var S;if(typeof N!="function"){switch(p){case"number":case"spin":case"counter":case"currency":O=function(ab){return parseFloat(ab)||0};break;case"datetime":case"date":O=function(ab){return xui.isDate(ab)?ab.getTime():xui.isFinite(ab)?parseInt(ab,10):0};break;default:O=function(ab){return ab||""}}S=function(ab,ae){var ac=O(aa[ab]),ad=O(aa[ae]);return(ac>ad?(Q?1:-1):ac===ad?(ab>ae?-1:1):(Q?-1:1))}}else{S=function(ab,ac){return N.apply(e,[ab,ac,aa,Q,F,V])}}Y.sort(S);var U=G._inited,W=xui.copy(J),T;if(U){D=E.childNodes;B=C.childNodes}xui.arr.each(Y,function(ac,ab){J[ab]=W[ac];if(U){Z[ab]=D[ac];X[ab]=B[ac]}});if(U){var I=document.createDocumentFragment(),H=document.createDocumentFragment();for(var R=0;K=Z[R];R++){I.appendChild(K)}for(var R=0;K=X[R];R++){H.appendChild(K)}if(M){E.insertBefore(I,M);C.insertBefore(H,L)}else{E.appendChild(I);C.appendChild(H)}}});var A,x,w;if(j.__hastmpRow){A=j.properties.rows.pop();x=j.getSubNode("ROWS21").get(0).lastChild;w=j.getSubNode("ROWS22").get(0).lastChild}o(j,null,m,r,u,l,x,w);if(j.__hastmpRow){j.properties.rows.push(A)}j.getSubNode("SORT",true).css("display","none");var h=(g?j.getSubNode("SORT",g._serialId):j.getSubNode("SORT")).css("display","");h.tagClass("-checked",g?(!(g._order=!g._order)):(!(j._order=!j._order)));j.box._asy(j);delete j.$allrowscache1;delete j.$allrowscache2;if(j.afterColSorted){j.boxing().afterColSorted(j,g)}},beforeMousedown:function(d,g,l){if(xui.Event.getBtn(g)!="left"){return}var f=d.properties;if(f.disabled){return}var c=d.colMap[d.getSubId(l)];if(!c||c._isgroup){return}if(f.disabled||c.disabled){return false}if(f.treeMode=="infirstcell"&&f.header[0]==c){return false}if(!(c.hasOwnProperty("colMovable")?c.colMovable:f.colMovable)){return}if(false===d.boxing().beforeColDrag(d,c.id)){return}var m=xui.Event.getPos(g),j=xui(l),h=d.getSubId(l);j.startDrag(g,{dragType:"icon",shadowFrom:j.parent(),dragCursor:"pointer",targetLeft:m.left+12,targetTop:m.top+12,targetReposition:false,dragDefer:2,dragKey:d.$xid+":col",dragData:j.parent().id(),tagVar:c._region})},onDragbegin:function(c,d,f){xui(f).parent().onMouseout(true,{$force:true});xui(f).onMouseup(true)},beforeMouseover:function(h,l,c){var f=h.properties,d=h.getSubId(c),g=h.colMap[d];if(!g||g._isgroup){return}if(f.disabled||g.disabled){return false}var j=xui.DragDrop.getProfile();if(!j.dragData||j.dragKey!=h.$xid+":col"){return}if(j.tagVar!=g._region){return}var m=xui.use(c).parent().xid();if(false===h.box._colDragCheck(h,m)){return}xui.DragDrop.setDropElement(c).setDropFace(c,"move");var n=xui.use(m).get(0);h.getSubNode("ARROW").left(n.offsetLeft+(g._region==2?h._leftregionw:0)).top(n.offsetTop+n.offsetHeight).css("display","block")},beforeMouseout:function(f,h,j){var g=f.properties,m=f.getSubId(j),d=f.colMap[m];if(!d){return}if(g.disabled||d.disabled){return false}var l=xui.DragDrop.getProfile();if(!l.dragData||l.dragKey!=f.$xid+":col"){return}var c=xui.use(j).parent().xid();xui.DragDrop.setDropElement(null).setDropFace(null,"none");if(false===f.box._colDragCheck(f,c)){return}f.getSubNode("ARROW").css("display","none")},onDrop:function(g,F,q){var A=g.properties,x=g.box,B=g.getSubId(q),n=xui.UI.$tag_subId,l=g.colMap[B];if(!l){return}if(A.disabled||l.disabled){return false}var J=xui.use(q).parent().xid();g.getSubNode("ARROW").css("display","none");if(false===x._colDragCheck(g,J)){return}var I=xui.DragDrop.getProfile().dragData,r=I&&g.getSubId(I),w=g.getSubId(J),H=g.colMap,c=H[r],f=H[w];if(false===g.boxing().beforeColMoved(g,c.id,f.id)){return}xui.DragDrop.setDropFace(J,"none");var h=xui.arr.subIndexOf(A.header,"_serialId",r),D=xui.arr.subIndexOf(A.header,"_serialId",w);if(h===D||h===D-1){return}g.getSubNode("HCELL",w).addPrev(xui(xui.DragDrop.getProfile().dragData));xui.each(f._cells,function(j,e){g.getSubNode("CELL",j).addPrev(g.getSubNode("CELL",c._cells[e]))});var G=A.header[h];xui.arr.insertAny(A.header,G,D);xui.arr.removeFrom(A.header,h+(h>D?1:0));var o=g.queryItems(A.rows,true,true);xui.arr.each(o,function(e){e=e.cells?e.cells:e;if(!e||!xui.isArr(e)){return}G=e[h];xui.arr.removeFrom(e,h);xui.arr.insertAny(e,G,D)});var d=A.grpCols;if(d&&xui.isArr(d)&&d.length){for(var E=0,C=d.length,u;E<C;E++){u=d[E];if(u.from>D){u.from++;u.to++}else{if(D>=u.from&&D<=u.to){u.to++}}}for(var E=0,C=d.length,u;E<C;E++){u=d[E];if(u.from>h){u.from--;u.to--}else{if(h>=u.from&&h<=u.to){u.to--}}}xui.filter(d,function(j){var e=j.to>=j.from;if(!e&&g.renderId){g.getSubNodes(["HCELL","HSCELL"],j[n]).remove();delete g.colMap[j[n]];delete g.colMap2[j.id]}return e});A.grpCols=x._adjustGrpColsData(g,d);x._adjustColsWidth(g);x._adjustColsHeight(g)}g.boxing().afterColMoved(g,c.id,f.id);delete g.$allrowscache1;delete g.$allrowscache2},onMouseover:function(h,j,c){var f=h.properties,d=h.getSubId(c),g=h.colMap[d];if(g){if(f.disabled||g.disabled){return false}if(!(g.hasOwnProperty("colHidable")?g.colHidable:f.colHidable)){return}if(!(g.hasOwnProperty("colDroppable")?g.colDroppable:f.colDroppable)){return}}else{if(f.disabled){return false}if(!f.colHidable){return}}xui.resetRun(h.$xid+":collist",null);var m={},l=xui.use(c).parent().offset(null,h.getSubNode("BOX")),n=xui.use(c).parent().cssSize();if(n.width<16){return}m.height=h.$forceu(n.height);m.left=h.$forceu(l.left);m.top=h.$forceu(l.top);h.getSubNode("COLLIST").cssRegion(m).css("visibility","visible")},onMouseout:function(d,g,h){var f=d.properties,j=d.getSubId(h),c=d.colMap[j];if(c){if(f.disabled||c.disabled){return false}if(!(c.hasOwnProperty("colHidable")?c.colHidable:f.colHidable)){return}}else{if(f.disabled){return false}if(!f.colHidable){return}}xui.resetRun(d.$xid+":collist",function(){if(!d.box){return}d.getSubNode("COLLIST").css({visibility:"hidden",left:0+d.$picku(),top:0+d.$picku()})})},onContextmenu:function(d,f,g){if(d.onContextmenu){var c=d.getSubId(g);return d.boxing().onContextmenu(d,f,g,c?d.colMap[c]:null)!==false}}},COLLIST:{onMouseover:function(c,d,f){xui.resetRun(c.$xid+":collist",null)},onMouseout:function(c,d,f){xui.resetRun(c.$xid+":collist",function(){if(!c.box){return}xui.use(f).css("visibility","hidden")})},onClick:function(f,h,j){var g=f.properties;if(!f.$col_pop){var d=[],c;xui.arr.each(f.properties.header,function(e){if(e.hasOwnProperty("colHidable")?e.colHidable:g.colHidable){d.push({id:e.id,caption:e.caption,type:"checkbox",value:e.hidden!==true})}});if(d.length){c=f.$col_pop=new xui.UI.PopMenu({hideAfterClick:false,items:d}).render(true);c.onMenuSelected(function(n,l,m){var e=1;xui.arr.each(n.properties.items,function(p){if(p.value!==false){return e=false}});if(!e){f.boxing().showColumn(l.id,l.value)}else{n.getSubNodeByItemId("CHECKBOX",l.id).tagClass("-checked");l.value=true}})}}if(f.$col_pop){f.$col_pop.pop(j)}}},CELLS2:{afterMouseover:function(d,g,j){var f=d.properties;if(f.disabled){return}if(f.disableHoverEffect){return}if(f.activeMode=="row"){var c=d.getSubId(j);d.getSubNodes(["CELLS1","CELLS2"],c).tagClass("-hover");if(d.onRowHover){var h=d.rowMap[c];d.boxing().onRowHover(d,h,true,g,j)}}},afterMouseout:function(d,g,j){var f=d.properties;if(f.disabled){return}if(f.disableHoverEffect){return}if(f.activeMode=="row"){var c=d.getSubId(j);d.getSubNodes(["CELLS1","CELLS2"],c).tagClass("-hover",false);if(d.onRowHover){var h=d.rowMap[c];d.boxing().onRowHover(d,h,false,g,j)}}},onDblclick:function(c,f,h){var d=c.properties,g=c.rowMap[c.getSubId(h)];if(!g||d.disabled||g.disabled){return false}if(c.onDblclickRow){c.boxing().onDblclickRow(c,g,f,h)}return false},onClick:function(f,h,l){var g=f.properties,c=f.getSubId(l),m=f.keys,j=f.rowMap[c],d=f.getKey(xui.Event.getSrc(h).id||"");if(g.disabled||j.disabled){return false}if(d==m.ROWTOGGLE||d==m.MARK){return false}if(f.onClickRow){f.boxing().onClickRow(f,j,h,l)}}},CELL:{onMouseover:function(f,l,m){var g=f.box,j=f.properties,c=xui.use(m).id(),d;if(j.disableHoverEffect){return}c=c.split(":")[2];if(!c){return}c=f.cellMap[c];if(!c){return}if(g.getCellOption(f,c,"disabled")){return}var h=g.getCellOption(f,c,"editMode");if(g.getCellOption(f,c,"editable")&&xui.str.startWith(h,"hover")){if(h=="hoversharp"&&g.getCellOption(f,c,"type")=="file"){f.box.$cancelHoverEditor(f)}else{xui.resetRun(f.key+":"+f.$xid+":hovereditor",function(){if(f.destroyed){return}if(f&&f.$curEditor){d=f.$curEditor;xui.tryF(d.undo,[],d)}f.box._editCell(f,f.getSubId(m),true)});return false}}else{f.box.$cancelHoverEditor(f)}}},CELLA:{onDblclick:function(f,l,c){var n=f.cellMap[f.getSubId(c)];if(!n){return}if(f.properties.disabled){return}var j=f.box,h=j.getCellOption,m=h(f,n,"type"),g=h(f,n,"disabled"),d=h(f,n,"editable");if(!g&&(!d||(m=="button"||m=="label"))){f.boxing().onDblclickCell(f,n,l,c);if(m=="button"){return false}}},afterMousedown:function(c,d,f){xui.setNodeData(f,"_tmp_forcefocus")},onClick:function(f,B,l){var r=f.properties,n=f.box,C=n.getCellOption,d=f.cellMap[f.getSubId(l)],u;if(d){if(f.properties.disabled){return false}var g=C(f,d,"type"),h=C(f,d,"disabled"),q=C(f,d,"readonly"),x=C(f,d,"event"),o=r.activeMode,w=C(f,d,"editable");if(!h&&(!w||(g=="button"||g=="label"))){if(typeof x=="function"&&false===x.call(f._host||f,f,d,null,null,B,l)){}else{if(f.onClickCell){f.boxing().onClickCell(f,d,B,l)}}if(g=="button"){return false}}if(!h&&!q&&g=="checkbox"){if(w){n._updCell(f,d,!d.value,r.dirtyMark,true);f.box._trycheckrowdirty(f,d);var A=d._row.id==f.box._temprowid;if(A){f.__needchecktmprow=true;f.box._sethotrowoutterblur(f)}}}if(!r.editable){if(o=="cell"){if(C(f,d,"disabled")){return false}u=xui(l).parent().id();n._sel(f,"cell",l,u,B)}else{if(o=="row"){if(r.disabled||d._row.disabled){return false}u=xui(l).parent(3).id();n._sel(f,"row",l,u,B)}}}else{if(r.activeMode=="row"){u=xui(l).parent(3).id();n._sel(f,"row",l,u,B)}}}else{var j=f.rowMap[f.getSubId(l)];if(r.disabled||j.disabled){return false}if(f.keys.MARK){var m=f.getKey(xui.Event.getSrc(B).id||""),c=m==f.keys.MARK}if(!c){if(typeof x=="function"&&false===x.call(f._host||f,f,j,null,null,B,l)){}else{if(f.onClickRowHandler){f.boxing().onClickRowHandler(f,j,B,l)}}if(j.group){f.box._getToggleNode(f,j._serialId).onClick()}}if(r.activeMode=="row"){u=xui(l).parent(3).id();n._sel(f,"row",l,u,B)}}if(f.box){if(xui.use(l).get(0)){if(!xui.getNodeData(l,"_tmp_forcefocus")){f.box._focusEvent(f,B,l)}}}},onFocus:function(c,d,f){xui.setNodeData(f,"_tmp_forcefocus",1);c.box._focusEvent(c,d,f)},onKeydown:function(h,W,D){var Y={tab:1,left:1,right:1,up:1,down:1},K=xui.Event.getKey(W),x=K.key;if(x=="enter"){xui(D).onClick();return}if(!Y[x]){return}var N=h.cellMap[h.getSubId(D)];if(h.beforeCellKeydown&&false===h.boxing().beforeCellKeydown(h,N,K)){return false}var S=h.properties,M=K.shiftKey,V=K.ctrlKey,l=xui(D),Q=h.getSubNode("SCROLL11"),P=h.getSubNode("SCROLL12"),C=h.getSubNode("SCROLL21"),B=h.getSubNode("SCROLL22"),U=new RegExp("^"+h.box.$Keys.CELLA+":"+h.serialId+":"),A=!!P.offsetWidth(),d=!!C.offsetWidth(),c=!!B.offsetHeight(),I=Q.nextFocus(true,true,false,U),H=P.nextFocus(true,true,false,U),n=C.nextFocus(true,true,false,U),m=B.nextFocus(true,true,false,U),F=Q.nextFocus(false,true,false,U),E=P.nextFocus(false,true,false,U),g=C.nextFocus(false,true,false,U),f=B.nextFocus(false,true,false,U),o=A?d?I:H:d?n:m,w=B?f:P?E:C?g:F,O=l.parent(),J=O.parent().id(),r=h.getSubId(J),q=N?N._row:h.rowMap[h.getSubId(D)],X=N?(N._row._region+""+N._col._region):(q._region+"1"),R;var G=function(e){if(D!=o.xid()){var p;if(!O.get(0).previousSibling||!O.get(0).previousSibling.clientWidth){switch(X){case"11":case"21":if(c){if(D==n.xid()){E.focus();p=1}else{var Z=h.getSubNode("ROW2",r).prev();if(Z){Z.nextFocus(false,true,true,U);p=1}}}break;case"12":case"22":if(d){h.getSubNode("CELLS1",r).last(2).focus();p=1}break}}if(!p){l.nextFocus(false,false,true,U)}return false}else{if(e){w.focus()}}},j=function(e){if(D!=w.xid()){var p;if(X=="11"||X=="21"?!O.get(0).nextSibling:(!(R=O.get(0).nextSibling)||!R.clientWidth)){switch(X){case"11":case"21":if(c){h.getSubNode("CELLS2",r).first(2).focus();p=1}break;case"12":case"22":if(d){if(D==E.xid()){n.focus();p=1}else{var Z=h.getSubNode("ROW1",r).next();if(Z){Z.nextFocus(true,true,true,U);p=1}}}break}}if(!p){l.nextFocus(true,false,true,U)}return false}else{if(e){o.focus()}}},u=function(aa){var ac=1,ah=l.parent().get(0),ae=ah.parentNode.childNodes.length;while(ah=ah.previousSibling){ac++}ah=l.parent(2).get(0);if(!h.$allrowscache2){h.box._cacheRows(h)}var ad=xui.arr.indexOf(X=="12"||X=="22"?h.$allrowscache2:h.$allrowscache1,ah),af=h.$allrowscache2.length,ab=0;if(x=="up"){ad--;if(ad==-1){ad=af-1;ac--;if(ac==0){ac=ae}}}else{ad++;if(ad==af){ab=1;ad=0;ac++;if(ac==ae+1){ac=1}}}if(ab&&S.hotRowMode!="none"){var e;if(!N){var ai=h.rowMap[h.getSubId(D)];if(!ai){return false}}else{e=N._col.id}var Z=true;if(h.__hastmpRow){Z=h.box._checkNewLine(h,"keydown");if(!h.$allrowscache2){h.box._cacheRows(h)}}if(Z){h.box._addTempRow(h,e);return false}}var p=xui((X=="12"||X=="22"?h.$allrowscache2:h.$allrowscache1)[ad]).first(),ag=p;if(ac>1){ag=ag.next(ac-1)}if(ag.isEmpty()){ag=p}if(ag&&!ag.isEmpty()){ag=ag.first()}if(!ag.isEmpty()){ag.focus()}},T=function(){if(D!=o.xid()){var e;if(l.get(0)==H.get(0)||l.get(0)==m.get(0)){if(d){g.focus();e=1}else{F.focus();e=1}}if(!e){u(true)}}else{w.focus()}},L=function(){if(D!=w.xid()){var e;if(l.get(0)==F.get(0)||l.get(0)==g.get(0)){if(A){H.focus();e=1}else{m.focus();e=1}}if(!e){u()}}else{o.focus()}};switch(x){case"tab":if(M){if(false===G()){return false}}else{if(false===j()){return false}}break;case"left":if(false===G(true)){return false}break;case"right":if(false===j(true)){return false}break;case"up":if(V){if(q&&!(S.disabled||q.disabled)&&(q.group||q.sub)){h.box._getToggleNode(h,q._serialId).onClick();return false}}T();return false;break;case"down":if(V){if(q&&!(S.disabled||q.disabled)&&(q.group||q.sub)){h.box._getToggleNode(h,q._serialId).onClick();return false}}L();return false;break}},onContextmenu:function(d,f,g){if(d.onContextmenu){var c=d.getSubId(g);return d.boxing().onContextmenu(d,f,g,c?(d.cellMap[c]||d.rowMap[c]):null)!==false}}},CMD:{onClick:function(c,g,j){var f=c.properties,l=xui.use(j).id().split("_"),d=l[l.length-1];l.pop();var h=c.rowMap[c.getSubId(l.join("_"))];if(f.disabled||(h&&h.disabled)){return false}if(c.onCmd){c.boxing().onCmd(c,h,d,g,j)}return false}}},DataModel:{directInput:true,listKey:null,currencyTpl:"$ *",numberTpl:"",valueSeparator:";",activeRow:{hidden:true,ini:null},activeCell:{hidden:true,ini:null},rowMap:{hidden:true,ini:null},selMode:{ini:"none",listbox:["single","none","multi","multibycheckbox"],action:function(c){this.getSubNodes(["HFMARK","MARK"],true).css("display",(c=="multi"||c=="multibycheckbox")?"":"none")}},editMode:{ini:"focus",listbox:["focus","sharp","hover","hoversharp","inline"]},dock:"fill",togglePlaceholder:false,altRowsBg:{ini:false,action:function(l){var f=this;var e=f.getClass("CELLS1","-alt"),c=f.getSubNode("CELLS1",true),m=f.getSubNode("CELLS2",true),d,h,g;c.removeClass(e);m.removeClass(e);if(l){alt=[];d=0;m.each(function(n,j){if(n.clientHeight){n=xui([n]);h=xui([c.get(j)]);if((d++)%2==1){if(!h.hasClass(e)){h.addClass(e)}if(!n.hasClass(e)){n.addClass(e)}}else{if(h.hasClass(e)){h.removeClass(e)}if(n.hasClass(e)){n.removeClass(e)}}}})}}},rowNumbered:{ini:false,action:function(p){var o=this,m=o.CF.getNumberedStr||function(f){return f},e=o.getSubNode("ROWNUM",true),j=0,d=o.rowMap,w,n=0,h=0,g=[],c=[],u="",q,r;e.css("display",p?"":"none");if(p){e.each(function(f){w=d[o.getSubId(f.id)];h=w._layer;if(h>n){g.push(j);c.push(u);u=u+j+".";j=0}else{if(h<n){while(h<n--){j=g.pop();u=c.pop()}}}j++;n=h;w._autoNumber=m(u+j);q=w.rowNumber||w._autoNumber;if(r=f.firstChild){if(r.nodeValue!=q){r.nodeValue=q}}else{f.appendChild(document.createTextNode(q))}})}else{e.text("")}}},editable:false,firstCellEditable:false,$subMargin:"1.375em",iniFold:true,animCollapse:false,position:"absolute",width:"25em",height:"18em",_minColW:".5em",_maxColW:"25em",_minRowH:"1.83333em",gridHandlerCaption:{ini:"",action:function(c){c=(xui.isSet(c)?c:"")+"";this.getSubNode("GRIDCAPTION").html(xui.adjustRes(c,true))}},rowHandlerWidth:{$spaceunit:1,ini:"5em",set:function(c){var d=this;if(d.renderId){d.box._setRowHanderW(d,c)}else{d.properties.rowHandlerWidth=c}}},showHeader:{ini:true,action:function(c){this.getSubNodes(["HEADER1","HEADER2"]).css("display",c?"":"none")}},headerHeight:{$spaceunit:1,ini:"2em",action:function(c){var d=this,e=d.properties;d.box._adjustColsHeight(d);xui.UI.$tryResize(d,d.getRoot().width(),d.getRoot().height(),true)}},rowHeight:{$spaceunit:1,ini:"2em",action:function(c){this.box._adjusteditorH(this,this.getSubNodes(["CELLS1","CELLS2"],true).height(c),c)}},_colDfWidth:"8em",rowHandler:{ini:true,action:function(c){this.getSubNode("FHCELL").css("display",c?"":"none");this.getSubNode("FCELL",true).css("display",c?"":"none");this.box._adjustColsWidth(this);this.box._adjustBody(this,"rowhandler")}},rowResizer:{ini:false,action:function(c){this.getSubNode("FHANDLER",true).css("display",c?"":"none")}},colHidable:false,colResizer:{ini:true,action:function(c){this.getSubNode("HHANDLER",true).css("display",c?"":"none")}},colSortable:{ini:true,action:function(c){if(!c){this.getSubNode("SORT",true).css("display","none")}}},colMovable:false,header:{ini:{},set:function(c){var d=this;if(d.renderId){d.boxing()._refreshHeader(c)}else{d.properties.header=xui.copy(c)}}},grpCols:{ini:{},set:function(c){var d=this;d.properties.grpCols=xui.copy(c);if(d.renderId){d.boxing()._refreshHeader(xui.clone(d.properties.header,false,2))}}},rows:{ini:{},set:function(c){var d=this;if(d.renderId){d.boxing().removeAllRows(false).insertRows(c)}else{d.properties.rows=xui.copy(c)}}},rawData:{ini:[],set:function(q){if(!q||!xui.isArr(q)||!q.length){return}var c=this,p={},m=[],r=[],h,f,d=q.length,g;for(h=0;h<d;h++){if(!xui.isHash(g=q[h])){return}for(var e in g){if(!(e in p)){p[e]=[]}p[e][h]=g[e]}}f=0;for(var e in p){m.push(e);for(h=0;h<d;h++){if(!r[h]){r[h]=[]}r[h][f]=p[e][h]}f++}var n=c.boxing();if(n.getHeader("min").join(";")!=m.join(";")){n.setHeader(m)}n.setRows(r)},get:function(){var d=this,c=d.properties,n=c.header,q=c.rows,e=n.length,p=q.length;columns=[],data=[];if(p){for(var m=0;m<e;m++){columns.push(n[m].id)}for(var f=0;f<p;f++){var g={};for(var m=0;m<e;m++){g[columns[m]]=q[f].cells[m].value}data.push(g)}}return data}},tagCmds:{ini:[],action:function(){this.boxing().refresh()}},activeMode:{ini:"row",listbox:["row","cell","none"],action:function(d){var c=this;if(d!="cell"&&c.$activeCell){xui(c.$activeCell).tagClass("-active",false);delete c.$activeCell}if(d!="row"&&c.$activeRow){xui(c.$activeRow).tagClass("-active",false);delete c.$activeRow}}},rowOptions:{ini:{},action:function(e){var c=this.boxing(),d=c.getRows("data");c.removeAllRows();c.insertRows(d)}},colOptions:{ini:{},action:function(e){var c=this.boxing(),d=c.getRows("data");c.removeAllRows();c.insertRows(d)}},treeMode:{ini:"inhandler",listbox:["none","inhandler","infirstcell"],action:function(c,d){if((d=="inhandler"&&c=="infirstcell")||(d=="infirstcell"&&c=="inhandler")){this.boxing().refresh()}else{this.getSubNodes(["ROWLRULER","ROWTOGGLE"],true).css("display",c?"":"none")}}},freezedColumn:{ini:0,action:function(){this.boxing().refresh();this.box._adjustColsWidth(this)}},freezedRow:{ini:0,action:function(){this.boxing().refresh()}},hotRowMode:{ini:"none",listbox:["none","show","hide","auto"],action:function(c){if(this.renderId){if(c=="none"){this.boxing().removeHotRow()}else{this.box.__ensurehotrow(this,null)}}}},hotRowNumber:"[*]",noCtrlKey:true},EventHandlers:{onBodyLayout:function(d,c){},beforeCellKeydown:function(d,c,e){},afterCellFocused:function(d,c,e){},beforeInitHotRow:function(c){},onInitHotRow:function(c){},beforeHotRowAdded:function(d,e,c){},afterHotRowAdded:function(c,d){},onGetContent:function(c,d,e){},onRowSelected:function(d,h,f,g,c){},onCmd:function(c,h,f,d,g){},beforeFold:function(c,d){},beforeExpand:function(c,d){},afterFold:function(c,d){},afterExpand:function(c,d){},beforeColDrag:function(c,d){},beforeColMoved:function(d,e,c){},afterColMoved:function(d,e,c){},beforeColSorted:function(d,c){},afterColSorted:function(d,c){},beforeColShowHide:function(d,e,c){},afterColShowHide:function(d,e,c){},beforeColResized:function(d,e,c){},afterColResized:function(d,e,c){},beforeRowResized:function(d,e,c){},afterRowResized:function(d,e,c){},beforePrepareRow:function(d,e,c){},beforePrepareCol:function(d,c){},beforeRowActive:function(c,d){},afterRowActive:function(c,d){},beforeCellActive:function(d,c){},afterCellActive:function(d,c){},beforeCellUpdated:function(e,c,d,f){},afterCellUpdated:function(e,c,d,f){},beforeRowUpdated:function(d,e,c,f){},afterRowUpdated:function(d,e,c,f){},onRowDirtied:function(c,d){},onRowHover:function(d,h,c,f,g){},onClickHeader:function(d,c,f,g){},onClickRow:function(c,g,d,f){},onClickRowHandler:function(c,g,d,f){},onDblclickRow:function(c,g,d,f){},onClickCell:function(d,c,f,g){},onDblclickCell:function(d,c,f,g){},onClickGridHandler:function(c,d,f){},beforeIniEditor:function(g,c,d,e,f){},onBeginEdit:function(f,c,e,d){},beforeEditApply:function(h,d,e,g,c,f){},onEndEdit:function(f,c,e,d){},onFileDlgOpen:function(e,d,c,f){},beforeComboPop:function(f,d,c,j,g,h){},beforePopShow:function(e,d,c,f){},afterPopShow:function(e,d,c,f){},onCommand:function(f,d,c,g,e){},onEditorClick:function(f,d,c,e,g){},beforeUnitUpdated:function(f,d,c,e){}},RenderTrigger:function(){var d=this,e=d.box,g=d.properties,c=d.boxing(),f=e.getCellOption;d.destroyTrigger=function(){var h=this,j=h.properties;xui.each(h.cellMap,function(l){if(l._editor){l._editor.destroy()}});xui.breakO([h.colMap,h.rowMap,h.cellMap],3);j.header.length=0;j.rows.length=0;j.grpCols.length=0};d.$cache_editor={};if(!g.iniFold){c._toggleRows(g.rows,true)}xui.arr.each(g.header,function(h){if(xui.isFun(h.colRenderer||g.colOptions.colRenderer)){(h.colRenderer||g.colOptions.colRenderer).call(null,d,h)}});if(g.treeMode=="infirstcell"){d.getSubNode("HCELLA",g.header[0]._serialId).prepend(d.getSubNode("LTAGCMDS")).prepend(d.getSubNode("HFMARK"))}xui.arr.each(g.rows,function(h){if(xui.isFun(h.rowRenderer||g.rowOptions.rowRenderer)){(h.rowRenderer||g.rowOptions.rowRenderer).call(null,d,h)}if(false===f(d,h,"iniFold")){c._toggleRows([h],true)}});d.box.__ensurehotrow(d,null);xui.each(d.cellMap,function(h){if(f(d,h,"editable")&&(f(d,h,"editMode")=="inline"||f(d,h,"type")=="dropbutton")){e._editCell(d,h)}})},LayoutTrigger:function(){var d=this,e=d.box,f=d.properties,c=d.boxing();if(xui.isArr(f.grpCols)){xui.arr.each(f.grpCols,function(g){if(xui.isFun(g.colRenderer||f.colOptions.colRenderer)){(g.colRenderer||f.colOptions.colRenderer).call(null,d,g)}});e._adjustColsHeight(d)}d.box._asy(d);d.box._adjustBody(d,"render")},_focusEvent:function(f,g,j){var d=f.boxing(),l=f.properties,c=f.cellMap[f.getSubId(j)],h;f.box._focuscell(f,g,j);if(f.afterCellFocused){if(c){h=c._row}else{h=f.rowMap[f.getSubId(j)]}d.afterCellFocused(f,c,h)}if(l.hotRowMode!="none"){var c=f.cellMap[f.getSubId(j)],h;if(c){h=c._row}else{h=f.rowMap[f.getSubId(j)]}if(f.__hastmpRow&&f.__needchecktmprow&&h.id!==f.box._temprowid){f.box._checkNewLine(f,"focuscell")}}},__ensurehotrow:function(e,c){var h=e.properties,f=e.box,d=false;if(!f||!e.renderId||h.hotRowMode=="none"){return}if(e.__hastmpRow){var g=e.properties.rows;if(g.length===0||g[g.length-1].id!=e.box._temprowid){d=true}}else{d=true}if(d){switch(h.hotRowMode){case"auto":if(!h.rows||h.rows.length===0){f._addTempRow(e,c)}break;case"show":f._addTempRow(e,c);break}}},_temprowid:"_ r _temp_",isHotRow:function(c){return c&&(c.id||c)===this._temprowid},_addTempRow:function(e,c){var g=e.properties;if(g.readonly||g.disabled||!g.header||g.header.length<=0){return false}e.box._sethotrowoutterblur(e,true);delete e.__hastmpRow;e.boxing().removeRows([this._temprowid],false);if(e.beforeInitHotRow&&false===e.boxing().beforeInitHotRow(e)){return false}e.__needchecktmprow=true;var f=[],d=e.boxing();if(e.onInitHotRow){f=d.onInitHotRow(e)||f}if(xui.isArr(f)){f={cells:f}}else{if(!xui.isHash(f)){f={cells:[f]}}}f.id=this._temprowid;f.rowNumber=g.hotRowNumber;f.rowClass=e.getClass("CELLS2","-hot");d.insertRows([f],null,null,false,false);e.__hastmpRow=true;if(c!==null){d.focusCellbyRowCol(f.id,c||g.header[0].id);e.box._sethotrowoutterblur(e)}},_checkNewLine:function(f,d){var c=f.properties;f.box._sethotrowoutterblur(f,true);if(!f.__hastmpRow){return}delete f.__needchecktmprow;var j=f.boxing(),e=this._temprowid,h=j.getRowbyRowId(e),n=c.hotRowMode=="show"?d=="keydown"?true:null:d?true:false;if(!h){return}if(f.beforeHotRowAdded){var g=j.beforeHotRowAdded(f,h,!d);if(xui.isDefined(g)){n=g}}if(n===null){if(c.hotRowMode=="hide"||c.hotRowMode=="auto"){f.box._sethotrowoutterblur(f)}return false}else{if(n===false){if(c.hotRowMode=="hide"||c.hotRowMode=="auto"){delete f.__hastmpRow;j.removeRows([e],false);if(c.rows.length===0&&c.hotRowMode=="auto"){this._addTempRow(f,null)}}return false}else{if(n===true){var l=xui.clone(h,true);var m=f.getClass("CELLS2","-hot");if(m==l.rowClass){delete l.rowClass}else{l.rowClass=l.rowClass.replace(m,"")}delete f.__hastmpRow;j.removeRows([e],false);if(l.id==e){delete l.id}if(l.rowNumber==c.hotRowNumber){delete l.rowNumber}j.insertRows([l],null,null,false,false);if(f.afterHotRowAdded){j.afterHotRowAdded(f,c.rows[c.rows.length-1])}if(c.hotRowMode=="show"){if(!f.__hastmpRow){this._addTempRow(f,null)}}return true}else{f.__needchecktmprow=true;if(xui.isHash(n)){j.focusCell(n)}else{j.focusCell(j.getCell(n))}f.box._sethotrowoutterblur(f);return false}}}},_sethotrowoutterblur:function(d,c){d.getSubNode("ROWS22").setBlurTrigger(d.$domId+":ROWS22",c?null:function(h,g){var f=xui.Event.getSrc(g)==d.getSubNode("SCROLL22").get(0)?"focusin":null;d.__tmpRowBlurTrigger=xui.asyRun(function(){if(!d.box){return}d.box._checkNewLine(d,f)})},null,null,true);if(c){if(d.__tmpRowBlurTrigger){xui.clearTimeout(d.__tmpRowBlurTrigger);delete d.__tmpRowBlurTrigger}}},_cacheRows:function(e){var d=e.getSubNodes("CELLS1",true).get(),c=e.getSubNodes("CELLS2",true).get();xui.filter(d,function(f){return !!f.clientHeight});xui.filter(c,function(f){return !!f.clientHeight});e.$allrowscache1=d;e.$allrowscache2=c},_asy:function(d){var f=d.properties,c=d.boxing(),e=d.$xid;if(f.altRowsBg){xui.resetRun(e+"1",function(){if(d.rowMap){c.setAltRowsBg(true,true)}})}if(f.rowNumbered){xui.resetRun(e+"2",function(){if(d.rowMap){c.setRowNumbered(true,true)}})}},_setRowHanderW:function(f,j){var c=f.properties,g=f.$px(c.$subMargin),d=f.rowMap,l=f.getSubNode("FHCELL"),e,m;if(xui.isFinite(j)||f.$isEm(j)||f.$isPx(j)){m=f.$forceu(j)}else{if(j===true){var h=[],o;f.getSubNode("FCELLCAPTION",true).each(function(n){if((o=n.parentNode).parentNode.offsetHeight>0&&xui.Dom.getStyle(o,"overflow")!="visible"){if(e=d[f.getSubId(n.id)]){h.push(xui([n]).width()+e._layer*g)}}});h.push(f.$px(c._minColW));m=f.$forceu(Math.max.apply(null,h)+g*2)}else{m=f.$forceu(l.width())}}if(m){if(f.$px(m)<f.$px(c._minColW)){m=f.$em(c._minColW)+"em"}if(f.$px(m)<=0){return}if(c.rowHandlerWidth!=m){l.width(c.rowHandlerWidth=m);f.getSubNode("FCELL",true).width(m);f.getSubNode("GCELL",true).width(m);f.box._adjustColsWidth(f);f.box._adjustBody(f,"rowhandler")}}},_onStartDrag:function(c,d,g){var f=c.rowMap[c.getSubId(g)];if(f&&f.id==c.box._temprowid){return false}var h=xui.Event.getPos(d);c.$_ond=g;xui.use(g).startDrag(d,{dragSource:c.$xid,dragType:"icon",shadowFrom:xui.use(g).parent()._get(0),targetLeft:h.left+12,targetTop:h.top+12,dragCursor:"pointer",dragDefer:2,dragKey:c.box.getDragKey(c,g),dragData:c.box.getDragData(c,d,g)});return false},_onDropTest:function(d,l,c,o,j,q){var f=j&&j.domId,h=c,m=j&&j.profile,p;if(h){var g=d.getKey(h),n=d.keys,r=d.rowMap[d.getSubId(h)];if(g==n.FCELL&&!r.sub){return false}}if(m&&m.$xid==d.$xid){if(f&&d.getSubId(f)==d.getSubId(h)){return false}p=d.$_ond;c=xui(c).get(0);if(xui.get(c,["parentNode","previousSibling"])==p){return false}do{if(c==p){c=p=null;return false}}while(c&&(c=c.parentNode)&&c!==document&&c!==window);c=p=null}},_onDragstop:function(d,h,j,c,g,f){delete d.$_ond},_onDrop:function(h,o,f,r,m,w){xui.DragDrop.setDragIcon("none");if(!m.profile||!m.profile[h.KEY]){return}var l=h.getKey(f),g=m.profile,d=m.domId,j,q=h.keys,u=xui.absObj.$specialChars,p=h.boxing(),n=xui.copy(p.getUIValue(true)),c=g.rowMap[g.getSubId(d)],x=h.rowMap[h.getSubId(f)];c=xui.clone(c,function(A,e){return !u[(e+"").charAt(0)]});g.boxing().removeRows([c.id]);if(l==q.SCROLL22){p.insertRows([c],null,null,false)}else{if((l==q.FCELL)&&x.sub){p.insertRows([c],x.id,null,false)}else{if(l==q.CELLS2){p.insertRows([c],x._pid,x.id,true)}}}if(n&&n.length){if(xui.arr.indexOf(n,c.id)!=-1){p.setUIValue(n,true,null,"drop")}}m._new=c;return false},_beforeSerialized:function(e){var g=arguments.callee.upper.call(this,e),c=e.properties,f=xui.absObj.$specialChars,h=g.properties,d;h.header=xui.clone(c.header,function(m,j,l){return !f[((l===1?m.id:j)+"").charAt(0)]&&m!=undefined});h.grpCols=xui.clone(c.grpCols,function(m,j,l){return !f[((l===1?m.id:j)+"").charAt(0)]&&m!=undefined});h.rows=xui.clone(c.rows,function(m,j,l){return !f[((l===1?m.id:j)+"").charAt(0)]&&m!=undefined&&((j=="id"&&typeof(m)=="string")?m.charAt(0)!="-":true)});if(h.header.length===0){delete h.header}if(h.grpCols.length===0){delete h.grpCols}if(h.rows.length===0){delete h.rows}delete h.activeRow;delete h.activeCell;delete h.rawData;return g},_clsCache:{},_colDragCheck:function(f,j){var h=f.properties,c=xui.DragDrop.getProfile(),e=c.dragKey,g=c.dragData,d=f.colMap[f.getSubId(j)];if(!d||d._isgroup){return false}if(h.treeMode=="infirstcell"&&h.header[0]==d){return false}if(!(d.hasOwnProperty("colMovable")?d.colMovable:f.properties.colMovable)){return false}if(!e||!g||e!=(f.$xid+":col")){return false}if(g==xui.use(j).id()||g==xui.use(j).prev().id()){return false}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c),e="display:none",f=c.properties;c.rowMap2={};c.rowMap={};c.cellMap={};d.showHeader=f.showHeader?"":e;d.colDDDisplay=f.colResizer?"":e;d.rowDDDisplay=f.rowResizer?"":e;d.rowHandlerDisplay=f.rowHandler?"":e;d.sortDisplay=e;d._rowMarkDisplay=(f.selMode=="multi"||f.selMode=="multibycheckbox")?"":"display:none;";if(!f.header||!xui.isArr(f.header)){f.header=[]}if(!f.grpCols||!xui.isArr(f.grpCols)){f.grpCols=[]}if(!f.rows||!xui.isArr(f.rows)){f.rows=[]}f.header=this._adjustHeader(f.header);d.header=this._prepareHeader(c,f.header);d.header1=d.header2=d.header;f.grpCols=this._adjustGrpColsData(c,f.grpCols);d.grpCols=this._prepareGrpCols(c,f.grpCols,d.header);d.grpCols1=d.grpCols2=d.grpCols;d._row0DfW=d.rowHandlerWidth?("width:"+c.$forceu(d.rowHandlerWidth)):"";if(c.$isEm(f.headerHeight)){d.headerHeight=c.$forceu(c.$px(f.headerHeight,0,true),"em")}if(c.$isEm(f.rowHeight)){d.rowHeight=c.$forceu(c.$px(f.rowHeight,0,true),"em")}if(c.$isEm(f.rowHandlerWidth)){d.headerHeight=c.$forceu(c.$px(f.rowHandlerWidth,0,true),"em")}arguments.callee.upper.call(this,c);f.rows=this._adjustRows(c,f.rows);d.rows11=d.rows12=d.rows21=d.rows22=this._prepareItems(c,f.rows);d.tagCmds=xui.clone(f.colOptions.tagCmds||d.tagCmds);if(d.tagCmds){this._prepareCmds(c,d,function(g){return !g.tag||!!g.tag.match(/\bheader\b/)})}d._columnfreezed=f.freezedColumn?"xui-ui-shadow-r xui-uiborder-r xui-uiborder-dark":"";d._rowfreezed=f.freezedRow?"xui-ui-shadow-b xui-uiborder-b xui-uiborder-dark":"";return d},_parepareCol:function(h,f,p,l){var e=xui.UI.$tag_subId,d=h.properties,j=h.$px(d.headerHeight),o="display:none",r,q=1,m,g,n;if(!xui.isHash(f)){g=f+"";f={id:g}}else{g=f.id+""}f._cells={};r=h.pickSubId("header");f[e]="-h_"+r;f.id=f.id||r;while((m=xui.arr.subIndexOf(p,"id",f.id))!=-1&&m!==l){f.id=r+(q++)}h.colMap[f[e]]=f;var c=h.$px(f.width)||h.$px(d._colDfWidth);if("relWidth" in f){f.flexSize=f.relWidth;delete f.relWidth}if(!f.flexSize){if(f.hasOwnProperty("minWidth")){c=Math.max(c,h.$px(f.minWidth))}if(f.hasOwnProperty("maxWidth")){c=Math.min(c,h.$px(f.minWidth))}}f.width=f._cellWidth=f._colWidth=h.$forceu(c);f._hcellheight=h.$forceu(j-2);n={sortDisplay:o,rowHandlerDisplay:d.rowHandler?"":o};n[e]=f[e];n._tabindex=d.tabindex;n.colDDDisplay=(("colResizer" in f)?f.colResizer:d.colResizer)?"":o;if(f.flexSize){n.colDDDisplay=o}if(f.hasOwnProperty("visibility")&&!f.hasOwnProperty("hidden")){f.hidden=!f.visibility}n.colDisplay=f.hidden===true?o:"";n.firstCellStyle=d.colOptions.firstCellStyle||"";n.firstCellClass=d.colOptions.firstCellClass||"";if(!f.type){f.type=d.colOptions.type||"input"}if(!(("caption" in f)&&xui.isDefined(f.caption))){f.caption=g}xui.UI.adjustData(h,f,n);h.colMap2[f.id]=f[e];return[f,n]},_parepareCell:function(g,n,p,f,o,e,h){var m=this,d=xui.UI.$tag_subId,c=g.properties,l="display:none",j={};n=xui.isSet(n)?xui.isHash(n)?n:{value:n}:{};n._row=p;n._col=f;n[d]="-c_"+g.pickSubId("cell");n.id=n.id||n[d];m._adjustCell(g,n,j);g.cellMap[j[d]]=n;if(o){o.push(n)}p._cells[f.id]=j[d];f._cells[p.id]=j[d];if(c.treeMode=="infirstcell"&&h===0&&e){j._treeMode=e._treeMode;j._rulerW=e._rulerW;j._fi_togglemark=e._fi_togglemark;j._rowMarkDisplay=e._rowMarkDisplay;j._rowNumbDisplay=e._rowNumbDisplay;j._ltagDisplay=e._ltagDisplay;j.ltagCmds=e.ltagCmds;j[xui.UI.$tag_subId_c]=e[xui.UI.$tag_subId]}return[n,j]},_prepareGrpCols:function(f,c,d){var e=f.properties;if(e.showHeader&&c&&xui.isArr(c)&&c.length){var J=e.header,G=f.$px(e.headerHeight),g=xui.UI.$tag_subId,r="display:none",q=[],A,u,K,L,x,M=f._headerLayers,K=G/(M+1),I=false;for(var H=0,E=c.length,l;H<E;H++){A={};u=0;I=false;L=0;l=c[H];xui.UI.adjustData(f,l,A);for(var F=0,C;F<=l.to;F++){C=J[F];B=d[F];x=f.$px(B._colWidth);if(F===l.from){I=true;A._hcellleft=f.$forceu(L)}L+=x+2;if(I&&!C.hidden){u+=x+2}}A._colWidth=A._cellWidth=f.$forceu(u-2);A._hcellheight=f.$forceu(K-2);A._hcelltop=f.$forceu(K*(l._layer-1));A._tabindex=e.tabindex;A.colDDDisplay=(("colResizer" in l)?l.colResizer:e.colResizer)?"":r;q.push(A)}for(var F=0,D=J.length,C,B;F<D;F++){C=J[F];B=d[F];if(C._grp&&C._grp.length){B._hcellheight=f.$forceu(G-C._grp.length*K-2)}}return q}},_prepareHeader:function(d,c){var f=[],e;d.colMap2={};d.colMap={};xui.arr.each(c,function(h,g){if(d.beforePrepareCol&&false===d.boxing().beforePrepareCol(d,h)){return}e=d.box._parepareCol(d,h,c,g);c[g]=e[0];f.push(e[1])});return f},_renderCell:function(g,e,l,D,h){var J=g.box.getCellOption,j=J(g,e,"type"),p="",o="",G,m=D,E=l&&("caption" in l)&&xui.isDefined(e.caption)?l.caption:(("caption" in e)&&xui.isDefined(e.caption)&&xui.adjustRes(e.caption)),H=/</g,K=arguments.callee,L="xui-uicell-disabled",d="xui-ui-readonly",f=K._ren||(K._ren=function(O,c,P,N){return(typeof c._$caption=="string"?c._$caption:(P&&typeof P.caption=="string")?P.caption:typeof(c.renderer||c._renderer)=="function"?(c.renderer||c._renderer).call(O,c):typeof N=="function"?N(c.value,O,c):(xui.isSet(c.value)?(""+c.value):""))||""}),F=K._f0=(K._f0=function(N,O,c){return N?xui.Date.getText(N,J(O,c,"dateEditorTpl")||"ymdhn"):""}),C=K._f1=(K._f1=function(N,O,c){return N?xui.Date.getText(N,J(O,c,"dateEditorTpl")||"ymd"):""}),B=K._f2=(K._f2=function(c){return c?(c+"").replace(H,"&lt;").replace(/\t/g,"    ").replace(/(\r\n|\n|\r)/g,"<br />"):""}),A=K._f3=(K._f3=function(c){return(c||c===0)?((c*100).toFixed(2)+"%"):""}),x=K._f4=(K._f4=function(N,O,c){if(N||N===0){return xui.formatNumeric(parseFloat(N),J(O,c,"precision"),J(O,c,"groupingSeparator"),J(O,c,"decimalSeparator"),J(O,c,"forceFillZero"),J(O,c,"trimTailZero"))}else{return""}}),w=K._f5=(K._f5=function(O,P,c){if(O||O===0){var N=J(P,c,"precision");return xui.formatNumeric(parseFloat(O),xui.isSet(N)?N:2,J(P,c,"groupingSeparator"),J(P,c,"decimalSeparator"),J(P,c,"forceFillZero"),J(P,c,"trimTailZero"))}else{return""}}),u=K._f6=(K._f6=function(O,R,c){var Q=J(R,c,"editorListItems");if(!Q){if(Q=J(R,c,"editorListKey")){Q=xui.UI.getCachedData(typeof(Q)=="function"?Q():Q)}}if((typeof(Q)=="function"?(Q=Q()):Q)&&Q.length){for(var P=0,N=Q.length;P<N;P++){if(Q[P].id===O){return Q[P].caption||O}}}return O}),r=function(N,c){return N+(c.unit?" "+c.unit:"")};if(D&&D.get(0)){D=D.last()}switch(j){case"number":case"spin":case"counter":var q=parseFloat(e.value);e.value=(q||q===0)?q:null;G=r(E||f(g,e,l,x),e);var M=J(g,e,"numberTpl");if(M&&G){G=M.replace("*",G)}if(D){D.html(G,false)}break;case"currency":var q=parseFloat((e.value+"").replace(/[^\d.-]/g,""));e.value=(q||q===0)?q:null;G=r(E||f(g,e,l,w),e);var M=J(g,e,"currencyTpl");if(M&&G!==""){G=M.replace("*",G)}if(D){D.html(G,false)}break;case"date":e.value=xui.isDate(e.value)?e.value:xui.isFinite(e.value)?new Date(parseInt(e.value,10)):xui.Date.parse(e.value);G=r(E||f(g,e,l,C),e);if(D){D.html(G,false)}break;case"datetime":e.value=xui.isDate(e.value)?e.value:xui.isFinite(e.value)?new Date(parseInt(e.value,10)):xui.Date.parse(e.value);G=r(E||f(g,e,l,F),e);if(D){D.html(G,false)}break;case"textarea":e.value=e.value||"";G=r(E||f(g,e,l,B),e);if(D){D.html(G,false)}break;case"color":var I=xui.UI.ColorPicker._ensureValue(0,e.value);e.value=e.value?((I!=="transparent"?"#":"")+I):"";G=r(E||f(g,e,l),e);if(e.value){p=xui.UI.ColorPicker.getTextColor(e.value);if(D){D.html(G,false);D.css("color",p);D.parent().css("backgroundColor",e.value)}else{l.color="color:"+p+";";l.bgcolor="background-color:"+e.value+";"}}else{if(D){D.html(G,false);D.css("color","");D.parent().css("backgroundColor","")}else{}}break;case"checkbox":e.value=!!e.value;G=r(e.value+"",e);if(D){D.tagClass("-checked",e.value)}else{l._fi_checkboxCls=e.value?"xuifont-checked xui-uicmd-check-checked":""}break;case"progress":e.value=parseFloat(e.value)||0;e.value=Math.min(Math.max(e.value,0),1);G=r(E||f(g,e,l,A),e);if(D){D.first().html(G,false);D.width(G)}else{l.progress=G}break;case"listbox":e.value=e.hasOwnProperty("value")?e.value:"";G=r(E||f(g,e,l,u),e);if(D){D.html((G===null||G===undefined)?e.value:G,false)}break;default:e.value=e.hasOwnProperty("value")?e.value:"";G=r(E||f(g,e,l),e);if(D){D.html((G===null||G===undefined)?e.value:G,false)}}e._$tips=e._$tmpcap=G;var o=J(g,e,"disabled"),n=J(g,e,"readonly");if(l){l.cellCls=g.getClass("CELL","-"+j)+(o?(" "+L):"")+(n?(" "+d):"");l.type=j;l.value=e.value;l.caption=G;l.cellStyle=J(g,e,"cellStyle");l.cellClass=J(g,e,"cellClass")}else{if(o){m.parent().addClass(L)}else{m.parent().removeClass(L)}if(n){m.parent().addClass(d)}else{m.parent().removeClass(d)}if(o=h.cellStyle){m.attr("style",m.attr("style")+";"+o)}if(o=h.cellUnclass){m.removeClass(o)}if(o=h.cellClass){m.addClass(o)}}},_prepareItems:function(f,c,w,D){var x=this,e=f.properties,p=e.treeMode,C=f.$px(e.$subMargin),I=f.rowMap2,F=f.rowMap,u=w?F[w]?(F[w]._layer+1):0:0,h=xui.UI.$tag_subId,J=arguments.callee,G=J._id||(J._id=new xui.id()),o=[],E,g,r,j,q,H,n=e.rowOptions,m="display:none";p=!(!p||p=="none");for(var B=0,A=c.length;B<A;B++){j=c[B];if(!j.id||I[j.id]){while(I[r=G.next()]){}j.id="-"+r}else{j.id+=""}if(f.beforePrepareRow&&false===f.boxing().beforePrepareRow(f,j,w,D)){continue}E="-r_"+f.pickSubId("row");j[h]=E;F[E]=j;j._pid=w;j._cells={};j._layer=u;j._tabindex=e.tabindex;j._rowMarkDisplay=(e.selMode=="multi"||e.selMode=="multibycheckbox")?"":m;j._treeMode=p?"":m;j._rowNumbDisplay=e.rowNumbered?"":m;r={id:j.id};r.rowCls="";if(j.disabled){r.rowCls+=" xui-uicell-disabled"}if(j.readonly){r.rowCls+=" xui-ui-readonly"}if(j.group){r.group=1;r.rowCls+=" "+f.getClass("CELLS1","-group")+" xui-uiborder-r xui-uiborder-light"}var K=j.rowFilter||n.rowFilter||f.$rowFilter;if(K){j.hidden=!!K(j,f)}if(j.hidden){r.rowDisplay=m}r._row0DfW=e.rowHandlerWidth?("width:"+f.$forceu(e.rowHandlerWidth)):"";r._rulerW="width:"+(j.rulerWidth||f.$forceu(4+u*C));r._rowHeight=f.$forceu(j._rowHeight||j.height||e.rowHeight,"em");j._rowHeight=r._rowHeight;r._rowHeight="height:"+r._rowHeight;r.rowHandlerDisplay=e.rowHandler?"":m;r.rowDDDisplay=(("rowResizer" in j)?j.rowResizer:e.rowResizer)?"":m;r.firstCellStyle=j.firstCellStyle||n.firstCellStyle||"";r.firstCellClass=j.firstCellClass||n.firstCellClass||"";g=r.cells=[];r[h]=E;r._fi_togglemark=j.sub?("xui-uicmd-toggle"+(j._checked?" xuifont-checked xui-uicmd-toggle-checked":"")):(e.togglePlaceholder?"xui-icon-placeholder":"xui-uicmd-none");I[j.id]=E;if(!j.hasOwnProperty("caption")&&j.hasOwnProperty("value")){j.caption=""+j.value}j._oValue=j.value;if(j.caption&&!j.tips){j._$tips=j.caption}xui.UI.adjustData(f,j,r);r.tagCmds=xui.clone(r.tagCmds||n.tagCmds||e.tagCmds);if(r.tagCmds){this._prepareCmds(f,r,function(l){return !l.tag||!!l.tag.match(/\brow\b/)})}if(j.group){j.cells=null}if((q=j.cells)){xui.arr.each(e.header,function(L,l){H=f.box._parepareCell(f,q[l],j,L,D,r,l);q[l]=H[0];g.push(H[1])})}var d={};xui.merge(d,r,function(L,l){return xui.isNumb(L)||xui.isStr(L)||l=="ltagCmds"});d[xui.UI.$tag_subId_c]=r[xui.UI.$tag_subId];r._handler_cell=xui.clone(d);if(e.treeMode=="infirstcell"){if(j.group){r._firstcell_grp=xui.clone(d)}r._rulerW=r._fi_togglemark="";r._treeMode=r.tMarkDisplay=r.tNumbDisplay=r._ltagDisplay=m;r.ltagCmds=null}o.push(r)}return o},_adjustCell:function(f,c,h){var d=this,j=f.properties,e=c._col,g;if(g=d.getCellOption(f,c,"cellRenderer")){c._renderer=g}xui.UI.adjustData(f,c,h);if(!h._cellWidth){h._cellWidth=e._colWidth}h._tabindex=j.tabindex;h.cellDisplay=e.hidden===true?"display:none;":"";d._renderCell(f,c,h);c._oValue=c.value;if("unit" in c){c._oUnit!=c.unit}},_setSub:function(j,C,A,B,n,u){var w=j.domId,d=j.boxing(),g=j.properties,o=j.rowMap2[C.id],e=j.box._getToggleNode(j,o),x=j.getSubNodes(["SUB1","SUB2"],o),h=xui(x.get(0)),f=xui(x.get(1));if(xui.Thread.isAlive(j.key+j.id)){return}if(!A){if(C._checked){if(d.beforeFold&&false===d.beforeFold(j,C)){return}var c=function(){x.css({display:"none",height:0,overflow:""});e.tagClass("-checked",false);C._checked=false;if(g.dynDestory||C.dynDestory){var G=C.sub,r=[];for(var F=0,E=G.length;F<E;F++){r.push(G[F].id)}j.boxing().removeRows(r);C.sub=true;delete C._inited}if(d.afterFold){d.afterFold(j,C)}xui.resetRun(w,function(H){j.box._asy(j);delete j.$allrowscache1;delete j.$allrowscache2;j.box._adjustBody(j,"foldrow");if(H){xui.tryF(H,[j,C],d)}},0,[u])};if(!n){if(g.animCollapse){x.css("overflow","hidden");x.animate({height:[f.height(),0]},null,c,200,null,"expoOut",j.key+j.id).start()}else{c()}}else{c()}}if(B&&C.sub&&!g.dynDestory&&!C.dynDestory){xui.arr.each(C.sub,function(r){if(r.sub&&r.sub.length){j.box._setSub(j,r,A,B,true,u)}})}}else{if(!C._checked){if(d.beforeExpand&&false===d.beforeExpand(j,C)){return}var c=function(r){x.css({display:"",height:"auto",overflow:""});if(!h.height()){h.height(f.height())}if(xui.browser.ie&&xui.browser.ver<=8){e.css({backgroundImage:"",backgroundRepeat:"",backgroundPositionX:"",backgroundPositionY:"",backgroundColor:"",backgroundAttachment:""})}else{e.removeClass("xui-icon-loading")}if(!r){C._checked=true;if(d.afterExpand){d.afterExpand(j,C)}}xui.resetRun(w,function(E){j.box._asy(j);delete j.$allrowscache1;delete j.$allrowscache2;j.box._adjustBody(j,"expandrow");if(E){xui.tryF(E,[j,C],d)}},0,[u])},D=function(G,P,F,J,I,H,N,r){var O=G.boxing(),E=G.properties,M=r===false;if(!M&&!P._inited){delete P.sub;P._inited=true;if(r){if(typeof r=="string"){H.html(P.sub=r,false);N.addClass("xui-uiborder-r xui-uiborder-b xui-uiborder-light")}else{if(r["xui.Template"]||r["xui.UI"]){H.append(P.sub=r.render(true));N.addClass("xui-uiborder-r xui-uiborder-b xui-uiborder-light")}else{if(xui.isArr(r)){O.insertRows(r,P.id);if(!P.sub){P.sub=r}}}}var Q=0,L=O.getUIValue(true);if(L&&L.length){xui.arr.each(r,function(R){if(xui.arr.indexOf(L,R.id||R)!=-1){Q=1;return false}});if(Q){O._setCtrlValue(O.getUIValue())}}}}if(!M){J.tagClass("-checked")}if(!n){N.css("height","0px").css("display","");if(E.animCollapse){var K=0;H.children().each(function(R){K+=R.offsetHeight});N.css("overflow","hidden");N.animate({height:[0,K]},null,function(){c(M)},200,null,"expoIn",G.key+G.id).start()}else{c(M)}}else{c(M)}},m=C.sub,l=function(r){D(j,C,w,e,h,f,x,r)},p;if((p=typeof m)=="string"||p=="object"){l(m)}else{if(j.onGetContent){if(xui.browser.ie&&xui.browser.ver<=8){e.css("background","url("+xui.ini.img_busy+") no-repeat")}else{e.addClass("xui-icon-loading")}var q=j.boxing().onGetContent(j,C,l);if(q||q===false){if(q===true){C._inited=true}l(q)}}}}if(B&&C.sub){xui.arr.each(C.sub,function(r){if(r.sub&&r.sub.length&&!r._checked){j.box._setSub(j,r,A,B,true,u)}})}}},_getCellId:function(c,e,d){if(xui.isNumb(e)){e=xui.get(c.properties.rows,[e,"id"])}if(xui.isNumb(d)){d=xui.get(c.properties.header,[d,"id"])}return xui.get(c.rowMap,[c.rowMap2[e],"_cells",d])},_updCell:function(h,e,w,u,p){var j=h.box,c=h.properties,q=c.dirtyMark,g=q&&c.showDirtyMark,o=xui.absObj.$specialChars,r,f,n,d;if(typeof e=="string"){r=h.cellMap[e]}else{r=e;e=r._serialId}if(!r||!r._row){return}n=r._row.id==j._temprowid;if(!xui.isHash(w)){w={value:w}}w=xui.filter(w,function(B,x,A){A=!o[x.charAt(0)]||x=="_$caption";if(!A){d=d||{};d[x]=B}return A});if(p){if(h.beforeCellUpdated&&false===h.boxing().beforeCellUpdated(h,r,w,n,d)){return}}if(!xui.isEmpty(w)){delete r._$caption;delete r._$tips;delete r._$tmpcap;xui.merge(r,w,"all");f=h.getSubNode("CELLA",e);if("type" in w){var m={};j._adjustCell(h,r,m);f.parent().replace(h._buildItems("rows2.cells",[m]));f=h.getSubNode("CELLA",e)}j._renderCell(h,r,null,f,w);var l=r._editor;if("value" in w){if(!q||u===false){r._oValue=r.value}if("unit" in r){r._oUnit=r.unit}else{if(r.value===r._oValue&&(!("unit" in r)||r._oUnit===r.unit)){if(g){f.removeClass("xui-ui-dirty")}delete r.dirty}else{if(g){f.addClass("xui-ui-dirty")}r.dirty=true}}if(l){l.setValue(r.value,true,"editorini")}}if(("caption" in w)&&xui.isDefined(w.caption)&&l&&l.setCaption){l.setCaption(w.caption,true)}}if(p){if(h.afterCellUpdated){h.boxing().afterCellUpdated(h,r,w,n,d)}}},_ensureValue:function(d,e){if(d.properties.selMode=="multi"||d.properties.selMode=="multibycheckbox"){var c=xui.isArr(e)?e:(e?(""+e):"").split(d.properties.valueSeparator);xui.arr.removeValue(c,this._temprowid);c.sort();return c.join(d.properties.valueSeparator)}else{return e==this._temprowid?null:e}},_sel:function(g,h,m,w,D){var n=g.properties;if(n.activeMode!=h){return}var f=g.getSubId(w),E=h=="cell"?g.cellMap:g.rowMap,q=g.boxing(),o=E[f],G=xui.Event.getKey(D),j=h=="cell"?(o._row.id+"|"+o._col.id):o.id,r=n.selMode;switch(r){case"none":q.onRowSelected(g,o,D,m,0);break;case"multibycheckbox":if(g.keys.MARK){var p=g.getKey(xui.Event.getSrc(D).id||""),c=p==g.keys.MARK;if(!c){q.onRowSelected(g,o,D,m,0);break}}case"multi":var A=q.getUIValue(),d=A?(""+A).split(n.valueSeparator):[],l=1;if(d.length&&(G.ctrlKey||G.shiftKey||n.noCtrlKey)){if(G.shiftKey&&h=="row"){if(g.$firstV._pid!=o._pid){return false}var u=n.rows;if(o._pid){var F=E[o._pid];if(F){u=F.sub}}var B=xui.arr.subIndexOf(u,"id",g.$firstV.id),x=xui.arr.subIndexOf(u,"id",o.id),C;d.length=0;for(C=Math.min(B,x);C<=Math.max(B,x);C++){d.push(u[C].id)}}else{if(xui.arr.indexOf(d,j)!=-1){xui.arr.removeValue(d,j);l=-1}else{d.push(j)}}d.sort();A=d.join(n.valueSeparator);if(q.getUIValue()!=A){q.setUIValue(A,null,null,"click");if(q.get(0)&&q.getUIValue()==A){q.onRowSelected(g,o,D,m,l)}}break}case"single":if(q.getUIValue()!=j){g.$firstV=o;q.setUIValue(j,null,null,"click");if(q.get(0)&&q.getUIValue()==j){q.onRowSelected(g,o,D,m,1)}}break}},_activeCell:function(e,g){if(e.properties.activeMode!="cell"){return}if(e.$activeCell==g){return}var c=null;if(e.$activeCell){xui(e.$activeCell).tagClass("-active",false);delete e.$activeCell}if(g!==false){var d=e.getSubId(g),f=e.cellMap;c=f[d];if(e.beforeCellActive&&(false===e.boxing().beforeCellActive(e,c))){return}xui(e.$activeCell=g).tagClass("-active")}if(e.afterCellActive){e.boxing().afterCellActive(e,c)}},_activeRow:function(f,h){if(f.properties.activeMode!="row"){return}if(f.$activeRow==h){return}var e=null,d;if(f.$activeRow){d=f.getSubId(f.$activeRow);f.getSubNodes(["CELLS1","CELLS2"],d).tagClass("-active",false);delete f.$activeRow}if(h!==false){var c=f.getSubId(h),g=f.rowMap;e=g[c];if(f.beforeRowActive&&(false===f.boxing().beforeRowActive(f,e))){return}d=f.getSubId(f.$activeRow=h);f.getSubNodes(["CELLS1","CELLS2"],d).tagClass("-active")}if(f.afterRowActive){f.boxing().afterRowActive(f,e)}},getCellOption:function(f,c,e){var d=c,g=f.properties;return(d&&d.hasOwnProperty(e)&&xui.isSet(d[e]))?d[e]:(c&&(d=c._row)&&d.hasOwnProperty(e)&&xui.isSet(d[e]))?d[e]:((d=g.rowOptions)&&d.hasOwnProperty(e)&&xui.isSet(d[e]))?d[e]:(c&&(d=c._col)&&d.hasOwnProperty(e)&&xui.isSet(d[e]))?d[e]:((d=g.colOptions)&&d.hasOwnProperty(e)&&xui.isSet(d[e]))?d[e]:((d=g)&&d.hasOwnProperty(e)&&xui.isSet(d[e]))?d[e]:null},_trycheckrowdirty:function(d,c){if(!c||!c._row){return}xui.resetRun(d.key+":"+d.$xid+":"+c._row.id,function(){if(!d.box){return}var f=d.$cellInEditor;if(c._row&&(!f||(f._row&&f._row!=c._row))){var e=false;xui.arr.each(c._row.cells,function(g){if(g._oValue!==g.value||(("unit" in g)&&g._oUnit!==g.unit)){e=true;return false}});if(e&&c._row.id!=d.box._temprowid&&d.onRowDirtied){d.boxing().onRowDirtied(d,c._row)}}},100)},_adjusteditorW:function(e,c,d){if(c){c.each(function(g,f){if(!(f=g.id)){return}f=f.split(":")[2];if(f=e.cellMap[f]){if(f._editor){f._editor.setWidth(d+2)}}})}},_adjusteditorH:function(e,d,c){d.each(function(h,g){if(!(g=h.id)){return}g=g.split(":")[2];if(g=e.rowMap[g]){g=g.cells;for(var f in g){f=g[f];if(f._editor){f._editor.setHeight(e.$addpx(c,1,f._editor.getRootNode()))}}}})},_editCell:function(n,L,ag){var P=typeof L=="string"?(n.cellMap[L]||n.cellMap[n.cellMap2[L]]):L;if(!P){return}L=P._serialId;var p=n.box,N=function(h){return p.getCellOption(n,P,h)};if(N("disabled")||N("readonly")||!N("editable")){return}var c,Z=this,J=n.properties,ah=N("type")||"input",r=P._col,l=r.id,F=P._row,W=F.id,Y=W==n.box._temprowid,T=N("editMode"),E=T=="inline"||(N("type")=="dropbutton"),m=n.getSubNode("SCROLL"+F._region+r._region),S=n.getSubNode("CELL",L),A=J.treeMode=="infirstcell"&&n.getSubNode("ROWTOGGLE",L);if(A&&(A.isEmpty()||!A.get(0).clientWidth)){A=null}if(!E){c=n.$curEditor;if(c){xui.tryF(c.undo,[],c)}c=null}if(E&&P._editor){P._editor.activate();return}else{if(ah=="checkbox"||ah=="button"){n.getSubNode("CELLA",L).focus();return}}if((c=N("customEditor"))&&typeof c.iniEditor=="function"){c.iniEditor(n,P,S);xui.tryF(c.activate,[],c);if(n.onBeginEdit){n.boxing().onBeginEdit(n,P,c,"cell")}}else{if(n.beforeIniEditor){c=n.boxing().beforeIniEditor(n,P,S,m,"cell");if(c===false){return}}if(ah=="label"){n.getSubNode("CELLA",L).focus();return}if(!c||!c["xui.UI"]){var O=N("editorAutoPop"),B=N("editorCacheKey"),f=N("editorProperties"),K=N("editorCC"),w=N("editorCS"),x=N("editorEvents"),H=N("editorFormat"),af=N("editorMask"),D=N("editorReadonly"),d=N("editorHAlign"),V=N("editorDropListWidth"),ab=N("editorDropListHeight"),e=N("editorCommandBtn"),aa,ac;if(!E){if(B&&n.$cache_editor[B]){c=n.$cache_editor[B]}if(c&&(!c.get(0)||c.isDestroyed())){c=nulll}}if(!c){var U={dirtyMark:false,cachePopWnd:false,left:-1000,top:-1000,position:"absolute",visibility:"hidden",zIndex:100};if(E){xui.merge(U,{left:0,top:0,cachePopWnd:true,width:n.$px(P._col._colWidth)+2,height:n.$px(P._row._rowHeight)+1,visibility:"visible",zIndex:100},"all")}c=new xui.UI.ComboInput(U)}switch(ah){case"number":case"spin":case"counter":case"currency":c.setType(ah);xui.each(xui.toArr("precision,increment,min,max,maxlength,currencyTpl,numberTpl,groupingSeparator,decimalSeparator,forceFillZero,trimTailZero,unit,units"),function(ai,h){v=N(ai);if(ah=="currency"){if(ai=="precision"&&!v){v=2}}else{if(ai=="precision"&&!v){v=0}if(ai=="increment"&&!v){v=1}}if(xui.isSet(v)){c["set"+xui.str.initial(ai)](v)}});break;case"progress":c.setType("spin").setMax(1).setMin(0).setPrecision(4).setIncrement(0.01);break;case"input":c.setType("none");break;case"textarea":c.setType("none").setMultiLines(true).setCommandBtn("save").onCommand(function(h){h.boxing().hide()});if(!E){xui.tryF(c.setResizer,[true],c)}break;case"date":case"datetime":var G=N("dateEditorTpl");if(G){c.setDateEditorTpl(G)}case"listbox":case"combobox":case"helpinput":case"time":case"color":case"getter":case"popbox":case"dropbutton":case"cmdbox":c.setType(ah);if(n.box.getCellOption(n,P,"disabled")){}else{c.beforeComboPop(function(ai,am,ak,al){var h=ai.$cell,aj=n.box.getCellOption(n,h,"event");if(typeof aj=="function"){return aj.call(n._host||n,n,h,ai,am,ak,al)}else{return n.boxing().beforeComboPop(n,h,ai,am,ak,al)}});if(n.beforePopShow){c.beforePopShow(function(h,ai){return n.boxing().beforePopShow(n,h.$cell,h,ai)})}if(n.afterPopShow){c.afterPopShow(function(h,ai){return n.boxing().afterPopShow(n,h.$cell,h,ai)})}if(ah=="popbox"||ah=="cmdbox"||ah=="getter"||ah=="dropbutton"){if(n.onEditorClick){c.onClick(function(ai,aj,ak,h){return n.boxing().onEditorClick(n,ai.$cell,ai,h,ak)})}}}break;case"file":c.setType(ah);break}if(n.onCommand){c.onCommand(function(h,aj,ai){return n.boxing().onCommand(n,h.$cell,h,aj,ai)})}if(E){S.append(c);P._editor=c}else{m.append(c)}if(!E&&B){n.$cache_editor[B]=c}if(c.setInputReadonly&&D){c.setInputReadonly(true)}if(c.setDropListWidth&&V){c.setDropListWidth(V)}if(c.setDropListHeight&&ab){c.setDropListHeight(ab)}if(c.setHAlign&&d){c.setHAlign(d)}if(c.setCommandBtn&&e){c.setCommandBtn(e)}if(H){if(typeof H=="function"&&c.beforeFormatCheck){c.beforeFormatCheck(H)}else{if(typeof H=="string"&&c.setValueFormat){c.setValueFormat(H)}}}if(af&&c.setMask){c.setMask(af)}if(f){ac={};var ae=n.getProperties();xui.each(f,function(ai,h){ac=ae[h]});c.setProperties(f)}if(K){c.setCustomClass(xui.clone(K,2))}if(w){c.setCustomStyle(xui.clone(w,2))}if(x){c.setEvents(x)}if(!E){c.resetValue()}switch(ah){case"listbox":case"combobox":case"helpinput":if(aa=N("editorListItems")){c.setListKey(null);c.setItems(typeof(aa)=="function"?aa():aa)}else{if(aa=N("editorListKey")){c.setItems(null);c.setListKey(typeof(aa)=="function"?aa():aa)}}break}c.setValue(P.$editorValue||P.value,true,"editorini");delete P.$editorValue;if(c.setCaption){if(f&&("caption" in f)&&xui.isDefined(f.caption)){c.setCaption(f.caption,true)}else{if(ah=="cmdbox"||ah=="popbox"||ah=="button"||ah=="dropbutton"){c.setCaption(P.caption||P._$tmpcap||"",true)}}}if(P.$tag){if(c.setCaption){c.setCaption(P.$tag)}else{if(c.setValue){c.setValue(P.$tag,null,"editortag")}}}c.get(0).$cell=P;c.get(0)._smartnav=true;c.undo=E?null:function(ai){var ak=this;ak.undo=null;if(n.box){n.box._trycheckrowdirty(n,n.$cellInEditor)}if(ak.get(0)&&ak.get(0).box){ak.getSubNode("INPUT").onBlur(true);if(ai&&xui.str.endWith(T,"sharp")){P._ignorefocus=1;n.boxing().focusCell(n.$cellInEditor);xui.asyRun(function(){delete P._ignorefocus})}ak.getRoot().setBlurTrigger(n.$xid+":editor");if(n.properties&&!n.properties.directInput){ak.beforeUnitUpdated(null).afterUIValueSet(null).beforeNextFocus(null).onCancel(null).afterPopHide(null);ak.setValue("",true,"editorreset")}if(H){if(ak.beforeFormatCheck){ak.beforeFormatCheck(null)}if(ak.setValueFormat){ak.setValueFormat("")}}if(af){if(ak.setMask){ak.setMask("")}}if(D){if(ak.setInputReadonly){ak.setInputReadonly(false)}}if(V){if(ak.setDropListWidth){ak.setDropListWidth(0)}}if(ab){if(ak.setDropListHeight){ak.setDropListHeight(0)}}if(ac){ak.setProperties(ac);ac=null}delete ak.get(0).$cell;delete ak.get(0)._smartnav;ak.hide();if(xui.isFun(ak.collapse)){ak.collapse()}}if(x){var aj={};xui.each(x,function(al,h){aj[h]=null});ak.setEvents(aj)}n.$curEditor=null;n.$cellInEditor=null;if(n.onEndEdit){n.boxing().onEndEdit(n,P,ak,"cell")}if(!B&&ak.get(0)){ak.destroy(true)}ak=null};c.beforeUnitUpdated(function(ai,h){if(n.beforeUnitUpdated&&false===n.boxing().beforeUnitUpdated(n,P,ai,h)){return false}n.box._updCell(n,P,{value:P.value,unit:h},n.properties.dirtyMark,true)}).afterUIValueSet(function(ao,al,aj,an,ai){var am=N("type"),h;switch(am){case"number":case"spin":case"counter":case"progress":aj=parseFloat(aj);aj=(aj||aj===0)?aj:null;break;case"currency":aj=parseFloat((""+aj).replace(/[^\d.-]/g,""));aj=(aj||aj===0)?aj:null;break;case"cmdbox":case"button":case"dropbutton":case"popbox":case"combobox":case"listbox":case"helpinput":h=ao.boxing().getShowValue();break}var ak={value:aj};if(xui.isDefined(h)){ak._$caption=h}if(ao.properties.hasOwnProperty("tagVar")&&!xui.isEmpty(ao.properties.tagVar)){ak.tagVar=ao.properties.tagVar}if(false!==(n.beforeEditApply&&n.boxing().beforeEditApply(n,P,ak,c,ai,"cell"))){Z._updCell(n,L,ak,n.properties.dirtyMark,true);if(xui.str.endWith(T,"sharp")&&am!="spin"&&am!="counter"){xui.tryF(c.undo,[true],c)}}}).beforeNextFocus(function(aj,ai){if(c.undo){xui.tryF(c.undo,[true],c)}var h=xui.Event.getEventPara(ai);if(h.key=="enter"){h.$key="right"}n.getSubNode("CELLA",P._serialId).onKeydown(true,h);return false}).onFileDlgOpen(function(h,ai){if(n.onFileDlgOpen){n.boxing().onFileDlgOpen(n,P,h,ai)}});if(!E){c.onCancel(function(){if(c){xui.tryF(c.undo,[],c)}}).afterPopHide(function(aj,ai,h){if(xui.str.endWith(T,"sharp")){xui.tryF(c.undo,[h!="blur"&&h!="call"],c)}}).getRoot().setBlurTrigger(n.$xid+":editor",function(){if(c){xui.tryF(c.undo,[],c)}return false});var X=S.offset(null,m),q=S.cssSize(),C=A?A.offset(null,S):null,R=A?A.width():null;if(C){C.left+=R}if(A&&(C.left>q.width-8)){return}if(ah=="textarea"){c.setWidth(Math.max(200,q.width-(A?C.left:0)+3)).setHeight(Math.max(100,q.height+2)).reLayout(true,true).reBoxing().popToTop(S,4,m)}else{c.setWidth(q.width-(A?C.left:0)+3).setHeight(q.height+2).reLayout(true);c.reBoxing().show((X.left+(A?C.left:0)-1)+"px",(X.top-1)+"px")}var j,Q=ah=="cmdbox"||ah=="cmdbox"||ah=="listbox"||ah=="file",I=Q||ah=="date"||ah=="time"||ah=="datetime"||ah=="color",o=c.getInputReadonly&&c.getInputReadonly(),u=xui.str.endWith(T,"sharp")&&(O||o||I);if(xui.isFun(c.expand)&&O!==false&&(u||((xui.str.endWith(T,"sharp")||T=="focus")&&(O||Q)))){j=1;c.expand(S)}c.get(0).$editMode=T;if(!E){c.setVisibility(u?"hidden":"visible")}if(!xui.str.startWith(T,"hover")||!ag){xui.asyRun(function(){if(!n.box){return}var h=c;if(h.get(0)&&h.get(0).box){if(j&&c.getPopWnd){h=c.getPopWnd()}if(h){xui.tryF(h&&h.activate,[],h);h.get(0)._stopmouseupcaret=1}}})}else{var g=function(){if(c){c.getRoot().onMouseout(null,"tg-hover-edit")}},M=function(){if(c){c.getRoot().onMouseout(function(){if(c){xui.tryF(c.undo,[],c)}},"tg-hover-edit")}},ad=function(){};c.onFocus(g).beforePopShow(function(h,ai){g();c.onBlur(null);if(n.beforePopShow){return n.boxing().beforePopShow(n,h.$cell,h,ai)}}).afterPopHide(function(){M();c.onBlur(ad)}).onBlur(ad);if(!j){xui.tryF(c&&c.activate,[],c)}}}if(n.onBeginEdit){n.boxing().onBeginEdit(n,P,c,"cell")}}}if(!E){n.$curEditor=c;n.$cellInEditor=P}if(Y){n.__needchecktmprow=true;n.box._sethotrowoutterblur(n)}},_adjustBody:function(d,c,e){if(!d.renderId||d.destroyed){return}xui.resetRun(d.$xid+"4",function(){if(!d.renderId||d.destroyed){return}var g=d.properties,x=xui.$us(g),T=function(l,w){return d.$forceu(l,x>0?"em":"px",w)},K=d.getSubNode("BORDER").cssSize(),O=d.$px(K.width),L=d.$px(K.height),G=g.rowHandler?(d.$px(g.rowHandlerWidth)+2):0,C,r=d.getSubNode("HEADER1"),p=d.getSubNode("HEADER2"),S=d.getSubNode("BODY12"),h=d.getSubNode("BODY21"),n=d.getSubNode("SCROLL11"),m=d.getSubNode("SCROLL12"),N=d.getSubNode("SCROLL21"),J=d.getSubNode("SCROLL22"),M=p.height(),u=S.height();if(g.freezedColumn){xui.arr.each(g.header,function(l,w){if(w==g.freezedColumn){return false}if(!l.hidden){G+=d.$px(l.width)+2}})}if(u&&g.freezedRow){u-=1}if(G&&g.freezedColumn){G-=1}C=O-G;d._leftregionw=G;p.width(T(C));J.width(T(C));xui.asyRun(function(){h.css("padding-bottom",(J.isScrollBarShowed("x")?xui.Dom.getScrollBarSize():0)+"px");N.scrollTop(J.scrollTop());if(g.freezedRow){S.css("padding-right",(J.isScrollBarShowed("y")?xui.Dom.getScrollBarSize():0)+"px");m.scrollLeft(J.scrollLeft())}},100);n.height(u?T(u):0);m.height(u?T(u):0);N.height(T(L-M-u));J.height(T(L-M-u));n.css("display",u&&d._leftregionw?"":"none");m.css("display",u?"":"none");N.css("display",d._leftregionw?"":"none");J.css("overflow","hidden");var q=d.box._adjustRelWith(d);var F=d.getSubNode("ROWS22"),Q=d.getSubNode("HCELLS2"),E=d.properties.header,f=d.getSubNode("SCROLL22"),H,P,A,I=d.keys,U,R;if(F.get(0).clientHeight){if(Q.get(0).clientHeight){if(H=Q.get(0).childNodes){P=H.length;while(P){if(H[P-1].clientHeight){A=H[P-1];break}--P}}U=A?(A.offsetWidth+A.offsetLeft+100):0;Q.parent().width(T(U));F.width(T(R=U))}else{if(H=F.get(0).childNodes){P=H.length;while(P){if(H[P-1].clientHeight){A=H[P-1];break}--P}if(A){var j=d.getSubId(A.id);H=d.getSubNode("CELLS2",j);if(H=H.get(0).childNodes){P=H.length;while(P){if(H[P-1].clientHeight){A=H[P-1];break}--P}}}}}}if(A){F.width(T(R=A.offsetLeft))}else{var g=d.properties,o=g.header,B=g.rows,D=0;xui.each(o,function(l){if(l.hidden!==true){D+=("_colWidth" in l)?d.$px(l._colWidth):(d.$px(l.width)+2)}});F.width(T(R=D))}H=A=null;f.css("overflow","auto");if(R>f.width()+2){q="auto"}f.css("overflowX",q);f.onScroll();if(d.onBodyLayout){d.boxing().onBodyLayout(d,c)}if(e){e()}})},_adjustHeader:function(d){var e=xui.copy(d),c;xui.arr.each(e,function(g,f){e[f]=xui.copy(g)});return e},_adjustGrpColsData:function(g,p){if(!xui.isArr(p)){return xui.copy(p)}var c=g.properties,n=c.header,u=n.length,r=(u+"").length,e=xui.UI.$tag_subId,w=xui.copy(p,function(j){j.from=parseInt(j.from,10)||0;j.to=parseInt(j.to,10)||0;return j.from<=u&&j.to<=u&&j.to>=j.from});xui.arr.each(w,function(m,j){w[j]=xui.isHash?xui.copy(m):{}});xui.arr.stableSort(w,function(j,m){return j.from>m.from?1:j.from==m.from?(j.to>m.to?-1:j.to==m.to?0:1):-1});for(var h=0,f=w.length,x;h<f;h++){x=w[h];x[e]=x[e]||("-g_"+g.pickSubId("grpCol"));x.id=x.id||x[e];if(!x.caption){x.caption=x.id}x._isgroup=1;delete x._grp;g.colMap[x[e]]=x;g.colMap2[x.id]=x[e]}xui.arr.each(w,function(B,A){for(var m=0;m<A;m++){if(w[A]["to"]>w[m].from&&w[A].from<w[m]["to"]){if(w[A]["to"]>w[m]["to"]){w[A]["to"]=w[m]["to"]}(w[A]._grp||(w[A]._grp=[])).push(w[m].id)}}});xui.arr.each(n,function(j){delete j._grp});var q=0;for(var h=0,f=w.length,x,d;h<f;h++){x=w[h];for(var l=x.from;l<=x.to;l++){d=n[l];(d._grp||(d._grp=[])).push(x.id);if(!x._layer){x._layer=d._grp.length}q=Math.max(q,x._layer)}}g._headerLayers=q;return w},_adjustRows:function(g,d){var e,c,f={};xui.arr.each(g.properties.header,function(j,h){f[j.id||j]=h});if(xui.isArr(d)&&d.length&&typeof d[0]!="object"){e=[d]}else{e=xui.copy(d)}xui.arr.each(e,function(l,j){if(xui.isArr(l)){e[j]={cells:l}}else{e[j]=xui.copy(l)}if(!l.group&&(!e[j].cells||!xui.isArr(e[j].cells))){var h=[];xui.each(e[j],function(m,n){if(n in f){h[f[n]]=xui.isHash(m)?m:{value:m}}});e[j]={cells:h}}c=e[j].cells=xui.copy(e[j].cells);xui.arr.each(c,function(n,m){if(!!n&&xui.isHash(n)){c[m]=xui.copy(n)}else{c[m]={value:n}}})});return e},_adjustColsWidth:function(h){var d=h.properties,r=d.header,u=d.grpCols;if(d.showHeader){if(u&&xui.isArr(u)&&u.length){var C,l,x,w=false,c,B=0;for(var q=0,g=u.length,A,f;q<g;q++){l=x=0;w=false;A=u[q];C=0;for(var p=0,e;p<=A.to;p++){e=r[p];c=h.$px(e._colWidth,null,true);if(d.freezedColumn&&d.freezedColumn==p&&!B){B=C}if(p===A.from){w=true;l=C}C+=c+2;if(w&&!e.hidden){x+=c+2}}f=h.getSubNode("HCELL",A._serialId);if(x>2){f.css({display:"",left:h.$forceu(l-(d.freezedColumn?(A.to>d.freezedColumn-1?B:(d.rowHandler?-(h.$px(d.rowHandlerWidth)+2):0)):0)),width:h.$forceu(x-2)})}else{f.css({display:"none"})}if(d.freezedColumn&&d.rowHandler&&A._shadow){f=h.getSubNode("HSCELL",A._serialId);if(x>2){f.css({display:"",left:h.$forceu(l+(h.$px(d.rowHandlerWidth)+2)),width:h.$forceu(x-2)})}else{f.css({display:"none"})}}}}}},_adjustColsHeight:function(j,e){var c=j.colMap,p=j.colMap2,B=j._headerLayers,u=j.properties.headerHeight,o=j.$px(u,0,true),w=j.$px(j.box.$DataModel.headerHeight.ini,0,true)*(B+1),q,n,d,g,m,x,A,f,r;if(e||o<w){o=w}j.getSubNodes(["HCELLS1","HCELLS2","GRPCELLBOX1","GRPCELLBOX2"]).height(j.$px2em(o)+"em");r=j.$px2em(o-2)+"em";j.getSubNode("FHCELL").css({height:r});if(!B){j.getSubNode("HCELL",true).css({height:r})}else{d=o/(B+1);j.getSubNode("HCELL",true).each(function(l){g=j.getSubId(l.id);if(g=c[g]){if(g&&g._isgroup){A=0;for(var h in c){q=c[h];if(q._isgroup&&q._layer<g._layer&&q.from<=g.to&&q.to>=g.from){A+=j.$px(q.height||d)}}xui(l).top(j.$px2em(A)+"em");x=j.$px(g.height||d)}else{if(g._grp&&(n=g._grp.length)){f=0;for(var h=0;h<n;h++){if(q=p[g._grp[h]]){f+=j.$px(c[q].height||d)}}x=o-f}else{x=o}}xui(l).height(j.$px2em(x-2)+"em");if(g&&g._isgroup&&g._shadow){l=j.getSubNode("HSCELL",g._serialId);xui(l).top(j.$px2em(A)+"em");xui(l).height(j.$px2em(x-2)+"em")}}})}},_focuscell:function(g,m,c){if(g.properties.disabled||g.properties.readonly){return}if(!xui.use(c).get(0)){return}if(!g.$_ensureOnce){g.$_ensureOnce=1;xui.asyRun(function(){g.$_ensureOnce=0})}else{return}var f=g.properties,j=g.box,h=j.getCellOption,q=g.cellMap[g.getSubId(c)],l=f.activeMode,d;if(q&&q._ignorefocus){return}if(q){var o=false,n=h(g,q,"type");if(h(g,q,"editable")){if(h(g,q,"disabled")||h(g,q,"readonly")){o=false}else{o=true;if((h(g,q,"editMode")=="inline"&&n!=="label")||n=="dropbutton"){if(q._editor){q._editor.activate()}}else{j._editCell(g,q._serialId);xui(c).parent().tagClass("-active",false);xui.asyRun(function(){if(!g.box){return}xui.use(c).parent().onMouseout(true,{$force:true}).parent().onMouseout(true,{$force:true})})}}}if(!o){if(q&&l=="cell"){d=xui.use(c).parent().id();j._activeCell(g,d)}}else{if(q&&l=="cell"){j._activeCell(g,false)}}}else{var r=g.rowMap[g.getSubId(c)];if(h(g,r,"editable")){if(h(g,r,"disabled")||h(g,r,"readonly")){}else{g.boxing().editFirstCell(r)}}}if(l=="row"){d=xui.use(c).parent(2).id();j._activeRow(g,d)}},_getToggleNode:function(c,d){return c.getSubNode("ROWTOGGLE",d)},_showTips:function(g,f,j){if(g.properties.disableTips){return}if(g.onShowTips){return g.boxing().onShowTips(g,f,j)}if(!xui.Tips){return}var l=g.keys,m,d,c,h,e;if(g.properties.disabled){return}c=f.id;h=xui.get(f,["parentNode","id"])||"";e=xui.get(f,["parentNode","parentNode","id"])||"";d=g.getSubId(c);if(c.indexOf(l.FHCELL)==0||h.indexOf(l.FHCELL)==0||e.indexOf(l.FHCELL)==0){m={tips:g.properties.tips}}else{if(c.indexOf(l.FCELL)==0||h.indexOf(l.FCELL)==0){m=g.rowMap[d]}else{if(c.indexOf(l.HCELL)==0||c.indexOf(l.HSCELL)==0||h.indexOf(l.HCELLA)==0){m=g.colMap[d]}else{if(c.indexOf(l.CELL)==0||h.indexOf(l.CELLA)==0){m=g.cellMap[d]}}}}if(m){xui.Tips.show(j,("tips" in m)?m.tips:(m._$tips||m.caption));return false}else{return true}},_adjustRelWith:function(d){var c=d.properties,u,q=d.colMap,o=d.getSubNode("SCROLL22"),m=d.getSubNode("BODY22"),B=o.width(),F=0,f=0;d.getSubNodes("HCELL",true).each(function(l){if(l.clientHeight){F=l.offsetWidth-d.$px(l.style.width);return false}});var g=0,A=0,x=[],n=[],j;xui.each(d.colMap,function(l){if(l.hidden||l._isgroup){return}if(l._region==1){return}if(!l.flexSize){g+=d.$px(l.width)}else{A+=d.$px(l.width);x.push(l);n.push(l)}f++});var h=d.getSubNode("LHCELL").get(0).clientWidth||0;d.getSubNodes("LCELL",true).each(function(l){if(l.children.length){h=Math.max(h,l.clientWidth)}});d.__lcellW=h;if(!x.length){j="auto";d.box._adjustColsWidth(d);return}else{j="hidden";if(o.isScrollBarShowed("y")){B-=xui.Dom.getScrollBarSize()}}B-=d.__lcellW;while(x.length&&B!=g+f*F){var G=B-(g+f*F),H=0,r,C=x.length,E=0;for(var D=C-1;D>=0;D--){var e=x[D],p=D===0?(G-H):Math.round(G*(d.$px(e.width)/A));if(p<0){p=0}u=p;if(e.hasOwnProperty("minWidth")){if((r=d.$px(e.minWidth))>p){g+=r;u=r;xui.arr.removeFrom(x,D);E++}}if(e.hasOwnProperty("maxWidth")){if((r=d.$px(e.maxWidth))<p){g+=r;u=r;xui.arr.removeFrom(x,D);E++}}e._colWidth=d.$forceu(u);H+=u}if(E===0||E===C){break}}d.box._adjustColsWidth(d);if(n.length){xui.arr.each(n,function(w){var I,l=[];xui.each(w._cells,function(J){I=d.getSubNode("CELL",J);if(I._nodes.length){l.push(I.get(0))}});I=d.getSubNode("HCELL",w._serialId);if(I._nodes.length){l.push(I.get(0))}d.box._adjusteditorW(d,xui(l).width(w._colWidth),d.$px(w._colWidth))})}return j},_getRow:function(f,g,e){if(g){if(e=="data"){return xui.clone(g,true)}else{if(e=="min"){var c=[];xui.each(g.cells||g,function(h,l){c[l]=("value" in h)?h.value:h});return c}else{if(e=="map"){var j=f.properties.header,d={};xui.each(g.cells||g,function(h,l){d[j[l].id]=("caption" in h)&&xui.isDefined(h.caption)?{caption:h.caption,value:("value" in h)?h.value:h}:("value" in h)?h.value:h});return d}else{return g}}}}},$cancelHoverEditor:function(d){if(xui.str.startWith(xui.get(d,["$curEditor","_nodes",0,"$editMode"])||"","hover")){var c=d.$curEditor;xui.tryF(c.undo,[],c)}},_onresize:function(d,x,w){var c=d.properties,C=function(f){return d.getSubNode(f)},n=xui.$us(c),E=function(f,F){return d.$forceu(f,n>0?"em":"px",F)},A=d.getRoot(),p=c.rowHandler?(d.$px(c.rowHandlerWidth)+2):0,o,B=C("BORDER"),l=C("HEADER1"),j=C("HEADER2"),D=C("BODY12"),e=C("BODY21"),h=C("SCROLL11"),g=C("SCROLL12"),u=C("SCROLL21"),q=C("SCROLL22"),r=j.height(),m=D.height();x=x?d.$px(x,null,true):x;w=w?d.$px(w,null,true):w;B.cssSize({width:x?E(x):null,height:w?E(w):null});if(x){if(c.freezedColumn){xui.arr.each(c.header,function(f,F){if(F==c.freezedColumn){return false}if(!f.hidden){p+=d.$px(f.width)+2}})}if(m&&c.freezedRow){m-=1}if(p&&c.freezedColumn){p-=1}o=x-p;d._leftregionw=p;j.width(E(o))}if(w){h.height(m?E(m):0);g.height(m?E(m):0);u.height(E(w-r-m));q.height(E(w-r-m));h.css("display",m?"":"none");g.css("display",m?"":"none")}if(x){h.css("display",d._leftregionw?"":"none");u.css("display",d._leftregionw?"":"none")}if(d.$forceRelayout){this._adjustColsWidth(d);this._adjustColsHeight(d)}this._adjustBody(d,"resize")}}});Class("xui.UI.Dialog","xui.UI.Widget",{Instance:{showModal:function(d,f,e,g,c){this.show(d,true,f,e,g,c)},show:function(d,e,g,f,h,c){d=d||xui("body");return this.each(function(n){if(n.inShowing){return}var m,q=n.properties,o=xui.$us(q),l=n.boxing();switch(q.initPos){case"auto":if(xui.isHash(g)){f=g.top;g=g.left}else{f=(f||f===0)?f:n.$px(q.top);g=(g||g===0)?g:n.$px(q.left)}break;case"center":if(xui.isHash(g)){f=g.top+(g.height-n.$px(q.height))/2;g=g.left+(g.width-n.$px(q.width))/2}else{var r=d.get(0)==xui("body").get(0)?xui.win:(d["xui.UI"]?d.getRoot():d);f=(f||f===0)?f:Math.max(0,(r.height()-n.$px(q.height))/2+r.scrollTop());g=(g||g===0)?g:Math.max(0,(r.width()-n.$px(q.width))/2+r.scrollLeft())}break}if(g<0){g=0}if(f<0){f=0}if(q.status=="max"){g=f=0}var j=function(){d.append(l);var x=n.box,u=n.getRoot(),A=function(B,C){return n.$forceu(B,o>0?"em":"px",C)};if(q.iframeAutoLoad||q.ajaxAutoLoad){xui.UI.Div._applyAutoLoad(n)}if((e||q.modal)&&!n.$inModal){x._modal(n)}l.activate();var w=n._$rs_args,p=function(){if(n.onShow){n.boxing().onShow(n)}delete n.inShowing;delete n.$inThread;xui.tryF(h);if(q&&q.activeAnim){xui.asyRun(function(){if(n&&!n.destroyed){l.setActiveAnim(q.activeAnim,true)}})}};if(q.status=="min"){x._min(n,"normal",p,true)}else{if(q.status=="max"){x._max(n,"normal",p,c)}else{xui.UI.$doResize(n,(w&&w[1])||q.width,(w&&w[2])||q.height);u.show(g?A(g):null,f?A(f):null,p,null,c);x._refreshRegion(n)}}};n.inShowing=1;if(m=q.fromRegion){n.$inThread=xui.Dom.animate({border:"solid 1px #555",background:"#888",opacity:0.1},{left:[m.left,g],top:[m.top,f],width:[m.width,n.$px(q.width)],height:[m.height,n.$px(q.height)]},null,j,300,0,"expoIn").start()}else{j()}})},hide:function(c){this.each(function(f){var j=f.properties,g=f.box,h=xui.$us(j),e=f.getRoot();var d=function(){if(f.inHiding){return}f.inHiding=1;if(f.$inModal){g._unModal(f)}if(j.status=="max"||j.status=="min"){var n=j.status;g._restore(f);j.status=n}var m=j.fromRegion,l=function(){delete f.inHiding;delete f.$inThread};if(m){f.$inThread=xui.Dom.animate({border:"solid 1px #555",background:"#888",opacity:0.1},{left:[f.$px(j.left),m.left],top:[f.$px(j.top),m.top],width:[f.$px(j.width),m.width],height:[f.$px(j.height),m.height]},null,l,300,0,"expoOut").start()}else{l()}};e.hide(d,null,c)});return this},close:function(d,c){return this.each(function(g){if(false!==d&&g.beforeClose&&false===g.boxing().beforeClose(g)){return}if(g.inClosing){return}g.inClosing=1;var h=g.properties,f=h.fromRegion,e=function(){g.boxing().destroy(c);delete g.inClosing;delete g.$inThread};if(f){g.$inThread=xui.Dom.animate({border:"solid 1px #555",background:"#888",opacity:0.1},{left:[h.left,f.left],top:[h.top,f.top],width:[h.width,f.width],height:[h.height,f.height]},null,e,300,0,"expoOut").start()}else{e()}})},activate:function(c){var d=this,e=this.get(0),f;e.box._active(e,c);this.getChildren(null,true).each(function(h){if(xui.get(h,["properties","defaultFocus"])){try{xui.asyRun(function(){h.boxing().activate()})}catch(g){}f=1;return false}});xui.asyRun(function(){if(c!==false&&!f){try{e.getSubNode("CAPTION").focus()}catch(g){}}if(d.onActivated){d.onActivated(e)}})},isPinned:function(){return !!xui.get(this.get(0),["properties","pinned"])}},Initialize:function(){var d=this,c=d.getTemplate();xui.merge(c.FRAME.BORDER,{tabindex:"{tabindex}",className:"xui-uiborder-outset xui-uiborder-box xui-uiborder-radius-big",TABSTOP1:{$order:-1},TBAR:{tagName:"div",className:"xui-uibar-top",TBARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-tl",TBARTDLT:{className:"xui-uibar-tdlt"}},TBARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar",TBARTDMT:{className:"xui-uibar-tdmt"}},TBARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-tr",TBARTDRT:{className:"xui-uibar-tdrt"}},BARCMDL:{$order:3,tagName:"div",className:"xui-uibar-cmdl",style:"{_align}",RULER:{className:"xui-ui-ruler"},LTAGCMDS:{tagName:"span",className:"xui-ltag-cmds",style:"{_ltagDisplay}",text:"{ltagCmds}"},ICON:{$order:2,className:"xuicon {imageClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{imageDisplay}",text:"{iconFontCode}"},CAPTION:{tabindex:"{tabindex}",className:"xui-title-node",text:"{caption}",$order:3}},BARCMDR:{$order:4,tagName:"div",className:"xui-uibar-cmdr",RTAGCMDS:{$order:0,tagName:"span",className:"xui-rtag-cmds",style:"{_rtagDisplay}",text:"{rtagCmds}"},INFO:{className:"xuicon",$fonticon:"xui-uicmd-info",style:"{infoDisplay}",$order:2},OPT:{className:"xuicon",$fonticon:"xui-uicmd-opt",style:"{optDisplay}",$order:3},PIN:{$order:4,className:"xuicon",$fonticon:"xui-uicmd-pin",style:"{pinDisplay}"},LAND:{$order:5,className:"xuicon",$fonticon:"xui-uicmd-land",style:"{landDisplay}"},REFRESH:{className:"xuicon",$fonticon:"xui-uicmd-refresh",style:"{refreshDisplay}",$order:6},MIN:{$order:7,className:"xuicon",$fonticon:"xui-uicmd-min",style:"{minDisplay}"},RESTORE:{$order:8,className:"xuicon",$fonticon:"xui-uicmd-restore",style:"display:none;"},MAX:{$order:9,className:"xuicon",$fonticon:"xui-uicmd-max",style:"{maxDisplay}"},CLOSE:{$order:10,className:"xuicon",$fonticon:"xui-uicmd-close",style:"{closeDisplay}"}},TBARTDB:{$order:5,tagName:"div",className:"xui-uibar-tdb xui-uiborder-inset xui-uiborder-radius"}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main xui-uibar",MAINI:{tagName:"div",className:"xui-uicon-maini xui-uibar",PANEL:{tagName:"div",style:"{_panelstyle};{_overflow};",className:"xui-uibar xui-uicontainer",text:"{html}"+xui.UI.$childTag}}},BBAR:{$order:3,tagName:"div",className:"xui-uibar-bottom",BBARTDL:{$order:1,className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-bl"},BBARTDM:{$order:2,className:"xui-uibar-tdm xui-uibar"},BBARTDR:{$order:3,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-br"}},TABSTOP2:{$order:9}},"all");c.$submap=xui.UI.$getTagCmdsTpl();d.setTemplate(c);xui.alert=d.alert;xui.confirm=d.confirm;xui.pop=d.pop;xui.prompt=d.prompt},Static:{Appearances:{KEY:{overflow:"visible"},"TABSTOP1,TABSTOP2":{height:0,width:"16px",display:"inline",position:"absolute"},"TBART, BBART":{"border-spacing":0,"border-collapse":"separate"},MAINI:{"padding-top":".16667em"},PANEL:{position:"relative",overflow:"auto"},CAPTION:{display:"inline","vertical-align":xui.browser.ie6?"baseline":"middle"},BORDER:{position:"relative",outline:0}},Behaviors:{DroppableKeys:["PANEL"],PanelKeys:["PANEL"],DraggableKeys:["LAND"],NoDraggableKeys:["LAND","MIN","MAX","RESTORE","PIN","INFO","OPT","CLOSE","REFRESH","CMD"],HoverEffected:{LAND:"LAND",MIN:"MIN",MAX:"MAX",RESTORE:"RESTORE",PIN:"PIN",INFO:"INFO",OPT:"OPT",CLOSE:"CLOSE",REFRESH:"REFRESH",CMD:"CMD",ICON:"ICON"},ClickEffected:{LAND:"LAND",MIN:"MIN",MAX:"MAX",RESTORE:"RESTORE",PIN:"PIN",INFO:"INFO",OPT:"OPT",CLOSE:"CLOSE",REFRESH:"REFRESH",CMD:"CMD",ICON:"ICON"},onMousedown:function(c,d){if(!c.$inModal){c.box._active(c)}},afterKeydown:function(h,l){var j=xui.Event.getKey(l);if((l.$key||l.keyCode||l.charCode)==9){if(xui.browser.ie){var n="xui::_specialforietab";if(!xui.Dom.byId(n)){xui("body").append("<div style='display:none;position:absolute;' id="+n+"></div>")}xui.Dom.byId(n).innerHTML=xui.stamp()+""}var g=h.getSubNode("TABSTOP1").get(0),f=h.getSubNode("TABSTOP2").get(0),c=xui.Event.getSrc(l),d;if(j.shiftKey){if(c!==g){g.tabIndex=c.tabIndex}f.removeAttribute("tabIndex")}else{if(c!==f){f.tabIndex=c.tabIndex}g.removeAttribute("tabIndex")}g=f=c=null}},onDragstop:function(f){var h=f.properties,g=xui.$us(h),d=f.getRoot(),j=d.cssPos(),c=null,e=null;if(f.$px(h.left)!==j.left){h.left=c=f.$forceu(j.left,null)}if(f.$px(h.top)!==j.top){h.top=e=f.$forceu(j.top,null)}d.cssPos({left:c,top:e});if(f.onMove&&(c!==null||e!==null)){f.boxing().onMove(f,c,e,null,null)}},TABSTOP1:{onFocus:function(h,q,c){var m=parseInt(xui.use(c).get(0).tabIndex||1+"",10)-1;var f=h.getRoot().get(0).getElementsByTagName("*"),r,g;for(var p=0,j=f.length,d;d=f[p];p++){if(d.nodeType==1){if(d.tabIndex&&d.tabIndex<=m){if(!r){r=(g=d).tabIndex}if(d.tabIndex>r){r=(g=d).tabIndex}if(r===m){break}}}}if(d){xui(d).focus();xui.use(c).get(0).tabIndex=d.tabIndex}else{d=h.getRoot().nextFocus(false,true,false);xui(d).focus();xui.use(c).get(0).tabIndex=d.get(0).tabIndex}f=d=null}},TABSTOP2:{onFocus:function(h,q,c){var m=parseInt(xui.use(c).get(0).tabIndex||1+"")+1;var f=h.getRoot().get(0).getElementsByTagName("*"),r,g;for(var p=0,j=f.length,d;d=f[p];p++){if(d.nodeType==1){if(d.tabIndex&&d.tabIndex>=m){if(!r){r=(g=d).tabIndex}if(d.tabIndex<r){r=(g=d).tabIndex}if(r===m){break}}}}if(d){xui(d).focus();xui.use(c).get(0).tabIndex=d.tabIndex}else{d=h.getRoot().nextFocus(true,true,false);xui(d).focus();xui.use(c).get(0).tabIndex=d.get(0).tabIndex}f=d=null}},TBAR:{beforeMousedown:function(f,h,l){if(f.$inDesign){return}if(xui.Event.getBtn(h)!="left"){return}if(f.getKey(xui.Event.getSrc(h).parentNode.id)==f.keys.BARCMDR){return}if(f.properties.status=="max"){return false}if(f.properties.movable&&!f._locked){f.box._active(f);var c=f.getRoot(),g=c.cssRegion(),d=c.parent().cssRegion(),j=f.getEmSize();c.startDrag(h,{dragDefer:2,maxLeftOffset:g.left,maxRightOffset:d.width-g.left-j,maxTopOffset:g.top,maxBottomOffset:d.height-g.top-j,magneticDistance:j,xMagneticLines:[0,d.width-g.width],yMagneticLines:[0,d.height-g.height],targetOffsetParent:c.parent()})}},onDblclick:function(c,d,f){if(c.getKey(xui.Event.getSrc(d).parentNode.id)==c.keys.BARCMDR){return}if(!c.properties.maxBtn){return}if(c.properties.status=="max"){c.box._restore(c)}else{c.box._max(c)}}},PIN:{onClick:function(g,h,j){var f=g.keys.PIN,d=g.properties,c=g.boxing();if(g.beforePin&&false===g.boxing().beforePin(g,d.pinned)){return}d.pinned=!d.pinned;g.getSubNode("PIN").tagClass("-checked",d.pinned);g._locked=d.pinned;if(d.resizer){if(!d.pinned){if(d.status!="min"){c._resizer()}}else{if(g.$resizer){c._unResizer()}}}}},MIN:{onClick:function(c,d,f){c.box._min(c,null,null,true)}},MAX:{onClick:function(c,d,f){c.box._max(c,null,null,true)}},RESTORE:{onClick:function(c,d,f){c.box._restore(c)}},LAND:{onClick:function(c,d,f){c.boxing().onLand(c,d,f)}},PANEL:{onClick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onClickPanel){return c.boxing().onClickPanel(c,f,g)}}},INFO:{onClick:function(c,d,f){c.boxing().onShowInfo(c,d,f)}},OPT:{onClick:function(c,d,f){c.boxing().onShowOptions(c,d,f)}},REFRESH:{onClick:function(c,d,f){c.boxing().onRefresh(c)}},CLOSE:{onClick:function(c,d,f){c.boxing().close()}},CMD:{onClick:function(c,d,f){var g=c.properties;if(g.disabled){return false}if(c.onCmd){c.boxing().onCmd(c,xui.use(f).id().split("_")[1],d,f)}return false}}},DataModel:{rotate:null,selectable:true,tips:null,border:null,disabled:null,dock:"none",showEffects:"Classic",hideEffects:"",initPos:{ini:"center",listbox:["auto","center"]},iframeAutoLoad:{ini:"",action:function(){xui.UI.Div._applyAutoLoad(this)}},ajaxAutoLoad:{ini:"",action:function(){xui.UI.Div._applyAutoLoad(this)}},html:{html:1,action:function(c,d,e){this.getSubNode("PANEL").html(xui.adjustRes(c,0,1),null,null,e)}},caption:{ini:undefined,action:function(c){c=(xui.isSet(c)?c:"")+"";this.getSubNode("CAPTION").html(xui.adjustRes(c,true))}},image:{format:"image",action:function(c){xui.UI.$iconAction(this)}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c||"center")}},imageBgSize:{action:function(c){this.getSubNode("ICON").css("backgroundSize",c||"")}},imageClass:{ini:"",action:function(c,d){xui.UI.$iconAction(this,"ICON",d)}},iconFontCode:{action:function(c){xui.UI.$iconAction(this)}},shadow:true,resizer:true,movable:true,minBtn:{ini:true,action:function(c){var d=this.getSubNode("MIN");if(c){d.setInlineBlock()}else{d.css("display","none")}}},maxBtn:{ini:true,action:function(c){var d=this.getSubNode("MAX");if(c){d.setInlineBlock()}else{d.css("display","none")}}},restoreBtn:{ini:true,action:function(c){var d=this.getSubNode("RESTORE");if(c){d.setInlineBlock()}else{d.css("display","none")}}},infoBtn:{ini:false,action:function(c){this.getSubNode("INFO").css("display",c?"":"none")}},optBtn:{ini:false,action:function(c){this.getSubNode("OPT").css("display",c?"":"none")}},closeBtn:{ini:true,action:function(c){var d=this.getSubNode("CLOSE");if(c){d.setInlineBlock()}else{d.css("display","none")}}},refreshBtn:{ini:false,action:function(c){this.getSubNode("REFRESH").css("display",c?"":"none")}},pinBtn:{ini:false,action:function(c){var d=this.getSubNode("PIN");if(c){d.setInlineBlock()}else{d.css("display","none")}}},landBtn:{ini:false,action:function(c){var d=this.getSubNode("LAND");if(c){d.setInlineBlock()}else{d.css("display","none")}}},width:{$spaceunit:1,ini:"25em"},height:{$spaceunit:1,ini:"25em"},minWidth:200,minHeight:100,position:"absolute",fromRegion:{hidden:true,ini:null},modal:{ini:false,action:function(c){if(this.box){if(c){this.box._modal(this)}else{this.box._unModal(this)}}}},status:{ini:"normal",listbox:["normal","min","max"],action:function(e,f){var d=this,c=d.box;if(e=="min"){c._min(d,f,null,true)}else{if(e=="max"){c._max(d,f,null,true)}else{c._restore(d,f)}}}},hAlign:{ini:"left",listbox:["left","center","right"],action:function(c){this.getSubNode("BARCMDL").css("textAlign",c)}},tagCmds:{ini:[],action:function(){this.boxing().refresh()}},$hborder:1,$vborder:1},EventHandlers:{onIniPanelView:function(c){},onShow:function(c){},onActivated:function(c){},beforePin:function(c,d){},beforeStatusChanged:function(e,c,d){},afterStatusChanged:function(e,c,d){},onClickPanel:function(c,d,f){},onLand:function(c,d,f){},beforeClose:function(c){},onShowInfo:function(c,d,f){},onShowOptions:function(c,d,f){},onRefresh:function(c){},onCmd:function(c,f,d,g){}},RenderTrigger:function(){var c=this;c.destroyTrigger=function(){var d=this;if(d.$inModal){d.box._unModal(d)}}},LayoutTrigger:function(){var d=this,e=d.properties;if(e.modal){var f=d.$modalDiv&&d.$modalDiv.parent(),c=d.box;if(f&&f.get(0)&&f.get(0)!==d.getRootNode()){c._unModal(d)}c._modal(d)}},_prepareData:function(e){var f=arguments.callee.upper.call(this,e),d="display:none";f.minDisplay=f.minBtn?"":d;f.maxDisplay=f.maxBtn?"":d;f.infoDisplay=f.infoBtn?"":d;f.optDisplay=f.optBtn?"":d;f.closeDisplay=f.closeBtn?"":d;f.pinDisplay=f.pinBtn?"":d;f.landDisplay=f.landBtn?"":d;f.refreshDisplay=f.refreshBtn?"":d;f._align="text-align:"+f.hAlign+";";var c=e.properties.status;if(c=="min"||c=="max"){e.$noR=1}if(xui.isStr(f.overflow)){f._overflow=f.overflow.indexOf(":")!=-1?(f.overflow):(f.overflow?("overflow:"+f.overflow):"")}if(!xui.isEmpty(f.tagCmds)){this._prepareCmds(e,f)}return f},_min:function(e,g,u,f){var d=e.getRoot(),l=e.box,c=d.parent(),m=e.boxing(),w=e.properties,r=xui.Dom._getEffects(w.showEffects,1);if(e.$inThread){e.$inThread.abort()}if(!g){g=w.status}if(e.beforeStatusChanged&&false===e.boxing().beforeStatusChanged(e,"min",g)){return}if(g=="max"){l._unMax(e)}else{l._refreshRegion(e)}e.getSubNodes(["PANEL","STATUS"]).css("display","none");if(w.minBtn){if(w.restoreBtn){e.getSubNode("RESTORE").setInlineBlock()}e.getSubNode("MIN").css("display","none")}if(w.resizer&&e.$resizer){m._unResizer()}w.status="min";var q=d.height(),n=e.getSubNode("BORDER").height(),j=e.getSubNode("TBAR").height();d.cssSize({width:w.minWidth,height:j+q-n},true);if(e.afterStatusChanged){e.boxing().afterStatusChanged(e,"min",g)}if(r&&xui.browser.ie678){xui.filter(r.params,function(p,h){return !!xui.Dom._cssfake[h]})}d.show(null,null,u,null,f)},_max:function(e,g,m,f){var d=e.getRoot(),h=e.box,j=e.boxing(),c=d.parent(),n=e.properties,l=xui.Dom._getEffects(n.showEffects,1);if(!g){g=n.status}if(e.$inThread){e.$inThread.abort()}if(e.beforeStatusChanged&&false===e.boxing().beforeStatusChanged(e,"max",g)){return}if(g=="min"){h._unMin(e)}else{h._refreshRegion(e)}if(n.pinBtn){e.getSubNode("PIN").css("display","none")}if(n.maxBtn){e.getSubNode("MAX").css("display","none");if(n.restoreBtn){e.getSubNode("RESTORE").setInlineBlock()}}if(n.resizer&&e.$resizer){j._unResizer()}n.status="max";j.setDock("cover",true);if(e.afterStatusChanged){e.boxing().afterStatusChanged(e,"max",g)}if(l&&xui.browser.ie678){xui.filter(l.params,function(q,p){return !!xui.Dom._cssfake[p]})}d.show(null,null,m,null,f)},_restore:function(e,c){var g=e.getRoot(),f=e.box,d=e.properties;if(!c){c=d.status}d.status="normal";if(e.beforeStatusChanged&&false===e.boxing().beforeStatusChanged(e,"normal",c)){return}if(c=="max"){f._unMax(e)}if(c=="min"){f._unMin(e)}e.getSubNode("BORDER").ieRemedy();e.getSubNode("RESTORE").css("display","none")},_unMax:function(e){var d=e.properties,c=e.boxing();e.getSubNode("MAX").setInlineBlock();if(d.pinBtn){e.getSubNode("PIN").setInlineBlock()}if(d.resizer&&!d.pinned){c._resizer()}c.setDock("none");xui.UI.$tryResize(e,d.width,d.height,true);if(e.afterStatusChanged){e.boxing().afterStatusChanged(e,"normal",status)}},_unMin:function(e){var d=e.properties,c=e.boxing();e.getSubNodes(["PANEL","STATUS"]).css("display","block");e.getSubNode("MIN").setInlineBlock();if(d.resizer&&!d.pinned){c._resizer()}e.getRoot().cssSize({width:d.width,height:d.height});xui.UI.$tryResize(e,d.width,d.height,true)},_active:function(f,c){var d=this;if(f.$inDesign){return}if(c!==false&&xui.$cache.unique.activeWndId==f.$xid){return}d._deActive();if(c!==false){var h=xui(f.domId),g=h.topZindex(),e=parseInt(h.css("zIndex"),0);h.css("zIndex",g>e?g:e);f.getSubNode("TBAR").tagClass("-focus");xui.$cache.unique.activeWndId=f.$xid}},_deActive:function(){var c;if(c=xui.UI._cache["$"+xui.$cache.unique.activeWndId]){c.getSubNode("TBAR").tagClass("-focus",false)}delete xui.$cache.unique.activeWndId},_modal:function(f){var e=f.getRoot(),c,h=e.parent(),g;if(!h.isEmpty()){if(!f.$inModal){g=f.$modalDiv;if(!g||!g.get(0)||!g.get(0).parentNode){g=f.$modalDiv=xui.create("<div class='xui-cover xui-custom xui-cover-modal' style='left:0;top:0;position:absolute;overflow:hidden;display:block;z-index:0;'></div>");g.setSelectable(false)}h.append(g);if(h.get(0)===document.body||h.get(0)===document||h.get(0)===window){h=xui.win}g.css({display:"block",width:Math.max(h.width(),h.scrollWidth())+"px",height:Math.max(h.height(),h.scrollHeight())+"px"}).onMousedown(function(){return false}).topZindex(true);h.onSize(function(j){j=xui(j);g.width(j.width()).height(j.height());xui.asyRun(function(){g.width(Math.max(j.width(),j.scrollWidth()));g.height(Math.max(j.height(),j.scrollHeight()))})},"dialog:"+f.serialId);var d=(parseInt(g.css("zIndex"),10)||0)+1;e.css("zIndex",d);if(d>=xui.Dom.TOP_ZINDEX){xui.Dom.TOP_ZINDEX=d+1}f.$inModal=true;h.setBlurTrigger(f.$xid+"_anti",true,xui([g.get(0),f.getRootNode()]))}}},_unModal:function(c){if(c.$inModal){var e=c.$modalDiv.parent();if(e.get(0)===document.body||e.get(0)===document||e.get(0)===window){e=xui.win}e.onSize(null,"dialog:"+c.serialId);c.getRoot().css("zIndex",0);c.$modalDiv.css("display","none");var d=c.getSubNode("BORDER");if(!d.isEmpty()){d.append(c.$modalDiv)}c.$inModal=false;e.setBlurTrigger(c.$xid+"_anti")}},_refreshRegion:function(d){if(!d.renderId){return}var h=d.properties,c=d.getRoot(),f=xui.$us(h),g=function(j,l){return d.$forceu(j,f>0?"em":"px",l)},e=c.cssRegion();e.left=g(e.left);e.top=g(e.top);e.width=g(e.width);e.height=g(e.height);return xui.merge(h,e,function(l,j){return h[j]!="auto"})},_adjust:function(l,q,j,c,o){q=q||"";if(!xui.isSet(j)){j=xui.adjustRes(q);q=""}var d=l.$div.reBoxing(),m="xui:temp:dialog",n=arguments.callee,p,e;if(!xui.Dom.byId(m)){g=n._cache=d.clone(false);xui("body").append(g);g.css({overflow:"visible",position:"absolute",visibility:"visible",left:xui.Dom.HIDE_VALUE,top:xui.Dom.HIDE_VALUE}).id(m,true)}var g=n._cache;g.width("auto").height("auto");g.html(j,false);var r=g.cssSize();r.width+=10;r.height+=10;d.html(j);if(r.width>500){r.width=500;g.width(500);r.height=g.offsetHeight()+10;g.width("auto")}g.html("",false);r.height+=10;if(r.height>400){r.height=400}if(r.width<150){r.width=150}if(r.height<30){r.height=30}d.cssSize(r).css("overflow","auto").show();var f=l.getRoot()._getEmSize();p=r.width+f*2;e=r.height+f*7.5;l.setCaption(q).setWidth(p).setHeight(e);return{width:p,height:e}},alert:function(q,l,p,h,g,o,r,c,j){var n=arguments.callee,m;if(j||!(m=n.dialog)||!m.get(0)||(!m.get(0).renderId)){m=new xui.UI.Dialog({overflow:"hidden",minBtn:false,maxBtn:false,pinBtn:false,resizer:false},{beforeClose:function(){xui.tryF(m._$onClose);m._$onClose=null;if(!j){m.hide();return false}},onHotKeydown:function(x,w){if(w.key=="esc"){m.close()}}});var f=m.$cmd=new xui.UI.Div({height:"2.5em",dock:"bottom",zIndex:10},null,null,null,{KEY:"text-align:center;padding-top:.5em"}),e=m.$btn=new xui.UI.SButton({position:"relative",tabindex:1},{onClick:function(){m.close()},onHotKeydown:function(x,w){if(w.key=="enter"){m.close()}}},null,null,{KEY:"margin:0 .5em"});f.append(e);var d=m.$div=new xui.UI.Div({left:10,top:10});m.append(f).append(d).render();if(!j){n.dialog=m}}m._$onClose=p;m.$btn.setCaption("&nbsp;&nbsp;"+(h||xui.wrapRes("$inline.ok"))+"&nbsp;&nbsp;");var u=xui.UI.Dialog._adjust(m,q,l);if(r&&r["xui.UI"]){r=r.getContainer(c)}if(!xui.isSet(r)){r=xui("body")}m.show(r,true,g,o);xui.resetRun("dlg_focus:"+m.get(0).$xid,function(){m.$btn.activate()});return m},confirm:function(p,u,r,x,l,f,h,o,q,c,j){var n=arguments.callee,m;if(j||!(m=n.dialog)||!m.get(0)||(!m.get(0).renderId)){m=new xui.UI.Dialog({overflow:"hidden",minBtn:false,maxBtn:false,pinBtn:false,resizer:false},{beforeClose:function(){if(!m._$_clicked){xui.tryF(m._$onNo,["close"])}else{delete m._$_clicked}m._$onYes=m._$onNo=null;if(!j){m.hide();return false}},onHotKeydown:function(B,A){if(A.key=="esc"){m.close()}}});var g=m.$cmd=new xui.UI.Div({height:"2.5em",dock:"bottom",zIndex:10},null,null,null,{KEY:"text-align:center;padding-top:.5em"}),e=m.$btn1=new xui.UI.SButton({tabindex:1,position:"relative"},{onClick:function(){xui.tryF(m._$onYes,["yes"]);m._$_clicked=1;m.close()}},null,null,{KEY:"margin:0 .5em"});g.append(e);e=m.$btn2=new xui.UI.SButton({tabindex:1,position:"relative"},{onClick:function(){xui.tryF(m._$onNo,["no"]);m._$_clicked=1;m.close()}},null,null,{KEY:"margin:0 .5em"});g.append(e);var d=m.$div=new xui.UI.Div({left:10,top:10});m.append(g).append(d).render();if(!j){n.dialog=m}}m._$onYes=r;m._$onNo=x;delete m._$_clicked;m.$btn1.setCaption("&nbsp;&nbsp;"+(l||xui.wrapRes("$inline.yes"))+"&nbsp;&nbsp;");m.$btn2.setCaption("&nbsp;&nbsp;"+(f||xui.wrapRes("$inline.no"))+"&nbsp;&nbsp;");var w=xui.UI.Dialog._adjust(m,p,u);if(q&&q["xui.UI"]){q=q.getContainer(c)}if(!xui.isSet(q)){q=xui("body")}m.show(q,true,h,o);xui.resetRun("dlg_focus:"+m.get(0).$xid,function(){m.$btn2.activate()});return m},pop:function(m,h,g,f,l,n,c){var j=new xui.UI.Dialog({overflow:"hidden",minBtn:false,maxBtn:false,pinBtn:false,resizer:false},{onHotKeydown:function(r,q){if(q.key=="esc"){j.close()}}}),e=j.$cmd=new xui.UI.Div({height:"2.5em",dock:"bottom",zIndex:10},null,null,null,{KEY:"text-align:center;padding-top:.5em"}).append(j.$btn=new xui.UI.SButton({caption:"&nbsp;&nbsp;"+(g||"$inline.ok")+"&nbsp;&nbsp;",tabindex:1,position:"relative"},{onClick:function(){j.destroy()},onHotKeydown:function(r,q){if(q.key=="enter"){j.close()}}},null,null,{KEY:"margin:0 .5em"})),d=j.$div=new xui.UI.Div({left:10,top:10,width:"7em"}).setCustomStyle({KEY:"overflow:visible"});j.append(e).append(d).render();var o=xui.UI.Dialog._adjust(j,m,h);if(n&&n["xui.UI"]){n=n.getContainer(c)}if(!xui.isSet(n)){n=xui("body")}j.show(n,false,f,l);xui.resetRun("dlg_focus:"+j.get(0).$xid,function(){j.$btn.activate()});return j},prompt:function(q,w,l,u,x,j,e,g,p,r,c,h){var m,o=arguments.callee;if(h||!(m=o.dialog)||!m.get(0)||(!m.get(0).renderId)){m=new xui.UI.Dialog({overflow:"hidden",minBtn:false,maxBtn:false,pinBtn:false,left:g||200,top:p||200,width:"25em",height:"11em",conDockPadding:{left:".5em",right:".5em",top:0,bottom:0}},{beforeClose:function(){if(!m._$_clickYes){xui.tryF(m._$onNo,["no"])}else{delete m._$_clickYes}m._$input.setValue("",false,"prompt");m._$onYes=m._$onNo=null;if(!h){m.hide();return false}}});var d=m._$caption=new xui.UI.Div({height:"1.5em",dock:"top"}),f=new xui.UI.Div({height:"2.5em",dock:"bottom",zIndex:10},null,null,null,{KEY:"text-align:center;padding-top:.5em"}).append(m.$btn1=new xui.UI.SButton({position:"relative",tabindex:1},{onClick:function(){if(false!==xui.tryF(m._$onYes,[m._$input.getUIValue()])){m._$_clickYes=1;m.close()}}},null,null,{KEY:"margin:0 .5em"}));f.append(m.$btn2=new xui.UI.SButton({tabindex:1,position:"relative"},{onClick:function(){m.close()}},null,null,{KEY:"margin:0 .5em"}));var n=m._$input=new xui.UI.Input({dock:"fill",multiLines:true});m.append(d).append(f).append(n).render();if(!h){o.dialog=m}}m.setCaption(q||"Prompt");m._$caption.setHtml(w||"");m._$input.setValue(l||"",true,"prompt");m._$onYes=u;m._$onNo=x;delete m._$_clickYes;m.$btn1.setCaption("&nbsp;&nbsp;"+(j||xui.wrapRes("$inline.ok"))+"&nbsp;&nbsp;");m.$btn2.setCaption("&nbsp;&nbsp;"+(e||xui.wrapRes("$inline.cancel"))+"&nbsp;&nbsp;");if(r&&r["xui.UI"]){r=r.getContainer(c)}if(!xui.isSet(r)){r=xui("body")}m.show(r,true,g,p);xui.resetRun("dlg_focus:"+m.get(0).$xid,function(){m._$input.activate()});return m},_onresize:function(f,e,u,d){if(e&&f.properties.status=="min"){e=f.properties.minWidth}var c=f.properties,g=xui.$us(c),h=function(A,B){return f.$forceu(A,g>0?"em":"px",B)},x=arguments.callee.upper.apply(this,arguments),r={},q=f.getSubNode("TBAR"),p=f.getSubNode("PANEL"),o=f.getSubNode("BBAR"),m=f.getSubNode("MAIN"),l=f.getSubNode("MAINI"),n,j,w;if(e){e=f.$px(e)}if(u){u=f.$px(u)}if(x.left){x.left=f.$px(x.left)}if(x.top){x.top=f.$px(x.top)}if(x.width){x.width=f.$px(x.width)}if(x.height){x.height=f.$px(x.height)}if(u){if(u=="auto"){r.height=u}else{n=q.offsetHeight(true);j=o.offsetHeight(true);if((w=x.height-n-j)>0){r.height=w}}}if(u){r.height-=(parseFloat(l.css("paddingTop"))||0)+(parseFloat(l.css("paddingBottom"))||0)}if(e){r.width=x.width-(parseFloat(l.css("paddingRight"))||0)-(parseFloat(l.css("borderRightWidth"))||0)-(parseFloat(m.css("paddingLeft"))||0)-(parseFloat(m.css("borderLeftWidth"))||0)}if(e&&g>0){r.width=h(r.width)}if(u&&g>0){r.height=h(r.height)}p.cssSize(r,true);if(e){xui.UI._adjustConW(f,p,r.width)}}}});Class("xui.UI.FoldingList",["xui.UI.List"],{Instance:{fillContent:function(g,f){var d=this.get(0),c,e;if(d.renderId){if(e=d.getItemByItemId(g)){c=d.getSubNodeByItemId("BODYI",g).html("");if(f){e._obj=f;e._fill=true;if(typeof f=="string"){c.html(f)}else{c.append(f.render(true))}}else{e._obj=e._fill=null}}}return this},toggle:function(e){var g=this.get(0);if(g.renderId){var j=g.properties,l=j.items,p=g.getItemByItemId(e),d=g.getSubIdByItemId(e),f=g.getSubNode("ITEM",d),h=g.getSubNode("TOGGLE",d),m=f.next(),o;if(p._show){if(j.activeLast&&l.length){if(l[l.length-1].id==p.id){return false}}f.tagClass("-checked",false);h.tagClass("-checked",false);if(m){m.tagClass("-prechecked",false)}}else{f.tagClass("-checked");h.tagClass("-checked");if(m){m.tagClass("-prechecked")}if(!p._fill){var n=function(q){g.boxing().fillContent(p.id,p._body=q)};if(g.onGetContent){var c=g.boxing().onGetContent(g,p,n);if(c){n(c)}}else{n(g.box._buildBody(g,p))}}}p._show=!p._show}return this}},Initialize:function(){var c=this.getTemplate();c.ITEMS.className="{_bordertype}";c.$submap.items={ITEM:{tagName:"div",className:"xui-uiborder-flat xui-uiborder-radius {_checked} {_precheked} {itemClass} {disabled} {readonly}",style:"{itemStyle}",HEAD:{tagName:"div",className:"xui-uibar",HL:{tagName:"div"},HR:{tagName:"div"},TITLE:{tabindex:"{_tabindex}",TLEFT:{$order:0,tagName:"div",TOGGLE:{$order:0,className:"xuifont",$fonticon:"{_fi_tlg}"},LTAGCMDS:{$order:2,tagName:"span",text:"{ltagCmds}"},CAP1:{$order:1,className:"xui-title-node",text:"{title}"}},TRIGHT:{$order:1,tagName:"div",style:"{_capDisplay}",CAP2:{$order:0,text:"{caption}"},TAGCMDS:{$order:60,tagName:"span",text:"{rtagCmds}"}}}},BODY:{$order:1,tagName:"div",className:"xui-uibase",BODYI:{$order:0,tagName:"div",text:"{_body}"}},TAIL:{$order:4,tagName:"div",className:"xui-uibar",TL:{tagName:"div"},TR:{tagName:"div"}}}};this.setTemplate(c)},Static:{Appearances:{KEY:{padding:".25em"},ITEMS:{border:0,position:"relative",zoom:xui.browser.ie?1:null,"padding-top":".75em"},ITEM:{zoom:xui.browser.ie?1:null,"margin-top":"-7px",padding:0,position:"relative",overflow:"hidden","border-radius":"6px","box-shadow":"-1px -1px 2px #EDEDED"},"HEAD, BODY, BODYI, TAIL":{position:"relative"},BODY:{display:"none",zoom:xui.browser.ie?1:null,position:"relative",overflow:"auto"},BODYI:{padding:".25em .75em 0 .75em",position:"relative"},"BODY, BODYI":{},"ITEM-hover, ITEM-active, ITEM-checked":null,"ITEM-checked":{$order:2,"margin-bottom":"1em"},"ITEM-checked BODY":{$order:2,display:"block"},"HL, HR, TL, TR":{position:"absolute",width:".75em"},"HL, HR":{height:"2.5em"},"ITEM-prechecked HL":{$order:1},"ITEM-prechecked HR":{$order:1},"TL, TR":{height:"1.75em"},HL:{$order:1,top:0,left:0},HR:{$order:1,top:0,right:0},TL:{$order:1,bottom:0,left:0},TR:{$order:1,bottom:0,right:0},HEAD:{position:"relative",zoom:xui.browser.ie?1:null,overflow:"hidden"},TITLE:{$order:1,display:"block",position:"relative","white-space":"nowrap",overflow:"hidden",padding:".25em .5em"},TAIL:{position:"relative",height:".25em"},"CAP1, CAP2":{padding:".25em","vertical-align":"middle"},CAP1:{cursor:"pointer","white-space":"nowrap"},"ITEM-checked CAP1":{$order:2,"font-weight":"normal"},TLEFT:{position:"relative",left:".5em","white-space":"nowrap",overflow:"hidden"},TRIGHT:{position:"absolute",right:".5em",top:".25em","white-space":"nowrap",overflow:"hidden"}},Behaviors:{HoverEffected:{ITEM:"ITEM",HEAD:"HEAD",OPT:"OPT"},ClickEffected:{ITEM:null,HEAD:"HEAD"},ITEM:{onClick:null,onKeydown:null},HEAD:{onClick:function(c,d,f){c.boxing().toggle(c.getItemIdByDom(f));return false}},OPT:{onMousedown:function(){return false},onClick:function(c,d,f){c.boxing().onShowOptions(c,c.getItemByDom(f),d,f);return false}}},DataModel:({value:null,borderType:null,activeLast:true}),EventHandlers:{onGetContent:function(d,e,c){},onShowOptions:function(c,d,f,g){}},RenderTrigger:function(){var d=this,f=d.properties,c=f.items,e;if(f.activeLast&&c.length>0){e=c[c.length-1];d.boxing().fillContent(e.id,e._body)}},_prepareItems:function(e,c,d){if(c.length){c[0]._precheked=e.getClass("ITEM","-prechecked");if(e.properties.activeLast){var f=c[c.length-1];f._show=true;f._fill=true;f._body=e.onGetContent?e.boxing().onGetContent(e,f,function(g){e.boxing().fillContent(f.id,f._body=g)}):e.box._buildBody(e,f)}}return arguments.callee.upper.apply(this,arguments)},_prepareItem:function(c,d){var e=c.properties,f,g="display:none";d._tabindex=e.tabindex;if(!d.caption){d._capDisplay=g}else{d.caption=d.caption.replace(/</g,"&lt;")}d._body=d._body||"Loading...";if(d._show){d._checked=c.getClass("ITEM","-checked");d._fi_tlg="xuifont-checked xui-uicmd-toggle xui-uicmd-toggle-checked"}else{d._fi_tlg="xui-uicmd-toggle"}this._prepareCmds(c,d)},_buildBody:function(c,d){return d.text?'<pre class="xui-node xui-node-div">'+d.text.replace(/</g,"&lt;")+"</pre>":""},_onresize:function(){}}});Class("xui.UI.FoldingTabs","xui.UI.Tabs",{Instance:{_setCtrlValue:function(c,d){this.each(function(g){var f=g.domId,h=g.boxing(),n=d?"":h.getUIValue(),e=g.properties,j=function(x,q){var u=g.getSubIdByItemId(x),w=g.getItemByItemId(x);if(u){q.push(u);var r=g.getSubNode("BODY",u);if(r.css("display")!="none"){w._scrollTop=r.get(0).scrollTop||0;if(w._scrollTop){r.get(0).scrollTop=0}r.css("display","none")}}},o=function(x,q){var u=g.getSubIdByItemId(x),w=g.getItemByItemId(x);if(u){q.push(u);var r=g.getSubNode("BODY",u);if(r.css("display")=="none"){r.css("display","block");if(w._scrollTop){r.get(0).scrollTop=w._scrollTop}g.box._forLazyAppend(g,w,x);g.box._forIniPanelView(g,w,x)}}};var m=[],l=[];if(e.selMode=="multi"){n=n?n.split(e.valueSeparator):[];c=c?c.split(e.valueSeparator):[];xui.arr.each(n,function(q){if(xui.arr.indexOf(c,q)==-1){j(q,m)}});xui.arr.each(c,function(q){if(xui.arr.indexOf(n,q)==-1){o(q,l)}})}else{j(n,m);o(c,l)}if(m.length){g.getSubNodes(["ITEM","TOGGLE"],m).tagClass("-checked",false);g.getSubNodes("ITEM",m).next().tagClass("-prechecked",false)}if(l.length){g.getSubNodes(["ITEM","TOGGLE"],l).tagClass("-checked");g.getSubNodes("ITEM",l).next().tagClass("-prechecked")}var p=g.getRootNode().style;xui.UI.$tryResize(g,p.width,p.height,true)})},_afterInsertItems:null},Static:{Templates:{tagName:"div",style:"{_style};",BOX:{$order:0,tagName:"div",ITEMS:{tagName:"div",text:"{items}"}},$submap:{items:{ITEM:{tagName:"div",className:"xui-uiborder-flat xui-uiborder-radius {_checked} {_precheked} {itemClass} {disabled} {readonly}",style:"{_itemDisplay} {itemStyle}",HEAD:{tagName:"div",className:"xui-uibar  {_checked} {_precheked} ",HL:{tagName:"div"},HR:{tagName:"div"},TITLE:{tabindex:"{_tabindex}",TLEFT:{$order:0,tagName:"div",LTAGCMDS:{$order:0,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},TOGGLE:{$order:1,className:"xuifont {_tlgchecked}",$fonticon:"xui-uicmd-toggle"},ICON:{$order:2,className:"xuicon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}",text:"{iconFontCode}"},CAPTION:{$order:3,className:"xui-title-node",text:"{caption}"}},TRIGHT:{$order:1,tagName:"div",style:"{_capDisplay}",MESSAGE:{$order:0,text:"{message}"},CMDS:{$order:2,RTAGCMDS:{$order:0,tagName:"span",style:"{_rtagDisplay}",text:"{rtagCmds}"},OPT:{$order:1,className:"xuifont",$fonticon:"xui-uicmd-opt",style:"{_opt}"},POP:{className:"xuifont",$fonticon:"xui-uicmd-pop",style:"{popDisplay}",$order:1},CLOSE:{className:"xuifont",$fonticon:"xui-uicmd-close",style:"{closeDisplay}",$order:2}}}}},BODY:{$order:1,tagName:"div",className:"xui-uibase",BODYI:{tagName:"div",PANEL:{tagName:"div",style:"{_itemHeight};{_overflow};{_bginfo}",className:"xui-uibase xui-uicontainer",text:xui.UI.$childTag}}},TAIL:{$order:4,tagName:"div",className:"xui-uibar",TL:{tagName:"div"},TR:{tagName:"div"}}}},"items.ltagCmds":function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"items.tagCmds"+(j[e.type]||".button"),c)},"items.rtagCmds":function(g,f,e,d,c){var h=arguments.callee,j=h._m||(h._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(g,f,e,"items.tagCmds"+(j[e.type]||".button"),c)},"items.tagCmds.text":xui.UI.$getTagCmdsTpl("text"),"items.tagCmds.button":xui.UI.$getTagCmdsTpl("button"),"items.tagCmds.image":xui.UI.$getTagCmdsTpl("image")}},Appearances:{KEY:{},BOX:{},ITEMS:{border:0,position:"relative",zoom:xui.browser.ie?1:null,padding:"11px 4px 4px 4px"},ITEM:{zoom:xui.browser.ie?1:null,"margin-top":"-7px",padding:0,position:"relative",overflow:"hidden","border-radius":"6px","box-shadow":"-1px -1px 2px #EDEDED"},"HEAD, BODY, BODYI, PANEL, TAIL":{position:"relative"},CMDS:{padding:".25em 0 0 .25em","vertical-align":"middle",position:"relative"},BODY:{display:"none",zoom:xui.browser.ie?1:null,position:"relative"},BODYI:{padding:"0 .25em"},PANEL:{overflow:"auto",padding:".25em"},"ITEM-hover":{},"ITEM-active, ITEM-checked":{},"ITEM-checked":{$order:2,"margin-bottom":"1em"},"ITEM-checked BODY":{$order:2,display:"block"},"HL, HR, TL, TR":{position:"absolute",width:".75em"},"HL, HR":{height:"2.5em"},"ITEM-prechecked HL":{$order:1},"ITEM-prechecked HR":{$order:1},"TL, TR":{height:"1.75em"},HL:{$order:1,top:0,left:0},HR:{$order:1,top:0,right:0},TL:{$order:1,bottom:0,left:0},TR:{$order:1,bottom:0,right:0},HEAD:{cursor:"pointer",position:"relative",zoom:xui.browser.ie?1:null,overflow:"hidden"},TITLE:{$order:1,display:"block",position:"relative","white-space":"nowrap",overflow:"hidden",padding:".25em .5em"},"BODY, BODYI":{overflow:"hidden"},TAIL:{height:".25em"},"CAPTION, MESSAGE":{padding:".25em","vertical-align":"middle"},MESSAGE:{"font-size":"1em"},CAPTION:{"white-space":"nowrap"},"ITEM-checked CAPTION":{$order:2,"font-weight":"bold"},TLEFT:{position:"relative",left:".5em",padding:"0 0 0 .5em","white-space":"nowrap",overflow:"hidden"},TRIGHT:{position:"absolute",right:".5em",top:".25em","white-space":"nowrap",overflow:"hidden"}},Behaviors:{DraggableKeys:["HEAD"],HoverEffected:{OPT:"OPT",CLOSE:"CLOSE",POP:"POP",ITEM:"HEAD"},ClickEffected:{OPT:"OPT",CLOSE:"CLOSE",POP:"POP",ITEM:"HEAD"},ITEM:{onClick:null},ITEMS:{onMousedown:null,onDrag:null,onDragstop:null},HEAD:{onClick:function(f,j,c){if(xui.Event.getBtn(j)!="left"){return}var d=f.properties,o=f.getItemByDom(c),l=f.getSubId(c),h=f.boxing();if(!o){return}if(d.disabled||o.disabled){return false}if(d.readonly||o.readonly){return false}f.getSubNode("TITLE").focus();switch(d.selMode){case"multi":var n=h.getUIValue(),g=n?n.split(d.valueSeparator):[],m=1;if(g.length){if(xui.arr.indexOf(g,o.id)!=-1){xui.arr.removeValue(g,o.id);m=-1}else{g.push(o.id)}g.sort();n=g.join(d.valueSeparator);if(h.getUIValue()!==n){h.setUIValue(n,null,null,"click");if(h.get(0)&&h.getUIValue()==n){h.onItemSelected(f,o,j,c,m)}}break}case"single":if(h.getUIValue()!==o.id){h.setUIValue(o.id,null,null,"click");if(h.get(0)&&h.getUIValue()==o.id){h.onItemSelected(f,o,j,c,1)}}break}},onKeydown:function(f,h,j){var g=xui.Event.getKey(h),d=g.key,c=g.shiftKey;if(d==" "||d=="enter"){f.getSubNode("HEAD",f.getSubId(j)).onClick();return false}}}},DataModel:{$border:0,noPanel:null,noHandler:null,HAlign:null,selMode:{ini:"single",listbox:["single","multi"]}},_prepareItems:function(e,c,d){if(c.length){c[0]._precheked=e.getClass("ITEM","-prechecked")}return arguments.callee.upper.apply(this,arguments)},_prepareItem:function(d,e){var j="display:none",f=d.properties,c;e.closeDisplay=e.closeBtn?"":j;e.popDisplay=e.popBtn?"":j;e._opt=e.optBtn?"":j;e._itemDisplay=e.hidden?j:"";if(e.height){e._itemHeight="height:"+d.$forceu(e.height)}var h=d.properties,g;e._tabindex=h.tabindex;if(!e.caption){e._capDisplay=j}e._bginfo="";if(c=e.panelBgClr||f.panelBgClr){e._bginfo+="background-color:"+c+";"}if(c=e.panelBgImg||f.panelBgImg){e._bginfo+="background-image:url("+xui.adjustRes(c)+");"}if(c=e.panelBgImgPos||f.panelBgImgPos){e._bginfo+="background-position:"+c+";"}if(c=e.panelBgImgRepeat||f.panelBgImgRepeat){e._bginfo+="background-repeat:"+c+";"}if(c=e.panelBgImgAttachment||f.panelBgImgAttachment){e._bginfo+="background-attachment:"+c+";"}if(xui.isStr(e.overflow)){e._overflow=e.overflow.indexOf(":")!=-1?(e.overflow):(data.overflow?("overflow:"+data.overflow):"")}else{if(xui.isStr(f.overflow)){e._overflow=f.overflow.indexOf(":")!=-1?(f.overflow):(f.overflow?("overflow:"+f.overflow):"")}}if(e._show){e._checked=d.getClass("ITEM","-checked");e._tlgchecked=d.getClass("TOGGLE","-checked")}this._prepareCmds(d,e)},_onresize:function(f,e,c,g,d){if(g){f._w=f._h=null}if(e&&f._w!=e){f._w=e;f.getSubNode("PANEL",true).each(function(j){if(j.offsetWidth){xui(j).width("auto");var h=xui(j).width(),l=f.properties;if(xui.$us(l)>0){h=f.$px2em(h,j)+"em"}xui(j).width(h);xui.UI._adjustConW(f,j,h)}})}},_adjustScroll:null}});(function webpackUniversalModuleDefinition(c,d){if(typeof exports==="object"&&typeof module==="object"){module.exports=d()}else{if(typeof define==="function"&&define.amd){define("Raphael",[],d)}else{if(typeof exports==="object"){exports.Raphael=d()}else{c.Raphael=d()}}}})(this,function(){return(function(c){var d={};function e(g){if(d[g]){return d[g].exports}var f=d[g]={exports:{},id:g,loaded:false};c[g].call(f.exports,f,f.exports,e);f.loaded=true;return f.exports}e.m=c;e.c=d;e.p="";return e(0)})([function(e,d,f){var c,g;!(c=[f(1),f(3),f(4)],g=function(h){return h}.apply(d,c),g!==undefined&&(e.exports=g))},function(e,d,f){var c,g;!(c=[f(2)],g=function(bk){function bq(S){if(bq.is(S,"function")){return W?S():bk.on("raphael.DOMload",S)}else{if(bq.is(S,F)){return bq._engine.create[bA](bq,S.splice(0,3+bq.is(S[0],br))).add(S)}else{var E=Array.prototype.slice.call(arguments,0);if(bq.is(E[E.length-1],"function")){var R=E.pop();return W?R.call(bq._engine.create[bA](bq,E)):bk.on("raphael.DOMload",function(){R.call(bq._engine.create[bA](bq,E))})}else{return bq._engine.create[bA](bq,arguments)}}}}bq.version="2.2.0";bq.eve=bk;var W,bD=/[, ]+/,aD={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},ag=/\{(\d+)\}/g,bH="prototype",bE="hasOwnProperty",bd={doc:document,win:window},aN={was:Object.prototype[bE].call(bd.win,"Raphael"),is:bd.win.Raphael},bR=function(){this.ca=this.customAttributes={}},ay,bI="appendChild",bA="apply",aE="concat",aa=("ontouchstart" in bd.win)||bd.win.DocumentTouch&&bd.doc instanceof DocumentTouch,bv="",bp=" ",p=String,q="split",bJ="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel contextmenu"[q](bp),bx={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},au=p.prototype.toLowerCase,aR=Math,bQ=aR.max,at=aR.min,av=aR.abs,a1=aR.pow,aq=aR.PI,br="number",h="string",F="array",C="toString",L="fill",aV=Object.prototype.toString,bK={},B="push",ak=bq._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,aj=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,M={"NaN":1,"Infinity":1,"-Infinity":1},ax=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,N=aR.round,ab="setAttribute",bU=parseFloat,bS=parseInt,a2=p.prototype.toUpperCase,by=bq._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},bw=bq._availableAnimAttrs={blur:br,"clip-rect":"csv",cx:br,cy:br,fill:"colour","fill-opacity":br,"font-size":br,height:br,opacity:br,path:"path",r:br,rx:br,ry:br,stroke:"colour","stroke-opacity":br,"stroke-width":br,transform:"transform",width:br,x:br,y:br},bB=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,bn=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,aG={hs:1,rg:1},aW=/,?([achlmqrstvxz]),?/gi,bo=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,am=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,az=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,ba=bq._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,Y={},I=function(R,E){return R.key-E.key},bC=function(R,E){return bU(R)-bU(E)},an=function(){},aF=function(E){return E},A=bq._rectPath=function(E,bX,R,S,bW){if(bW){return[["M",E+bW,bX],["l",R-bW*2,0],["a",bW,bW,0,0,1,bW,bW],["l",0,S-bW*2],["a",bW,bW,0,0,1,-bW,bW],["l",bW*2-R,0],["a",bW,bW,0,0,1,-bW,-bW],["l",0,bW*2-S],["a",bW,bW,0,0,1,bW,-bW],["z"]]}return[["M",E,bX],["l",R,0],["l",0,S],["l",-R,0],["z"]]},ae=function(E,bW,S,R){if(R==null){R=S}return[["M",E,bW],["m",0,-R],["a",S,R,0,1,1,0,2*R],["a",S,R,0,1,1,0,-2*R],["z"]]},ap=bq._getPath={path:function(E){return E.attr("path")},circle:function(R){var E=R.attrs;return ae(E.cx,E.cy,E.r)},ellipse:function(R){var E=R.attrs;return ae(E.cx,E.cy,E.rx,E.ry)},rect:function(R){var E=R.attrs;return A(E.x,E.y,E.width,E.height,E.r)},image:function(R){var E=R.attrs;return A(E.x,E.y,E.width,E.height)},text:function(E){var R=E._getBBox();return A(R.x,R.y,R.width,R.height)},set:function(E){var R=E._getBBox();return A(R.x,R.y,R.width,R.height)}},ac=bq.mapPath=function(b1,bY){if(!bY){return b1}var bZ,bX,S,E,b0,bW,R;b1=bs(b1);for(S=0,b0=b1.length;S<b0;S++){R=b1[S];for(E=1,bW=R.length;E<bW;E+=2){bZ=bY.x(R[E],R[E+1]);bX=bY.y(R[E],R[E+1]);R[E]=bZ;R[E+1]=bX}}return b1};bq._g=bd;bq.type=(bd.win.SVGAngle||bd.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");if(bq.type=="VML"){var bf=bd.doc.createElement("div"),bg;bf.innerHTML='<v:shape adj="1"/>';bg=bf.firstChild;bg.style.behavior="url(#default#VML)";if(!(bg&&typeof bg.adj=="object")){return(bq.type=bv)}bf=null}bq.svg=!(bq.vml=bq.type=="VML");bq._Paper=bR;bq.fn=ay=bR.prototype=bq.prototype;bq._id=0;bq._oid=0;bq.is=function(R,E){E=au.call(E);if(E=="finite"){return !M[bE](+R)}if(E=="array"){return R instanceof Array}return(E=="null"&&R===null)||(E==typeof R&&R!==null)||(E=="object"&&R===Object(R))||(E=="array"&&Array.isArray&&Array.isArray(R))||aV.call(R).slice(8,-1).toLowerCase()==E};function bt(S){if(typeof S=="function"||Object(S)!==S){return S}var R=new S.constructor;for(var E in S){if(S[bE](E)){R[E]=bt(S[E])}}return R}bq.angle=function(bX,bZ,S,bY,R,bW){if(R==null){var E=bX-S,b0=bZ-bY;if(!E&&!b0){return 0}return(180+aR.atan2(-b0,-E)*180/aq+360)%360}else{return bq.angle(bX,bZ,R,bW)-bq.angle(S,bY,R,bW)}};bq.rad=function(E){return E%360*aq/180};bq.deg=function(E){return Math.round((E*180/aq%360)*1000)/1000};bq.snapTo=function(R,bW,E){E=bq.is(E,"finite")?E:10;if(bq.is(R,F)){var S=R.length;while(S--){if(av(R[S]-bW)<=E){return R[S]}}}else{R=+R;var bX=bW%R;if(bX<E){return bW-bX}if(bX>R-E){return bW-bX+R}}return bW};var aZ=bq.createUUID=(function(E,R){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(E,R).toUpperCase()}})(/[xy]/g,function(S){var R=aR.random()*16|0,E=S=="x"?R:(R&3|8);return E.toString(16)});bq.setWindow=function(E){bk("raphael.setWindow",bq,bd.win,E);bd.win=E;bd.doc=bd.win.document;if(bq._engine.initWin){bq._engine.initWin(bd.win)}};var V=function(S){if(bq.vml){var E=/^\s+|\s+$/g;var bX;try{var bY=new ActiveXObject("htmlfile");bY.write("<body>");bY.close();bX=bY.body}catch(bZ){bX=createPopup().document.body}var R=bX.createTextRange();V=T(function(b0){try{bX.style.color=p(b0).replace(E,bv);var b1=R.queryCommandValue("ForeColor");b1=((b1&255)<<16)|(b1&65280)|((b1&16711680)>>>16);return"#"+("000000"+b1.toString(16)).slice(-6)}catch(b2){return"none"}})}else{var bW=bd.doc.createElement("i");bW.title="Rapha\xebl Colour Picker";bW.style.display="none";bd.doc.body.appendChild(bW);V=T(function(b0){bW.style.color=b0;return bd.doc.defaultView.getComputedStyle(bW,bv).getPropertyValue("color")})}return V(S)},aI=function(){return"hsb("+[this.h,this.s,this.b]+")"},bu=function(){return"hsl("+[this.h,this.s,this.l]+")"},H=function(){return this.hex},Q=function(bW,S,E){if(S==null&&bq.is(bW,"object")&&"r" in bW&&"g" in bW&&"b" in bW){E=bW.b;S=bW.g;bW=bW.r}if(S==null&&bq.is(bW,h)){var R=bq.getRGB(bW);bW=R.r;S=R.g;E=R.b}if(bW>1||S>1||E>1){bW/=255;S/=255;E/=255}return[bW,S,E]},Z=function(bW,S,E,bX){bW*=255;S*=255;E*=255;var R={r:bW,g:S,b:E,hex:bq.rgb(bW,S,E),toString:H};bq.is(bX,"finite")&&(R.opacity=bX);return R};bq.color=function(E){var R;if(bq.is(E,"object")&&"h" in E&&"s" in E&&"b" in E){R=bq.hsb2rgb(E);E.r=R.r;E.g=R.g;E.b=R.b;E.hex=R.hex}else{if(bq.is(E,"object")&&"h" in E&&"s" in E&&"l" in E){R=bq.hsl2rgb(E);E.r=R.r;E.g=R.g;E.b=R.b;E.hex=R.hex}else{if(bq.is(E,"string")){E=bq.getRGB(E)}if(bq.is(E,"object")&&"r" in E&&"g" in E&&"b" in E){R=bq.rgb2hsl(E);E.h=R.h;E.s=R.s;E.l=R.l;R=bq.rgb2hsb(E);E.v=R.b}else{E={hex:"none"};E.r=E.g=E.b=E.h=E.s=E.v=E.l=-1}}}E.toString=H;return E};bq.hsb2rgb=function(bZ,b2,b0,bX){if(this.is(bZ,"object")&&"h" in bZ&&"s" in bZ&&"b" in bZ){b0=bZ.b;b2=bZ.s;bX=bZ.o;bZ=bZ.h}bZ*=360;var bY,b1,S,bW,E;bZ=(bZ%360)/60;E=b0*b2;bW=E*(1-av(bZ%2-1));bY=b1=S=b0-E;bZ=~~bZ;bY+=[E,bW,0,0,bW,E][bZ];b1+=[bW,E,E,bW,0,0][bZ];S+=[0,0,bW,E,E,bW][bZ];return Z(bY,b1,S,bX)};bq.hsl2rgb=function(b0,b2,bY,bX){if(this.is(b0,"object")&&"h" in b0&&"s" in b0&&"l" in b0){bY=b0.l;b2=b0.s;b0=b0.h}if(b0>1||b2>1||bY>1){b0/=360;b2/=100;bY/=100}b0*=360;var bZ,b1,S,bW,E;b0=(b0%360)/60;E=2*b2*(bY<0.5?bY:1-bY);bW=E*(1-av(b0%2-1));bZ=b1=S=bY-E/2;b0=~~b0;bZ+=[E,bW,0,0,bW,E][b0];b1+=[bW,E,E,bW,0,0][b0];S+=[0,0,bW,E,E,bW][b0];return Z(bZ,b1,S,bX)};bq.rgb2hsb=function(bZ,bY,E){E=Q(bZ,bY,E);bZ=E[0];bY=E[1];E=E[2];var bX,bW,R,b0;R=bQ(bZ,bY,E);b0=R-at(bZ,bY,E);bX=(b0==0?null:R==bZ?(bY-E)/b0:R==bY?(E-bZ)/b0+2:(bZ-bY)/b0+4);bX=((bX+360)%6)*60/360;bW=b0==0?0:b0/R;return{h:bX,s:bW,b:R,toString:aI}};bq.rgb2hsl=function(E,bY,b1){b1=Q(E,bY,b1);E=b1[0];bY=b1[1];b1=b1[2];var b2,bX,b0,bZ,bW,R;bZ=bQ(E,bY,b1);bW=at(E,bY,b1);R=bZ-bW;b2=(R==0?null:bZ==E?(bY-b1)/R:bZ==bY?(b1-E)/R+2:(E-bY)/R+4);b2=((b2+360)%6)*60/360;b0=(bZ+bW)/2;bX=(R==0?0:b0<0.5?R/(2*b0):R/(2-2*b0));return{h:b2,s:bX,l:b0,toString:bu}};bq._path2string=function(){return this.join(",").replace(aW,"$1")};function j(bW,S){for(var E=0,R=bW.length;E<R;E++){if(bW[E]===S){return bW.push(bW.splice(E,1)[0])}}}function T(bW,R,E){function S(){var bX=Array.prototype.slice.call(arguments,0),bZ=bX.join("\u2400"),bY=S.cache=S.cache||{},b0=S.count=S.count||[];if(bY[bE](bZ)){j(b0,bZ);return E?E(bY[bZ]):bY[bZ]}b0.length>=1000&&delete bY[b0.shift()];b0.push(bZ);bY[bZ]=bW[bA](R,bX);return E?E(bY[bZ]):bY[bZ]}return S}var O=bq._preload=function(S,R){var E=bd.doc.createElement("img");E.style.cssText="position:absolute;left:-9999em;top:-9999em";E.onload=function(){R.call(this);this.onload=null;bd.doc.body.removeChild(this)};E.onerror=function(){bd.doc.body.removeChild(this)};bd.doc.body.appendChild(E);E.src=S};function n(){return this.hex}bq.getRGB=T(function(E){if(!E||!!((E=p(E)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:n}}if(E=="none"){return{r:-1,g:-1,b:-1,hex:"none",toString:n}}!(aG[bE](E.toLowerCase().substring(0,2))||E.charAt()=="#")&&(E=V(E));var bX,R,S,bZ,bW,b1,b0,bY=E.match(aj);if(bY){if(bY[2]){bZ=bS(bY[2].substring(5),16);S=bS(bY[2].substring(3,5),16);R=bS(bY[2].substring(1,3),16)}if(bY[3]){bZ=bS((b1=bY[3].charAt(3))+b1,16);S=bS((b1=bY[3].charAt(2))+b1,16);R=bS((b1=bY[3].charAt(1))+b1,16)}if(bY[4]){b0=bY[4][q](bn);R=bU(b0[0]);b0[0].slice(-1)=="%"&&(R*=2.55);S=bU(b0[1]);b0[1].slice(-1)=="%"&&(S*=2.55);bZ=bU(b0[2]);b0[2].slice(-1)=="%"&&(bZ*=2.55);bY[1].toLowerCase().slice(0,4)=="rgba"&&(bW=bU(b0[3]));b0[3]&&b0[3].slice(-1)=="%"&&(bW/=100)}if(bY[5]){b0=bY[5][q](bn);R=bU(b0[0]);b0[0].slice(-1)=="%"&&(R*=2.55);S=bU(b0[1]);b0[1].slice(-1)=="%"&&(S*=2.55);bZ=bU(b0[2]);b0[2].slice(-1)=="%"&&(bZ*=2.55);(b0[0].slice(-3)=="deg"||b0[0].slice(-1)=="\xb0")&&(R/=360);bY[1].toLowerCase().slice(0,4)=="hsba"&&(bW=bU(b0[3]));b0[3]&&b0[3].slice(-1)=="%"&&(bW/=100);return bq.hsb2rgb(R,S,bZ,bW)}if(bY[6]){b0=bY[6][q](bn);R=bU(b0[0]);b0[0].slice(-1)=="%"&&(R*=2.55);S=bU(b0[1]);b0[1].slice(-1)=="%"&&(S*=2.55);bZ=bU(b0[2]);b0[2].slice(-1)=="%"&&(bZ*=2.55);(b0[0].slice(-3)=="deg"||b0[0].slice(-1)=="\xb0")&&(R/=360);bY[1].toLowerCase().slice(0,4)=="hsla"&&(bW=bU(b0[3]));b0[3]&&b0[3].slice(-1)=="%"&&(bW/=100);return bq.hsl2rgb(R,S,bZ,bW)}bY={r:R,g:S,b:bZ,toString:n};bY.hex="#"+(16777216|bZ|(S<<8)|(R<<16)).toString(16).slice(1);bq.is(bW,"finite")&&(bY.opacity=bW);return bY}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:n}},bq);bq.hsb=T(function(S,R,E){return bq.hsb2rgb(S,R,E).hex});bq.hsl=T(function(S,R,E){return bq.hsl2rgb(S,R,E).hex});bq.rgb=T(function(bW,S,E){function R(bX){return(bX+0.5)|0}return"#"+(16777216|R(E)|(R(S)<<8)|(R(bW)<<16)).toString(16).slice(1)});bq.getColor=function(R){var S=this.getColor.start=this.getColor.start||{h:0,s:1,b:R||0.75},E=this.hsb2rgb(S.h,S.s,S.b);S.h+=0.075;if(S.h>1){S.h=0;S.s-=0.2;S.s<=0&&(this.getColor.start={h:0,s:1,b:S.b})}return E.hex};bq.getColor.reset=function(){delete this.start};function aw(S,bY){var bX=[];for(var R=0,E=S.length;E-2*!bY>R;R+=2){var bW=[{x:+S[R-2],y:+S[R-1]},{x:+S[R],y:+S[R+1]},{x:+S[R+2],y:+S[R+3]},{x:+S[R+4],y:+S[R+5]}];if(bY){if(!R){bW[0]={x:+S[E-2],y:+S[E-1]}}else{if(E-4==R){bW[3]={x:+S[0],y:+S[1]}}else{if(E-2==R){bW[2]={x:+S[0],y:+S[1]};bW[3]={x:+S[2],y:+S[3]}}}}}else{if(E-4==R){bW[3]=bW[2]}else{if(!R){bW[0]={x:+S[R],y:+S[R+1]}}}}bX.push(["C",(-bW[0].x+6*bW[1].x+bW[2].x)/6,(-bW[0].y+6*bW[1].y+bW[2].y)/6,(bW[1].x+6*bW[2].x-bW[3].x)/6,(bW[1].y+6*bW[2].y-bW[3].y)/6,bW[2].x,bW[2].y])}return bX}bq.parsePathString=function(E){if(!E){return null}var S=a0(E);if(S.arr){return a6(S.arr)}var bW={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},R=[];if(bq.is(E,F)&&bq.is(E[0],F)){R=a6(E)}if(!R.length){p(E).replace(bo,function(bY,bX,b1){var b0=[],bZ=bX.toLowerCase();b1.replace(az,function(b3,b2){b2&&b0.push(+b2)});if(bZ=="m"&&b0.length>2){R.push([bX][aE](b0.splice(0,2)));bZ="l";bX=bX=="m"?"l":"L"}if(bZ=="r"){R.push([bX][aE](b0))}else{while(b0.length>=bW[bZ]){R.push([bX][aE](b0.splice(0,bW[bZ])));if(!bW[bZ]){break}}}})}R.toString=bq._path2string;S.arr=a6(R);return R};bq.parseTransformString=T(function(R){if(!R){return null}var S={r:3,s:4,t:2,m:6},E=[];if(bq.is(R,F)&&bq.is(R[0],F)){E=a6(R)}if(!E.length){p(R).replace(am,function(bX,bW,b0){var bZ=[],bY=au.call(bW);b0.replace(az,function(b2,b1){b1&&bZ.push(+b1)});E.push([bW][aE](bZ))})}E.toString=bq._path2string;return E});var a0=function(R){var E=a0.ps=a0.ps||{};if(E[R]){E[R].sleep=100}else{E[R]={sleep:100}}setTimeout(function(){for(var S in E){if(E[bE](S)&&S!=R){E[S].sleep--;!E[S].sleep&&delete E[S]}}});return E[R]};bq.findDotsAtSegment=function(R,E,ch,cf,bZ,bX,b2,b0,ca){var b7=1-ca,cc=a1(b7,3),cd=a1(b7,2),b4=ca*ca,b1=b4*ca,b6=cc*R+cd*3*ca*ch+b7*3*ca*ca*bZ+b1*b2,b3=cc*E+cd*3*ca*cf+b7*3*ca*ca*bX+b1*b0,cb=R+2*ca*(ch-R)+b4*(bZ-2*ch+R),b9=E+2*ca*(cf-E)+b4*(bX-2*cf+E),cg=ch+2*ca*(bZ-ch)+b4*(b2-2*bZ+ch),ce=cf+2*ca*(bX-cf)+b4*(b0-2*bX+cf),b8=b7*R+ca*ch,b5=b7*E+ca*cf,bW=b7*bZ+ca*b2,S=b7*bX+ca*b0,bY=(90-aR.atan2(cb-cg,b9-ce)*180/aq);(cb>cg||b9<ce)&&(bY+=180);return{x:b6,y:b3,m:{x:cb,y:b9},n:{x:cg,y:ce},start:{x:b8,y:b5},end:{x:bW,y:S},alpha:bY}};bq.bezierBBox=function(R,E,bW,S,b1,bZ,bY,bX){if(!bq.is(R,"array")){R=[R,E,bW,S,b1,bZ,bY,bX]}var b0=a5.apply(null,R);return{x:b0.min.x,y:b0.min.y,x2:b0.max.x,y2:b0.max.y,width:b0.max.x-b0.min.x,height:b0.max.y-b0.min.y}};bq.isPointInsideBBox=function(R,E,S){return E>=R.x&&E<=R.x2&&S>=R.y&&S<=R.y2};bq.isBBoxIntersect=function(S,R){var E=bq.isPointInsideBBox;return E(R,S.x,S.y)||E(R,S.x2,S.y)||E(R,S.x,S.y2)||E(R,S.x2,S.y2)||E(S,R.x,R.y)||E(S,R.x2,R.y)||E(S,R.x,R.y2)||E(S,R.x2,R.y2)||(S.x<R.x2&&S.x>R.x||R.x<S.x2&&R.x>S.x)&&(S.y<R.y2&&S.y>R.y||R.y<S.y2&&R.y>S.y)};function aL(E,bZ,bY,bX,bW){var S=-3*bZ+9*bY-9*bX+3*bW,R=E*S+6*bZ-12*bY+6*bX;return E*R-3*bZ+3*bY}function bj(ca,bX,b9,S,b8,R,b5,E,b2){if(b2==null){b2=1}b2=b2>1?1:b2<0?0:b2;var b3=b2/2,b4=12,bZ=[-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],b7=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],bW=0;for(var b6=0;b6<b4;b6++){var b0=b3*bZ[b6]+b3,b1=aL(b0,ca,b9,b8,b5),cb=aL(b0,bX,S,R,E),bY=b1*b1+cb*cb;bW+=b7[b6]*aR.sqrt(bY)}return b3*bW}function aT(S,b4,R,b3,E,b1,b6,b0,b2){if(b2<0||bj(S,b4,R,b3,E,b1,b6,b0)<b2){return}var b5=1,bW=b5/2,bY=b5-bW,bX,bZ=0.01;bX=bj(S,b4,R,b3,E,b1,b6,b0,bY);while(av(bX-b2)>bZ){bW/=2;bY+=(bX<b2?1:-1)*bW;bX=bj(S,b4,R,b3,E,b1,b6,b0,bY)}return bY}function bc(bW,b5,S,b3,E,b2,b7,b1){if(bQ(bW,S)<at(E,b7)||at(bW,S)>bQ(E,b7)||bQ(b5,b3)<at(b2,b1)||at(b5,b3)>bQ(b2,b1)){return}var b0=(bW*b3-b5*S)*(E-b7)-(bW-S)*(E*b1-b2*b7),bZ=(bW*b3-b5*S)*(b2-b1)-(b5-b3)*(E*b1-b2*b7),bX=(bW-S)*(b2-b1)-(b5-b3)*(E-b7);if(!bX){return}var b6=b0/bX,b4=bZ/bX,bY=+b6.toFixed(2),R=+b4.toFixed(2);if(bY<+at(bW,S).toFixed(2)||bY>+bQ(bW,S).toFixed(2)||bY<+at(E,b7).toFixed(2)||bY>+bQ(E,b7).toFixed(2)||R<+at(b5,b3).toFixed(2)||R>+bQ(b5,b3).toFixed(2)||R<+at(b2,b1).toFixed(2)||R>+bQ(b2,b1).toFixed(2)){return}return{x:b6,y:b4}}function a3(R,E){return aY(R,E)}function aU(R,E){return aY(R,E,1)}function aY(cg,cf,ce){var bW=bq.bezierBBox(cg),R=bq.bezierBBox(cf);if(!bq.isBBoxIntersect(bW,R)){return ce?0:[]}var b9=bj.apply(0,cg),b8=bj.apply(0,cf),b0=bQ(~~(b9/5),1),bZ=bQ(~~(b8/5),1),b6=[],b5=[],S={},ch=ce?0:[];for(var cb=0;cb<b0+1;cb++){var b7=bq.findDotsAtSegment.apply(bq,cg.concat(cb/b0));b6.push({x:b7.x,y:b7.y,t:cb/b0})}for(cb=0;cb<bZ+1;cb++){b7=bq.findDotsAtSegment.apply(bq,cf.concat(cb/bZ));b5.push({x:b7.x,y:b7.y,t:cb/bZ})}for(cb=0;cb<b0;cb++){for(var ca=0;ca<bZ;ca++){var cd=b6[cb],E=b6[cb+1],cc=b5[ca],bY=b5[ca+1],b4=av(E.x-cd.x)<0.001?"y":"x",b3=av(bY.x-cc.x)<0.001?"y":"x",bX=bc(cd.x,cd.y,E.x,E.y,cc.x,cc.y,bY.x,bY.y);if(bX){if(S[bX.x.toFixed(4)]==bX.y.toFixed(4)){continue}S[bX.x.toFixed(4)]=bX.y.toFixed(4);var b2=cd.t+av((bX[b4]-cd[b4])/(E[b4]-cd[b4]))*(E.t-cd.t),b1=cc.t+av((bX[b3]-cc[b3])/(bY[b3]-cc[b3]))*(bY.t-cc.t);if(b2>=0&&b2<=1.001&&b1>=0&&b1<=1.001){if(ce){ch++}else{ch.push({x:bX.x,y:bX.y,t1:at(b2,1),t2:at(b1,1)})}}}}}return ch}bq.pathIntersection=function(R,E){return bM(R,E)};bq.pathIntersectionNumber=function(R,E){return bM(R,E,1)};function bM(S,E,ca){S=bq._path2curve(S);E=bq._path2curve(E);var b8,bY,b7,bW,b5,bZ,R,b2,ce,cd,cf=ca?0:[];for(var b6=0,b0=S.length;b6<b0;b6++){var cc=S[b6];if(cc[0]=="M"){b8=b5=cc[1];bY=bZ=cc[2]}else{if(cc[0]=="C"){ce=[b8,bY].concat(cc.slice(1));b8=ce[6];bY=ce[7]}else{ce=[b8,bY,b8,bY,b5,bZ,b5,bZ];b8=b5;bY=bZ}for(var b4=0,b9=E.length;b4<b9;b4++){var cb=E[b4];if(cb[0]=="M"){b7=R=cb[1];bW=b2=cb[2]}else{if(cb[0]=="C"){cd=[b7,bW].concat(cb.slice(1));b7=cd[6];bW=cd[7]}else{cd=[b7,bW,b7,bW,R,b2,R,b2];b7=R;bW=b2}var b1=aY(ce,cd,ca);if(ca){cf+=b1}else{for(var b3=0,bX=b1.length;b3<bX;b3++){b1[b3].segment1=b6;b1[b3].segment2=b4;b1[b3].bez1=ce;b1[b3].bez2=cd}cf=cf.concat(b1)}}}}}return cf}bq.isPointInsidePath=function(R,E,bW){var S=bq.pathBBox(R);return bq.isPointInsideBBox(S,E,bW)&&bM(R,[["M",E,bW],["H",S.x2+10]],1)%2==1};bq._removedFactory=function(E){return function(){bk("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+E+"\u201d of removed object",E)}};var U=bq.pathBBox=function(b9){var b2=a0(b9);if(b2.bbox){return bt(b2.bbox)}if(!b9){return{x:0,y:0,width:0,height:0,x2:0,y2:0}}b9=bs(b9);var b5=0,b4=0,bY=[],S=[],bW;for(var b0=0,b8=b9.length;b0<b8;b0++){bW=b9[b0];if(bW[0]=="M"){b5=bW[1];b4=bW[2];bY.push(b5);S.push(b4)}else{var b1=a5(b5,b4,bW[1],bW[2],bW[3],bW[4],bW[5],bW[6]);bY=bY[aE](b1.min.x,b1.max.x);S=S[aE](b1.min.y,b1.max.y);b5=bW[5];b4=bW[6]}}var E=at[bA](0,bY),b6=at[bA](0,S),bZ=bQ[bA](0,bY),bX=bQ[bA](0,S),R=bZ-E,b7=bX-b6,b3={x:E,y:b6,x2:bZ,y2:bX,width:R,height:b7,cx:E+R/2,cy:b6+b7/2};b2.bbox=bt(b3);return b3},a6=function(R){var E=bt(R);E.toString=bq._path2string;return E},o=bq._pathToRelative=function(bW){var b0=a0(bW);if(b0.rel){return a6(b0.rel)}if(!bq.is(bW,F)||!bq.is(bW&&bW[0],F)){bW=bq.parsePathString(bW)}var b3=[],b5=0,b4=0,b8=0,b7=0,S=0;if(bW[0][0]=="M"){b5=bW[0][1];b4=bW[0][2];b8=b5;b7=b4;S++;b3.push(["M",b5,b4])}for(var bZ=S,b9=bW.length;bZ<b9;bZ++){var E=b3[bZ]=[],b6=bW[bZ];if(b6[0]!=au.call(b6[0])){E[0]=au.call(b6[0]);switch(E[0]){case"a":E[1]=b6[1];E[2]=b6[2];E[3]=b6[3];E[4]=b6[4];E[5]=b6[5];E[6]=+(b6[6]-b5).toFixed(3);E[7]=+(b6[7]-b4).toFixed(3);break;case"v":E[1]=+(b6[1]-b4).toFixed(3);break;case"m":b8=b6[1];b7=b6[2];default:for(var bY=1,b1=b6.length;bY<b1;bY++){E[bY]=+(b6[bY]-((bY%2)?b5:b4)).toFixed(3)}}}else{E=b3[bZ]=[];if(b6[0]=="m"){b8=b6[1]+b5;b7=b6[2]+b4}for(var bX=0,R=b6.length;bX<R;bX++){b3[bZ][bX]=b6[bX]}}var b2=b3[bZ].length;switch(b3[bZ][0]){case"z":b5=b8;b4=b7;break;case"h":b5+=+b3[bZ][b2-1];break;case"v":b4+=+b3[bZ][b2-1];break;default:b5+=+b3[bZ][b2-2];b4+=+b3[bZ][b2-1]}}b3.toString=bq._path2string;b0.rel=a6(b3);return b3},x=bq._pathToAbsolute=function(b4){var S=a0(b4);if(S.abs){return a6(S.abs)}if(!bq.is(b4,F)||!bq.is(b4&&b4[0],F)){b4=bq.parsePathString(b4)}if(!b4||!b4.length){return[["M",0,0]]}var ca=[],bZ=0,bY=0,b2=0,b1=0,bW=0;if(b4[0][0]=="M"){bZ=+b4[0][1];bY=+b4[0][2];b2=bZ;b1=bY;bW++;ca[0]=["M",bZ,bY]}var b9=b4.length==3&&b4[0][0]=="M"&&b4[1][0].toUpperCase()=="R"&&b4[2][0].toUpperCase()=="Z";for(var b3,E,b7=bW,b0=b4.length;b7<b0;b7++){ca.push(b3=[]);E=b4[b7];if(E[0]!=a2.call(E[0])){b3[0]=a2.call(E[0]);switch(b3[0]){case"A":b3[1]=E[1];b3[2]=E[2];b3[3]=E[3];b3[4]=E[4];b3[5]=E[5];b3[6]=+(E[6]+bZ);b3[7]=+(E[7]+bY);break;case"V":b3[1]=+E[1]+bY;break;case"H":b3[1]=+E[1]+bZ;break;case"R":var bX=[bZ,bY][aE](E.slice(1));for(var b6=2,b8=bX.length;b6<b8;b6++){bX[b6]=+bX[b6]+bZ;bX[++b6]=+bX[b6]+bY}ca.pop();ca=ca[aE](aw(bX,b9));break;case"M":b2=+E[1]+bZ;b1=+E[2]+bY;default:for(b6=1,b8=E.length;b6<b8;b6++){b3[b6]=+E[b6]+((b6%2)?bZ:bY)}}}else{if(E[0]=="R"){bX=[bZ,bY][aE](E.slice(1));ca.pop();ca=ca[aE](aw(bX,b9));b3=["R"][aE](E.slice(-2))}else{for(var b5=0,R=E.length;b5<R;b5++){b3[b5]=E[b5]}}}switch(b3[0]){case"Z":bZ=b2;bY=b1;break;case"H":bZ=b3[1];break;case"V":bY=b3[1];break;case"M":b2=b3[b3.length-2];b1=b3[b3.length-1];default:bZ=b3[b3.length-2];bY=b3[b3.length-1]}}ca.toString=bq._path2string;S.abs=a6(ca);return ca},a4=function(R,bW,E,S){return[R,bW,E,S,E,S]},K=function(R,bW,bZ,bX,E,S){var bY=1/3,b0=2/3;return[bY*R+b0*bZ,bY*bW+b0*bX,bY*E+b0*bZ,bY*S+b0*bX,E,S]},al=function(b6,cD,cf,cd,b7,b1,bW,b5,cC,b8){var cc=aq*120/180,E=aq/180*(+b7||0),cj=[],cg,cz=T(function(cy,cG,cx){var cF=cy*aR.cos(cx)-cG*aR.sin(cx),cE=cy*aR.sin(cx)+cG*aR.cos(cx);return{x:cF,y:cE}});if(!b8){cg=cz(b6,cD,-E);b6=cg.x;cD=cg.y;cg=cz(b5,cC,-E);b5=cg.x;cC=cg.y;var R=aR.cos(aq/180*b7),b3=aR.sin(aq/180*b7),cl=(b6-b5)/2,ck=(cD-cC)/2;var cv=(cl*cl)/(cf*cf)+(ck*ck)/(cd*cd);if(cv>1){cv=aR.sqrt(cv);cf=cv*cf;cd=cv*cd}var S=cf*cf,co=cd*cd,cq=(b1==bW?-1:1)*aR.sqrt(av((S*co-S*ck*ck-co*cl*cl)/(S*ck*ck+co*cl*cl))),ca=cq*cf*ck/cd+(b6+b5)/2,b9=cq*-cd*cl/cf+(cD+cC)/2,b0=aR.asin(((cD-b9)/cd).toFixed(9)),bZ=aR.asin(((cC-b9)/cd).toFixed(9));b0=b6<ca?aq-b0:b0;bZ=b5<ca?aq-bZ:bZ;b0<0&&(b0=aq*2+b0);bZ<0&&(bZ=aq*2+bZ);if(bW&&b0>bZ){b0=b0-aq*2}if(!bW&&bZ>b0){bZ=bZ-aq*2}}else{b0=b8[0];bZ=b8[1];ca=b8[2];b9=b8[3]}var b4=bZ-b0;if(av(b4)>cc){var cb=bZ,ce=b5,b2=cC;bZ=b0+cc*(bW&&bZ>b0?1:-1);b5=ca+cf*aR.cos(bZ);cC=b9+cd*aR.sin(bZ);cj=al(b5,cC,cf,cd,b7,0,bW,ce,b2,[bZ,cb,ca,b9])}b4=bZ-b0;var bY=aR.cos(b0),cB=aR.sin(b0),bX=aR.cos(bZ),cA=aR.sin(bZ),cm=aR.tan(b4/4),cp=4/3*cf*cm,cn=4/3*cd*cm,cw=[b6,cD],cu=[b6+cp*cB,cD-cn*bY],ct=[b5+cp*cA,cC-cn*bX],cr=[b5,cC];cu[0]=2*cw[0]-cu[0];cu[1]=2*cw[1]-cu[1];if(b8){return[cu,ct,cr][aE](cj)}else{cj=[cu,ct,cr][aE](cj).join()[q](",");var ch=[];for(var cs=0,ci=cj.length;cs<ci;cs++){ch[cs]=cs%2?cz(cj[cs-1],cj[cs],E).y:cz(cj[cs],cj[cs+1],E).x}return ch}},bT=function(R,E,bW,S,b1,b0,bZ,bY,b2){var bX=1-b2;return{x:a1(bX,3)*R+a1(bX,2)*3*b2*bW+bX*3*b2*b2*b1+a1(b2,3)*bZ,y:a1(bX,3)*E+a1(bX,2)*3*b2*S+bX*3*b2*b2*b0+a1(b2,3)*bY}},a5=T(function(S,E,bX,bW,b8,b7,b4,b1){var b6=(b8-2*bX+S)-(b4-2*b8+bX),b3=2*(bX-S)-2*(b8-bX),b0=S-bX,bZ=(-b3+aR.sqrt(b3*b3-4*b6*b0))/2/b6,bY=(-b3-aR.sqrt(b3*b3-4*b6*b0))/2/b6,b2=[E,b1],b5=[S,b4],R;av(bZ)>"1e12"&&(bZ=0.5);av(bY)>"1e12"&&(bY=0.5);if(bZ>0&&bZ<1){R=bT(S,E,bX,bW,b8,b7,b4,b1,bZ);b5.push(R.x);b2.push(R.y)}if(bY>0&&bY<1){R=bT(S,E,bX,bW,b8,b7,b4,b1,bY);b5.push(R.x);b2.push(R.y)}b6=(b7-2*bW+E)-(b1-2*b7+bW);b3=2*(bW-E)-2*(b7-bW);b0=E-bW;bZ=(-b3+aR.sqrt(b3*b3-4*b6*b0))/2/b6;bY=(-b3-aR.sqrt(b3*b3-4*b6*b0))/2/b6;av(bZ)>"1e12"&&(bZ=0.5);av(bY)>"1e12"&&(bY=0.5);if(bZ>0&&bZ<1){R=bT(S,E,bX,bW,b8,b7,b4,b1,bZ);b5.push(R.x);b2.push(R.y)}if(bY>0&&bY<1){R=bT(S,E,bX,bW,b8,b7,b4,b1,bY);b5.push(R.x);b2.push(R.y)}return{min:{x:at[bA](0,b5),y:at[bA](0,b2)},max:{x:bQ[bA](0,b5),y:bQ[bA](0,b2)}}}),bs=bq._path2curve=T(function(b1,R){var bX=!R&&a0(b1);if(!R&&bX.curve){return a6(bX.curve)}var b2=x(b1),E=R&&x(R),b3={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ca={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b9=function(cg,ch,ce){var cd,ci,cf={T:1,Q:1};if(!cg){return["C",ch.x,ch.y,ch.x,ch.y,ch.x,ch.y]}!(cg[0] in cf)&&(ch.qx=ch.qy=null);switch(cg[0]){case"M":ch.X=cg[1];ch.Y=cg[2];break;case"A":cg=["C"][aE](al[bA](0,[ch.x,ch.y][aE](cg.slice(1))));break;case"S":if(ce=="C"||ce=="S"){cd=ch.x*2-ch.bx;ci=ch.y*2-ch.by}else{cd=ch.x;ci=ch.y}cg=["C",cd,ci][aE](cg.slice(1));break;case"T":if(ce=="Q"||ce=="T"){ch.qx=ch.x*2-ch.qx;ch.qy=ch.y*2-ch.qy}else{ch.qx=ch.x;ch.qy=ch.y}cg=["C"][aE](K(ch.x,ch.y,ch.qx,ch.qy,cg[1],cg[2]));break;case"Q":ch.qx=cg[1];ch.qy=cg[2];cg=["C"][aE](K(ch.x,ch.y,cg[1],cg[2],cg[3],cg[4]));break;case"L":cg=["C"][aE](a4(ch.x,ch.y,cg[1],cg[2]));break;case"H":cg=["C"][aE](a4(ch.x,ch.y,cg[1],ch.y));break;case"V":cg=["C"][aE](a4(ch.x,ch.y,ch.x,cg[1]));break;case"Z":cg=["C"][aE](a4(ch.x,ch.y,ch.X,ch.Y));break}return cg},b7=function(cd,ce){if(cd[ce].length>7){cd[ce].shift();var cf=cd[ce];while(cf.length){b6[ce]="A";E&&(b4[ce]="A");cd.splice(ce++,0,["C"][aE](cf.splice(0,6)))}cd.splice(ce,1);bZ=bQ(b2.length,E&&E.length||0)}},bY=function(ch,cg,ce,cd,cf){if(ch&&cg&&ch[cf][0]=="M"&&cg[cf][0]!="M"){cg.splice(cf,0,["M",cd.x,cd.y]);ce.bx=0;ce.by=0;ce.x=ch[cf][1];ce.y=ch[cf][2];bZ=bQ(b2.length,E&&E.length||0)}},b6=[],b4=[],S="",cb="";for(var b5=0,bZ=bQ(b2.length,E&&E.length||0);b5<bZ;b5++){b2[b5]&&(S=b2[b5][0]);if(S!="C"){b6[b5]=S;b5&&(cb=b6[b5-1])}b2[b5]=b9(b2[b5],b3,cb);if(b6[b5]!="A"&&S=="C"){b6[b5]="C"}b7(b2,b5);if(E){E[b5]&&(S=E[b5][0]);if(S!="C"){b4[b5]=S;b5&&(cb=b4[b5-1])}E[b5]=b9(E[b5],ca,cb);if(b4[b5]!="A"&&S=="C"){b4[b5]="C"}b7(E,b5)}bY(b2,E,b3,ca,b5);bY(E,b2,ca,b3,b5);var b8=b2[b5],cc=E&&E[b5],b0=b8.length,bW=E&&cc.length;b3.x=b8[b0-2];b3.y=b8[b0-1];b3.bx=bU(b8[b0-4])||b3.x;b3.by=bU(b8[b0-3])||b3.y;ca.bx=E&&(bU(cc[bW-4])||ca.x);ca.by=E&&(bU(cc[bW-3])||ca.y);ca.x=E&&cc[bW-2];ca.y=E&&cc[bW-1]}if(!E){bX.curve=a6(b2)}return E?[b2,E]:b2},null,a6),bi=bq._parseDots=T(function(b1){var b0=[];for(var bX=0,b2=b1.length;bX<b2;bX++){var E={},bZ=b1[bX].match(/^([^:]*):?([\d\.]*)/);E.color=bq.getRGB(bZ[1]);if(E.color.error){return null}E.opacity=E.color.opacity;E.color=E.color.hex;bZ[2]&&(E.offset=bZ[2]+"%");b0.push(E)}for(bX=1,b2=b0.length-1;bX<b2;bX++){if(!b0[bX].offset){var R=bU(b0[bX-1].offset||0),S=0;for(var bW=bX+1;bW<b2;bW++){if(b0[bW].offset){S=b0[bW].offset;break}}if(!S){S=100;bW=b2}S=bU(S);var bY=(S-R)/(bW-bX+1);for(;bX<bW;bX++){R+=bY;b0[bX].offset=R+"%"}}}return b0}),aQ=bq._tear=function(E,R){E==R.top&&(R.top=E.prev);E==R.bottom&&(R.bottom=E.next);E.next&&(E.next.prev=E.prev);E.prev&&(E.prev.next=E.next)},X=bq._tofront=function(E,R){if(R.top===E){return}aQ(E,R);E.next=null;E.prev=R.top;R.top.next=E;R.top=E},J=bq._toback=function(E,R){if(R.bottom===E){return}aQ(E,R);E.next=R.bottom;E.prev=null;R.bottom.prev=E;R.bottom=E},aB=bq._insertafter=function(R,E,S){aQ(R,S);E==S.top&&(S.top=R);E.next&&(E.next.prev=R);R.next=E.next;R.prev=E;E.next=R},r=bq._insertbefore=function(R,E,S){aQ(R,S);E==S.bottom&&(S.bottom=R);E.prev&&(E.prev.next=R);R.prev=E.prev;E.prev=R;R.next=E},D=bq.toMatrix=function(S,E){var bW=U(S),R={_:{transform:bv},getBBox:function(){return bW}};ah(R,E);return R.matrix},aH=bq.transformPath=function(R,E){return ac(R,D(R,E))},ah=bq._extractTransform=function(R,cd){if(cd==null){return R._.transform}cd=p(cd).replace(/\.{3}|\u2026/g,R._.transform||bv);var b5=bq.parseTransformString(cd),b3=0,b1=0,b0=0,b7=1,b6=1,ce=R._,b8=new bh;ce.transform=b5||[];if(b5){for(var b9=0,b2=b5.length;b9<b2;b9++){var b4=b5[b9],E=b4.length,bX=p(b4[0]).toLowerCase(),cc=b4[0]!=bX,bZ=cc?b8.invert():0,cb,bW,ca,S,bY;if(bX=="t"&&E==3){if(cc){cb=bZ.x(0,0);bW=bZ.y(0,0);ca=bZ.x(b4[1],b4[2]);S=bZ.y(b4[1],b4[2]);b8.translate(ca-cb,S-bW)}else{b8.translate(b4[1],b4[2])}}else{if(bX=="r"){if(E==2){bY=bY||R.getBBox(1);b8.rotate(b4[1],bY.x+bY.width/2,bY.y+bY.height/2);b3+=b4[1]}else{if(E==4){if(cc){ca=bZ.x(b4[2],b4[3]);S=bZ.y(b4[2],b4[3]);b8.rotate(b4[1],ca,S)}else{b8.rotate(b4[1],b4[2],b4[3])}b3+=b4[1]}}}else{if(bX=="s"){if(E==2||E==3){bY=bY||R.getBBox(1);b8.scale(b4[1],b4[E-1],bY.x+bY.width/2,bY.y+bY.height/2);b7*=b4[1];b6*=b4[E-1]}else{if(E==5){if(cc){ca=bZ.x(b4[3],b4[4]);S=bZ.y(b4[3],b4[4]);b8.scale(b4[1],b4[2],ca,S)}else{b8.scale(b4[1],b4[2],b4[3],b4[4])}b7*=b4[1];b6*=b4[2]}}}else{if(bX=="m"&&E==7){b8.add(b4[1],b4[2],b4[3],b4[4],b4[5],b4[6])}}}}ce.dirtyT=1;R.matrix=b8}}R.matrix=b8;ce.sx=b7;ce.sy=b6;ce.deg=b3;ce.dx=b1=b8.e;ce.dy=b0=b8.f;if(b7==1&&b6==1&&!b3&&ce.bbox){ce.bbox.x+=+b1;ce.bbox.y+=+b0}else{ce.dirtyT=1}},w=function(R){var E=R[0];switch(E.toLowerCase()){case"t":return[E,0,0];case"m":return[E,1,0,0,1,0,0];case"r":if(R.length==4){return[E,0,R[2],R[3]]}else{return[E,0]}case"s":if(R.length==5){return[E,1,1,R[3],R[4]]}else{if(R.length==3){return[E,1,1]}else{return[E,1]}}}},bl=bq._equaliseTransform=function(bX,bW){bW=p(bW).replace(/\.{3}|\u2026/g,bX);bX=bq.parseTransformString(bX)||[];bW=bq.parseTransformString(bW)||[];var E=bQ(bX.length,bW.length),b1=[],b2=[],S=0,R,bY,b0,bZ;for(;S<E;S++){b0=bX[S]||w(bW[S]);bZ=bW[S]||w(b0);if((b0[0]!=bZ[0])||(b0[0].toLowerCase()=="r"&&(b0[2]!=bZ[2]||b0[3]!=bZ[3]))||(b0[0].toLowerCase()=="s"&&(b0[3]!=bZ[3]||b0[4]!=bZ[4]))){return}b1[S]=[];b2[S]=[];for(R=0,bY=bQ(b0.length,bZ.length);R<bY;R++){R in b0&&(b1[S][R]=b0[R]);R in bZ&&(b2[S][R]=bZ[R])}}return{from:b1,to:b2}};bq._getContainer=function(E,bX,S,bW){var R;R=bW==null&&!bq.is(E,"object")?bd.doc.getElementById(E):E;if(R==null){return}if(R.tagName){if(bX==null){return{container:R,width:R.style.pixelWidth||R.offsetWidth,height:R.style.pixelHeight||R.offsetHeight}}else{return{container:R,width:bX,height:S}}}return{container:1,x:E,y:bX,width:S,height:bW}};bq.pathToRelative=o;bq._engine={};bq.path2curve=bs;bq.matrix=function(R,E,bY,bX,bW,S){return new bh(R,E,bY,bX,bW,S)};function bh(R,E,bY,bX,bW,S){if(R!=null){this.a=+R;this.b=+E;this.c=+bY;this.d=+bX;this.e=+bW;this.f=+S}else{this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0}}(function(S){S.add=function(b8,b5,b3,b1,bZ,bY){var bX=[[],[],[]],bW=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],b7=[[b8,b3,bZ],[b5,b1,bY],[0,0,1]],b6,b4,b2,b0;if(b8&&b8 instanceof bh){b7=[[b8.a,b8.c,b8.e],[b8.b,b8.d,b8.f],[0,0,1]]}for(b6=0;b6<3;b6++){for(b4=0;b4<3;b4++){b0=0;for(b2=0;b2<3;b2++){b0+=bW[b6][b2]*b7[b2][b4]}bX[b6][b4]=b0}}this.a=bX[0][0];this.b=bX[1][0];this.c=bX[0][1];this.d=bX[1][1];this.e=bX[0][2];this.f=bX[1][2]};S.invert=function(){var bX=this,bW=bX.a*bX.d-bX.b*bX.c;return new bh(bX.d/bW,-bX.b/bW,-bX.c/bW,bX.a/bW,(bX.c*bX.f-bX.d*bX.e)/bW,(bX.b*bX.e-bX.a*bX.f)/bW)};S.clone=function(){return new bh(this.a,this.b,this.c,this.d,this.e,this.f)};S.translate=function(bW,bX){this.add(1,0,0,1,bW,bX)};S.scale=function(bX,bZ,bW,bY){bZ==null&&(bZ=bX);(bW||bY)&&this.add(1,0,0,1,bW,bY);this.add(bX,0,0,bZ,0,0);(bW||bY)&&this.add(1,0,0,1,-bW,-bY)};S.rotate=function(bX,bW,b0){bX=bq.rad(bX);bW=bW||0;b0=b0||0;var bZ=+aR.cos(bX).toFixed(9),bY=+aR.sin(bX).toFixed(9);this.add(bZ,bY,-bY,bZ,bW,b0);this.add(1,0,0,1,-bW,-b0)};S.x=function(bW,bX){return bW*this.a+bX*this.c+this.e};S.y=function(bW,bX){return bW*this.b+bX*this.d+this.f};S.get=function(bW){return +this[p.fromCharCode(97+bW)].toFixed(4)};S.toString=function(){return bq.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};S.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};S.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};function R(bW){return bW[0]*bW[0]+bW[1]*bW[1]}function E(bW){var bX=aR.sqrt(R(bW));bW[0]&&(bW[0]/=bX);bW[1]&&(bW[1]/=bX)}S.split=function(){var bX={};bX.dx=this.e;bX.dy=this.f;var bZ=[[this.a,this.c],[this.b,this.d]];bX.scalex=aR.sqrt(R(bZ[0]));E(bZ[0]);bX.shear=bZ[0][0]*bZ[1][0]+bZ[0][1]*bZ[1][1];bZ[1]=[bZ[1][0]-bZ[0][0]*bX.shear,bZ[1][1]-bZ[0][1]*bX.shear];bX.scaley=aR.sqrt(R(bZ[1]));E(bZ[1]);bX.shear/=bX.scaley;var bW=-bZ[0][1],bY=bZ[1][1];if(bY<0){bX.rotate=bq.deg(aR.acos(bY));if(bW<0){bX.rotate=360-bX.rotate}}else{bX.rotate=bq.deg(aR.asin(bW))}bX.isSimple=!+bX.shear.toFixed(9)&&(bX.scalex.toFixed(9)==bX.scaley.toFixed(9)||!bX.rotate);bX.isSuperSimple=!+bX.shear.toFixed(9)&&bX.scalex.toFixed(9)==bX.scaley.toFixed(9)&&!bX.rotate;bX.noRotation=!+bX.shear.toFixed(9)&&!bX.rotate;return bX};S.toTransformString=function(bW){var bX=bW||this[q]();if(bX.isSimple){bX.scalex=+bX.scalex.toFixed(4);bX.scaley=+bX.scaley.toFixed(4);bX.rotate=+bX.rotate.toFixed(4);return(bX.dx||bX.dy?"t"+[bX.dx,bX.dy]:bv)+(bX.scalex!=1||bX.scaley!=1?"s"+[bX.scalex,bX.scaley,0,0]:bv)+(bX.rotate?"r"+[bX.rotate,0,0]:bv)}else{return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}})(bh.prototype);var bL=function(){this.returnValue=false},u=function(){return this.originalEvent.preventDefault()},aS=function(){this.cancelBubble=true},af=function(){return this.originalEvent.stopPropagation()},ao=function(R){var E=bd.doc.documentElement.scrollTop||bd.doc.body.scrollTop,S=bd.doc.documentElement.scrollLeft||bd.doc.body.scrollLeft;return{x:R.clientX+S,y:R.clientY+E}},P=(function(){if(bd.doc.addEventListener){return function(bX,S,R,E){var bW=function(bZ){var b0=ao(bZ);return R.call(E,bZ,b0.x,b0.y)};bX.addEventListener(S,bW,false);if(aa&&bx[S]){var bY=function(b2){var b3=ao(b2),b0=b2;for(var bZ=0,b1=b2.targetTouches&&b2.targetTouches.length;bZ<b1;bZ++){if(b2.targetTouches[bZ].target==bX){b2=b2.targetTouches[bZ];b2.originalEvent=b0;b2.preventDefault=u;b2.stopPropagation=af;break}}return R.call(E,b2,b3.x,b3.y)};bX.addEventListener(bx[S],bY,false)}return function(){bX.removeEventListener(S,bW,false);if(aa&&bx[S]){bX.removeEventListener(bx[S],bY,false)}return true}}}else{if(bd.doc.attachEvent){return function(bY,bW,S,R){var bX=function(b1){b1=b1||bd.win.event;var b0=bd.doc.documentElement.scrollTop||bd.doc.body.scrollTop,b2=bd.doc.documentElement.scrollLeft||bd.doc.body.scrollLeft,bZ=b1.clientX+b2,b3=b1.clientY+b0;b1.preventDefault=b1.preventDefault||bL;b1.stopPropagation=b1.stopPropagation||aS;return S.call(R,b1,bZ,b3)};bY.attachEvent("on"+bW,bX);var E=function(){bY.detachEvent("on"+bW,bX);return true};return E}}}})(),aJ=[],bz=function(b0){var b3=b0.clientX,b2=b0.clientY,b5=bd.doc.documentElement.scrollTop||bd.doc.body.scrollTop,b6=bd.doc.documentElement.scrollLeft||bd.doc.body.scrollLeft,S,bW=aJ.length;while(bW--){S=aJ[bW];if(aa&&b0.touches){var bY=b0.touches.length,bX;while(bY--){bX=b0.touches[bY];if(bX.identifier==S.el._drag.id){b3=bX.clientX;b2=bX.clientY;(b0.originalEvent?b0.originalEvent:b0).preventDefault();break}}}else{b0.preventDefault()}var R=S.el.node,E,bZ=R.nextSibling,b4=R.parentNode,b1=R.style.display;bd.win.opera&&b4.removeChild(R);R.style.display="none";E=S.el.paper.getElementByPoint(b3,b2);R.style.display=b1;bd.win.opera&&(bZ?b4.insertBefore(R,bZ):b4.appendChild(R));E&&bk("raphael.drag.over."+S.el.id,S.el,E);b3+=b6;b2+=b5;bk("raphael.drag.move."+S.el.id,S.move_scope||S.el,b3-S.el._drag.x,b2-S.el._drag.y,b3,b2,b0)}},l=function(S){bq.unmousemove(bz).unmouseup(l);var R=aJ.length,E;while(R--){E=aJ[R];E.el._drag={};bk("raphael.drag.end."+E.el.id,E.end_scope||E.start_scope||E.move_scope||E.el,S)}aJ=[]},aA=bq.el={};for(var bb=bJ.length;bb--;){(function(E){bq[E]=aA[E]=function(S,R){if(bq.is(S,"function")){this.events=this.events||[];this.events.push({name:E,f:S,unbind:P(this.shape||this.node||bd.doc,E,S,R||this)})}return this};bq["un"+E]=aA["un"+E]=function(bW){var S=this.events||[],R=S.length;while(R--){if(S[R].name==E&&(bq.is(bW,"undefined")||S[R].f==bW)){S[R].unbind();S.splice(R,1);!S.length&&delete this.events}}return this}})(bJ[bb])}aA.data=function(R,bW){var S=Y[this.id]=Y[this.id]||{};if(arguments.length==0){return S}if(arguments.length==1){if(bq.is(R,"object")){for(var E in R){if(R[bE](E)){this.data(E,R[E])}}return this}bk("raphael.data.get."+this.id,this,S[R],R);return S[R]}S[R]=bW;bk("raphael.data.set."+this.id,this,bW,R);return this};aA.removeData=function(E){if(E==null){Y[this.id]={}}else{Y[this.id]&&delete Y[this.id][E]}return this};aA.getData=function(){return bt(Y[this.id]||{})};aA.hover=function(bW,E,S,R){return this.mouseover(bW,S).mouseout(E,R||S)};aA.unhover=function(R,E){return this.unmouseover(R).unmouseout(E)};var ar=[];aA.drag=function(R,bY,bX,E,S,bW){function bZ(b3){if(("which" in b3)?(b3.which==2||b3.which==3):(b3.button==4||b3.button==2)){return}(b3.originalEvent||b3).preventDefault();var b0=b3.clientX,b6=b3.clientY,b2=bd.doc.documentElement.scrollTop||bd.doc.body.scrollTop,b4=bd.doc.documentElement.scrollLeft||bd.doc.body.scrollLeft;this._drag.id=b3.identifier;if(aa&&b3.touches){var b1=b3.touches.length,b5;while(b1--){b5=b3.touches[b1];this._drag.id=b5.identifier;if(b5.identifier==this._drag.id){b0=b5.clientX;b6=b5.clientY;break}}}this._drag.x=b0+b4;this._drag.y=b6+b2;!aJ.length&&bq.mousemove(bz).mouseup(l);aJ.push({el:this,move_scope:E,start_scope:S,end_scope:bW});bY&&bk.on("raphael.drag.start."+this.id,bY);R&&bk.on("raphael.drag.move."+this.id,R);bX&&bk.on("raphael.drag.end."+this.id,bX);bk("raphael.drag.start."+this.id,S||E||this,b3.clientX+b4,b3.clientY+b2,b3)}this._drag={};ar.push({el:this,start:bZ});this.mousedown(bZ);return this};aA.onDragOver=function(E){E?bk.on("raphael.drag.over."+this.id,E):bk.unbind("raphael.drag.over."+this.id)};aA.undrag=function(){var E=ar.length;while(E--){if(ar[E].el==this){this.unmousedown(ar[E].start);ar.splice(E,1);bk.unbind("raphael.drag.*."+this.id)}}!ar.length&&bq.unmousemove(bz).unmouseup(l);aJ=[]};ay.circle=function(E,bW,S){var R=bq._engine.circle(this,E||0,bW||0,S||0);this.__set__&&this.__set__.push(R);return R};ay.rect=function(E,bY,R,bW,bX){var S=bq._engine.rect(this,E||0,bY||0,R||0,bW||0,bX||0);this.__set__&&this.__set__.push(S);return S};ay.ellipse=function(E,bX,bW,S){var R=bq._engine.ellipse(this,E||0,bX||0,bW||0,S||0);this.__set__&&this.__set__.push(R);return R};ay.path=function(E){E&&!bq.is(E,h)&&!bq.is(E[0],F)&&(E+=bv);var R=bq._engine.path(bq.format[bA](bq,arguments),this);this.__set__&&this.__set__.push(R);return R};ay.image=function(bX,E,bY,R,bW){var S=bq._engine.image(this,bX||"about:blank",E||0,bY||0,R||0,bW||0);this.__set__&&this.__set__.push(S);return S};ay.text=function(E,bW,S){var R=bq._engine.text(this,E||0,bW||0,p(S));this.__set__&&this.__set__.push(R);return R};ay.set=function(R){!bq.is(R,"array")&&(R=Array.prototype.splice.call(arguments,0,arguments.length));var E=new ai(R);this.__set__&&this.__set__.push(E);E.paper=this;E.type="set";return E};ay.setStart=function(E){this.__set__=E||this.set()};ay.setFinish=function(R){var E=this.__set__;delete this.__set__;return E};ay.getSize=function(){var E=this.canvas.parentNode;return{width:E.offsetWidth,height:E.offsetHeight}};ay.setSize=function(R,E){return bq._engine.setSize.call(this,R,E)};ay.setViewBox=function(E,bX,R,bW,S){return bq._engine.setViewBox.call(this,E,bX,R,bW,S)};ay.top=ay.bottom=null;ay.raphael=bq;var bV=function(S){var bX=S.getBoundingClientRect(),b1=S.ownerDocument,bY=b1.body,E=b1.documentElement,bW=E.clientTop||bY.clientTop||0,bZ=E.clientLeft||bY.clientLeft||0,b0=bX.top+(bd.win.pageYOffset||E.scrollTop||bY.scrollTop)-bW,R=bX.left+(bd.win.pageXOffset||E.scrollLeft||bY.scrollLeft)-bZ;return{y:b0,x:R}};ay.getElementByPoint=function(R,b0){var bZ=this,S=bZ.canvas,bY=bd.doc.elementFromPoint(R,b0);if(bd.win.opera&&bY.tagName=="svg"){var bX=bV(S),bW=S.createSVGRect();bW.x=R-bX.x;bW.y=b0-bX.y;bW.width=bW.height=1;var E=S.getIntersectionList(bW,null);if(E.length){bY=E[E.length-1]}}if(!bY){return null}while(bY.parentNode&&bY!=S.parentNode&&!bY.raphael){bY=bY.parentNode}bY==bZ.canvas.parentNode&&(bY=S);bY=bY&&bY.raphael?bZ.getById(bY.raphaelid):null;return bY};ay.getElementsByBBox=function(E){var R=this.set();this.forEach(function(S){if(bq.isBBoxIntersect(S.getBBox(),E)){R.push(S)}});return R};ay.getById=function(R){var E=this.bottom;while(E){if(E.id==R){return E}E=E.next}return null};ay.forEach=function(S,E){var R=this.bottom;while(R){if(S.call(E,R)===false){return this}R=R.next}return this};ay.getElementsByPoint=function(E,S){var R=this.set();this.forEach(function(bW){if(bW.isPointInside(E,S)){R.push(bW)}});return R};function bF(){return this.x+bp+this.y}function be(){return this.x+bp+this.y+bp+this.width+" \xd7 "+this.height}aA.isPointInside=function(E,S){var R=this.realPath=ap[this.type](this);if(this.attr("transform")&&this.attr("transform").length){R=bq.transformPath(R,this.attr("transform"))}return bq.isPointInsidePath(R,E,S)};aA.getBBox=function(R){if(this.removed){return{}}var E=this._;if(R){if(E.dirty||!E.bboxwt){this.realPath=ap[this.type](this);E.bboxwt=U(this.realPath);E.bboxwt.toString=be;E.dirty=0}return E.bboxwt}if(E.dirty||E.dirtyT||!E.bbox){if(E.dirty||!this.realPath){E.bboxwt=0;this.realPath=ap[this.type](this)}E.bbox=U(ac(this.realPath,this.matrix));E.bbox.toString=be;E.dirty=E.dirtyT=0}return E.bbox};aA.clone=function(){if(this.removed){return null}var E=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(E);return E};aA.glow=function(bZ){if(this.type=="text"){return null}bZ=bZ||{};var S={width:(bZ.width||10)+(+this.attr("stroke-width")||1),fill:bZ.fill||false,opacity:bZ.opacity==null?0.5:bZ.opacity,offsetx:bZ.offsetx||0,offsety:bZ.offsety||0,color:bZ.color||"#000"},bY=S.width/2,bW=this.paper,E=bW.set(),bX=this.realPath||ap[this.type](this);bX=this.matrix?ac(bX,this.matrix):bX;for(var R=1;R<bY+1;R++){E.push(bW.path(bX).attr({stroke:S.color,fill:S.fill?S.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(S.width/bY*R).toFixed(3),opacity:+(S.opacity/bY).toFixed(3)}))}return E.insertBefore(this).translate(S.offsetx,S.offsety)};var a7={},aX=function(R,E,bX,bW,b1,b0,bZ,bY,S){if(S==null){return bj(R,E,bX,bW,b1,b0,bZ,bY)}else{return bq.findDotsAtSegment(R,E,bX,bW,b1,b0,bZ,bY,aT(R,E,bX,bW,b1,b0,bZ,bY,S))}},aM=function(E,R){return function(b7,bX,bY){b7=bs(b7);var b3,b2,S,bZ,bW="",b6={},b4,b1=0;for(var b0=0,b5=b7.length;b0<b5;b0++){S=b7[b0];if(S[0]=="M"){b3=+S[1];b2=+S[2]}else{bZ=aX(b3,b2,S[1],S[2],S[3],S[4],S[5],S[6]);if(b1+bZ>bX){if(R&&!b6.start){b4=aX(b3,b2,S[1],S[2],S[3],S[4],S[5],S[6],bX-b1);bW+=["C"+b4.start.x,b4.start.y,b4.m.x,b4.m.y,b4.x,b4.y];if(bY){return bW}b6.start=bW;bW=["M"+b4.x,b4.y+"C"+b4.n.x,b4.n.y,b4.end.x,b4.end.y,S[5],S[6]].join();b1+=bZ;b3=+S[5];b2=+S[6];continue}if(!E&&!R){b4=aX(b3,b2,S[1],S[2],S[3],S[4],S[5],S[6],bX-b1);return{x:b4.x,y:b4.y,alpha:b4.alpha}}}b1+=bZ;b3=+S[5];b2=+S[6]}bW+=S.shift()+S}b6.end=bW;b4=E?b1:R?b6:bq.findDotsAtSegment(b3,b2,S[0],S[1],S[2],S[3],S[4],S[5],1);b4.alpha&&(b4={x:b4.x,y:b4.y,alpha:b4.alpha});return b4}};var bO=aM(1),bG=aM(),aK=aM(0,1);bq.getTotalLength=bO;bq.getPointAtLength=bG;bq.getSubpath=function(R,bW,S){if(this.getTotalLength(R)-S<0.000001){return aK(R,bW).end}var E=aK(R,S,1);return bW?aK(E,bW).end:E};aA.getTotalLength=function(){var E=this.getPath();if(!E){return}if(this.node.getTotalLength){return this.node.getTotalLength()}return bO(E)};aA.getPointAtLength=function(E){var R=this.getPath();if(!R){return}return bG(R,E)};aA.getPath=function(){var R,E=bq._getPath[this.type];if(this.type=="text"||this.type=="set"){return}if(E){R=E(this)}return R};aA.getSubpath=function(S,R){var E=this.getPath();if(!E){return}return bq.getSubpath(E,S,R)};var aP=bq.easing_formulas={linear:function(E){return E},"<":function(E){return a1(E,1.7)},">":function(E){return a1(E,0.48)},"<>":function(b0){var bW=0.48-b0/1.04,S=aR.sqrt(0.1734+bW*bW),E=S-bW,bZ=a1(av(E),1/3)*(E<0?-1:1),bY=-S-bW,bX=a1(av(bY),1/3)*(bY<0?-1:1),R=bZ+bX+0.5;return(1-R)*3*R*R+R*R*R},backIn:function(R){var E=1.70158;return R*R*((E+1)*R-E)},backOut:function(R){R=R-1;var E=1.70158;return R*R*((E+1)*R+E)+1},elastic:function(E){if(E==!!E){return E}return a1(2,-10*E)*aR.sin((E-0.075)*(2*aq)/0.3)+1},bounce:function(bW){var R=7.5625,S=2.75,E;if(bW<(1/S)){E=R*bW*bW}else{if(bW<(2/S)){bW-=(1.5/S);E=R*bW*bW+0.75}else{if(bW<(2.5/S)){bW-=(2.25/S);E=R*bW*bW+0.9375}else{bW-=(2.625/S);E=R*bW*bW+0.984375}}}return E}};aP.easeIn=aP["ease-in"]=aP["<"];aP.easeOut=aP["ease-out"]=aP[">"];aP.easeInOut=aP["ease-in-out"]=aP["<>"];aP["back-in"]=aP.backIn;aP["back-out"]=aP.backOut;var bN=[],bP=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(E){setTimeout(E,16)},aC=function(){var bZ=+new Date,b7=0;for(;b7<bN.length;b7++){var cd=bN[b7];if(cd.el.removed||cd.paused){continue}var bW=bZ-cd.start,b5=cd.ms,b4=cd.easing,b8=cd.from,b2=cd.diff,R=cd.to,b1=cd.t,bY=cd.el,b3={},E,cb={},cf;if(cd.initstatus){bW=(cd.initstatus*cd.anim.top-cd.prev)/(cd.percent-cd.prev)*b5;cd.status=cd.initstatus;delete cd.initstatus;cd.stop&&bN.splice(b7--,1)}else{cd.status=(cd.prev+(cd.percent-cd.prev)*(bW/b5))/cd.anim.top}if(bW<0){continue}if(bW<b5){var S=b4(bW/b5);for(var b6 in b8){if(b8[bE](b6)){switch(bw[b6]){case br:E=+b8[b6]+S*b5*b2[b6];break;case"colour":E="rgb("+[a9(N(b8[b6].r+S*b5*b2[b6].r)),a9(N(b8[b6].g+S*b5*b2[b6].g)),a9(N(b8[b6].b+S*b5*b2[b6].b))].join(",")+")";break;case"path":E=[];for(var ca=0,b0=b8[b6].length;ca<b0;ca++){E[ca]=[b8[b6][ca][0]];for(var b9=1,cc=b8[b6][ca].length;b9<cc;b9++){E[ca][b9]=+b8[b6][ca][b9]+S*b5*b2[b6][ca][b9]}E[ca]=E[ca].join(bp)}E=E.join(bp);break;case"transform":if(b2[b6].real){E=[];for(ca=0,b0=b8[b6].length;ca<b0;ca++){E[ca]=[b8[b6][ca][0]];for(b9=1,cc=b8[b6][ca].length;b9<cc;b9++){E[ca][b9]=b8[b6][ca][b9]+S*b5*b2[b6][ca][b9]}}}else{var ce=function(cg){return +b8[b6][cg]+S*b5*b2[b6][cg]};E=[["m",ce(0),ce(1),ce(2),ce(3),ce(4),ce(5)]]}break;case"csv":if(b6=="clip-rect"){E=[];ca=4;while(ca--){E[ca]=+b8[b6][ca]+S*b5*b2[b6][ca]}}break;default:var bX=[][aE](b8[b6]);E=[];ca=bY.paper.customAttributes[b6].length;while(ca--){E[ca]=+bX[ca]+S*b5*b2[b6][ca]}break}b3[b6]=E}}bY.attr(b3);(function(ci,cg,ch){setTimeout(function(){bk("raphael.anim.frame."+ci,cg,ch)})})(bY.id,bY,cd.anim)}else{(function(ci,ch,cg){setTimeout(function(){bk("raphael.anim.frame."+ch.id,ch,cg);bk("raphael.anim.finish."+ch.id,ch,cg);bq.is(ci,"function")&&ci.call(ch)})})(cd.callback,bY,cd.anim);bY.attr(R);bN.splice(b7--,1);if(cd.repeat>1&&!cd.next){for(cf in R){if(R[bE](cf)){cb[cf]=cd.totalOrigin[cf]}}cd.el.attr(cb);ad(cd.anim,cd.el,cd.anim.percents[0],null,cd.totalOrigin,cd.repeat-1)}if(cd.next&&!cd.stop){ad(cd.anim,cd.el,cd.next,null,cd.totalOrigin,cd.repeat)}}}bN.length&&bP(aC)},a9=function(E){return E>255?255:E<0?0:E};aA.animateWith=function(R,bW,S,E,bZ,b4){var bY=this;if(bY.removed){b4&&b4.call(bY);return bY}var b2=S instanceof m?S:bq.animation(S,E,bZ,b4),b1,b0;ad(b2,bY,b2.percents[0],null,bY.attr());for(var bX=0,b3=bN.length;bX<b3;bX++){if(bN[bX].anim==bW&&bN[bX].el==R){bN[b3-1].start=bN[bX].start;break}}return bY};function a8(b6,bW,R,b5,b4,b0){var b1=3*bW,b3=3*(b5-bW)-b1,E=1-b1-b3,bZ=3*R,b2=3*(b4-R)-bZ,b7=1-bZ-b2;function bY(b8){return((E*b8+b3)*b8+b1)*b8}function S(b8,ca){var b9=bX(b8,ca);return((b7*b9+b2)*b9+bZ)*b9}function bX(b8,cf){var ce,cd,cb,b9,cc,ca;for(cb=b8,ca=0;ca<8;ca++){b9=bY(cb)-b8;if(av(b9)<cf){return cb}cc=(3*E*cb+2*b3)*cb+b1;if(av(cc)<0.000001){break}cb=cb-b9/cc}ce=0;cd=1;cb=b8;if(cb<ce){return ce}if(cb>cd){return cd}while(ce<cd){b9=bY(cb);if(av(b9-b8)<cf){return cb}if(b8>b9){ce=cb}else{cd=cb}cb=(cd-ce)/2+ce}return cb}return S(b6,1/(200*b0))}aA.onAnimation=function(E){E?bk.on("raphael.anim.frame."+this.id,E):bk.unbind("raphael.anim.frame."+this.id);return this};function m(bX,S){var R=[],bW={};this.ms=S;this.times=1;if(bX){for(var E in bX){if(bX[bE](E)){bW[bU(E)]=bX[E];R.push(bU(E))}}R.sort(bC)}this.anim=bW;this.top=R[R.length-1];this.percents=R}m.prototype.delay=function(R){var E=new m(this.anim,this.ms);E.times=this.times;E.del=+R||0;return E};m.prototype.repeat=function(R){var E=new m(this.anim,this.ms);E.del=this.del;E.times=aR.floor(bQ(R,0))||1;return E};function ad(ch,S,E,cf,bZ,b3){E=bU(E);var co,bY,b2,cp=[],b9,b8,bX,cb=ch.ms,cg={},bW={},b5={};if(cf){for(ck=0,b4=bN.length;ck<b4;ck++){var cm=bN[ck];if(cm.el.id==S.id&&cm.anim==ch){if(cm.percent!=E){bN.splice(ck,1);b2=1}else{bY=cm}S.attr(cm.totalOrigin);break}}}else{cf=+bW}for(var ck=0,b4=ch.percents.length;ck<b4;ck++){if(ch.percents[ck]==E||ch.percents[ck]>cf*ch.top){E=ch.percents[ck];b8=ch.percents[ck-1]||0;cb=cb/ch.top*(E-b8);b9=ch.percents[ck+1];co=ch.anim[E];break}else{if(cf){S.attr(ch.anim[ch.percents[ck]])}}}if(!co){return}if(!bY){for(var cd in co){if(co[bE](cd)){if(bw[bE](cd)||S.paper.customAttributes[bE](cd)){cg[cd]=S.attr(cd);(cg[cd]==null)&&(cg[cd]=by[cd]);bW[cd]=co[cd];switch(bw[cd]){case br:b5[cd]=(bW[cd]-cg[cd])/cb;break;case"colour":cg[cd]=bq.getRGB(cg[cd]);var ce=bq.getRGB(bW[cd]);b5[cd]={r:(ce.r-cg[cd].r)/cb,g:(ce.g-cg[cd].g)/cb,b:(ce.b-cg[cd].b)/cb};break;case"path":var b0=bs(cg[cd],bW[cd]),b7=b0[1];cg[cd]=b0[0];b5[cd]=[];for(ck=0,b4=cg[cd].length;ck<b4;ck++){b5[cd][ck]=[0];for(var cj=1,cl=cg[cd][ck].length;cj<cl;cj++){b5[cd][ck][cj]=(b7[ck][cj]-cg[cd][ck][cj])/cb}}break;case"transform":var cr=S._,cq=bl(cr[cd],bW[cd]);if(cq){cg[cd]=cq.from;bW[cd]=cq.to;b5[cd]=[];b5[cd].real=true;for(ck=0,b4=cg[cd].length;ck<b4;ck++){b5[cd][ck]=[cg[cd][ck][0]];for(cj=1,cl=cg[cd][ck].length;cj<cl;cj++){b5[cd][ck][cj]=(bW[cd][ck][cj]-cg[cd][ck][cj])/cb}}}else{var cc=(S.matrix||new bh),cn={_:{transform:cr.transform},getBBox:function(){return S.getBBox(1)}};cg[cd]=[cc.a,cc.b,cc.c,cc.d,cc.e,cc.f];ah(cn,bW[cd]);bW[cd]=cn._.transform;b5[cd]=[(cn.matrix.a-cc.a)/cb,(cn.matrix.b-cc.b)/cb,(cn.matrix.c-cc.c)/cb,(cn.matrix.d-cc.d)/cb,(cn.matrix.e-cc.e)/cb,(cn.matrix.f-cc.f)/cb]}break;case"csv":var R=p(co[cd])[q](bD),b1=p(cg[cd])[q](bD);if(cd=="clip-rect"){cg[cd]=b1;b5[cd]=[];ck=b1.length;while(ck--){b5[cd][ck]=(R[ck]-cg[cd][ck])/cb}}bW[cd]=R;break;default:R=[][aE](co[cd]);b1=[][aE](cg[cd]);b5[cd]=[];ck=S.paper.customAttributes[cd].length;while(ck--){b5[cd][ck]=((R[ck]||0)-(b1[ck]||0))/cb}break}}}}var ca=co.easing,ci=bq.easing_formulas[ca];if(!ci){ci=p(ca).match(ax);if(ci&&ci.length==5){var b6=ci;ci=function(cs){return a8(cs,+b6[1],+b6[2],+b6[3],+b6[4],cb)}}else{ci=aF}}bX=co.start||ch.start||+new Date;cm={anim:ch,percent:E,timestamp:bX,start:bX+(ch.del||0),status:0,initstatus:cf||0,stop:false,ms:cb,easing:ci,from:cg,diff:b5,to:bW,el:S,callback:co.callback,prev:b8,next:b9,repeat:b3||ch.times,origin:S.attr(),totalOrigin:bZ};bN.push(cm);if(cf&&!bY&&!b2){cm.stop=true;cm.start=new Date-cb*cf;if(bN.length==1){return aC()}}if(b2){cm.start=new Date-cm.ms*cf}bN.length==1&&bP(aC)}else{bY.initstatus=cf;bY.start=new Date-bY.ms*cf}bk("raphael.anim.start."+S.id,S,ch)}bq.animation=function(S,E,bZ,b1){if(S instanceof m){return S}if(bq.is(bZ,"function")||!bZ){b1=b1||bZ||null;bZ=null}S=Object(S);E=+E||0;var R={},b2,bY;for(bY in S){if(S[bE](bY)&&bU(bY)!=bY&&bU(bY)+"%"!=bY){b2=true;R[bY]=S[bY]}}if(!b2){if(b1){var b0=0;for(var bW in S){var bX=bS(bW);if(S[bE](bW)&&bX>b0){b0=bX}}b0+="%";!S[b0].callback&&(S[b0].callback=b1)}return new m(S,E)}else{bZ&&(R.easing=bZ);b1&&(R.callback=b1);return new m({100:R},E)}};aA.animate=function(bW,E,bY,bX){var R=this;if(R.removed){bX&&bX.call(R);return R}var S=bW instanceof m?bW:bq.animation(bW,E,bY,bX);ad(S,R,S.percents[0],null,R.attr());return R};aA.setTime=function(R,E){if(R&&E!=null){this.status(R,at(E,R.ms)/R.ms)}return this};aA.status=function(bX,bW){var R=[],S=0,E,bY;if(bW!=null){ad(bX,this,-1,at(bW,1));return this}else{E=bN.length;for(;S<E;S++){bY=bN[S];if(bY.el.id==this.id&&(!bX||bY.anim==bX)){if(bX){return bY.status}R.push({anim:bY.anim,status:bY.status})}}if(bX){return 0}return R}};aA.pause=function(R){for(var E=0;E<bN.length;E++){if(bN[E].el.id==this.id&&(!R||bN[E].anim==R)){if(bk("raphael.anim.pause."+this.id,this,bN[E].anim)!==false){bN[E].paused=true}}}return this};aA.resume=function(R){for(var E=0;E<bN.length;E++){if(bN[E].el.id==this.id&&(!R||bN[E].anim==R)){var S=bN[E];if(bk("raphael.anim.resume."+this.id,this,S.anim)!==false){delete S.paused;this.status(S.anim,S.status)}}}return this};aA.stop=function(R){for(var E=0;E<bN.length;E++){if(bN[E].el.id==this.id&&(!R||bN[E].anim==R)){if(bk("raphael.anim.stop."+this.id,this,bN[E].anim)!==false){bN.splice(E--,1)}}}return this};function bm(R){for(var E=0;E<bN.length;E++){if(bN[E].el.paper==R){bN.splice(E--,1)}}}bk.on("raphael.remove",bm);bk.on("raphael.clear",bm);aA.toString=function(){return"Rapha\xebl\u2019s object"};var ai=function(E){this.items=[];this.length=0;this.type="set";if(E){for(var R=0,S=E.length;R<S;R++){if(E[R]&&(E[R].constructor==aA.constructor||E[R].constructor==ai)){this[this.items.length]=this.items[this.items.length]=E[R];this.length++}}}},G=ai.prototype;G.push=function(){var bW,E;for(var R=0,S=arguments.length;R<S;R++){bW=arguments[R];if(bW&&(bW.constructor==aA.constructor||bW.constructor==ai)){E=this.items.length;this[E]=this.items[E]=bW;this.length++}}return this};G.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};G.forEach=function(bW,E){for(var R=0,S=this.items.length;R<S;R++){if(bW.call(E,this.items[R],R)===false){return this}}return this};for(var aO in aA){if(aA[bE](aO)){G[aO]=(function(E){return function(){var R=arguments;return this.forEach(function(S){S[E][bA](S,R)})}})(aO)}}G.attr=function(R,bY){if(R&&bq.is(R,F)&&bq.is(R[0],"object")){for(var E=0,bX=R.length;E<bX;E++){this.items[E].attr(R[E])}}else{for(var S=0,bW=this.items.length;S<bW;S++){this.items[S].attr(R,bY)}}return this};G.clear=function(){while(this.length){this.pop()}};G.splice=function(bW,bZ,b0){bW=bW<0?bQ(this.length+bW,0):bW;bZ=bQ(0,at(this.length-bW,bZ));var S=[],E=[],R=[],bX;for(bX=2;bX<arguments.length;bX++){R.push(arguments[bX])}for(bX=0;bX<bZ;bX++){E.push(this[bW+bX])}for(;bX<this.length-bW;bX++){S.push(this[bW+bX])}var bY=R.length;for(bX=0;bX<bY+S.length;bX++){this.items[bW+bX]=this[bW+bX]=bX<bY?R[bX]:S[bX-bY]}bX=this.items.length=this.length-=bZ-bY;while(this[bX]){delete this[bX++]}return new ai(E)};G.exclude=function(S){for(var E=0,R=this.length;E<R;E++){if(this[E]==S){this.splice(E,1);return true}}};G.animate=function(S,E,bZ,b1){(bq.is(bZ,"function")||!bZ)&&(b1=bZ||null);var bY=this.items.length,bW=bY,b2,b0=this,bX;if(!bY){return this}b1&&(bX=function(){!--bY&&b1.call(b0)});bZ=bq.is(bZ,h)?bZ:bX;var R=bq.animation(S,E,bZ,bX);b2=this.items[--bW].animate(R);while(bW--){this.items[bW]&&!this.items[bW].removed&&this.items[bW].animateWith(b2,R,R);(this.items[bW]&&!this.items[bW].removed)||bY--}return this};G.insertAfter=function(R){var E=this.items.length;while(E--){this.items[E].insertAfter(R)}return this};G.getBBox=function(){var E=[],bY=[],R=[],bW=[];for(var S=this.items.length;S--;){if(!this.items[S].removed){var bX=this.items[S].getBBox();E.push(bX.x);bY.push(bX.y);R.push(bX.x+bX.width);bW.push(bX.y+bX.height)}}E=at[bA](0,E);bY=at[bA](0,bY);R=bQ[bA](0,R);bW=bQ[bA](0,bW);return{x:E,y:bY,x2:R,y2:bW,width:R-E,height:bW-bY}};G.clone=function(S){S=this.paper.set();for(var E=0,R=this.items.length;E<R;E++){S.push(this.items[E].clone())}return S};G.toString=function(){return"Rapha\xebl\u2018s set"};G.glow=function(R){var E=this.paper.set();this.forEach(function(S,bW){var bX=S.glow(R);if(bX!=null){bX.forEach(function(bY,bZ){E.push(bY)})}});return E};G.isPointInside=function(E,S){var R=false;this.forEach(function(bW){if(bW.isPointInside(E,S)){R=true;return false}});return R};bq.registerFont=function(R){if(!R.face){return R}this.fonts=this.fonts||{};var bW={w:R.w,face:{},glyphs:{}},S=R.face["font-family"];for(var bZ in R.face){if(R.face[bE](bZ)){bW.face[bZ]=R.face[bZ]}}if(this.fonts[S]){this.fonts[S].push(bW)}else{this.fonts[S]=[bW]}if(!R.svg){bW.face["units-per-em"]=bS(R.face["units-per-em"],10);for(var bX in R.glyphs){if(R.glyphs[bE](bX)){var bY=R.glyphs[bX];bW.glyphs[bX]={w:bY.w,k:{},d:bY.d&&"M"+bY.d.replace(/[mlcxtrv]/g,function(b0){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[b0]||"M"})+"z"};if(bY.k){for(var E in bY.k){if(bY[bE](E)){bW.glyphs[bX].k[E]=bY.k[E]}}}}}}return R};ay.getFont=function(b0,b1,R,bW){bW=bW||"normal";R=R||"normal";b1=+b1||{normal:400,bold:700,lighter:300,bolder:800}[b1]||400;if(!bq.fonts){return}var bX=bq.fonts[b0];if(!bX){var S=new RegExp("(^|\\s)"+b0.replace(/[^\w\d\s+!~.:_-]/g,bv)+"(\\s|$)","i");for(var E in bq.fonts){if(bq.fonts[bE](E)){if(S.test(E)){bX=bq.fonts[E];break}}}}var bY;if(bX){for(var bZ=0,b2=bX.length;bZ<b2;bZ++){bY=bX[bZ];if(bY.face["font-weight"]==b1&&(bY.face["font-style"]==R||!bY.face["font-style"])&&bY.face["font-stretch"]==bW){break}}}return bY};ay.print=function(b0,bZ,E,b3,b5,cd,S,R){cd=cd||"middle";S=bQ(at(S||0,1),-1);R=bQ(at(R||1,3),1);var cc=p(E)[q](bv),b9=0,cb=0,b7=bv,ce;bq.is(b3,"string")&&(b3=this.getFont(b3));if(b3){ce=(b5||16)/b3.face["units-per-em"];var bX=b3.face.bbox[q](bD),b2=+bX[0],bW=bX[3]-bX[1],bY=0,b4=+bX[1]+(cd=="baseline"?bW+(+b3.face.descent):bW/2);for(var b8=0,b1=cc.length;b8<b1;b8++){if(cc[b8]=="\n"){b9=0;ca=0;cb=0;bY+=bW*R}else{var b6=cb&&b3.glyphs[cc[b8-1]]||{},ca=b3.glyphs[cc[b8]];b9+=cb?(b6.w||b3.w)+(b6.k&&b6.k[cc[b8]]||0)+(b3.w*S):0;cb=1}if(ca&&ca.d){b7+=bq.transformPath(ca.d,["t",b9*ce,bY*ce,"s",ce,ce,b2,b4,"t",(b0-b2)/ce,(bZ-b4)/ce])}}}return this.path(b7).attr({fill:"#000",stroke:"none"})};ay.add=function(bW){if(bq.is(bW,"array")){var S=this.set(),R=0,bX=bW.length,E;for(;R<bX;R++){E=bW[R]||{};aD[bE](E.type)&&S.push(this[E.type]().attr(E))}}return S};bq.format=function(R,S){var E=bq.is(S,F)?[0][aE](S):arguments;R&&bq.is(R,h)&&E.length-1&&(R=R.replace(ag,function(bX,bW){return E[++bW]==null?bv:E[bW]}));return R||bv};bq.fullfill=(function(){var S=/\{([^\}]+)\}/g,E=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,R=function(bY,bX,bZ){var bW=bZ;bX.replace(E,function(b2,b1,b0,b4,b3){b1=b1||b4;if(bW){if(b1 in bW){bW=bW[b1]}typeof bW=="function"&&b3&&(bW=bW())}});bW=(bW==null||bW==bZ?bY:bW)+"";return bW};return function(bX,bW){return String(bX).replace(S,function(bZ,bY){return R(bZ,bY,bW)})}})();bq.ninja=function(){if(aN.was){bd.win.Raphael=aN.is}else{window.Raphael=undefined;try{delete window.Raphael}catch(E){}}return bq};bq.st=G;bk.on("raphael.DOMload",function(){W=true});(function(bW,R,S){if(bW.readyState==null&&bW.addEventListener){bW.addEventListener(R,S=function(){bW.removeEventListener(R,S,false);bW.readyState="complete"},false);bW.readyState="loading"}function E(){(/in/).test(bW.readyState)?setTimeout(E,9):bq.eve("raphael.DOMload")}E()})(document,"DOMContentLoaded");return bq}.apply(d,c),g!==undefined&&(e.exports=g))},function(e,d,f){var c,g;(function(r){var n="0.4.2",u="hasOwnProperty",j=/[\.\/]/,h="*",p=function(){},o=function(A,x){return A-x},m,q,w={n:{}},l=function(x,O){x=String(x);var I=w,F=q,J=Array.prototype.slice.call(arguments,2),L=l.listeners(x),K=0,H=false,C,B=[],G={},D=[],A=m,M=[];m=x;q=0;for(var E=0,N=L.length;E<N;E++){if("zIndex" in L[E]){B.push(L[E].zIndex);if(L[E].zIndex<0){G[L[E].zIndex]=L[E]}}}B.sort(o);while(B[K]<0){C=G[B[K++]];D.push(C.apply(O,J));if(q){q=F;return D}}for(E=0;E<N;E++){C=L[E];if("zIndex" in C){if(C.zIndex==B[K]){D.push(C.apply(O,J));if(q){break}do{K++;C=G[B[K]];C&&D.push(C.apply(O,J));if(q){break}}while(C)}else{G[C.zIndex]=C}}else{D.push(C.apply(O,J));if(q){break}}}q=F;m=A;return D.length?D:null};l._events=w;l.listeners=function(x){var H=x.split(j),F=w,L,G,A,D,K,C,E,I,J=[F],B=[];for(D=0,K=H.length;D<K;D++){I=[];for(C=0,E=J.length;C<E;C++){F=J[C].n;G=[F[H[D]],F[h]];A=2;while(A--){L=G[A];if(L){I.push(L);B=B.concat(L.f||[])}}}J=I}return B};l.on=function(x,C){x=String(x);if(typeof C!="function"){return function(){}}var E=x.split(j),D=w;for(var A=0,B=E.length;A<B;A++){D=D.n;D=D.hasOwnProperty(E[A])&&D[E[A]]||(D[E[A]]={n:{}})}D.f=D.f||[];for(A=0,B=D.f.length;A<B;A++){if(D.f[A]==C){return p}}D.f.push(C);return function(F){if(+F==+F){C.zIndex=+F}}};l.f=function(A){var x=[].slice.call(arguments,1);return function(){l.apply(null,[A,null].concat(x).concat([].slice.call(arguments,0)))}};l.stop=function(){q=1};l.nt=function(x){if(x){return new RegExp("(?:\\.|\\/|^)"+x+"(?:\\.|\\/|$)").test(m)}return m};l.nts=function(){return m.split(j)};l.off=l.unbind=function(A,F){if(!A){l._events=w={n:{}};return}var H=A.split(j),G,J,B,D,K,C,E,I=[w];for(D=0,K=H.length;D<K;D++){for(C=0;C<I.length;C+=B.length-2){B=[C,1];G=I[C].n;if(H[D]!=h){if(G[H[D]]){B.push(G[H[D]])}}else{for(J in G){if(G[u](J)){B.push(G[J])}}}I.splice.apply(I,B)}}for(D=0,K=I.length;D<K;D++){G=I[D];while(G.n){if(F){if(G.f){for(C=0,E=G.f.length;C<E;C++){if(G.f[C]==F){G.f.splice(C,1);break}}!G.f.length&&delete G.f}for(J in G.n){if(G.n[u](J)&&G.n[J].f){var x=G.n[J].f;for(C=0,E=x.length;C<E;C++){if(x[C]==F){x.splice(C,1);break}}!x.length&&delete G.n[J].f}}}else{delete G.f;for(J in G.n){if(G.n[u](J)&&G.n[J].f){delete G.n[J].f}}}G=G.n}}};l.once=function(x,A){var B=function(){l.unbind(x,B);return A.apply(this,arguments)};return l.on(x,B)};l.version=n;l.toString=function(){return"You are running Eve "+n};(typeof e!="undefined"&&e.exports)?(e.exports=l):(true?(!(c=[],g=function(){return l}.apply(d,c),g!==undefined&&(e.exports=g))):(r.eve=l))})(this)},function(e,d,f){var c,g;!(c=[f(1)],g=function(A){if(A&&!A.svg){return}var m="hasOwnProperty",V=String,C=parseFloat,H=parseInt,o=Math,W=o.max,J=o.abs,q=o.pow,p=/[, ]+/,T=A.eve,I="",w=" ";var D="http://www.w3.org/1999/xlink",Q={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},L={};A.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var u=function(S,E){if(E){if(typeof S=="string"){S=u(S)}for(var R in E){if(E[m](R)){if(R.substring(0,6)=="xlink:"){S.setAttributeNS(D,R.substring(6),V(E[R]))}else{S.setAttribute(R,V(E[R]))}}}}else{S=A._g.doc.createElementNS("http://www.w3.org/2000/svg",S);S.style&&(S.style.webkitTapHighlightColor="rgba(0,0,0,0)")}return S},h=function(ad,ah){var af="linear",R=ad.id+ah,ab=0.5,Z=0.5,X=ad.node,E=ad.paper,aj=X.style,S=A._g.doc.getElementById(R);if(!S){ah=V(ah).replace(A._radial_gradient,function(am,ak,an){af="radial";if(ak&&an){ab=C(ak);Z=C(an);var al=((Z>0.5)*2-1);q(ab-0.5,2)+q(Z-0.5,2)>0.25&&(Z=o.sqrt(0.25-q(ab-0.5,2))*al+0.5)&&Z!=0.5&&(Z=Z.toFixed(5)-0.00001*al)}return I});ah=ah.split(/\s*\-\s*/);if(af=="linear"){var aa=ah.shift();aa=-C(aa);if(isNaN(aa)){return null}var Y=[0,0,o.cos(A.rad(aa)),o.sin(A.rad(aa))],ag=1/(W(J(Y[2]),J(Y[3]))||1);Y[2]*=ag;Y[3]*=ag;if(Y[2]<0){Y[0]=-Y[2];Y[2]=0}if(Y[3]<0){Y[1]=-Y[3];Y[3]=0}}var ae=A._parseDots(ah);if(!ae){return null}R=R.replace(/[\(\)\s,\xb0#]/g,"_");if(ad.gradient&&R!=ad.gradient.id){E.defs.removeChild(ad.gradient);delete ad.gradient}if(!ad.gradient){S=u(af+"Gradient",{id:R});ad.gradient=S;u(S,af=="radial"?{fx:ab,fy:Z}:{x1:Y[0],y1:Y[1],x2:Y[2],y2:Y[3],gradientTransform:ad.matrix.invert()});E.defs.appendChild(S);for(var ac=0,ai=ae.length;ac<ai;ac++){S.appendChild(u("stop",{offset:ae[ac].offset?ae[ac].offset:ac?"100%":"0%","stop-color":ae[ac].color||"#fff","stop-opacity":isFinite(ae[ac].opacity)?ae[ac].opacity:1}))}}}u(X,{fill:r(R),opacity:1,"fill-opacity":1});aj.fill=I;aj.opacity=1;aj.fillOpacity=1;return 1},F=function(){var E=document.documentMode;return E&&(E===9||E===10)},r=function(S){if(F()){return"url('#"+S+"')"}var E=document.location;var R=(E.protocol+"//"+E.host+E.pathname+E.search);return"url('"+R+"#"+S+"')"},j=function(R){var E=R.getBBox(1);u(R.pattern,{patternTransform:R.matrix.invert()+" translate("+E.x+","+E.y+")"})},l=function(af,ah,aa){if(af.type=="path"){var E=V(ah).toLowerCase().split("-"),ae=af.paper,at=aa?"end":"start",aj=af.node,ag=af.attrs,Z=ag["stroke-width"],an=E.length,X="classic",am,S,ac,ak,ai,ab=3,ao=3,ad=5;while(an--){switch(E[an]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":X=E[an];break;case"wide":ao=5;break;case"narrow":ao=2;break;case"long":ab=5;break;case"short":ab=2;break}}if(X=="open"){ab+=2;ao+=2;ad+=2;ac=1;ak=aa?4:1;ai={fill:"none",stroke:ag.stroke}}else{ak=ac=ab/2;ai={fill:ag.stroke,stroke:"none"}}if(af._.arrows){if(aa){af._.arrows.endPath&&L[af._.arrows.endPath]--;af._.arrows.endMarker&&L[af._.arrows.endMarker]--}else{af._.arrows.startPath&&L[af._.arrows.startPath]--;af._.arrows.startMarker&&L[af._.arrows.startMarker]--}}else{af._.arrows={}}if(X!="none"){var R="raphael-marker-"+X,ar="raphael-marker-"+at+X+ab+ao+"-obj"+af.id;if(!A._g.doc.getElementById(R)){ae.defs.appendChild(u(u("path"),{"stroke-linecap":"round",d:Q[X],id:R}));L[R]=1}else{L[R]++}var Y=A._g.doc.getElementById(ar),al;if(!Y){Y=u(u("marker"),{id:ar,markerHeight:ao,markerWidth:ab,orient:"auto",refX:ak,refY:ao/2});al=u(u("use"),{"xlink:href":"#"+R,transform:(aa?"rotate(180 "+ab/2+" "+ao/2+") ":I)+"scale("+ab/ad+","+ao/ad+")","stroke-width":(1/((ab/ad+ao/ad)/2)).toFixed(4)});Y.appendChild(al);ae.defs.appendChild(Y);L[ar]=1}else{L[ar]++;al=Y.getElementsByTagName("use")[0]}u(al,ai);var aq=ac*(X!="diamond"&&X!="oval");if(aa){am=af._.arrows.startdx*Z||0;S=A.getTotalLength(ag.path)-aq*Z}else{am=aq*Z;S=A.getTotalLength(ag.path)-(af._.arrows.enddx*Z||0)}ai={};ai["marker-"+at]="url(#"+ar+")";if(S||am){ai.d=A.getSubpath(ag.path,am,S)}u(aj,ai);af._.arrows[at+"Path"]=R;af._.arrows[at+"Marker"]=ar;af._.arrows[at+"dx"]=aq;af._.arrows[at+"Type"]=X;af._.arrows[at+"String"]=ah}else{if(aa){am=af._.arrows.startdx*Z||0;S=A.getTotalLength(ag.path)-am}else{am=0;S=A.getTotalLength(ag.path)-(af._.arrows.enddx*Z||0)}af._.arrows[at+"Path"]&&u(aj,{d:A.getSubpath(ag.path,am,S)});delete af._.arrows[at+"Path"];delete af._.arrows[at+"Marker"];delete af._.arrows[at+"dx"];delete af._.arrows[at+"Type"];delete af._.arrows[at+"String"]}for(ai in L){if(L[m](ai)&&!L[ai]){var ap=A._g.doc.getElementById(ai);ap&&ap.parentNode.removeChild(ap)}}}},M={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},x=function(aa,Y,Z){Y=M[V(Y).toLowerCase()];if(Y){var S=aa.attrs["stroke-width"]||"1",E={round:S,square:S,butt:0}[aa.attrs["stroke-linecap"]||Z["stroke-linecap"]]||0,X=[],R=Y.length;while(R--){X[R]=Y[R]*S+((R%2)?1:-1)*E}u(aa.node,{"stroke-dasharray":X.join(",")})}else{u(aa.node,{"stroke-dasharray":"none"})}},O=function(af,an){var aj=af.node,ag=af.attrs,ad=aj.style.visibility;aj.style.visibility="hidden";for(var ai in an){if(an[m](ai)){if(!A._availableAttrs[m](ai)){continue}var ah=an[ai];ag[ai]=ah;switch(ai){case"blur":af.blur(ah);break;case"title":var ao=aj.getElementsByTagName("title");if(ao.length&&(ao=ao[0])){ao.firstChild.nodeValue=ah}else{ao=u("title");var ap=A._g.doc.createTextNode(ah);ao.appendChild(ap);aj.appendChild(ao)}break;case"href":case"target":var al=aj.parentNode;if(al.tagName.toLowerCase()!="a"){var Y=u("a");al.insertBefore(Y,aj);Y.appendChild(aj);al=Y}if(ai=="target"){al.setAttributeNS(D,"show",ah=="blank"?"new":ah)}else{al.setAttributeNS(D,ai,ah)}break;case"cursor":aj.style.cursor=ah;break;case"transform":af.transform(ah);break;case"arrow-start":l(af,ah);break;case"arrow-end":l(af,ah,1);break;case"clip-rect":var R=V(ah).split(p);if(R.length==4){af.clip&&af.clip.parentNode.parentNode.removeChild(af.clip.parentNode);var S=u("clipPath"),ak=u("rect");S.id=A.createUUID();u(ak,{x:R[0],y:R[1],width:R[2],height:R[3]});S.appendChild(ak);af.paper.defs.appendChild(S);u(aj,{"clip-path":"url(#"+S.id+")"});af.clip=ak}if(!ah){var ae=aj.getAttribute("clip-path");if(ae){var am=A._g.doc.getElementById(ae.replace(/(^url\(#|\)$)/g,I));am&&am.parentNode.removeChild(am);u(aj,{"clip-path":I});delete af.clip}}break;case"path":if(af.type=="path"){u(aj,{d:ah?ag.path=A._pathToAbsolute(ah):"M0,0"});af._.dirty=1;if(af._.arrows){"startString" in af._.arrows&&l(af,af._.arrows.startString);"endString" in af._.arrows&&l(af,af._.arrows.endString,1)}}break;case"width":aj.setAttribute(ai,ah);af._.dirty=1;if(ag.fx){ai="x";ah=ag.x}else{break}case"x":if(ag.fx){ah=-ag.x-(ag.width||0)}case"rx":if(ai=="rx"&&af.type=="rect"){break}case"cx":aj.setAttribute(ai,ah);af.pattern&&j(af);af._.dirty=1;break;case"height":aj.setAttribute(ai,ah);af._.dirty=1;if(ag.fy){ai="y";ah=ag.y}else{break}case"y":if(ag.fy){ah=-ag.y-(ag.height||0)}case"ry":if(ai=="ry"&&af.type=="rect"){break}case"cy":aj.setAttribute(ai,ah);af.pattern&&j(af);af._.dirty=1;break;case"r":if(af.type=="rect"){u(aj,{rx:ah,ry:ah})}else{aj.setAttribute(ai,ah)}af._.dirty=1;break;case"src":if(af.type=="image"){aj.setAttributeNS(D,"href",ah)}break;case"stroke-width":if(af._.sx!=1||af._.sy!=1){ah/=W(J(af._.sx),J(af._.sy))||1}aj.setAttribute(ai,ah);if(ag["stroke-dasharray"]){x(af,ag["stroke-dasharray"],an)}if(af._.arrows){"startString" in af._.arrows&&l(af,af._.arrows.startString);"endString" in af._.arrows&&l(af,af._.arrows.endString,1)}break;case"stroke-dasharray":x(af,ah,an);break;case"fill":var Z=V(ah).match(A._ISURL);if(Z){S=u("pattern");var ac=u("image");S.id=A.createUUID();u(S,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});u(ac,{x:0,y:0,"xlink:href":Z[1]});S.appendChild(ac);(function(aq){A._preload(Z[1],function(){var ar=this.offsetWidth,at=this.offsetHeight;u(aq,{width:ar,height:at});u(ac,{width:ar,height:at})})})(S);af.paper.defs.appendChild(S);u(aj,{fill:"url(#"+S.id+")"});af.pattern=S;af.pattern&&j(af);break}var X=A.getRGB(ah);if(!X.error){delete an.gradient;delete ag.gradient;!A.is(ag.opacity,"undefined")&&A.is(an.opacity,"undefined")&&u(aj,{opacity:ag.opacity});!A.is(ag["fill-opacity"],"undefined")&&A.is(an["fill-opacity"],"undefined")&&u(aj,{"fill-opacity":ag["fill-opacity"]})}else{if((af.type=="circle"||af.type=="ellipse"||V(ah).charAt()!="r")&&h(af,ah)){if("opacity" in ag||"fill-opacity" in ag){var E=A._g.doc.getElementById(aj.getAttribute("fill").replace(/^url\(#|\)$/g,I));if(E){var aa=E.getElementsByTagName("stop");u(aa[aa.length-1],{"stop-opacity":("opacity" in ag?ag.opacity:1)*("fill-opacity" in ag?ag["fill-opacity"]:1)})}}ag.gradient=ah;ag.fill="none";break}}X[m]("opacity")&&u(aj,{"fill-opacity":X.opacity>1?X.opacity/100:X.opacity});case"stroke":X=A.getRGB(ah);aj.setAttribute(ai,X.hex);ai=="stroke"&&X[m]("opacity")&&u(aj,{"stroke-opacity":X.opacity>1?X.opacity/100:X.opacity});if(ai=="stroke"&&af._.arrows){"startString" in af._.arrows&&l(af,af._.arrows.startString);"endString" in af._.arrows&&l(af,af._.arrows.endString,1)}break;case"gradient":(af.type=="circle"||af.type=="ellipse"||V(ah).charAt()!="r")&&h(af,ah);break;case"opacity":if(ag.gradient&&!ag[m]("stroke-opacity")){u(aj,{"stroke-opacity":ah>1?ah/100:ah})}case"fill-opacity":if(ag.gradient){E=A._g.doc.getElementById(aj.getAttribute("fill").replace(/^url\(#|\)$/g,I));if(E){aa=E.getElementsByTagName("stop");u(aa[aa.length-1],{"stop-opacity":ah})}break}default:ai=="font-size"&&(ah=H(ah,10)+"px");var ab=ai.replace(/(\-.)/g,function(aq){return aq.substring(1).toUpperCase()});aj.style[ab]=ah;af._.dirty=1;aj.setAttribute(ai,ah);break}}}G(af,an);aj.style.visibility=ad},U=1.2,G=function(E,Y){if(E.type!="text"||!(Y[m]("text")||Y[m]("font")||Y[m]("font-size")||Y[m]("x")||Y[m]("y"))){return}var ad=E.attrs,S=E.node,af=S.firstChild?H(A._g.doc.defaultView.getComputedStyle(S.firstChild,I).getPropertyValue("font-size"),10):10;if(Y[m]("text")){ad.text=Y.text;while(S.firstChild){S.removeChild(S.firstChild)}var X=V(Y.text).split("\n"),R=[],ab;for(var Z=0,ae=X.length;Z<ae;Z++){ab=u("tspan");Z&&u(ab,{dy:af*U,x:ad.x});ab.appendChild(A._g.doc.createTextNode(X[Z]));S.appendChild(ab);R[Z]=ab}}else{R=S.getElementsByTagName("tspan");for(Z=0,ae=R.length;Z<ae;Z++){if(Z){u(R[Z],{dy:af*U,x:ad.x})}else{u(R[0],{dy:0})}}}u(S,{x:ad.x,y:ad.y});E._.dirty=1;var aa=E._getBBox(),ac=ad.y-(aa.y+aa.height/2);ac&&A.is(ac,"finite")&&u(R[0],{dy:ac})},N=function(E){if(E.parentNode&&E.parentNode.tagName.toLowerCase()==="a"){return E.parentNode}else{return E}},K=function(R,E){var Z=0,S=0;this[0]=this.node=R;R.raphael=true;this.id=A._oid++;R.raphaelid=this.id;this.matrix=A.matrix();this.realPath=null;this.paper=E;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!E.bottom&&(E.bottom=this);this.prev=E.top;E.top&&(E.top.next=this);E.top=this;this.next=null},B=A.el;K.prototype=B;B.constructor=K;A._engine.path=function(E,X){var R=u("path");X.canvas&&X.canvas.appendChild(R);var S=new K(R,X);S.type="path";O(S,{fill:"none",stroke:"#000",path:E});return S};B.rotate=function(R,E,X){if(this.removed){return this}R=V(R).split(p);if(R.length-1){E=C(R[1]);X=C(R[2])}R=C(R[0]);(X==null)&&(E=X);if(E==null||X==null){var S=this.getBBox(1);E=S.x+S.width/2;X=S.y+S.height/2}this.transform(this._.transform.concat([["r",R,E,X]]));return this};B.scale=function(Y,S,E,X){if(this.removed){return this}Y=V(Y).split(p);if(Y.length-1){S=C(Y[1]);E=C(Y[2]);X=C(Y[3])}Y=C(Y[0]);(S==null)&&(S=Y);(X==null)&&(E=X);if(E==null||X==null){var R=this.getBBox(1)}E=E==null?R.x+R.width/2:E;X=X==null?R.y+R.height/2:X;this.transform(this._.transform.concat([["s",Y,S,E,X]]));return this};B.translate=function(R,E){if(this.removed){return this}R=V(R).split(p);if(R.length-1){E=C(R[1])}R=C(R[0])||0;E=+E||0;this.transform(this._.transform.concat([["t",R,E]]));return this};B.transform=function(R){var S=this._;if(R==null){return S.transform}A._extractTransform(this,R);this.clip&&u(this.clip,{transform:this.matrix.invert()});this.pattern&&j(this);this.node&&u(this.node,{transform:this.matrix});if(S.sx!=1||S.sy!=1){var E=this.attrs[m]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":E})}S.transform=this.matrix.toTransformString();return this};B.hide=function(){if(!this.removed){this.node.style.display="none"}return this};B.show=function(){if(!this.removed){this.node.style.display=""}return this};B.remove=function(){var R=N(this.node);if(this.removed||!R.parentNode){return}var S=this.paper;S.__set__&&S.__set__.exclude(this);T.unbind("raphael.*.*."+this.id);if(this.gradient){S.defs.removeChild(this.gradient)}A._tear(this,S);R.parentNode.removeChild(R);this.removeData();for(var E in this){this[E]=typeof this[E]=="function"?A._removedFactory(E):null}this.removed=true};B._getBBox=function(){if(this.node.style.display=="none"){this.show();var E=true}var Y=false,R;if(this.paper.canvas.parentElement){R=this.paper.canvas.parentElement.style}else{if(this.paper.canvas.parentNode){R=this.paper.canvas.parentNode.style}}if(R&&R.display=="none"){Y=true;R.display=""}var X={};try{X=this.node.getBBox()}catch(S){X={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{X=X||{};if(Y){R.display="none"}}E&&this.hide();return X};B.attr=function(E,ad){if(this.removed){return this}if(E==null){var aa={};for(var ac in this.attrs){if(this.attrs[m](ac)){aa[ac]=this.attrs[ac]}}aa.gradient&&aa.fill=="none"&&(aa.fill=aa.gradient)&&delete aa.gradient;aa.transform=this._.transform;return aa}if(ad==null&&A.is(E,"string")){if(E=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}if(E=="transform"){return this._.transform}var ab=E.split(p),X={};for(var Y=0,af=ab.length;Y<af;Y++){E=ab[Y];if(E in this.attrs){X[E]=this.attrs[E]}else{if(A.is(this.paper.customAttributes[E],"function")){X[E]=this.paper.customAttributes[E].def}else{X[E]=A._availableAttrs[E]}}}return af-1?X:X[ab[0]]}if(ad==null&&A.is(E,"array")){X={};for(Y=0,af=E.length;Y<af;Y++){X[E[Y]]=this.attr(E[Y])}return X}if(ad!=null){var R={};R[E]=ad}else{if(E!=null&&A.is(E,"object")){R=E}}for(var ae in R){T("raphael.attr."+ae+"."+this.id,this,R[ae])}for(ae in this.paper.customAttributes){if(this.paper.customAttributes[m](ae)&&R[m](ae)&&A.is(this.paper.customAttributes[ae],"function")){var Z=this.paper.customAttributes[ae].apply(this,[].concat(R[ae]));this.attrs[ae]=R[ae];for(var S in Z){if(Z[m](S)){R[S]=Z[S]}}}}O(this,R);return this};B.toFront=function(){if(this.removed){return this}var R=N(this.node);R.parentNode.appendChild(R);var E=this.paper;E.top!=this&&A._tofront(this,E);return this};B.toBack=function(){if(this.removed){return this}var S=N(this.node);var E=S.parentNode;E.insertBefore(S,E.firstChild);A._toback(this,this.paper);var R=this.paper;return this};B.insertAfter=function(E){if(this.removed||!E){return this}var R=N(this.node);var S=N(E.node||E[E.length-1].node);if(S.nextSibling){S.parentNode.insertBefore(R,S.nextSibling)}else{S.parentNode.appendChild(R)}A._insertafter(this,E,this.paper);return this};B.insertBefore=function(R){if(this.removed||!R){return this}var S=N(this.node);var E=N(R.node||R[0].node);E.parentNode.insertBefore(S,E);A._insertbefore(this,R,this.paper);return this};B.blur=function(R){var E=this;if(+R!==0){var S=u("filter"),X=u("feGaussianBlur");E.attrs.blur=R;S.id=A.createUUID();u(X,{stdDeviation:+R||1.5});S.appendChild(X);E.paper.defs.appendChild(S);E._blur=S;u(E.node,{filter:"url(#"+S.id+")"})}else{if(E._blur){E._blur.parentNode.removeChild(E._blur);delete E._blur;delete E.attrs.blur}E.node.removeAttribute("filter")}return E};A._engine.circle=function(R,E,Z,Y){var X=u("circle");R.canvas&&R.canvas.appendChild(X);var S=new K(X,R);S.attrs={cx:E,cy:Z,r:Y,fill:"none",stroke:"#000"};S.type="circle";u(X,S.attrs);return S};A._engine.rect=function(S,E,ab,R,Z,aa){var Y=u("rect");S.canvas&&S.canvas.appendChild(Y);var X=new K(Y,S);X.attrs={x:E,y:ab,width:R,height:Z,rx:aa||0,ry:aa||0,fill:"none",stroke:"#000"};X.type="rect";u(Y,X.attrs);return X};A._engine.ellipse=function(R,E,aa,Z,Y){var X=u("ellipse");R.canvas&&R.canvas.appendChild(X);var S=new K(X,R);S.attrs={cx:E,cy:aa,rx:Z,ry:Y,fill:"none",stroke:"#000"};S.type="ellipse";u(X,S.attrs);return S};A._engine.image=function(S,aa,E,ab,R,Z){var Y=u("image");u(Y,{x:E,y:ab,width:R,height:Z,preserveAspectRatio:"none"});Y.setAttributeNS(D,"href",aa);S.canvas&&S.canvas.appendChild(Y);var X=new K(Y,S);X.attrs={x:E,y:ab,width:R,height:Z,src:aa};X.type="image";return X};A._engine.text=function(R,E,Z,Y){var X=u("text");R.canvas&&R.canvas.appendChild(X);var S=new K(X,R);S.attrs={x:E,y:Z,"text-anchor":"middle",text:Y,"font-family":A._availableAttrs["font-family"],"font-size":A._availableAttrs["font-size"],stroke:"none",fill:"#000"};S.type="text";O(S,S.attrs);return S};A._engine.setSize=function(R,E){this.width=R||this.width;this.height=E||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);if(this._viewBox){this.setViewBox.apply(this,this._viewBox)}return this};A._engine.create=function(){var X=A._getContainer.apply(0,arguments),R=X&&X.container,ab=X.x,aa=X.y,S=X.width,ac=X.height;if(!R){throw new Error("SVG container not found.")}var E=u("svg"),Z="overflow:hidden;",Y;ab=ab||0;aa=aa||0;S=S||512;ac=ac||342;u(E,{height:ac,version:1.1,width:S,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"});if(R==1){E.style.cssText=Z+"position:absolute;left:"+ab+"px;top:"+aa+"px";A._g.doc.body.appendChild(E);Y=1}else{E.style.cssText=Z+"position:relative";if(R.firstChild){R.insertBefore(E,R.firstChild)}else{R.appendChild(E)}}R=new A._Paper;R.width=S;R.height=ac;R.canvas=E;R.clear();R._left=R._top=0;Y&&(R.renderfix=function(){});R.renderfix();return R};A._engine.setViewBox=function(aa,Y,ac,R,S){T("raphael.setViewBox",this,this._viewBox,[aa,Y,ac,R,S]);var E=this.getSize(),ae=W(ac/E.width,R/E.height),Z=this.top,ad=S?"xMidYMid meet":"xMinYMin",X,ab;if(aa==null){if(this._vbSize){ae=1}delete this._vbSize;X="0 0 "+this.width+w+this.height}else{this._vbSize=ae;X=aa+w+Y+w+ac+w+R}u(this.canvas,{viewBox:X,preserveAspectRatio:ad});while(ae&&Z){ab="stroke-width" in Z.attrs?Z.attrs["stroke-width"]:1;Z.attr({"stroke-width":ab});Z._.dirty=1;Z._.dirtyT=1;Z=Z.prev}this._viewBox=[aa,Y,ac,R,!!S];return this};A.prototype.renderfix=function(){var Z=this.canvas,E=Z.style,Y;try{Y=Z.getScreenCTM()||Z.createSVGMatrix()}catch(X){Y=Z.createSVGMatrix()}var S=-Y.e%1,R=-Y.f%1;if(S||R){if(S){this._left=(this._left+S)%1;E.left=this._left+"px"}if(R){this._top=(this._top+R)%1;E.top=this._top+"px"}}};A.prototype.clear=function(){A.eve("raphael.clear",this);var E=this.canvas;while(E.firstChild){E.removeChild(E.firstChild)}this.bottom=this.top=null;(this.desc=u("desc")).appendChild(A._g.doc.createTextNode("Created with Rapha\xebl "+A.version));E.appendChild(this.desc);E.appendChild(this.defs=u("defs"))};A.prototype.remove=function(){T("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var E in this){this[E]=typeof this[E]=="function"?A._removedFactory(E):null}};var P=A.st;for(var n in B){if(B[m](n)&&!P[m](n)){P[n]=(function(E){return function(){var R=arguments;return this.forEach(function(S){S[E].apply(S,R)})}})(n)}}}.apply(d,c),g!==undefined&&(e.exports=g))},function(e,d,f){var c,g;!(c=[f(1)],g=function(x){if(x&&!x.vml){return}var n="hasOwnProperty",V=String,B=parseFloat,q=Math,Q=q.round,Y=q.max,T=q.min,H=q.abs,K="fill",r=/[, ]+/,P=x.eve,L=" progid:DXImageTransform.Microsoft",w=" ",F="",U={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},u=/([clmz]),?([^clmz]*)/gi,I=/ progid:\S+Blur\([^\)]+\)/g,X=/-?[^,\s-]+/g,m="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",j=21600,O={path:1,rect:1,image:1},G={circle:1,ellipse:1},o=function(ag){var ad=/[ahqstv]/ig,S=x._pathToAbsolute;V(ag).match(ad)&&(S=x._path2curve);ad=/[clmz]/g;if(S==x._pathToAbsolute&&!V(ag).match(ad)){var ac=V(ag).replace(u,function(ak,am,ai){var al=[],ah=am.toLowerCase()=="m",aj=U[am];ai.replace(X,function(an){if(ah&&al.length==2){aj+=al+U[am=="m"?"l":"L"];al=[]}al.push(Q(an*j))});return aj+al});return ac}var ae=S(ag),R,E;ac=[];for(var aa=0,af=ae.length;aa<af;aa++){R=ae[aa];E=ae[aa][0].toLowerCase();E=="z"&&(E="x");for(var Z=1,ab=R.length;Z<ab;Z++){E+=Q(R[Z]*j)+(Z!=ab-1?",":F)}ac.push(E)}return ac.join(w)},C=function(Z,S,R){var E=x.matrix();E.rotate(-Z,0.5,0.5);return{dx:E.x(S,R),dy:E.y(S,R)}},D=function(af,ae,ad,aa,Z,ab){var an=af._,ah=af.matrix,E=an.fillpos,ag=af.node,ac=ag.style,S=1,R="",aj,al=j/ae,ak=j/ad;ac.visibility="hidden";if(!ae||!ad){return}ag.coordsize=H(al)+w+H(ak);ac.rotation=ab*(ae*ad<0?-1:1);if(ab){var am=C(ab,aa,Z);aa=am.dx;Z=am.dy}ae<0&&(R+="x");ad<0&&(R+=" y")&&(S=-1);ac.flip=R;ag.coordorigin=(aa*-al)+w+(Z*-ak);if(E||an.fillsize){var ai=ag.getElementsByTagName(K);ai=ai&&ai[0];ag.removeChild(ai);if(E){am=C(ab,ah.x(E[0],E[1]),ah.y(E[0],E[1]));ai.position=am.dx*S+w+am.dy*S}if(an.fillsize){ai.size=an.fillsize[0]*H(ae)+w+an.fillsize[1]*H(ad)}ag.appendChild(ai)}ac.visibility="visible"};x.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var l=function(E,ac,R){var ae=V(ac).toLowerCase().split("-"),aa=R?"end":"start",S=ae.length,ab="classic",ad="medium",Z="medium";while(S--){switch(ae[S]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":ab=ae[S];break;case"wide":case"narrow":Z=ae[S];break;case"long":case"short":ad=ae[S];break}}var af=E.node.getElementsByTagName("stroke")[0];af[aa+"arrow"]=ab;af[aa+"arrowlength"]=ad;af[aa+"arrowwidth"]=Z},M=function(an,ay){an.attrs=an.attrs||{};var at=an.node,aC=an.attrs,aj=at.style,af,aw=O[an.type]&&(ay.x!=aC.x||ay.y!=aC.y||ay.width!=aC.width||ay.height!=aC.height||ay.cx!=aC.cx||ay.cy!=aC.cy||ay.rx!=aC.rx||ay.ry!=aC.ry||ay.r!=aC.r),am=G[an.type]&&(aC.cx!=ay.cx||aC.cy!=ay.cy||aC.r!=ay.r||aC.rx!=ay.rx||aC.ry!=ay.ry),aF=an;for(var ak in ay){if(ay[n](ak)){aC[ak]=ay[ak]}}if(aw){aC.path=x._getPath[an.type](an);an._.dirty=1}ay.href&&(at.href=ay.href);ay.title&&(at.title=ay.title);ay.target&&(at.target=ay.target);ay.cursor&&(aj.cursor=ay.cursor);"blur" in ay&&an.blur(ay.blur);if(ay.path&&an.type=="path"||aw){at.path=o(~V(aC.path).toLowerCase().indexOf("r")?x._pathToAbsolute(aC.path):aC.path);an._.dirty=1;if(an.type=="image"){an._.fillpos=[aC.x,aC.y];an._.fillsize=[aC.width,aC.height];D(an,1,1,0,0,0)}}"transform" in ay&&an.transform(ay.transform);if(am){var aa=+aC.cx,S=+aC.cy,ae=+aC.rx||+aC.r||0,ad=+aC.ry||+aC.r||0;at.path=x.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",Q((aa-ae)*j),Q((S-ad)*j),Q((aa+ae)*j),Q((S+ad)*j),Q(aa*j));an._.dirty=1}if("clip-rect" in ay){var R=V(ay["clip-rect"]).split(r);if(R.length==4){R[2]=+R[2]+(+R[0]);R[3]=+R[3]+(+R[1]);var al=at.clipRect||x._g.doc.createElement("div"),aE=al.style;aE.clip=x.format("rect({1}px {2}px {3}px {0}px)",R);if(!at.clipRect){aE.position="absolute";aE.top=0;aE.left=0;aE.width=an.paper.width+"px";aE.height=an.paper.height+"px";at.parentNode.insertBefore(al,at);al.appendChild(at);at.clipRect=al}}if(!ay["clip-rect"]){at.clipRect&&(at.clipRect.style.clip="auto")}}if(an.textpath){var aA=an.textpath.style;ay.font&&(aA.font=ay.font);ay["font-family"]&&(aA.fontFamily='"'+ay["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,F)+'"');ay["font-size"]&&(aA.fontSize=ay["font-size"]);ay["font-weight"]&&(aA.fontWeight=ay["font-weight"]);ay["font-style"]&&(aA.fontStyle=ay["font-style"])}if("arrow-start" in ay){l(aF,ay["arrow-start"])}if("arrow-end" in ay){l(aF,ay["arrow-end"],1)}if(ay.opacity!=null||ay["stroke-width"]!=null||ay.fill!=null||ay.src!=null||ay.stroke!=null||ay["stroke-width"]!=null||ay["stroke-opacity"]!=null||ay["fill-opacity"]!=null||ay["stroke-dasharray"]!=null||ay["stroke-miterlimit"]!=null||ay["stroke-linejoin"]!=null||ay["stroke-linecap"]!=null){var au=at.getElementsByTagName(K),aB=false;au=au&&au[0];!au&&(aB=au=W(K));if(an.type=="image"&&ay.src){au.src=ay.src}ay.fill&&(au.on=true);if(au.on==null||ay.fill=="none"||ay.fill===null){au.on=false}if(au.on&&ay.fill){var ac=V(ay.fill).match(x._ISURL);if(ac){au.parentNode==at&&at.removeChild(au);au.rotate=true;au.src=ac[1];au.type="tile";var E=an.getBBox(1);au.position=E.x+w+E.y;an._.fillpos=[E.x,E.y];x._preload(ac[1],function(){an._.fillsize=[this.offsetWidth,this.offsetHeight]})}else{au.color=x.getRGB(ay.fill).hex;au.src=F;au.type="solid";if(x.getRGB(ay.fill).error&&(aF.type in {circle:1,ellipse:1}||V(ay.fill).charAt()!="r")&&h(aF,ay.fill,au)){aC.fill="none";aC.gradient=ay.fill;au.rotate=false}}}if("fill-opacity" in ay||"opacity" in ay){var ab=((+aC["fill-opacity"]+1||2)-1)*((+aC.opacity+1||2)-1)*((+x.getRGB(ay.fill).o+1||2)-1);ab=T(Y(ab,0),1);au.opacity=ab;if(au.src){au.color="none"}}at.appendChild(au);var ag=(at.getElementsByTagName("stroke")&&at.getElementsByTagName("stroke")[0]),aD=false;!ag&&(aD=ag=W("stroke"));if((ay.stroke&&ay.stroke!="none")||ay["stroke-width"]||ay["stroke-opacity"]!=null||ay["stroke-dasharray"]||ay["stroke-miterlimit"]||ay["stroke-linejoin"]||ay["stroke-linecap"]){ag.on=true}(ay.stroke=="none"||ay.stroke===null||ag.on==null||ay.stroke==0||ay["stroke-width"]==0)&&(ag.on=false);var ar=x.getRGB(ay.stroke);ag.on&&ay.stroke&&(ag.color=ar.hex);ab=((+aC["stroke-opacity"]+1||2)-1)*((+aC.opacity+1||2)-1)*((+ar.o+1||2)-1);var ao=(B(ay["stroke-width"])||1)*0.75;ab=T(Y(ab,0),1);ay["stroke-width"]==null&&(ao=aC["stroke-width"]);ay["stroke-width"]&&(ag.weight=ao);ao&&ao<1&&(ab*=ao)&&(ag.weight=1);ag.opacity=ab;ay["stroke-linejoin"]&&(ag.joinstyle=ay["stroke-linejoin"]||"miter");ag.miterlimit=ay["stroke-miterlimit"]||8;ay["stroke-linecap"]&&(ag.endcap=ay["stroke-linecap"]=="butt"?"flat":ay["stroke-linecap"]=="square"?"square":"round");if("stroke-dasharray" in ay){var aq={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};ag.dashstyle=aq[n](ay["stroke-dasharray"])?aq[ay["stroke-dasharray"]]:F}aD&&at.appendChild(ag)}if(aF.type=="text"){aF.paper.canvas.style.display=F;var av=aF.paper.span,ap=100,Z=aC.font&&aC.font.match(/\d+(?:\.\d*)?(?=px)/);aj=av.style;aC.font&&(aj.font=aC.font);aC["font-family"]&&(aj.fontFamily=aC["font-family"]);aC["font-weight"]&&(aj.fontWeight=aC["font-weight"]);aC["font-style"]&&(aj.fontStyle=aC["font-style"]);Z=B(aC["font-size"]||Z&&Z[0])||10;aj.fontSize=Z*ap+"px";aF.textpath.string&&(av.innerHTML=V(aF.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var ai=av.getBoundingClientRect();aF.W=aC.w=(ai.right-ai.left)/ap;aF.H=aC.h=(ai.bottom-ai.top)/ap;aF.X=aC.x;aF.Y=aC.y+aF.H/2;("x" in ay||"y" in ay)&&(aF.path.v=x.format("m{0},{1}l{2},{1}",Q(aC.x*j),Q(aC.y*j),Q(aC.x*j)+1));var ah=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var ax=0,az=ah.length;ax<az;ax++){if(ah[ax] in ay){aF._.dirty=1;break}}switch(aC["text-anchor"]){case"start":aF.textpath.style["v-text-align"]="left";aF.bbx=aF.W/2;break;case"end":aF.textpath.style["v-text-align"]="right";aF.bbx=-aF.W/2;break;default:aF.textpath.style["v-text-align"]="center";aF.bbx=0;break}aF.textpath.style["v-text-kern"]=true}},h=function(E,af,ai){E.attrs=E.attrs||{};var ag=E.attrs,Z=Math.pow,aa,ab,ad="linear",ae=".5 .5";E.attrs.gradient=af;af=V(af).replace(x._radial_gradient,function(al,am,ak){ad="radial";if(am&&ak){am=B(am);ak=B(ak);Z(am-0.5,2)+Z(ak-0.5,2)>0.25&&(ak=q.sqrt(0.25-Z(am-0.5,2))*((ak>0.5)*2-1)+0.5);ae=am+w+ak}return F});af=af.split(/\s*\-\s*/);if(ad=="linear"){var R=af.shift();R=-B(R);if(isNaN(R)){return null}}var ac=x._parseDots(af);if(!ac){return null}E=E.shape||E.node;if(ac.length){E.removeChild(ai);ai.on=true;ai.method="none";ai.color=ac[0].color;ai.color2=ac[ac.length-1].color;var aj=[];for(var S=0,ah=ac.length;S<ah;S++){ac[S].offset&&aj.push(ac[S].offset+w+ac[S].color)}ai.colors=aj.length?aj.join():"0% "+ai.color;if(ad=="radial"){ai.type="gradientTitle";ai.focus="100%";ai.focussize="0 0";ai.focusposition=ae;ai.angle=0}else{ai.type="gradient";ai.angle=(270-R)%360}E.appendChild(ai)}return 1},J=function(R,E){this[0]=this.node=R;R.raphael=true;this.id=x._oid++;R.raphaelid=this.id;this.X=0;this.Y=0;this.attrs={};this.paper=E;this.matrix=x.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!E.bottom&&(E.bottom=this);this.prev=E.top;E.top&&(E.top.next=this);E.top=this;this.next=null};var A=x.el;J.prototype=A;A.constructor=J;A.transform=function(aa){if(aa==null){return this._.transform}var ac=this.paper._viewBoxShift,ab=ac?"s"+[ac.scale,ac.scale]+"-1-1t"+[ac.dx,ac.dy]:F,af;if(ac){af=aa=V(aa).replace(/\.{3}|\u2026/g,this._.transform||F)}x._extractTransform(this,ab+aa);var ag=this.matrix.clone(),ai=this.skew,S=this.node,ae,Z=~V(this.attrs.fill).indexOf("-"),E=!V(this.attrs.fill).indexOf("url(");ag.translate(1,1);if(E||Z||this.type=="image"){ai.matrix="1 0 0 1";ai.offset="0 0";ae=ag.split();if((Z&&ae.noRotation)||!ae.isSimple){S.style.filter=ag.toFilter();var ad=this.getBBox(),R=this.getBBox(1),aj=ad.x-R.x,ah=ad.y-R.y;S.coordorigin=(aj*-j)+w+(ah*-j);D(this,1,1,aj,ah,0)}else{S.style.filter=F;D(this,ae.scalex,ae.scaley,ae.dx,ae.dy,ae.rotate)}}else{S.style.filter=F;ai.matrix=V(ag);ai.offset=ag.offset()}if(af!==null){this._.transform=af;x._extractTransform(this,af)}return this};A.rotate=function(R,E,Z){if(this.removed){return this}if(R==null){return}R=V(R).split(r);if(R.length-1){E=B(R[1]);Z=B(R[2])}R=B(R[0]);(Z==null)&&(E=Z);if(E==null||Z==null){var S=this.getBBox(1);E=S.x+S.width/2;Z=S.y+S.height/2}this._.dirtyT=1;this.transform(this._.transform.concat([["r",R,E,Z]]));return this};A.translate=function(R,E){if(this.removed){return this}R=V(R).split(r);if(R.length-1){E=B(R[1])}R=B(R[0])||0;E=+E||0;if(this._.bbox){this._.bbox.x+=R;this._.bbox.y+=E}this.transform(this._.transform.concat([["t",R,E]]));return this};A.scale=function(aa,S,E,Z){if(this.removed){return this}aa=V(aa).split(r);if(aa.length-1){S=B(aa[1]);E=B(aa[2]);Z=B(aa[3]);isNaN(E)&&(E=null);isNaN(Z)&&(Z=null)}aa=B(aa[0]);(S==null)&&(S=aa);(Z==null)&&(E=Z);if(E==null||Z==null){var R=this.getBBox(1)}E=E==null?R.x+R.width/2:E;Z=Z==null?R.y+R.height/2:Z;this.transform(this._.transform.concat([["s",aa,S,E,Z]]));this._.dirtyT=1;return this};A.hide=function(){!this.removed&&(this.node.style.display="none");return this};A.show=function(){!this.removed&&(this.node.style.display=F);return this};A.auxGetBBox=x.el.getBBox;A.getBBox=function(){var E=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var S={};var R=1/this.paper._viewBoxShift.scale;S.x=E.x-this.paper._viewBoxShift.dx;S.x*=R;S.y=E.y-this.paper._viewBoxShift.dy;S.y*=R;S.width=E.width*R;S.height=E.height*R;S.x2=S.x+S.width;S.y2=S.y+S.height;return S}return E};A._getBBox=function(){if(this.removed){return{}}return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};A.remove=function(){if(this.removed||!this.node.parentNode){return}this.paper.__set__&&this.paper.__set__.exclude(this);x.eve.unbind("raphael.*.*."+this.id);x._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var E in this){this[E]=typeof this[E]=="function"?x._removedFactory(E):null}this.removed=true};A.attr=function(E,af){if(this.removed){return this}if(E==null){var ac={};for(var ae in this.attrs){if(this.attrs[n](ae)){ac[ae]=this.attrs[ae]}}ac.gradient&&ac.fill=="none"&&(ac.fill=ac.gradient)&&delete ac.gradient;ac.transform=this._.transform;return ac}if(af==null&&x.is(E,"string")){if(E==K&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}var ad=E.split(r),Z={};for(var aa=0,ah=ad.length;aa<ah;aa++){E=ad[aa];if(E in this.attrs){Z[E]=this.attrs[E]}else{if(x.is(this.paper.customAttributes[E],"function")){Z[E]=this.paper.customAttributes[E].def}else{Z[E]=x._availableAttrs[E]}}}return ah-1?Z:Z[ad[0]]}if(this.attrs&&af==null&&x.is(E,"array")){Z={};for(aa=0,ah=E.length;aa<ah;aa++){Z[E[aa]]=this.attr(E[aa])}return Z}var R;if(af!=null){R={};R[E]=af}af==null&&x.is(E,"object")&&(R=E);for(var ag in R){P("raphael.attr."+ag+"."+this.id,this,R[ag])}if(R){for(ag in this.paper.customAttributes){if(this.paper.customAttributes[n](ag)&&R[n](ag)&&x.is(this.paper.customAttributes[ag],"function")){var ab=this.paper.customAttributes[ag].apply(this,[].concat(R[ag]));this.attrs[ag]=R[ag];for(var S in ab){if(ab[n](S)){R[S]=ab[S]}}}}if(R.text&&this.type=="text"){this.textpath.string=R.text}M(this,R)}return this};A.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&x._tofront(this,this.paper);return this};A.toBack=function(){if(this.removed){return this}if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);x._toback(this,this.paper)}return this};A.insertAfter=function(E){if(this.removed){return this}if(E.constructor==x.st.constructor){E=E[E.length-1]}if(E.node.nextSibling){E.node.parentNode.insertBefore(this.node,E.node.nextSibling)}else{E.node.parentNode.appendChild(this.node)}x._insertafter(this,E,this.paper);return this};A.insertBefore=function(E){if(this.removed){return this}if(E.constructor==x.st.constructor){E=E[0]}E.node.parentNode.insertBefore(this.node,E.node);x._insertbefore(this,E,this.paper);return this};A.blur=function(E){var R=this.node.runtimeStyle,S=R.filter;S=S.replace(I,F);if(+E!==0){this.attrs.blur=E;R.filter=S+w+L+".Blur(pixelradius="+(+E||1.5)+")";R.margin=x.format("-{0}px 0 0 -{0}px",Q(+E||1.5))}else{R.filter=S;R.margin=0;delete this.attrs.blur}return this};x._engine.path=function(Z,R){var aa=W("shape");aa.style.cssText=m;aa.coordsize=j+w+j;aa.coordorigin=R.coordorigin;var ab=new J(aa,R),E={fill:"none",stroke:"#000"};Z&&(E.path=Z);ab.type="path";ab.path=[];ab.Path=F;M(ab,E);R.canvas&&R.canvas.appendChild(aa);var S=W("skew");S.on=true;aa.appendChild(S);ab.skew=S;ab.transform(F);return ab};x._engine.rect=function(R,ac,aa,ad,S,E){var ae=x._rectPath(ac,aa,ad,S,E),Z=R.path(ae),ab=Z.attrs;Z.X=ab.x=ac;Z.Y=ab.y=aa;Z.W=ab.width=ad;Z.H=ab.height=S;ab.r=E;ab.path=ae;Z.type="rect";return Z};x._engine.ellipse=function(R,E,ac,ab,aa){var Z=R.path(),S=Z.attrs;Z.X=E-ab;Z.Y=ac-aa;Z.W=ab*2;Z.H=aa*2;Z.type="ellipse";M(Z,{cx:E,cy:ac,rx:ab,ry:aa});return Z};x._engine.circle=function(R,E,ab,aa){var Z=R.path(),S=Z.attrs;Z.X=E-aa;Z.Y=ab-aa;Z.W=Z.H=aa*2;Z.type="circle";M(Z,{cx:E,cy:ab,r:aa});return Z};x._engine.image=function(R,E,ad,ab,ae,Z){var ag=x._rectPath(ad,ab,ae,Z),aa=R.path(ag).attr({stroke:"none"}),ac=aa.attrs,S=aa.node,af=S.getElementsByTagName(K)[0];ac.src=E;aa.X=ac.x=ad;aa.Y=ac.y=ab;aa.W=ac.width=ae;aa.H=ac.height=Z;ac.path=ag;aa.type="image";af.parentNode==S&&S.removeChild(af);af.rotate=true;af.src=E;af.type="tile";aa._.fillpos=[ad,ab];aa._.fillsize=[ae,Z];S.appendChild(af);D(aa,1,1,0,0,0);return aa};x._engine.text=function(E,ac,ab,ad){var Z=W("shape"),af=W("path"),S=W("textpath");ac=ac||0;ab=ab||0;ad=ad||"";af.v=x.format("m{0},{1}l{2},{1}",Q(ac*j),Q(ab*j),Q(ac*j)+1);af.textpathok=true;S.string=V(ad);S.on=true;Z.style.cssText=m;Z.coordsize=j+w+j;Z.coordorigin="0 0";var R=new J(Z,E),aa={fill:"#000",stroke:"none",font:x._availableAttrs.font,text:ad};R.shape=Z;R.path=af;R.textpath=S;R.type="text";R.attrs.text=V(ad);R.attrs.x=ac;R.attrs.y=ab;R.attrs.w=1;R.attrs.h=1;M(R,aa);Z.appendChild(S);Z.appendChild(af);E.canvas.appendChild(Z);var ae=W("skew");ae.on=true;Z.appendChild(ae);R.skew=ae;R.transform(F);return R};x._engine.setSize=function(S,E){var R=this.canvas.style;this.width=S;this.height=E;S==+S&&(S+="px");E==+E&&(E+="px");R.width=S;R.height=E;R.clip="rect(0 "+S+" "+E+" 0)";if(this._viewBox){x._engine.setViewBox.apply(this,this._viewBox)}return this};x._engine.setViewBox=function(ac,ab,ad,Z,aa){x.eve("raphael.setViewBox",this,this._viewBox,[ac,ab,ad,Z,aa]);var S=this.getSize(),E=S.width,af=S.height,ae,R;if(aa){ae=af/Z;R=E/ad;if(ad*ae<E){ac-=(E-ad*ae)/2/ae}if(Z*R<af){ab-=(af-Z*R)/2/R}}this._viewBox=[ac,ab,ad,Z,!!aa];this._viewBoxShift={dx:-ac,dy:-ab,scale:S};this.forEach(function(ag){ag.transform("...")});return this};var W;x._engine.initWin=function(S){var R=S.document;if(R.styleSheets.length<31){R.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)")}else{R.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)")}try{!R.namespaces.rvml&&R.namespaces.add("rvml","urn:schemas-microsoft-com:vml");W=function(Z){return R.createElement("<rvml:"+Z+' class="rvml">')}}catch(E){W=function(Z){return R.createElement("<"+Z+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};x._engine.initWin(x._g.win);x._engine.create=function(){var S=x._getContainer.apply(0,arguments),E=S.container,ae=S.height,af,R=S.width,ad=S.x,ac=S.y;if(!E){throw new Error("VML container not found.")}var aa=new x._Paper,ab=aa.canvas=x._g.doc.createElement("div"),Z=ab.style;ad=ad||0;ac=ac||0;R=R||512;ae=ae||342;aa.width=R;aa.height=ae;R==+R&&(R+="px");ae==+ae&&(ae+="px");aa.coordsize=j*1000+w+j*1000;aa.coordorigin="0 0";aa.span=x._g.doc.createElement("span");aa.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";ab.appendChild(aa.span);Z.cssText=x.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",R,ae);if(E==1){x._g.doc.body.appendChild(ab);Z.left=ad+"px";Z.top=ac+"px";Z.position="absolute"}else{if(E.firstChild){E.insertBefore(ab,E.firstChild)}else{E.appendChild(ab)}}aa.renderfix=function(){};return aa};x.prototype.clear=function(){x.eve("raphael.clear",this);this.canvas.innerHTML=F;this.span=x._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};x.prototype.remove=function(){x.eve("raphael.remove",this);this.canvas.parentNode.removeChild(this.canvas);for(var E in this){this[E]=typeof this[E]=="function"?x._removedFactory(E):null}return true};var N=x.st;for(var p in A){if(A[n](p)&&!N[n](p)){N[p]=(function(E){return function(){var R=arguments;return this.forEach(function(S){S[E].apply(S,R)})}})(p)}}}.apply(d,c),g!==undefined&&(e.exports=g))}])});Class("xui.svg","xui.UI",{Before:function(d,c,e){xui.absBox.$type[d.replace("xui.","")]=xui.absBox.$type[d]=d;return true},Initialize:function(){if(typeof(Raphael)=="function"){Raphael._availableAttrs.href="";Raphael._availableAttrs.title="";Raphael.el.shadow=function(){var K=this;if(K.type=="text"){return null}K._.dirty=true;var M=K.attr("stroke-width"),w=K.attr("fill"),l=K.attr("opacity"),G=K.attr("fill-opacity"),D=K.attr("transform"),A=4,e=K.paper,q=e.set(),Q=K._getBBox(false),j=(Q.width+M-A-4)/Q.width,h=(Q.height+M-A-4)/Q.height,V=K.getPath();if(w!=="none"&&G!==0){V=Raphael.transformPath(V,"t"+(M/2)+","+(M/2)+"s"+j+","+h+","+(Q.x+Q.width+M)+","+(Q.y+Q.height+M))}else{V=Raphael.transformPath(V,"t"+A/2+","+A/2)}for(var u=1,U;u<A+1;u++){U=e.path(V).attr({stroke:"#666",fill:w=="none"?"none":"#555","fill-opacity":G,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":2*u,opacity:(0.2*(1-u/A)+0.05)*l});U._decoration=1;q.push(U)}if(D&&D.length){q.transform(D)}return q.insertBefore(K)};var J=function(){var h=arguments,l=h.length,e=0,j;for(;e<l;e++){if((j=h[e])||!(j!==!1&&j!==0)){return j}}},E=function(){var h=arguments,l=h.length,e=0,j;for(;e<l;e++){if((j=h[e])||!(j!==!1&&j!==0)){if(!isNaN(j=Number(j))){return j}}}},F=function(e){return"matrix("+[e.get(0),e.get(1),e.get(2),e.get(3),e.get(4),e.get(5)].join()+")"},Z=/^matrix\(|\)$/g,p=/\,/g,ab=/\n|<br\s*?\/?>/gi,T=/[^\d\.]/gi,f=/[\(\)\s,\xb0#]/g,ad=/group/gi,B=/&/g,m=/"/g,x=/'/g,C=/</g,ac=/>/g,N=0,S=Math,I=parseFloat,L=S.max,Y=S.abs,H=S.pow,P=String,n=/[, ]+/,g=[{reg:/xmlns\=\"http\:\/\/www.w3.org\/2000\/svg\"/gi,str:""},{reg:/^.*<svg /,str:'<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" '},{reg:/\/svg>.*$/,str:"/svg>"},{reg:/\<desc[\s\>][^\<]*\<\/desc\>/,str:""},{reg:/zIndex="[^"]+"/g,str:""},{reg:/url\((\\?[\'\"])[^#]+#/g,str:"url($1#"},{reg:/ href=/g,str:" xlink:href="},{reg:/(id|class|width|height)=([^" >]+)/g,str:'$1="$2"'},{reg:/:(path|rect)/g,str:"$1"},{reg:/\<ima?ge? ([^\>]+?)[^\/]\>/gi,str:"<image $1 />"},{reg:/\<\/ima?ge?\>/g,str:""},{reg:/style="([^"]+)"/g,str:function(h){return h.toLowerCase()}}],d={blur:function(){},transform:function(){},src:function(h,j){j.attrSTR+=' xlink:href="'+j.attrs.src+'"'},path:function(l,o){var j=o.attrs.path,j=Raphael._pathToAbsolute(j||"");o.attrSTR+=' d="'+(j.toString&&j.toString()||"").replace(p," ")+'"'},gradient:function(D,G,o){var M=D.attrs.gradient,A="linear",Q,q,K=0.5,l=0.5,j=q="",V="";Q=M.replace(f,"_");if(!o[Q]){M=P(M).replace(Raphael._radial_gradient,function(r,h,u){A="radial";h&&u&&(K=I(h),l=I(u),r=(l>0.5)*2-1,H(K-0.5,2)+H(l-0.5,2)>0.25&&(l=S.sqrt(0.25-H(K-0.5,2))*r+0.5)&&l!=0.5&&(l=l.toFixed(5)-0.00001*r));return""});M=M.split(/\s*\-\s*/);if(A==="linear"){q=M.shift();q=-I(q);if(isNaN(q)){return null}var U=[0,0,S.cos(Raphael.rad(q)),S.sin(Raphael.rad(q))];q=1/(L(Y(U[2]),Y(U[3]))||1);U[2]*=q;U[3]*=q;U[2]<0&&(U[0]=-U[2],U[2]=0);U[3]<0&&(U[1]=-U[3],U[3]=0)}M=Raphael._parseDots(M);if(!M){return null}A==="radial"?(q='<radialGradient fx = "'+K+'" fy = "'+l+'" id = "'+Q+'">',j="</radialGradient>"):(q='<linearGradient x1 = "'+U[0]+'" y1 = "'+U[1]+'" x2 = "'+U[2]+'" y2 = "'+U[3]+'" gradientTransform ="matrix('+D.matrix.invert()+')" id = "'+Q+'">',j="</linearGradient>");D=0;for(U=M.length;D<U;D++){V+='<stop offset="'+(M[D].offset?M[D].offset:D?"100%":"0%")+'" stop-color="'+(M[D].color||"#fff")+'" stop-opacity="'+(M[D].opacity===void 0?1:M[D].opacity)+'" />'}o[Q]=!0;o.str+=q+V+j}G.attrSTR+=" fill=\"url('#"+Q+"')\""},fill:function(q,r){var l=r.attrs,j=l.fill,o;if(!q.attrs.gradient){if(j=Raphael.color(j),o=j.opacity,q.type==="text"){r.styleSTR+="fill:"+j+"; stroke-opacity:0; "}else{if(r.attrSTR+=' fill="'+j+'"',!l["fill-opacity"]&&(o||o===0)){r.attrSTR+=' fill-opacity="'+o+'"'}}}},stroke:function(q,r){var l=r.attrs,j,o;j=Raphael.color(l.stroke);o=j.opacity;if(q.type!=="text"&&(r.attrSTR+=' stroke="'+j+'"',!l["stroke-opacity"]&&(o||o===0))){r.attrSTR+=' stroke-opacity="'+o+'"'}},"clip-rect":function(o,q,j){var h=P(q.attrs["clip-rect"]),l=h.split(n),h=h.replace(f,"_")+"__"+N++;l.length===4&&(j[h]||(j[h]=!0,j.str+='<clipPath id="'+h+'"><rect x="'+l[0]+'" y="'+l[1]+'" width="'+l[2]+'" height="'+l[3]+'" transform="matrix('+F(o.matrix.invert()).replace(Z,"")+')"/></clipPath>'),q.attrSTR+=' clip-path="url(#'+h+')"')},cursor:function(l,o){var j=o.attrs.cursor;j&&(o.styleSTR+="cursor:"+j+"; ")},font:function(h,j){j.styleSTR+="font:"+j.attrs.font.replace(/\"/gi," ")+"; "},"font-size":function(l,o){var j=J(o.attrs["font-size"],"10");j&&j.replace&&(j=j.replace(T,""));o.styleSTR+="font-size:"+j+"px; "},"font-weight":function(h,j){j.styleSTR+="font-weight:"+j.attrs["font-weight"]+"; "},"font-family":function(h,j){j.styleSTR+="font-family:"+j.attrs["font-family"]+"; "},"line-height":function(){},"clip-path":function(){},visibility:function(){},"vertical-align":function(){},"text-anchor":function(l,o){var j=o.attrs["text-anchor"]||"middle";l.type==="text"&&(o.attrSTR+=' text-anchor="'+j+'"')},title:function(){},text:function(u,o){var j=o.attrs,A=j.text,r=J(j["font-size"],j.font,"10"),D=J(j["line-height"]),q;r&&r.replace&&(r=r.replace(T,""));r=E(r);D&&D.replace&&(D=D.replace(T,""));D=E(D,r&&r*1.2);q=r?r*0.85:D*0.75;for(var r=j.x,w=J(j["vertical-align"],"middle").toLowerCase(),A=P(A).split(ab),j=A.length,e=0,w=w==="top"?q:w==="bottom"?q-D*j:q-D*j*0.5;e<j;e++){o.textSTR+="<tspan ",q=(A[e]||"").replace(B,"&amp;").replace(m,"&quot;").replace(x,"&#39;").replace(C,"&lt;").replace(ac,"&gt;"),o.textSTR+=e?'dy="'+D+'" x="'+r+'" ':'dy="'+w+'"',o.textSTR+=">"+q+"</tspan>"}}},c=function(A,r){var o="",G={attrSTR:"",styleSTR:"",textSTR:"",attrs:A.attr()},w="",K="",u="",D,h,q=G.attrs;if(A.node.style.display!=="none"){for(D in q){if(D!=="gradient"&&(Raphael._availableAttrs[D]!==void 0||d[D])){if(d[D]){d[D](A,G,r)}else{G.attrSTR+=" "+D+'="'+q[D]+'"'}}}A.attrs.gradient&&d.gradient(A,G,r);A.type==="rect"&&q.r&&(G.attrSTR+=' rx="'+q.r+'" ry="'+q.r+'"');for(h in A.styles){G.styleSTR+=h+":"+A.styles[h]+"; "}A.type==="image"&&(G.attrSTR+=' preserveAspectRatio="none"');A.bottom&&(K=c(A.bottom,r));A.next&&(u=c(A.next,r));w=A.type;w.match(ad)&&(w="g");o+="<"+w+' transform="matrix('+F(A.matrix).replace(Z,"")+')" style="'+G.styleSTR+'"'+G.attrSTR+">"+G.textSTR+K+"</"+w+">"+u}else{A.next&&(o+=c(A.next,r))}return o};Raphael.fn.toSVG=function(l){var r="",o={str:""},e=0,q=g.length,j="";if(Raphael.svg){if(this.canvas&&this.canvas.parentNode){for(r=this.canvas.parentNode.innerHTML;e<q;e+=1){o=g[e],r=r.replace(o.reg,o.str)}}}else{r='<svg style="overflow: hidden; position: relative;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.width+'" version="1.1" height="'+this.height+'">';if(this.bottom){j=c(this.bottom,o);r+="<defs>"+o.str+"</defs>"+j+"</svg>"}}if(!l){r=r.replace(/\<image [^\>]*\>/gi,"")}return r}}var R={"arrow-start":1,"arrow-end":1,"clip-rect":1,fill:1,"fill-opacity":1,title:1,cursor:1,transform:1,opacity:1,stroke:1,"stroke-dasharray":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":1};this.$attr={circle:{cx:1,cy:1,r:1},ellipse:{cx:1,cy:1,rx:1,ry:1},rect:{x:1,y:1,r:1,width:1,height:1},text:{x:1,y:1,text:1,font:1,"font-family":1,"font-style":1,"font-size":1,"font-weight":1,"text-anchor":1,"letter-spacing":1},image:{src:1,x:1,y:1,width:1,height:1},path:{path:1}};xui.each(this.$attr,function(e){xui.merge(e,R)});var O=this.$attr.text;delete O["arrow-start"];delete O["arrow-end"];delete O["stroke-dasharray"];delete O["stroke-linecap"];delete O["stroke-linejoin"];delete O["stroke-miterlimit"];delete O["stroke-opacity"];delete O["stroke-width"];delete this.prototype.toHtml},Instance:{initialize:function(){if(typeof(Raphael)!="function"){throw"Browser doesn't suppor SVG or VML, all diagram functions were disabled!"}},getAttr:function(d){var g=this.get(0);if(g){var h=g.properties,f=Raphael._availableAttrs,c=g.box.ISCOMBO?h.attr:{KEY:h.attr},e;if(g._elset){g._elset.forEach(function(m){var n=m.type,j=g.getKey(m.node.id,true);if(!d||d===j){e=m.node;if(e&&("raphaelid" in e)){var o=g.boxing().getPaper();if(o&&(e=o.getById(e.raphaelid))){var l=e.attr();xui.filter(l,function(q,p){if(p=="transform"&&xui.isArr(q)&&q.length===0){q=""}if(p=="transform"&&q){q=e.matrix.toTransformString()}if(n=="text"){if(p=="stroke"){return q!="none"}if(p=="fill"){return q!="#000"}if(j!="KEY"&&("hAlign" in g.box.$DataModel)&&(p=="x"||p=="y")){return false}}if(j!="KEY"&&p=="transform"){return false}return q!=f[p]});if("src" in l&&"src" in c[j]){l.src=c[j].src}c[j]=l}}}})}}c=g.box._adjustAttr(c);return g.box.ISCOMBO?(d?c[d]:c):c.KEY},setAttr:function(e,c,g,d){if(xui.isHash(e)){c=e}else{var f={};f[e]=c;c=f;e="KEY"}g=g!==false;return this.each(function(j){var h=j.properties,m,p=Raphael._availableAttrs,o=j.box._adjustAttr(h.attr),w=j.box._adjustAttr(c);if(g){xui.each(o,function(A,l){if(!(l in w)){w[l]={}}xui.each(A,function(C,B){if(!(B in w[l])){w[l][B]=p[B];if((j.box.$tagName[l]||l.split("_")[0].toLowerCase())=="text"){if(B=="stroke"){w[l][B]="none"}if(B=="fill"){w[l][B]="#000"}}}});if((j.box.$tagName[l]||l.split("_")[0].toLowerCase())=="text"){if(l!="KEY"&&("hAlign" in j.box.$DataModel)){delete w[l].x;delete w[l].y}}if(l!="KEY"){delete w[l].transform}})}if(j._elset){j._elset.forEach(function(B){var C=B.type,l=j.getKey(B.node.id,true);if(xui.isHash(e)||e===l){m=B.node;if(m&&("raphaelid" in m)){var D=j.boxing().getPaper();if(D&&(m=D.getById(m.raphaelid))){var A=xui.copy(w[l]);if("src" in A){A.src=xui.adjustRes(A.src)}m.attr(A)}}}});var q=w.KEY,u=q&&("x" in q||"y" in q||"width" in q||"height" in q||"r" in q||"rx" in q||"ry" in q||"path" in q||"transform" in q||"arrow-start" in q||"arrow-end" in q);if(q){var x=j._elset;if(x[1]){if("transform" in q){for(var r=1,n=x.length;r<n;r++){x[r].attr("transform",q.transform)}}}if(d!==false){j.box._notify(j,q,u)}}}if(j.box.ISCOMBO){h.attr=xui.merge(h.attr,w,function(A,l){if(typeof A=="object"){if(l in h.attr){xui.merge(h.attr[l],A,"all")}else{h.attr[l]=xui.copy(A)}}else{return true}});xui.each(h.attr,function(A,l){xui.filter(A,function(C,B){if(B=="transform"&&xui.isArr(p[B])&&p[B].length===0){p[B]=""}if((j.box.$tagName[l]||l.split("_")[0].toLowerCase())=="text"){if(B=="stroke"){return C!="none"}if(B=="fill"){return C!="#000"}if(l!="KEY"&&("hAlign" in j.box.$DataModel)&&(B=="x"||B=="y")){return false}}if(l!="KEY"&&B=="transform"){return false}return p[B]!==C})})}else{xui.merge(h.attr,w.KEY,"all");xui.filter(h.attr,function(A,l){if(l=="transform"&&xui.isArr(p[l])&&p[l].length===0){p[l]=""}if((j.box.$tagName.KEY||r.split("_")[0].toLowerCase())=="text"){if(l=="stroke"){return A!="none"}if(l=="fill"){return A!="#000"}}return p[l]!==A})}})},toFront:function(){return this.each(function(e){if(e._shadow){e._shadow.toFront()}if(e._elset){xui.arr.each(e._elset.items,function(g){g.toFront()})}var c=xui.get(e,["parent","children"]);if(c&&c.length){var d=xui.arr.subIndexOf(c,"0",e),f;if(d!=-1){f=c[d];c.splice(d,1);c.push(f)}}})},toBack:function(){return this.each(function(e){if(e._elset){xui.arr.each(e._elset.items,function(g){g.toBack()},null,true)}if(e._shadow){e._shadow.toBack()}var c=xui.get(e,["parent","children"]);if(c&&c.length){var d=xui.arr.subIndexOf(c,"0",e),f;if(d!=-1){f=c[d];c.splice(d,1);c.unshift(f)}}})},getAllNodes:function(){var d=this.get(0),c=[];if(d&&d._elset){d._elset.forEach(function(e){c.push(e.node)})}return xui(c)},getPaper:function(){var c=this.get(0);return c&&c.parent&&c.parent._paper},animate:function(e,c,g,f){var d=this.get(0);if(d&&d._elset){d._elset.animate(e,c,g,f)}return this},getElemSet:function(){var c=this.get(0);c&&c._elset},getLeft:function(){return this._getBBox("x")},setLeft:function(c){return this._setBBox("x",c)},getTop:function(){return this._getBBox("y")},setTop:function(c){return this._setBBox("y",c)},getWidth:function(){return this._getBBox("width")},getHeight:function(){return this._getBBox("height")},setWidth:function(c){return this._setBBox("width",parseFloat(c))},setHeight:function(c){return this._setBBox("height",parseFloat(c))},_getBBox:function(g,d){var j=this.get(0),h,m;if((h=j._elset)&&h.length){h[0]._.dirty=1;m={};xui.merge(m,h[0]._getBBox(d!==false),"all",true);for(var f=1,c=h.length,e;f<c;f++){if(!(h[f].type=="text"&&("hAlign" in j.box.$DataModel))){h[f]._.dirty=1;e=h[f]._getBBox(d!==false);m.x=Math.min(e.x,m.x);m.y=Math.min(e.y,m.y);m.x2=Math.max(("x2" in e)?e.x2:(e.x+e.width),("x2" in m)?m.x2:(m.x+m.width));m.y2=Math.max(("y2" in e)?e.y2:(e.y+e.height),("y2" in m)?m.y2:(m.y+m.height))}}if("x2" in m){m.width=m.x2-m.x}if("y2" in m){m.height=m.y2-m.y}delete m.x2;delete m.y2;return g?m[g]:m}},_setBBox:function(c,d){},_getConnectAnchors:function(){var w=this.get(0),F;if(w){if(xui.get(w._pathCached,["_connAnchors"])){return xui.get(w._pathCached,["_connAnchors"])}var x=w._elset;if(x&&x[0]){x[0]._.dirty=1;var u=Raphael.parseTransformString(x[0].transform()),E;if(u&&u.length){E=x[0].matrix}var e=x[0]._getBBox(true),H=180,G=270,B=0,A=90,K=e.x,p=e.y+e.height/2,J=e.x+e.width/2,n=e.y,I=e.x+e.width,l=e.y+e.height/2,D=e.x+e.width/2,j=e.y+e.height;if(E){var r=K,q=J,o=I,m=D,h=p,f=n,d=l,c=j;K=E.x(r,h);p=E.y(r,h);J=E.x(q,f);n=E.y(q,f);I=E.x(o,d);l=E.y(o,d);D=E.x(m,c);j=E.y(m,c);var C=(K+J+I+D)/4,g=(p+n+l+j)/4;H=Raphael.angle(K,p,C,g);G=Raphael.angle(J,n,C,g);B=Raphael.angle(I,l,C,g);A=Raphael.angle(D,j,C,g)}F={left:{x:K,y:p,alpha:H,solid:1},top:{x:J,y:n,alpha:G,solid:1},right:{x:I,y:l,alpha:B,solid:1},bottom:{x:D,y:j,alpha:A,solid:1}};if(w._pathCached){xui.set(w._pathCached,["_connAnchors"],F)}return F}}},_getConnectPath:function(){var e=this.get(0),d;if(xui.get(e._pathCached,["_connPath"])){return xui.get(e._pathCached,["_connPath"])}if(e&&(d=e._elset)&&d[0]){var g=Raphael.parseTransformString(d[0].transform()),c;if(g&&g.length){c=d[0].matrix}var f=d[0].getPath();if(c){f=Raphael.mapPath(f,c)}if(e._pathCached){xui.set(e._pathCached,["_connPath"],f)}return f}},_getConnectPoint:function(f){if(f){var c=this.get(0),l;if(xui.get(c._pathCached,["_connPoint",f])){return xui.get(c._pathCached,["_connPoint",f])}if(/^[1-9][0-9]*:((1([.][0]+)?)|(0\.[0-9]+))$/.test(f)){var h=f.split(":");h[0]=+h[0];h[1]=+h[1];if(h[0]>=1&&h[1]>=0&&h[1]<=1){var c=this.get(0),j=this._getConnectPath();if(j){var g=Raphael.path2curve(j),m,d;if((m=g[h[0]])&&(d=g[h[0]-1])){l=Raphael.findDotsAtSegment(d[d.length-2],d[d.length-1],m[1],m[2],m[3],m[4],m[5],m[6],h[1])}}}}else{var e=this._getConnectAnchors();l=e&&e[f]}if(c._pathCached){xui.set(c._pathCached,["_connPoint",f],l)}return l}},_removeHandler:function(){return this.each(function(e){var d,l,f;if(l=e._pathHandler){if(f=l.handlers){for(var h=0,m=f.length,c,n;h<m;h++){c=f[h];for(var g in c){if((n=c[g])&&typeof n.remove=="function"){n.remove()}c[h]=null}}}d=l.el;delete l.el;delete e._pathHandler}delete e._ddstartFun;delete e._ddendFun;if(d&&d._shape){d._shape.remove();delete d._shape}})},_addHandler:function(d,c){c=c||"adv";this._removeHandler();return this.each(function(w){if(!w._elset||!w._elset[0]){return}var u=w.boxing().getPaper(),f=w.box.ISCOMBO,g=w._elset[0],e,G=w.box._CONNECTOR,q=w.properties.type,F={fill:"#fff",stroke:"#000",r:5},E={fill:"#fff",stroke:"#000",r:4},D={fill:"#fff",stroke:"#000",r:3},C={fill:"#fff",stroke:"#000",r:4},B={fill:"#bf5600",stroke:"#bf5600",r:5,"fill-opacity":0.5},o={stroke:"#0000FF","stroke-dasharray":". "},L={stroke:"#0000FF","stroke-dasharray":"- "},I={stroke:"#ccc","stroke-dasharray":"- ",opacity:0.8},H={opacity:0.8},p=16,n=16,K,j,A={rect:function(N){var r=N.attr(),M={};M.dot=J(u.circle(r.x+r.width/2,r.y+r.height/2).attr(F).attr("cursor","move"),N,function(O,T,R,Q){var S=h(this,O,T,R,Q),P;r.x+=S.rx;r.y+=S.ry;P={x:r.x,y:r.y};N.attr(P);if(N._shape){N._shape.attr(P)}xui.tryF(N.onShapeChanged,[P]);h(M.dot1,O,T,R,Q);h(M.dot2,O,T,R,Q);h(M.dot3,O,T,R,Q);return{dx:S.dx,dy:S.dy}},"main");M.dot1=J(u.circle(r.x,r.y).attr(E).attr("cursor","nw-resize"),N,function(V,S,O,W){var P=N.attr("x")+N.attr("width"),U=N.attr("y")+N.attr("height"),T=h(this,V,S,O,W,null,P,null,U),R;r.x=T.cx;r.y=T.cy;r.height=U-T.cy;r.width=P-T.cx;R={x:r.x,y:r.y,width:r.width,height:r.height};N.attr(R);if(N._shape){N._shape.attr(R)}xui.tryF(N.onShapeChanged,[R]);M.dot.attr({cx:r.x+r.width/2,cy:r.y+r.height/2});var Q=Math.min(N.attr("width"),N.attr("height"));if(N.attr("r")>Q){N.attr("r",r.r=Q);if(N._shape){N._shape.attr("r",Q)}xui.tryF(N.onShapeChanged,[{r:Q}])}M.dot3.attr({cx:N.attr("x")+N.attr("width")-N.attr("r"),cy:N.attr("y")});return{dx:T.dx,dy:T.dy}},"w");M.dot2=J(u.circle(r.x+r.width,r.y+r.height).attr(E).attr("cursor","se-resize"),N,function(P,U,S,R){var T=h(this,P,U,S,R,r.x,null,r.y,null),Q;r.width=T.cx-r.x;r.height=T.cy-r.y;Q={width:r.width,height:r.height};N.attr(Q);if(N._shape){N._shape.attr(Q)}xui.tryF(N.onShapeChanged,[Q]);M.dot.attr({cx:r.x+r.width/2,cy:r.y+r.height/2});var O=Math.min(N.attr("width"),N.attr("height"));if(N.attr("r")>O){N.attr("r",r.r=O);if(N._shape){N._shape.attr("r",O)}xui.tryF(N.onShapeChanged,[{r:O}])}M.dot3.attr({cx:N.attr("x")+N.attr("width")-N.attr("r"),cy:N.attr("y")});return{dx:T.dx,dy:T.dy}},"h");M.dot3=J(u.circle(r.x+r.width-(r.r||0),r.y).attr(D).attr("cursor","e-resize"),N,function(P,U,S,R){var O=N.attr(),T=h(this,P,U,S,R,(O.x+O.width-Math.max(O.width,O.height)/2),O.x+O.width,O.y,O.y),Q;Q={r:O.width-(T.cx-O.x)};N.attr(Q);if(N._shape){N._shape.attr(Q)}xui.tryF(N.onShapeChanged,[Q]);return{dx:T.dx,dy:T.dy}},"r");return{el:N,handlers:[M]}},circle:function(N){var r=N.attr(),M={};M.dot=J(u.circle(r.cx,r.cy).attr(F).attr("cursor","move"),N,function(O,R){var P=h(this,O,R),Q={cx:P.cx,cy:P.cy};r.cx=Q.cx;r.cy=Q.cy;N.attr(Q);if(N._shape){N._shape.attr(Q)}xui.tryF(N.onShapeChanged,[Q]);Q.cx+=N.attr("r");M.dotr.attr(Q)},"main");M.dotr=J(u.circle(r.cx+r.r,r.cy).attr(E).attr("cursor","e-resize"),N,function(P,U,S,R){var O=N.attr(),T=h(this,P,U,S,R,O.cx,null,O.cy,O.cy),Q;O.r=T.cx-O.cx;Q={r:O.r};N.attr(Q);if(N._shape){N._shape.attr(Q)}xui.tryF(N.onShapeChanged,[Q]);return{dx:T.dx,dy:T.dy}},"r");return{el:N,handlers:[M]}},ellipse:function(O){var r=O.attr(),N={},M;N.dot=J(u.circle(r.cx,r.cy).attr(F).attr("cursor","move"),O,function(P,S){var Q=h(this,P,S),R={cx:Q.cx,cy:Q.cy};r.cx=R.cx;r.cy=R.cy;O.attr(R);if(O._shape){O._shape.attr(R)}xui.tryF(O.onShapeChanged,[R]);N.dotrx.attr({cx:R.cx+O.attr("rx"),cy:R.cy});N.dotry.attr({cy:R.cy-O.attr("ry"),cx:R.cx})},"main");N.dotrx=J(u.circle(r.cx+r.rx,r.cy).attr(E).attr("cursor","w-resize"),O,function(Q,V,T,S){var P=O.attr(),U=h(this,Q,V,T,S,P.cx,null,P.cy,P.cy),R;P.rx=U.cx-P.cx;R={rx:P.rx};O.attr(R);if(O._shape){O._shape.attr(R)}xui.tryF(O.onShapeChanged,[R]);return{dx:U.dx,dy:U.dy}},"rx");N.dotry=J(u.circle(r.cx,r.cy-r.ry).attr(E).attr("cursor","n-resize"),O,function(Q,V,T,S){var P=O.attr(),U=h(this,Q,V,T,S,P.cx,P.cx,null,P.cy),R;P.ry=P.cy-U.cy;R={ry:P.ry};O.attr(R);if(O._shape){O._shape.attr(R)}xui.tryF(O.onShapeChanged,[R]);return{dx:U.dx,dy:U.dy}},"ry");return{el:O,handlers:[N]}},path:function(N){var T,R,P,O,U,S,ae,ad,ak,aj,aa=N.getPath(),V,X=function(al,an,au,at,ar,aq,ao,ap){var am=al.circle(au,at);if(ao=="from"){am.attr(C)}else{if(ao=="to"){am.attr(C)}else{am.attr(F).attr("cursor","move")}}return J(am,an,function(a8,a6,aE,aB,bq,aK,aJ,aY,aX,bo,a7){var az=an.paper,a0=this.attr("cx"),aZ=this.attr("cy"),aD=xui.isSet(aY)?aY:(a0+a8),aA=xui.isSet(aX)?aX:(aZ+a6),a2,a1;if(xui.isSet(aY)){a8=aD-a0}if(xui.isSet(aX)){a6=aA-aZ}if(ao=="from"||ao=="to"){var bj=an.node.ownerDocument||document;this.hide();ap._elset.hide();an._shape.hide();xui.arr.each(Y,function(ay,ax){if(ax=ay.dot){ax.hide()}if(ax=ay.dot1){ax.hide()}if(ax=ay.dot2){ax.hide()}if(ax=ay.dot3){ax.hide()}if(ax=ay.dotPrev){ax.hide()}if(ax=ay.dotNext){ax.hide()}if(ax=ay.linePrev){ax.hide()}if(ax=ay.lineNext){ax.hide()}});var bh=bj.elementFromPoint(aK,aJ);this.show();ap._elset.show();an._shape.show();xui.arr.each(Y,function(ay,ax){if(ax=ay.dot){ax.show()}if(ax=ay.dot1){ax.show()}if(ax=ay.dot2){ax.show()}if(ax=ay.dot3){ax.show()}if(ax=ay.dotPrev){ax.show()}if(ax=ay.dotNext){ax.show()}if(ax=ay.linePrev){ax.show()}if(ax=ay.lineNext){ax.show()}});if(bh._rootNode){bh=bh._rootNode}if(!bh){return}if(bh&&bh.raphael){var bd=az.getById(bh.raphaelid);if(bd&&bd._attached){bh=bd._attached}}while(bh&&((!bh.id)||bh.id==xui.$localeDomId||bh.tagName=="tspan")&&bh!==az.canvas.parentNode&&bh.parentNode!==bj){bh=bh.parentNode}if(!bh){return}var aw,aR,aW,aQ,ba,a3,aL=az._anchorShadow;if(bh!==az.canvas){var a5=xui.UIProfile.getFromDom(bh.id);if(a5&&a5.parent&&a5.parent._paper==az){if(a5.box["xui.svg"]){aW=a5.getRootNode();if(!a5.box._CONNECTOR){aQ=a5.boxing()._getConnectAnchors();ba=a5.boxing()._getConnectPath();if(ba){var aC;if(aC=xui.get(a5._pathCached,["_connBBox"])){}else{aC=Raphael.pathBBox(ba);xui.set(a5._pathCached,["_connBBox"],aC)}a3={x:aC.x+aC.width/2,y:aC.y+aC.height/2}}aw=a5.alias}}else{if(a5.box["xui.UI"]){}}}}if(aL&&((!aQ&&!ba)||aL._attached!==aW)){aL.remove();aL.clear();aL=null;delete az._anchorShadow;this.show()}if(aQ||ba){if(!aL){aL=az.set();aL._attached=aW;var aU=az.circle(-100,-100);aU._attached=aW;aU.hide();aL.push(aU);for(var bg in aQ){bd=aQ[bg];aU=az.circle(bd.x,bd.y);aU._attached=aW;aU._anchorKey=bg;aL.push(aU)}aL.attr(B);az._anchorShadow=aL}var aO=null;for(var bg in aQ){aV=Math.pow(Math.pow(Math.abs(aY-aQ[bg].x),2)+Math.pow(Math.abs(aX-aQ[bg].y),2),1/2);if(aV<=p){if(aO===null||aO>aV){aO=aV;a1=aQ[bg];aR=bg}}}if(!a1){if(ba){var a9=n,bb="M,"+aD+","+aA+"m,0,-"+a9+"a,"+a9+","+a9+",0,1,1,0,"+a9*2+"a,"+a9+","+a9+",0,1,1,0,-"+a9*2+"z",aT=Raphael.getTotalLength(bb)/2,aG=Raphael.pathIntersection(ba,bb);if(aG.length>=2){var aP=(aG[0].x+aG[1].x)/2,av=(aG[0].y+aG[1].y)/2,aS=Raphael.angle(aP,av,aD,aA);if((Math.abs(aP-a3.x)+Math.abs(av-a3.y))<Math.abs(aD-a3.x)+Math.abs(aA-a3.y)){aS+=180}var aF=Raphael.rad(aS),aN=aD-a9*Math.cos(aF),aM=aD+a9*Math.cos(aF),bp=aA-a9*Math.sin(aF),bn=aA+a9*Math.sin(aF);aG=Raphael.pathIntersection(ba,"M"+aN+","+bp+",L"+aM+","+bn);if(aG.length===1){var bk=aG[0].bez1,aI="M"+bk[0]+","+bk[1]+"C"+bk[2]+","+bk[3]+","+bk[4]+","+bk[5]+","+bk[6]+","+bk[7],a4=Raphael.getPointAtLength(aI,aG[0].t1*Raphael.getTotalLength(aI));aR=aG[0].segment1+":"+aG[0].t1;a1={x:aG[0].x,y:aG[0].y,alpha:aS,_path:true}}}}}if(a1){if(K){if(K.x==a1.x&&K.y==a1.y){a8=a6=0;aE=j.x;aB=j.y}else{a8=a1.x-K.x;a6=a1.y-K.y;aE=j.x+a8;aB=j.y+a6;K={x:a1.x,y:a1.y};j={x:aE,y:aB};if(a1._path){aL[0].attr({cx:a1.x,cy:a1.y});aL[0].show()}else{aL[0].hide()}}}else{a8+=a1.x-aY;a6+=a1.y-aX;aE+=a1.x-aY;aB+=a1.y-aX;K={x:a1.x,y:a1.y};j={x:aE,y:aB};if(a1._path){aL[0].attr({cx:a1.x,cy:a1.y});aL[0].show()}else{aL[0].hide()}}aD=a1.x;aA=a1.y;a2={dx:aE,dy:aB}}}if(!a1&&K){a8=aY-K.x;a6=aX-K.y;aE=j.x+a8;aB=j.y+a6;K=j=null;if(aL){aL[0].hide()}}ap.properties[ao=="from"?"fromObj":"toObj"]=aw||"";ap.properties[ao=="from"?"fromPoint":"toPoint"]=aR||""}var bm,a2={cx:aD,cy:aA};if(bq||false!==xui.tryF(V,[ar,aa,aD,aA,this,a2])){var bg=this._handlerIndex,bf=aa[bg].length,bi=Y[bg],be,bc,bj;if(!bq){if(aq=="V"){if(Y.length-1==bg+1&&Y[bg+1].type=="H"){delete a2.cy;a6=aB=0}else{aa[bg][bf-1]=aA}if((0!==bg-1)&&(be=Y[bg-1])){if(be.type=="H"){aa[bg-1][1]=aD;if(bj=be.dot){bj.update(a8,0,aE,0,true,aK,aJ)}}else{if(be.type=="V"){delete a2.cx}else{if(be.type=="L"){aa[bg-1][aa[bg-1].length-2]=aD;if(bj=be.dot){bj.update(a8,0,aE,0,true,aK,aJ)}}else{delete a2.cx}}}}else{delete a2.cx}}else{if(aq=="H"){if(Y.length-1==bg+1&&Y[bg+1].type=="V"){delete a2.cx;a8=aE=0}else{aa[bg][bf-1]=aD}if((0!==bg-1)&&(be=Y[bg-1])){if(be.type=="H"){delete a2.cy}else{if(be.type=="V"){aa[bg-1][1]=aA;if(bj=be.dot){bj.update(0,a6,aE,aB,true,aK,aJ)}}else{if(be.type=="L"){aa[bg-1][aa[bg-1].length-1]=aA;if(bj=be.dot){bj.update(0,a6,aE,aB,true,aK,aJ)}}else{delete a2.cy}}}}else{delete a2.cy}}else{aa[bg][bf-2]=aD;aa[bg][bf-1]=aA}}if((be=Y[bg+1])&&(bj=be.dot)){if(be.type=="V"){bj.update(a8,0,aE,0,true,aK,aJ)}else{if(be.type=="H"){bj.update(0,a6,0,aB,true,aK,aJ)}}}}this.attr(a2);if(bc=bi.linePrevPath){bc[0][1]=aD;bc[0][2]=aA}if(bc=bi.lineNextPath){bc[0][1]=aD;bc[0][2]=aA}if(bj=bi.dotPrev){bj.update(aD-a0,aA-aZ,aE,aB,true);bm=true}if(bj=bi.dotNext){bj.update(aD-a0,aA-aZ,aE,aB,true);bm=true}}if(!bm){var aH={path:aa};an.attr(aH);if(an._shape){an._shape.attr(aH)}xui.tryF(an.onShapeChanged,[aH])}if((ao=="from"||ao=="to")&&q=="bezier"&&a1&&(aD!==a0||aA!==aZ)){var bl=ao=="from"?Y[0].dotNext:Y[aa.length-1].dotPrev;if(bl){var aP=bl.attr("cx"),av=bl.attr("cy"),aV=Math.pow(Math.pow(Math.abs(aD-aP),2)+Math.pow(Math.abs(aA-av),2),1/2),aF=Raphael.rad(a1.alpha),aN=aD+aV*Math.cos(aF),bp=aA+aV*Math.sin(aF);bl.update(aN-aP,bp-av,null,null,true)}}if(a2){return a2}},"main",ar)},ai=function(ao,an,al,ar,am,aq,ap){return J(ao.circle(al,ar).attr(D),an,function(aB,aA){var av=this.attr("cx")+aB,at=this.attr("cy")+aA,aw;this.attr({cx:av,cy:at});var ay=this._handlerIndex,ax=Y[ay],au,az;if(au=ax.lineNextPath){au[1][1]=av;au[1][2]=at}if(az=ax.lineNext){az.attr({path:au})}aa[ay+1][1]=av;aa[ay+1][2]=at;aw={path:aa};an.attr(aw);if(an._shape){an._shape.attr(aw)}xui.tryF(an.onShapeChanged,[aw])},"path2",am)},Q=function(ao,an,al,ar,am,aq,ap){return J(ao.circle(al,ar).attr(D),an,function(aB,aA){var av=this.attr("cx")+aB,at=this.attr("cy")+aA,aw;this.attr({cx:av,cy:at});var ay=this._handlerIndex,ax=Y[ay],au,az;if(au=ax.linePrevPath){au[1][1]=av;au[1][2]=at}if(az=ax.linePrev){az.attr({path:au})}aa[ay][aa[ay].length-4]=av;aa[ay][aa[ay].length-3]=at;aw={path:aa};an.attr(aw);if(an._shape){an._shape.attr(aw)}xui.tryF(an.onShapeChanged,[aw])},"path1",am)},ah=1,ag=1,af=0,Z=1,Y=[];if(xui.isStr(aa)){aa=Raphael.parsePathString(aa)}if(G&&q=="flowchart"){w._ddstartFun=function(an,am,al){if(am===0||am===an._pathHandler.handlers.length-1){xui.arr.each(an._pathHandler.handlers,function(ap,ao){if(ao!==0&&ao!==an._pathHandler.handlers.length-1){ap.dot.attr({opacity:0,r:0})}})}};w._ddendFun=function(an,am,al){if(am===0||am===an._pathHandler.handlers.length-1){an.boxing()._addHandler(d)}};V=function(am,ap,ar,ao,al,aq){if(am===0||am===w._pathHandler.handlers.length-1){al.attr(aq);var an=w.box._redrawBrokenLine(w,am===0?"start":"end",ar,ao);ap.length=0;xui.arr.each(an,function(at){ap.push(at)});return false}}}for(var ac=0,W=aa.length,ab,M;ac<W;ac++){var r;if(G){r=(ac===0)?"from":(ac===(W-1))?"to":null}Y.push(M={dot:0,dotPrev:0,dotNext:0,linePrev:0,lineNext:0,linePrevPath:0,lineNextPath:0,type:aa[ac][0]});ab=aa[ac].length;af=0;switch(aa[ac][0]){case"M":T=ak=P=aa[ac][ab-2];R=aj=O=aa[ac][ab-1];ah=0;ag=1;break;case"L":ah=ag=1;ak=P=aa[ac][ab-2];aj=O=aa[ac][ab-1];break;case"H":ah=ag=1;aj=O=R;ak=P=aa[ac][1];af="H";break;case"V":ah=ag=1;ak=P=T;aj=O=aa[ac][1];af="V";break;case"C":ah=ag=2;U=aa[ac][ab-6];S=aa[ac][ab-5];ae=aa[ac][ab-4];ad=aa[ac][ab-3];P=ak=aa[ac][ab-2];O=aj=aa[ac][ab-1];break;case"Q":ah=2;ag=1;U=aa[ac][ab-4];S=aa[ac][ab-3];P=ak=aa[ac][ab-2];O=aj=aa[ac][ab-1];break;case"S":ah=1;ag=2;ae=aa[ac][ab-4];ad=aa[ac][ab-3];P=ak=aa[ac][ab-2];O=aj=aa[ac][ab-1];break;case"T":ah=ag=1;P=ak=aa[ac][ab-2];O=aj=aa[ac][ab-1];break;case"A":ah=ag=0;P=ak=aa[ac][ab-2];O=aj=aa[ac][ab-1];continue;default:continue}switch(ah){case 0:break;case 1:break;case 2:if(c=="adv"){Y[ac-1].lineNextPath=[["M",T,R],["L",U,S]],Y[ac-1].lineNext=u.path(Y[ac-1].lineNextPath).attr(o);Y[ac-1].dotNext=ai(u,N,U,S,ac-1,r,w)}break}switch(ag){case 1:Y[ac].dot=X(u,N,ak,aj,ac,af,r,w);if(G&&q=="flowchart"&&W===3&&ac===1){Y[ac].dot.attr({opacity:0,r:0})}break;case 2:Y[ac].dot=X(u,N,ak,aj,ac,null,r,w);if(c=="adv"){Y[ac].linePrevPath=[["M",ak,aj],["L",ae,ad]],Y[ac].linePrev=u.path(Y[ac].linePrevPath).attr(o);Y[ac].dotPrev=Q(u,N,ae,ad,ac,r,w)}break}if(P!=undefined){T=P}if(O!=undefined){R=O}Z=ag}for(var ac=0,W=aa.length,ab,M;ac<W;ac++){M=Y[ac];if(M.dot){M.dot.toFront()}}return{el:N,handlers:Y}}},x=function(M,r,Q,P,O){var N=this.update(M-(this.dx||0),r-(this.dy||0),M,r,false,Q,P,Q-e.left,P-e.top,O);this.dx=(N&&N.dx)||M;this.dy=(N&&N.dy)||r;if(d){d(this,O,"drag",this._attached)}},m=function(P,N,M){if(d){d(this,M,"beforedragstart",this._attached)}this.toFront();this.dx=this.dy=0;K=j=null;e=xui(this.paper.canvas.parentNode).offset(null);var O=this.attr("cursor"),r;this._oldCursor=(r=u.canvas.style).cursor||"";r.cursor=O;if(r=this._attached){r._oldCursor=r.attr("cursor")||"";r.attr("cursor",O);r._opath=r.getPath();r._obbox=Raphael.pathBBox(r._opath);if(w._ddstartFun){xui.tryF(w._ddstartFun,[w,this._handlerIndex,this])}}if(d){d(this,M,"dragstart",this._attached)}},l=function(N){if(d){d(this,N,"beforedragend",this._attached)}e=null;K=j=null;var O=this.paper;u.canvas.style.cursor=this._oldCursor;delete this._oldCursor;var M;if(M=this._attached){M.attr("cursor",M._oldCursor);delete M._oldCursor;delete M._obbox;delete M._opath;var r=M.attr();if(f){xui.merge(w.properties.attr.KEY,r,"all");r=w.properties.attr.KEY}else{xui.merge(w.properties.attr,r,"all");r=w.properties.attr}if(r.path){r.path=M.getPath().join("")}w.box._notify(w,{path:1},true);if(w._ddendFun){xui.tryF(w._ddendFun,[w,this._handlerIndex,this])}}if(M=O._anchorShadow){M.remove();M.clear();delete O._anchorShadow}if(d){d(this,N,"dragend",this._attached)}},J=function(O,N,P,M,r){O._handlerIndex=r||0;O._attached=N;if(P){O.drag(x,m,l);O.update=P;O.dblclick(function(Q){if(d){d(this,Q,"dblclick",N,M,r)}});O.click(function(Q){if(d){d(this,Q,"click",N,M,r)}xui.Event.stopBubble(Q);xui.Event.stopDefault(Q)});O.contextmenu(function(Q){if(d){d(this,Q,"contextmenu",N,M,r)}})}O.toFront();return O},h=function(r,V,T,W,U,S,R,ad,ab){switch(r.type){case"path":var ac=r.getPath(),aa;for(var ag=0,Z=ac.length,ae;ag<Z;ag++){ae=ac[ag].length;switch(ac[ag][0]){case"M":case"L":ac[ag][1]+=V;ac[ag][2]+=T;break;case"H":ac[ag][1]+=V;break;case"V":ac[ag][1]+=T;break;case"C":ac[ag][1]+=V;ac[ag][2]+=T;ac[ag][3]+=V;ac[ag][4]+=T;ac[ag][5]+=V;ac[ag][6]+=T;break;case"Q":case"S":ac[ag][1]+=V;ac[ag][2]+=T;ac[ag][3]+=V;ac[ag][4]+=T;break;case"T":ac[ag][1]+=V;ac[ag][2]+=T;break;case"A":ac[ag][ae-2]+=V;ac[ag][ae-1]+=T;continue;default:continue}}aa={path:ac};r.attr(aa);if(r._shape){r._shape.attr(aa)}xui.tryF(r.onShapeChanged,[aa]);break;case"circle":var ah=r.attr("cx"),Q=r.attr("cy"),N=ah+V,M=Q+T,P=0,O=0,af;if((S===0||S)&&N<(S+1)){P=N-(S+1);N=(S+1)}if((R===0||R)&&N>R){P=N-R;N=R}if((ad===0||ad)&&M<(ad+1)){O=M-(ad+1);M=(ad+1)}if((ab===0||ab)&&M>ab){O=M-ab;M=ab}af={cx:N,cy:M,rx:V,ry:T};r.attr(af);if(r._shape){r._shape.attr(af)}xui.tryF(r.onShapeChanged,[af]);af.dx=W-P;af.dy=U-O;return af;case"ellipse":var N=r.attr("cx")+V,M=r.attr("cy")+T,aa={cx:N,cy:M};r.attr(aa);if(r._shape){r._shape.attr(aa)}xui.tryF(r.onShapeChanged,[aa]);break;case"rect":var N=r.attr("x")+V,M=r.attr("y")+T,aa={x:N,y:M};r.attr(aa);if(r._shape){r._shape.attr(aa)}xui.tryF(r.onShapeChanged,[aa]);break;case"text":var N=r.attr("x")+V,M=r.attr("y")+T,aa={x:N,y:M};r.attr(aa);if(r._shape){r._shape.attr(aa)}xui.tryF(r.onShapeChanged,[aa]);break}};if(A[g.type]){w._pathHandler=A[g.type](g);g=g._shape=g.clone();g.attr({"arrow-start":"none","arrow-end":"none"});g.transform("").attr(g.type=="text"?H:I).toBack()}})}},Static:{$abstract:true,_objectProp:{attr:1},DataModel:{selectable:null,defaultFocus:null,renderer:null,position:null,disableClickEffect:null,disableHoverEffect:null,disableTips:null,disabled:null,left:null,top:null,right:null,bottom:null,width:null,height:null,svgTag:{ini:""},attr:{ini:{}},shadow:{ini:false,action:function(c){if(c&&!this._shadow){this._shadow=this._elset[0].shadow()}else{if(this._shadow){this._shadow.remove();this._shadow.clear();delete this._shadow}}}}},Behaviors:{HotKeyAllowed:false,HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},onClick:function(c,f,g){if(c.$inDesign){return false}var d=c.properties;if(d.disabled){return false}if(c.onClick){return c.boxing().onClick(c,f,g)}},onDblclick:function(c,f,g){if(c.$inDesign){return false}var d=c.properties;if(d.disabled){return false}if(c.onDblClick){return c.boxing().onDblClick(c,f,g)}},onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f)!==false}}},EventHandlers:{onClick:function(c,d,f){},onDblClick:function(c,d,f){},onContextmenu:function(c,d,f){},onHotKeydown:null,onHotKeypress:null,onHotKeyup:null},_beforeSerialized:function(c){var d=arguments.callee.upper.call(this,c),e=d.properties;e.attr=xui.clone(e.attr,true);xui.filter(e.attr,function(g,f){if(f=="transform"&&(!g||g.length<1)){return false}if(f=="href"||f=="target"){return false}if(f=="path"&&xui.isArr(e.attr.path)){e.attr.path=g.join("")}});return d},RenderTrigger:function(){var c=this;(c.$beforeDestroy=(c.$beforeDestroy||{}))["svgClear"]=function(){if(c._elset){c._elset.forEach(function(d){if(d){delete d._rootNode}});c._elset.remove();c._elset.clear();delete c._elset}if(c._shadow){c._shadow.remove();c._shadow.clear();delete c._shadow}};c.box._initAttr2UI(c)},_RenderSVG:function(e){e._pathCached={};var f=e.parent;if(f&&f._paper&&f._canvas){e._elset=this._draw(f._paper,e,e.properties);for(var d=1,c=e._elset.length;d<c;d++){e._elset._rootNode=e._elset[0]}}},_adjustAttr:function(c){var f=this,e={},d=xui.svg.$attr;xui.each(c,function(h,g){if(/^[A-Z_]+(_[0-9]+)?$/.test(g)&&xui.isHash(h)&&((g.indexOf("_")!=-1)||(g in f.$tagName))){e[g]=e[g]||{};xui.each(h,function(l,j){if(d[f.$tagName[g]||g.split("_")[0].toLowerCase()][j]){e[g][j]=l}})}else{if(d[f.$tagName.KEY][g]){e.KEY=e.KEY||{};e.KEY[g]=h}}});return e},_initAttr2UI:function(d){var c=this._adjustAttr(d.properties.attr);if(d._elset){d.boxing().setAttr(c)}if(d.properties.shadow){d.boxing().setShadow(true,true)}},$adjustBB:function(c,e){var f=typeof(c)=="object"?c:{},d="left,top,right,bottom,x,y,x2,y2,width,height".split(",");if(typeof(c)=="string"){f[c]=e}xui.filter(f,function(h,g){if(xui.arr.indexOf(d,g)==-1||h==="auto"||h===""){return false}if(!xui.isNumb(h)){f[g]=parseFloat(h)||0;return false}});if("left" in f){f.x=f.left;delete f.left}if("top" in f){f.y=f.top;delete f.top}if("right" in f){f.x2=f.right;delete f.right}if("bottom" in f){f.y2=f.bottom;delete f.bottom}if("x" in f&&"width" in f){delete f.x2}if("y" in f&&"height" in f){delete f.y2}if("x2" in f){if("width" in f){f.x=f.x2-f.width}else{f.width=f.x2-f.x}delete f.x2}if("y2" in f){if("height" in f){f.y=f.y2-f.height}else{f.height=f.y2-f.y}delete f.y2}return f},$transform:function(e,h){if(!xui.isStr(e)){e=e.join("")}if(/[mlhvcsqtaz]/.test(e)){e=Raphael._pathToAbsolute(e)}else{e=Raphael.parsePathString(e)}var m=Raphael.transformPath(e,h),d=/[r]/.test(h);for(var g=0,c=m.length,j,f;g<c;g++){if(m[g][0]!=e[g][0]){j=m[g].length;switch(f=e[g][0]){case"M":break;case"L":m[g]=[f,m[g][j-2],m[g][j-1]];break;case"H":if(d){m[g]=["L",m[g][j-2],m[g][j-1]]}else{m[g]=[f,m[g][j-2]]}break;case"V":if(d){m[g]=["L",m[g][j-2],m[g][j-1]]}else{m[g]=[f,m[g][j-1]]}break;case"C":break;case"Q":m[g]=[f,m[g][j-6],m[g][j-5],m[g][j-2],m[g][j-1]];break;case"S":m[g]=[f,m[g][j-4],m[g][j-3],m[g][j-2],m[g][j-1]];break;case"T":m[g]=[f,m[g][j-2],m[g][j-1]];break;case"A":break;case"Z":m[g]=[f];break;default:continue}}}return m.join("")},$setBB:function(L,o,e,N,f,E){var S={},P=function(r){var h={};for(var l in r){h[l]=r[l]}return h};switch(o){case"circle":if(xui.isNumb(e.width)){S.r=e.width/2}if(xui.isNumb(e.height)){if(e.height/2>=N.r&&(xui.isSet(S.r)?S.r>=N.r:1)){S.r=xui.isSet(S.r)?Math.max(S.r,e.height/2):(e.height/2)}else{S.r=xui.isSet(S.r)?Math.min(S.r,e.height/2):(e.height/2)}}S.cx=xui.isNumb(e.x)?(e.x+(xui.isSet(S.r)?S.r:N.r)):(N.cx+(xui.isSet(S.r)?(S.r-N.r):0));S.cy=xui.isNumb(e.y)?(e.y+(xui.isSet(S.r)?S.r:N.r)):(N.cy+(xui.isSet(S.r)?(S.r-N.r):0));break;case"ellipse":if(xui.isNumb(e.width)){S.rx=e.width/2}if(xui.isNumb(e.height)){S.ry=e.height/2}S.cx=xui.isNumb(e.x)?(e.x+(xui.isSet(S.rx)?S.rx:N.rx)):(N.cx+(xui.isSet(S.rx)?(S.rx-N.rx):0));S.cy=xui.isNumb(e.y)?(e.y+(xui.isSet(S.ry)?S.ry:N.ry)):(N.cy+(xui.isSet(S.ry)?(S.ry-N.ry):0));break;case"rect":case"image":if(xui.isNumb(e.x)){S.x=e.x}if(xui.isNumb(e.y)){S.y=e.y}if(xui.isNumb(e.width)){S.width=e.width}if(xui.isNumb(e.height)){S.height=e.height}break;case"text":var I,R;if(f){f._.dirty=1;I=P(f._getBBox(true));R=f.attr("text-anchor")}else{var J=xui.Dom.getEmptyDiv(),K=Raphael(J.get(0).id,1,1),H=K.text(0,0,N.text);I=P(H._getBBox(true));R=H.attr("text-anchor");H.remove();K.remove();J.empty()}if(xui.isNumb(e.x)){I.x=e.x}if(xui.isNumb(e.y)){I.y=e.y}var w=N.hAlign||"center",j=N.vAlign||"middle",m=I?(R=="start"?-I.width/2:R=="middle"?0:I.width/2):0;if(xui.isNumb(e.x)){if(w=="center"){if(xui.isNumb(e.width)){S.x=e.x+e.width/2}else{S.x=e.x+(I?(I.width/2):0)}}else{if(w=="left"){S.x=e.x+(I?(I.width/2):0)}else{if(w=="outterleft"){S.x=e.x-(I?(I.width/2):0)}else{if(w=="right"){if(xui.isNumb(e.width)){S.x=e.x+e.width-(I?(I.width/2):0)}else{}}else{if(w=="outterright"){if(xui.isNumb(e.width)){S.x=e.x+e.width+(I?(I.width/2):0)}else{}}else{if(xui.isNumb(e.width)){S.x=e.x+e.width*parseFloat(w)/100}else{S.x=e.x+(I?(I.width*parseFloat(w)/100):0)}}}}}}S.x+=m}if(xui.isNumb(e.y)){if(j=="middle"){if(xui.isNumb(e.height)){S.y=e.y+e.height/2}else{S.y=e.y+(I?(I.height/2):0)}}else{if(j=="top"){S.y=e.y+(I?(I.height/2):0)}else{if(j=="outtertop"){S.y=e.y-(I?(I.height/2):0)}else{if(j=="bottom"){if(xui.isNumb(e.height)){S.y=e.y+e.height-(I?(I.height/2):0)}else{}}else{if(j=="outterbottom"){if(xui.isNumb(e.height)){S.y=e.y+e.height+(I?(I.height/2):0)}else{}}else{if(xui.isNumb(e.height)){S.y=e.y+e.height*parseFloat(j)/100}else{S.y=e.y+(I?(I.height*parseFloat(j)/100):0)}}}}}}}break;case"path":var I;if(f){f._.dirty=1;I=P(f._getBBox(true))}else{var J=xui.Dom.getEmptyDiv(),K=Raphael(J.get(0).id,1,1),H=K.path("");H.attr(N);I=P(H._getBBox(true));H.remove();K.remove();J.empty()}var T=P(I);if(xui.isNumb(e.x)){S.x=e.x}if(xui.isNumb(e.y)){S.y=e.y}if(xui.isNumb(e.width)){S.width=e.width}if(xui.isNumb(e.height)){S.height=e.height}if(("x" in S&&I.x!==S.x)||("y" in S&&I.y!==S.y)){var C=0,B=0;if("x" in S){C=S.x-I.x;I.x=S.x}if("y" in S){B=S.y-I.y;I.y=S.y}var M=Raphael.parsePathString(N.path);for(var Q=0,F=M.length,O;Q<F;Q++){O=M[Q].length;switch(M[Q][0]){case"M":case"L":M[Q][1]+=C;M[Q][2]+=B;break;case"H":M[Q][1]+=C;break;case"V":M[Q][1]+=B;break;case"C":M[Q][1]+=C;M[Q][2]+=B;M[Q][3]+=C;M[Q][4]+=B;M[Q][5]+=C;M[Q][6]+=B;break;case"Q":case"S":M[Q][1]+=C;M[Q][2]+=B;M[Q][3]+=C;M[Q][4]+=B;break;case"T":M[Q][1]+=C;M[Q][2]+=B;break;case"A":M[Q][O-2]+=C;M[Q][O-1]+=B;continue;default:continue}}S.path=M.join("")}if(("width" in S&&I.width!==S.width)||("height" in S&&I.height!==S.height)){var U=("width" in S)?S.width:null,n=("height" in S)?S.height:null,g=S.path||N.path,D=xui.svg.$transform(g,"s"+((xui.isSet(U)&&U!==T.width)?(T.width===0?(U>=0?1.1:0.9):U/T.width):"1")+","+((xui.isSet(n)&&n!==T.height)?(T.height===0?(n>=0?1.1:0.9):n/T.height):"1")+","+I.x+","+I.y);S.path=D}break}var d=xui.svg.$attr[o];xui.filter(S,function(l,h){if(xui.isSet(l)&&(h in d)){N[h]=l}else{return false}});if(f&&(!xui.isEmpty(S))){var c=Raphael.parseTransformString(f.transform()),G;if(c&&c.length){G=1;f.transform("");var u=-1,q=-1,A;for(var Q=0,O=c.length;Q<O;Q++){if(c[Q][0]=="r"){u=Q;A=c[Q][1]}else{if(c[Q][0]=="t"){q=Q}}}if(q!=-1&&u!=-1){f.rotate(A);var p=Raphael.parseTransformString(f.transform());f.transform("");c[q][1]-=p[0][1];c[q][2]-=p[0][2];if(!c[q][1]&&!c[q][2]){xui.arr.removeFrom(c,q)}}}f.attr(S);if(G){f.transform("r"+A)}if(E!==false){L.box._notify(L,{bBox:1},true)}}},_syncAttr:function(d,c,e){d._pathCached={}},_notify:function(d,c,e){if(d.box._syncAttr){d.box._syncAttr(d,c,e)}if(e&&!d.box._CONNECTOR&&d.box._syncConnectors){d.box._syncConnectors(d)}if(e&&d._shadow){d.boxing().setShadow(false).setShadow(true)}},_draw:function(){},_syncConnectors:function(e){if(e.parent.key!=="xui.UI.SVGPaper"){return}var d=xui.get(e,["parent","children"]),c=e.alias;if(d&&d.length){xui.arr.each(d,function(g,f){if(!g[0].destroyed&&e.renderCompleted&&g[0].renderCompleted&&g[0].key==="xui.svg.connector"){if(c===xui.get(g[0],["properties","fromObj"])){g[0].box._reconnect(g[0],e)}if(c===xui.get(g[0],["properties","toObj"])){g[0].box._reconnect(g[0],null,e)}}})}},_syncAlias:function(f,d,c){var e=xui.get(f,["parent","children"]);if(e&&e.length){xui.arr.each(e,function(h,g){if(h[0].key==="xui.svg.connector"){if(d===xui.get(h[0],["properties","fromObj"])){xui.set(h[0],["properties","fromObj"],c)}if(d===xui.get(h[0],["properties","toObj"])){xui.set(h[0],["properties","toObj"],c)}}})}}}});Class("xui.svg.circle","xui.svg",{Instance:{_setBBox:function(c,d){var e=xui.svg.$adjustBB(c,d);return this.each(function(f){xui.svg.$setBB(f,"circle",e,f.properties.attr,f._elset&&f._elset[0])})}},Static:{DataModel:{attr:{ini:{cx:0,cy:0,r:20}}},Templates:{tagName:"circle"},_draw:function(e,d,f){f=f.attr;var c=e.circle(f.cx,f.cy,f.r);c.node.id=d.box.KEY+":"+d.serialId+":";return e.set().push(c)}}});Class("xui.svg.ellipse","xui.svg",{Instance:{_setBBox:function(c,d){var e=xui.svg.$adjustBB(c,d);return this.each(function(f){xui.svg.$setBB(f,"ellipse",e,f.properties.attr,f._elset&&f._elset[0])})}},Static:{DataModel:{attr:{ini:{cx:0,cy:0,rx:20,ry:40}}},Templates:{tagName:"ellipse"},_draw:function(e,d,f){f=f.attr;var c=e.ellipse(f.cx,f.cy,f.rx,f.ry);c.node.id=d.box.KEY+":"+d.serialId+":";return e.set().push(c)}}});Class("xui.svg.rect","xui.svg",{Instance:{_setBBox:function(c,d){var e=xui.svg.$adjustBB(c,d);return this.each(function(f){xui.svg.$setBB(f,"rect",e,f.properties.attr,f._elset&&f._elset[0])})}},Static:{DataModel:{attr:{ini:{x:0,y:0,r:0,width:40,height:40}}},Templates:{tagName:"rect"},_draw:function(e,d,f){f=f.attr;var c=e.rect(f.x,f.y,f.width,f.height,f.r);c.node.id=d.box.KEY+":"+d.serialId+":";return e.set().push(c)}}});Class("xui.svg.image","xui.svg",{Instance:{_setBBox:function(c,d){var e=xui.svg.$adjustBB(c,d);return this.each(function(f){xui.svg.$setBB(f,"image",e,f.properties.attr,f._elset&&f._elset[0])})}},Static:{IMGNODE:1,DataModel:{attr:{ini:{src:"",x:0,y:0,width:20,height:20}}},Templates:{tagName:"image"},_draw:function(e,d,f){f=f.attr;var c=e.image(xui.adjustRes(f.src),f.x,f.y,f.width,f.height);c.node.id=d.box.KEY+":"+d.serialId+":";return e.set().push(c)}}});Class("xui.svg.text","xui.svg",{Instance:{_setBBox:function(c,d){var e=xui.svg.$adjustBB(c,d);return this.each(function(f){xui.svg.$setBB(f,"text",e,f.properties.attr,f._elset&&f._elset[0])})}},Static:{DataModel:{attr:{ini:{x:0,y:0,text:"text"}}},Templates:{tagName:"text"},_draw:function(e,d,f){f=f.attr;var c=e.text(f.x,f.y,f.text);c.node.id=d.box.KEY+":"+d.serialId+":";return e.set().push(c)}}});Class("xui.svg.path","xui.svg",{Instance:{getPath:function(){var c=this.get(0),d=c.properties;if(c._elset&&c._elset[0]){d.path=c._elset[0].attr("path").join("")}return d.path},_getConnectAnchors:function(){},_setBBox:function(c,d){var e=xui.svg.$adjustBB(c,d);return this.each(function(f){xui.svg.$setBB(f,"path",e,f.properties.attr,f._elset&&f._elset[0])})}},Static:{$abstract:true,_draw:function(e,d,f){f=f.attr;var c=e.path(f.path);c.node.id=d.box.KEY+":"+d.serialId+":";return e.set().push(c)},DataModel:{attr:{ini:{path:""}}},Templates:{tagName:"path"}}});Class("xui.svg.absComb","xui.svg",{Instance:{_setBBox:function(d,e,c){var f=xui.svg.$adjustBB(d,e);return this.each(function(j){var m=j.properties,h=j._elset;xui.svg.$setBB(j,j.box._type,f,m.attr.KEY,h&&h[0]);if(j.renderId&&h&&h[0]){if(m.attr.TEXT&&m.attr.TEXT.text){var g=xui.copy(m.attr.TEXT||{}),l=h[0]._getBBox(true);g.hAlign=m.hAlign;g.vAlign=m.vAlign;if(!("x" in f)){f.x=l.x}if(!("y" in f)){f.y=l.y}if(!("width" in f)){f.width=l.width}if(!("height" in f)){f.height=l.height}xui.svg.$setBB(j,"text",f,g,h&&h[1],c)}}})},_adjustText:function(){return this.each(function(e){var g=e.properties,d=e._elset;if(e.renderId&&d&&d[0]){if(g.attr.TEXT&&g.attr.TEXT.text){var c=xui.copy(g.attr.TEXT||{}),f=d[0]._getBBox(true);c.hAlign=g.hAlign;c.vAlign=g.vAlign;xui.svg.$setBB(e,"text",f,c,d[1],false)}}})},setAttr:function(d,g,f,c){var e;if(xui.isHash(d)){e=d}else{e={};e[d]=g}arguments.callee.upper.call(this,d,g,f,c);return this.each(function(h){if(h._elset){if((e=e.TEXT)&&e["text-anchor"]){h.boxing()._adjustText()}}})}},Static:{$abstract:true,ISCOMBO:1,_beforeSerialized:function(c){var d=arguments.callee.upper.call(this,c),e=d.properties;e.attr=xui.clone(e.attr,true);xui.filter(e.attr.KEY,function(g,f){if(f=="transform"&&(!g||g.length<1)){return false}if(f=="href"||f=="target"){return false}if(f=="path"&&xui.isArr(e.attr.KEY.path)){e.attr.KEY.path=g.join("")}});if(e.attr.TEXT){xui.filter(e.attr.TEXT,function(g,f){if(f=="transform"){return false}if(f=="x"||f=="y"){return false}if(f=="href"||f=="target"){return false}})}return d},DataModel:{attr:{ini:{KEY:{},TEXT:{}}},hAlign:{ini:"center",combobox:["left","25%","center","75%","right","outterleft","outterright"],action:function(){this.boxing()._adjustText()}},vAlign:{ini:"middle",combobox:["top","25%","middle","75%","bottom","outtertop","outterbottom"],action:function(){this.boxing()._adjustText()}},shadow:true},Behaviors:{onClick:function(c,f,g){if(c.$inDesign){return false}var d=c.properties;if(d.disabled){return false}if(c.onClick){return c.boxing().onClick(c,f,g)}},onDblclick:function(c,f,g){if(c.$inDesign){return false}var d=c.properties;if(d.disabled){return false}if(c.onDblClick){return c.boxing().onDblClick(c,f,g)}},onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f)!==false}},TEXT:{onClick:function(c,g,h){if(c.$inDesign){return false}var f=c.properties,d;if(f.disabled){return false}if(c.onTextClick){d=c.boxing().onTextClick(c,g,h)}if(d!==false&&c.onClick){return c.boxing().onClick(c,g,h)}},onDblclick:function(c,f,g){if(c.$inDesign){return false}var d=c.properties;if(d.disabled){return false}if(c.onDblClick){return c.boxing().onDblClick(c,f,g)}},onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f)!==false}}}},EventHandlers:{onTextClick:function(c,d,f){}},_initAttr2UI:function(f){arguments.callee.upper.call(this,f);f.boxing()._adjustText();var e=f._elset;if(e&&e[1]){var g=e[0].attr("transform");for(var d=1,c=e.length;d<c;d++){e[d].attr("transform",g)}}},_syncAttr:function(f,d,g){var e=arguments.callee.upper,c=xui.toArr(arguments);e.apply(this,c);e=null;if(g){f.boxing()._adjustText()}},_draw:function(h,f,j){var e=h.set(),c=j.attr.KEY,g=j.attr.TEXT,d=this._drawRoot(h,c);d.node.id=f.box.KEY+":"+f.serialId+":";e.push(d);d=h.text(c.x,c.y,g.text);d.node.id=f.box.KEY+"-TEXT:"+f.serialId+":";e.push(d);return e}}});Class("xui.svg.rectComb","xui.svg.absComb",{Static:{_type:"rect",Templates:{tagName:"rect",TEXT:{tagName:"text",svg:1}},_drawRoot:function(d,c){return d.rect(c.x,c.y,c.width,c.height)}}});Class("xui.svg.circleComb","xui.svg.absComb",{Static:{_type:"circle",Templates:{tagName:"circle",TEXT:{tagName:"text",svg:1}},_drawRoot:function(d,c){return d.circle(c.cx,c.cy,c.r)}}});Class("xui.svg.ellipseComb","xui.svg.absComb",{Static:{_type:"ellipse",Templates:{tagName:"ellipse",TEXT:{tagName:"text",svg:1}},_drawRoot:function(d,c){return d.ellipse(c.cx,c.cy,c.rx,c.ry)}}});Class("xui.svg.pathComb","xui.svg.absComb",{Static:{_type:"path",Templates:{tagName:"path",TEXT:{tagName:"text",svg:1}},_drawRoot:function(d,c){return d.path(c.path)}}});Class("xui.svg.imageComb","xui.svg.absComb",{Static:{IMGNODE:1,_type:"image",Templates:{tagName:"image",TEXT:{tagName:"text",svg:1}},_drawRoot:function(d,c){return d.image(c.src,c.x,c.y,c.width,c.height)}}});Class("xui.svg.connector","xui.svg.absComb",{Instance:{_getConnectAnchors:null,_getConnectPath:null,_getConnectPoint:null,toFront:function(){return this.each(function(e){if(e=e._elset){e[1].toFront();e[0].toFront()}var c=xui.get(e,["parent","children"]);if(c&&c.length){var d=xui.arr.subIndexOf(c,"0",e),f;if(d!=-1){f=c[d];c.splice(d,1);c.push(f)}}})},toBack:function(){return this.each(function(e){if(e=e._elset){e[0].toBack();e[1].toBack()}var c=xui.get(e,["parent","children"]);if(c&&c.length){var d=xui.arr.subIndexOf(c,"0",e),f;if(d!=-1){f=c[d];c.splice(d,1);c.unshift(f)}}})}},Static:{_CONNECTOR:true,_beforeSerialized:function(c){var d=arguments.callee.upper.call(this,c),e=d.properties;if(e.attr.BG){delete e.attr.BG.path;delete e.attr.BG["arrow-start"];delete e.attr.BG["arrow-end"]}return d},DataModel:{hAlign:null,vAlign:null,shadow:null,bgLine:{ini:true,action:function(c){if(this._bg){if(c){this._bg.show()}else{this._bg.hide()}}}},attr:{ini:{KEY:{path:""}}},type:{ini:"straight",listbox:["straight","bezier","flowchart"],action:function(c,d){if(this.renderId){this.properties.type=d}}},fromObj:"",fromPoint:{ini:"",combobox:["left","top","right","bottom"]},toObj:"",toPoint:{ini:"",combobox:["left","top","right","bottom"]}},_type:"path",Templates:{tagName:"path",BG:{tagName:"path",svg:1}},_draw:function(h,e,j){var d=h.set(),c=j.attr.KEY,g,f;f=h.path(c.path);f.node.id=e.box.KEY+":"+e.serialId+":";f.onShapeChanged=function(l){if(l.path){g.attr({path:l.path},null,false)}};d.push(f);g=h.path(c.path);if(!e.properties.bgLine){g.hide()}g.node.id=e.box.KEY+"-BG:"+e.serialId+":";d.push(g);g.insertBefore(f);e._bg=g;(e.$beforeDestroy=(e.$beforeDestroy||{}))["unbind"]=function(){f.onShapeChanged=null;f=null};return d},_syncAttr:function(d,p,j){var n=arguments.callee.upper,g=xui.toArr(arguments);n.apply(this,g);n=null;d._pathCached={};if(!d._bg){return}var l=this,c=d.properties,o=d._elset[0],f={},m,e;e="path";if((e in p)||("bBox" in p)){f[e]=o.attr(e)}e="arrow-start";if(e in p){m=o.attr(e);m=m.split("-");if(m[0]!="none"){f[e]=m[0]+"-narrow-short"}else{f[e]="none"}}e="arrow-end";if(e in p){m=o.attr(e);m=m.split("-");if(m[0]!="none"){f[e]=m[0]+"-narrow-short"}else{f[e]="none"}}d._bg.attr(f,null,false);if(("bBox" in p)&&d.parent){if(c.fromObj&&c.fromPoint){xui.arr.each(d.parent.children,function(h){if(h[0].alias==c.fromObj){l._reconnect(d,h[0]);return false}})}if(c.toObj&&c.toPoint){xui.arr.each(d.parent.children,function(h){if(h[0].alias==c.toObj){l._reconnect(d,null,h[0]);return false}})}}},_reconnect:function(f,m,h){if(f.destroyed){return}var c=f.properties,p=c.type,r=Raphael.parsePathString(c.attr.KEY.path),g=f.boxing(),n,o;if(m&&c.fromObj&&c.fromPoint){n=m.boxing();o=n._getConnectPoint(c.fromPoint);if(o){switch(p){case"flowchart":var q=this._redrawBrokenLine(f);if(q){r.length=0;xui.arr.each(q,function(l){r.push(l)})}break;case"straight":r[0][1]=o.x;r[0][2]=o.y;break;case"bezier":var e=o.x-r[0][1],d=o.y-r[0][2];r[0][1]=o.x;r[0][2]=o.y;r[1][1]+=e;r[1][2]+=d;break}g.setAttr("KEY",{path:r},false)}}if(h&&c.toObj&&c.toPoint){n=h.boxing();o=n._getConnectPoint(c.toPoint);if(o){var j=r.length-1;if((r[j][0]||"").toUpperCase()=="Z"){j--}switch(p){case"flowchart":var q=this._redrawBrokenLine(f);if(q){r.length=0;xui.arr.each(q,function(l){r.push(l)})}break;case"straight":r[j][1]=o.x;r[j][2]=o.y;break;case"bezier":var e=o.x-r[j][5],d=o.y-r[j][6];r[j][5]=o.x;r[j][6]=o.y;r[j][3]+=e;r[j][4]+=d;break}g.setAttr("KEY",{path:r},false)}}},_redrawBrokenLine:function(N,U,I,H){var L=30,B=30,A=30,w=N.properties,q=w.attr.KEY,D=Raphael.parsePathString(q.path),c=w.fromObj&&w.fromPoint,m=w.toObj&&w.toPoint,e,h,f=[],n=[],G=[],T=[],J,l,d,g,o,M,E,u,P,K,j,C,O;if(c){J=null;xui.arr.each(N.parent.children,function(x){if(x[0].alias==w.fromObj){J=x[0].boxing();M=J._getConnectPoint(w.fromPoint);if(M){l=J._getConnectPath();if(g=xui.get(x[0]._pathCached,["_connBBox"])){}else{g=Raphael.pathBBox(l);xui.set(x[0]._pathCached,["_connBBox"],g)}if(M.solid){u=M.alpha}else{u=M.alpha-90}P={x:g.x+g.width/2,y:g.y+g.height/2};j=(u>45&&u<=135)?"down":(u>135&&u<=225)?"left":(u>225&&u<=315)?"up":"right";if(j=="down"&&M.y<P.y){j="up"}if(j=="right"&&M.x<P.x){j="left"}}return false}})}if(m){J=null;xui.arr.each(N.parent.children,function(x){if(x[0].alias==w.toObj){J=x[0].boxing();E=J._getConnectPoint(w.toPoint);if(E){d=J._getConnectPath();if(o=xui.get(x[0]._pathCached,["_connBBox"])){}else{o=Raphael.pathBBox(d);xui.set(x[0]._pathCached,["_connBBox"],o)}if(E.solid){u=E.alpha}else{u=E.alpha-90}K={x:o.x+o.width/2,y:o.y+o.height/2};C=(u>45&&u<=135)?"down":(u>135&&u<=225)?"left":(u>225&&u<=315)?"up":"right";if(C=="down"&&E.y<K.y){C="up"}if(C=="right"&&E.x<K.x){C="left"}}return false}})}if(M&&E){if((j=="left"&&C=="right"&&E.x>=M.x)||(j=="right"&&C=="left"&&E.x<=M.x)){B=Math.min(B,Math.abs(E.x-M.x)/2)}if((j=="down"&&C=="up"&&E.y>=M.y)||(j=="up"&&C=="down"&&E.y<=M.y)){A=Math.min(A,Math.abs(E.y-M.y)/2)}}if(M){switch(j){case"down":e=[{x:M.x,y:O=M.y+A},{x:g.x-L,y:O},{x:g.x+L+g.width,y:O}];f=[[["M",M.x,M.y],["V",e[0].y]],[["M",M.x,M.y],["V",e[0].y],["H",e[1].x]],[["M",M.x,M.y],["V",e[0].y],["H",e[2].x]]];G=[A,A+Math.abs(e[1].x-e[0].x),A+Math.abs(e[2].x-e[0].x)];break;case"left":e=[{x:O=M.x-B,y:M.y},{x:O,y:g.y-L},{x:O,y:g.y+L+g.height}];f=[[["M",M.x,M.y],["H",e[0].x]],[["M",M.x,M.y],["H",e[0].x],["V",e[1].y]],[["M",M.x,M.y],["H",e[0].x],["V",e[2].y]]];G=[B,B+Math.abs(e[1].y-e[0].y),B+Math.abs(e[2].y-e[0].y)];break;case"up":e=[{x:M.x,y:O=M.y-A},{x:g.x-L,y:O},{x:g.x+L+g.width,y:O}];f=[[["M",M.x,M.y],["V",e[0].y]],[["M",M.x,M.y],["V",e[0].y],["H",e[1].x]],[["M",M.x,M.y],["V",e[0].y],["H",e[2].x]]];G=[A,A+Math.abs(e[1].x-e[0].x),A+Math.abs(e[2].x-e[0].x)];break;case"right":e=[{x:O=M.x+B,y:M.y},{x:O,y:g.y-L},{x:O,y:g.y+L+g.height}];f=[[["M",M.x,M.y],["H",e[0].x]],[["M",M.x,M.y],["H",e[0].x],["V",e[1].y]],[["M",M.x,M.y],["H",e[0].x],["V",e[2].y]]];G=[B,B+Math.abs(e[1].y-e[0].y),B+Math.abs(e[2].y-e[0].y)];break}}else{if(U=="start"){e=[{x:I,y:H}]}else{e=[{x:D[0][1],y:D[0][2]}]}f=[[["M",e[0].x,e[0].y]]];G=[0]}if(E){switch(C){case"down":h=[{x:E.x,y:O=E.y+A},{x:o.x-L,y:O},{x:o.x+L+o.width,y:O}];n=[[["V",E.y]],[["H",E.x],["V",E.y]],[["H",E.x],["V",E.y]]];T=[A,A+Math.abs(h[1].x-h[0].x),A+Math.abs(h[2].x-h[0].x)];break;case"left":h=[{x:O=E.x-B,y:E.y},{x:O,y:o.y-L},{x:O,y:o.y+L+o.height}];n=[[["H",E.x]],[["V",E.y],["H",E.x]],[["V",E.y],["H",E.x]]];T=[B,B+Math.abs(h[1].y-h[0].y),B+Math.abs(h[2].y-h[0].y)];break;case"up":h=[{x:E.x,y:O=E.y-A},{x:o.x-L,y:O},{x:o.x+L+o.width,y:O}];n=[[["V",E.y]],[["H",E.x],["V",E.y]],[["H",E.x],["V",E.y]]];T=[A,A+Math.abs(h[1].x-h[0].x),A+Math.abs(h[2].x-h[0].x)];break;case"right":h=[{x:O=E.x+B,y:E.y},{x:O,y:o.y-L},{x:O,y:o.y+L+o.height}];n=[[["H",E.x]],[["V",E.y],["H",E.x]],[["V",E.y],["H",E.x]]];T=[B,B+Math.abs(h[1].y-h[0].y),B+Math.abs(h[2].y-h[0].y)];break}}else{if(U=="end"){h=[{x:I,y:H}]}else{var R={x:D[0][1],y:D[0][2]};xui.arr.each(D,function(p){if(p[0]=="H"){R.x=p[1]}else{R.y=p[1]}});h=[R]}n=[];T=[0]}var F=[],Q,S;xui.arr.each(e,function(x,p){xui.arr.each(h,function(V,X){for(var W=0;W<=1;W++){Q=xui.clone(f[p],true);if(W===0){if(V.x!==x.x){Q.push(["H",V.x])}if(V.y!==x.y){Q.push(["V",V.y])}}else{if(V.y!==x.y){Q.push(["V",V.y])}if(V.x!==x.x){Q.push(["H",V.x])}}if(n[X]&&n[X].length){xui.arr.insertAny(Q,n[X])}F.push({path:Q,len:Q.length,len2:(G[p]||0)+(T[X]||0)+Math.abs(V.x-x.x)+Math.abs(V.y-x.y)})}})});var r=[];xui.filter(F,function(aa){var V=aa.path[0][1],x=aa.path[0][2],Y,W,Z;for(var X=1,p=aa.path.length;X<p;X++){if(Z==aa.path[X][0]){if(Z=="H"){if((aa.path[X][1]>V)===Y){aa.path.splice(X-1,1);aa.len--;p--;X--;continue}else{return false}}else{if((aa.path[X][1]>x)===W){aa.path.splice(X-1,1);aa.len--;p--;X--;continue}else{return false}}}if(aa.path[X][0]=="H"){Y=aa.path[X][1]>V;V=aa.path[X][1]}else{W=aa.path[X][1]>x;x=aa.path[X][1]}Z=aa.path[X][0]}});xui.arr.each(F,function(x){S=0;var p,V;if(g||o){p=x.path[0][1];V=x.path[0][2];xui.arr.each(x.path,function(X,W){if(W!==0){if(X[0]=="H"){if(g&&V>=g.y&&V<=g.y2&&Math.max(p,X[1])>Math.min(g.x,g.x2)&&Math.min(p,X[1])<Math.max(g.x,g.x2)){S++}if(o&&V>=o.y&&V<=o.y2&&Math.max(p,X[1])>Math.min(o.x,o.x2)&&Math.min(p,X[1])<Math.max(o.x,o.x2)){S++}p=X[1]}else{if(g&&p>=g.x&&p<=g.x2&&Math.max(V,X[1])>Math.min(g.y,g.y2)&&Math.min(V,X[1])<Math.max(g.y,g.y2)){S++}if(o&&p>=o.x&&p<=o.x2&&Math.max(V,X[1])>Math.min(o.y,o.y2)&&Math.min(V,X[1])<Math.max(o.y,o.y2)){S++}V=X[1]}}})}x.inter=S});xui.arr.stableSort(F,function(p,V){return p.inter>V.inter?1:p.inter<V.inter?-1:p.len>V.len?1:p.len<V.len?-1:p.len2>V.len2?1:p.len2==V.len2?0:-1});N.boxing().setAttr("KEY",{path:F[0].path},false);return F[0].path}}});Class("xui.svg.group","xui.svg.absComb",{Instance:{_adjustText:function(){return this},_setBBox:function(d,e,c){var f=xui.svg.$adjustBB(d,e);return this.each(function(l){var m=l.properties,j=l._elset,h=m.attr;if(l.renderId&&j&&j[0]){var g=l.boxing()._getBBox();j.forEach(function(p){var n=h[l.getKey(p.node.id,true)],o={};if(p.type=="text"){o={x:n.x,y:n.y};if("x" in f){o.x+=f.x-g.x}if("y" in f){o.y+=f.y-g.y}n.x=o.x;n.y=o.y;p.attr(o)}else{xui.merge(o,p._getBBox(true),"all",true);if("x" in f){o.x+=f.x-g.x}if("y" in f){o.y+=f.y-g.y}if("width" in f){o.width+=f.width-g.width}if("height" in f){o.height+=f.height-g.height}xui.svg.$setBB(l,p.type,o,n,p,c)}})}else{if(!l._init_bbox){l._init_bbox={}}xui.merge(l._init_bbox,f,"all",true)}})}},Static:{ISCOMBO:1,_beforeSerialized:function(d){var e=arguments.callee.upper.call(this,d),f=e.properties;var c=f.attr=xui.clone(f.attr,true);xui.filter(c.KEY,function(h,g){if(g=="transform"&&(!h||h.length<1)){return false}if(g=="href"||g=="target"){return false}if(g=="path"&&xui.isArr(f.attr.KEY.path)){f.attr.KEY.path=h.join("")}});xui.each(c,function(g,h){if(h=="KEY"){return}xui.filter(g,function(m,l){if(l=="transform"){return false}});var j=h.split("_")[0];if(j=="path"){xui.each(g,function(m,l){if(l=="path"&&xui.isArr(m)){g.path=m.join("")}})}});return e},_type:"path",Templates:{tagName:"path"},DataModel:{attr:{ini:{KEY:{}}},hAlign:null,vAlign:null,shadow:false},RenderTrigger:function(){var c=this,d;if(d=c._init_bbox){c.boxing()._setBBox(d);delete c._init_bbox}},_draw:function(g,f,j){var e=g.set(),c=j.attr,h=c.KEY||{path:""},d=g.path(h.path||"");d._isGroupFirst=1;d.node.id=f.box.KEY+":"+f.serialId+":";e.push(d);xui.each(c,function(l,m){if(m=="KEY"){return}var n=m.split("_")[0].toLowerCase();switch(n){case"rect":d=g.rect(l.x,l.y,l.width,l.height);break;case"circle":d=g.circle(l.cx,l.cy,l.r);break;case"ellipse":d=g.ellipse(l.cx,l.cy,l.rx,l.ry);break;case"image":d=g.image(l.src,l.x,l.y,l.width,l.height);break;case"path":d=g.path(l.path);break;case"text":d=g.text(l.x,l.y,l.text);break;default:return}var o=xui(this.node).xid();if(n=="text"){d.click(function(q){if(f.$inDesign){return false}if(f.properties.disabled){return false}var p;if(f.onTextClick){p=f.boxing().onTextClick(f,q,o)}if(p!==false&&f.onClick){return f.boxing().onClick(f,q,o)}})}else{d.click(function(p){if(f.$inDesign){return false}if(f.properties.disabled){return false}if(f.onClick){return f.boxing().onClick(f,p,o)}})}d.dblclick(function(p){if(f.$inDesign){return false}if(f.properties.disabled){return false}if(f.onDblClick){return f.boxing().onDblClick(f,p,o)}});d.contextmenu(function(p){if(f.onContextmenu){return f.boxing().onContextmenu(f,p,o)!==false}});d.node.id=f.box.KEY+"-"+m+":"+f.serialId+":";e.push(d)});return e}}});Class("xui.UI.SVGPaper","xui.UI.Div",{Initialize:function(){this.addTemplateKeys(["SVG"])},Instance:{append:function(j,h,e){if(xui.isHash(j)||xui.isStr(j)){j=xui.create(j)}if(j["xui.UIProfile"]){j=j.boxing()}var c=this,d=arguments.callee.upper,g,l;j.each(function(f){g=!!f.box["xui.svg"];if(g&&f.renderId){f.clearCache();f.$beforeDestroy.svgClear();delete f.renderId;delete f.rendered;l=1}d.call(c,f,null,h,e,g,c.get(0)&&xui(c.get(0)._canvas));if(l){f.box._initAttr2UI(f)}});return this},getPaper:function(){return xui.get(this.get(0),["_paper"])},getSVGString:function(){var c=xui.get(this.get(0),["_paper"]);return c?c.toSVG():""}},Static:{DataModel:{iframeAutoLoad:null,html:null,width:{$spaceunit:1,ini:"32em"},height:{$spaceunit:1,ini:"25em"},scaleChildren:{ini:false},overflow:{ini:undefined},graphicZIndex:{ini:0,action:function(c){this.getSubNode("SVG").css("zIndex",c)}}},Behaviors:{onSize:xui.UI.$onSize},RenderTrigger:function(){var g=this,j=g.properties,d=j.width,f=j.height;(g.$beforeDestroy=(g.$beforeDestroy||{}))["svgClear"]=function(){if(g._paper){g._paper.clear();g._paper.remove()}};g._paper=Raphael(g.$domId,d,f);g._canvas=g._paper.canvas;g._canvas.id=g.box.KEY+"-SVG:"+g.serialId+":";var e=g._canvas.style;e.position="absolute";e.left=0;e.top=0;e.zIndex=j.graphicZIndex;var c=[];xui.arr.each(g.children,function(h){if(h[0].box["xui.svg"]){c.push(h[0])}});if(c.length){g.boxing().append(xui.svg.pack(c));if(!Raphael.svg){xui.setTimeout(function(){if(g&&!g.destroyed){g.boxing().append(xui.svg.pack(c))}})}}if(g._paper){xui.setTimeout(function(){if(g&&!g.destroyed){if(g.$designerRoot){g._frame=g._paper.rect(0,0,1,1,0).attr({"stroke-width":"0px"})}else{if(g.$inDesign){g._frame=g._paper.rect(0,0,d,f,8).attr({"stroke-dasharray":". ",stroke:"#666"})}}if(g._frame){g._frame._decoration=1}}})}},_onresize:function(j,e,q){var f=j._paper,c=j.properties.scaleChildren,g,p,d=j,o,l=xui.$us(d),m=function(r,u){return j.$forceu(r,l>0?"em":"px",u)};e=e?j.$px(e,null,true):e;q=q?j.$px(q,null,true):q;if(c){g=f.width;p=f.height}if(f){if((e&&f.width!=e)||(q&&f.height!=q)){var n={},h=j.getSubNode("SVG");f.setSize(e,q);if(!(e||e===0)){e=f.width}n.width=e;if((q||q===0)){q=f.height}n.height=q;if((!xui.isEmpty(n))&&xui.Dom.$hasEventHandler(h.get(0),"onsize")){h.onSize(true,n)}if(j.$inDesign&&j._frame){if(e||e===0){j._frame.attr("width",e)}if(q||q===0){j._frame.attr("height",q)}}if(c){f.forEach(function(A){var w=e/g,x=q/p,r,u=function(E,D){var C=xui.UIProfile.getFromDom(E.node.id);if(!C){return}var B=E.attr(),F;switch(E.type){case"circle":F={cx:B.cx*w,cy:B.cy*x,r:B.r*(w+x)/2};break;case"ellipse":F={cx:B.cx*w,cy:B.cy*x,rx:B.rx*w,ry:B.ry*x};break;case"rect":case"image":F={x:B.x*w,y:B.y*x,width:B.width*w,height:B.height*x};break;case"text":F={x:B.x*w,y:B.y*x};break;case"path":F={path:Raphael.transformPath(xui.isArr(B.path)?B.path.join(""):B.path,"s"+w+","+x+",0,0")};break}if(F){C.boxing().setAttr(D||"KEY",F,false,true)}};if(j._frame!==A&&A.node.$xid&&A.node.id&&!/^[^:]+-/.test(A.node.id)){if(A._isGroupFirst){var r=xui.UIProfile.getFromDom(A.node.id);if(r){r._elset.forEach(function(B){u(B,r.getKey(B.node.id,true))})}}else{u(A)}}})}}}}}});